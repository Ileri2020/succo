================================================================================
SUCCO PROJECT - SOURCE CODE CONSOLIDATION
Generated: 2026-01-30 11:37:43
================================================================================


================================================================================
LOCATION: auth.ts
================================================================================

// @ts-nocheck
import NextAuth from "next-auth";
import Credentials from "next-auth/providers/credentials";
import Google from "next-auth/providers/google";
import FacebookProvider from "next-auth/providers/facebook";
import bcrypt from "bcryptjs";
import { prisma } from "@/lib/prisma";
import { PrismaAdapter } from '@auth/prisma-adapter';

export const { handlers, signIn, signOut, auth } = NextAuth({
  trustHost: true,
  adapter: PrismaAdapter(prisma),
  providers: [
    Credentials({
      name: "Credentials",
      credentials: {
        email: { label: "Email/Contact", type: "text" },
        password: { label: "Password", type: "password" },
      },
      authorize: async (credentials) => {
        const identifier = credentials?.email; // This will hold either email or contact
        const password = credentials?.password;
        if (!identifier || !password) throw new Error("Please provide email/contact & password");

        // Try finding by email first, then by contact
        const user = await prisma.user.findFirst({
          where: {
            OR: [
              { email: identifier },
              { contact: identifier }
            ]
          }
        });

        if (!user) throw new Error("Invalid email/contact or password");
        
        // Differentiate OAuth users who haven't set a password
        if (!user.password) {
          throw new Error("SocialLoginOnly");
        }

        const isMatched = await bcrypt.compare(password, user.password);
        if (!isMatched) throw new Error("Invalid email/contact or password");

        return {
          id: user.id,
          name: user.name,
          email: user.email,
          contact: user.contact,
          role: user.role,
          image: user.image,
          providerid: user.providerid,
        };
      },
    }),
    Google({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
    FacebookProvider({
      clientId: process.env.FACEBOOK_CLIENT_ID,
      clientSecret: process.env.FACEBOOK_CLIENT_SECRET
    }),
  ],

  callbacks: {
    // Persist all user info in the JWT token
    async jwt({ token, user, account }) {
      if (user) {
        token.id = user.id;
        token.name = user.name ?? null;
        token.email = user.email ?? null;
        token.contact = user.contact ?? null;
        token.role = user.role ?? null;
        token.image = user.image ?? null;
        token.providerid = user.providerid ?? null;
      }
      return token;
    },

    // Make the token info available in the session object
    async session({ session, token }) {
      if (token) {
        session.user.id = token.id as string;
        session.user.name = token.name as string ?? null;
        session.user.email = token.email as string ?? null;
        session.user.contact = token.contact as string ?? null;
        session.user.role = token.role as string ?? null;
        session.user.image = token.image as string ?? null;
        session.user.providerid = token.providerid as string ?? null;
        
        // Fetch addresses here instead of storing in JWT
        session.user.addresses = await prisma.shippingAddress.findMany({
          where: { userId: token.id as string },
        });
        session.user.shippingAddress = session.user.addresses[0] || null;
      }
      return session;
    },
  },

  session: {
    strategy: "jwt",
    maxAge: 30 * 24 * 60 * 60, // 30 days
    updateAge: 24 * 60 * 60, // 24 hours
  },

  jwt: {
    maxAge: 30 * 24 * 60 * 60, // 30 days
  },

  secret: process.env.AUTH_SECRET,
  debug: process.env.NODE_ENV === "development",
});

export const runtime = "nodejs";



================================================================================
LOCATION: middleware.ts
================================================================================

export { auth as middleware } from "@/auth";

export const runtime = "nodejs";


================================================================================
LOCATION: next.config.ts
================================================================================

import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactStrictMode: false,

  turbopack: {
    root: "./",
  },

  // async redirects() {
  //   return [
  //     {
  //       source: '/:path*',
  //       has: [
  //         {
  //           type: 'host',
  //           value: '.*\\.vercel\\.app',
  //         },
  //       ],
  //       destination: 'https://www.succo.vercel.app/:path*',
  //       permanent: true,
  //     },
  //   ]
  // },
};

export default nextConfig;



================================================================================
LOCATION: session.ts
================================================================================

'use server'
import { auth } from "./auth";
import type { Session } from "next-auth";


export const usersession = async () => {
    const session = await auth();
    // console.log("session from login component",session)
    if (session?.user) {
      return session;
    }
  }




//   session from login component {
//   user: {
//     name: 'Adepoju Ololade',
//     email: 'adepojuololade2020@gmail.com',
//     image: 'https://lh3.googleusercontent.com/a/ACg8ocLdrFmljf-SPXpYAl7HcdIPIVgBam0jRZ5YkySzCZW8zI7oIik2=s96-c'
//   },
//   expires: '2025-12-06T18:59:49.210Z'
// }


================================================================================
LOCATION: tailwind.config.ts
================================================================================

import type { Config } from "tailwindcss";

const config: Config = {
    darkMode: ["class"],
    content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
  	container: {
  		center: true,
  		padding: '2rem',
  		screens: {
  			'2xl': '1400px'
  		}
  	},
  	screens: {
  		sm: '640px',
  		md: '768px',
  		lg: '960px',
  		xl: '1240px'
  	},
  	extend: {
  		colors: {
  			background: 'hsl(var(--background))',
  			foreground: 'hsl(var(--foreground))',
  			card: {
  				DEFAULT: 'hsl(var(--card))',
  				foreground: 'hsl(var(--card-foreground))'
  			},
  			popover: {
  				DEFAULT: 'hsl(var(--popover))',
  				foreground: 'hsl(var(--popover-foreground))'
  			},
  			primary: {
  				DEFAULT: 'hsl(var(--primary))',
  				foreground: 'hsl(var(--primary-foreground))'
  			},
  			secondary: {
  				DEFAULT: 'hsl(var(--secondary))',
  				foreground: 'hsl(var(--secondary-foreground))'
  			},
  			muted: {
  				DEFAULT: 'hsl(var(--muted))',
  				foreground: 'hsl(var(--muted-foreground))'
  			},
  			accent: {
  				DEFAULT: 'hsl(var(--accent))',
  				foreground: 'hsl(var(--accent-foreground))',
  				secondary: 'hsl(var(--accent-secondary))'
  			},
  			destructive: {
  				DEFAULT: 'hsl(var(--destructive))',
  				foreground: 'hsl(var(--destructive-foreground))'
  			},
  			border: 'hsl(var(--border))',
  			input: 'hsl(var(--input))',
  			ring: 'hsl(var(--ring))',
  			chart: {
  				'1': 'hsl(var(--chart-1))',
  				'2': 'hsl(var(--chart-2))',
  				'3': 'hsl(var(--chart-3))',
  				'4': 'hsl(var(--chart-4))',
  				'5': 'hsl(var(--chart-5))'
  			},
  			sidebar: {
  				DEFAULT: 'hsl(var(--sidebar-background))',
  				foreground: 'hsl(var(--sidebar-foreground))',
  				primary: 'hsl(var(--sidebar-primary))',
  				'primary-foreground': 'hsl(var(--sidebar-primary-foreground))',
  				accent: 'hsl(var(--sidebar-accent))',
  				'accent-foreground': 'hsl(var(--sidebar-accent-foreground))',
  				border: 'hsl(var(--sidebar-border))',
  				ring: 'hsl(var(--sidebar-ring))'
  			}
  		},
  		fontFamily: {
  			'dance': [
  				'dance'
  			],
  			'roboto_mono': [
  				'roboto_mono'
  			],
  			'roboto': [
  				'roboto'
  			]
  		},
  		borderRadius: {
  			lg: 'var(--radius)',
  			md: 'calc(var(--radius) - 2px)',
  			sm: 'calc(var(--radius) - 4px)'
  		},
  		keyframes: {
  			'accordion-down': {
  				from: {
  					height: '0'
  				},
  				to: {
  					height: 'var(--radix-accordion-content-height)'
  				}
  			},
  			'accordion-up': {
  				from: {
  					height: 'var(--radix-accordion-content-height)'
  				},
  				to: {
  					height: '0'
  				}
  			}
  		},
  		animation: {
  			'accordion-down': 'accordion-down 0.2s ease-out',
  			'accordion-up': 'accordion-up 0.2s ease-out'
  		}
  	}
  },
  plugins: [require("tailwindcss-animate")],
};
export default config;



================================================================================
LOCATION: textctrl.tsx
================================================================================


import { motion } from 'framer-motion';
import { useEffect, useState } from 'react';

export const TextAnimations = () => {
  const texts = ['TextAnimations', 'Text 2', 'TextAnimations', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
        initial={{ opacity: 0 }}
        animate={{
          opacity: 1,
          transition: {
            duration: 2.0,
            delay: 0.5,
            /*repeat: Infinity,*/
          },
        }}
        className="text-lg font-bold text-gray-800"
      >
        {texts[currentIndex]}
      </motion.div>
    )
  }
  

  return (
    <div className="container mx-auto p-4">
        <Temp />
    </div>
  );
};



export const SlideInText = () => {
  const texts = ['SlideInText', 'Text 2', 'SlideInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  
  const Temp = () => {
    return (
        <motion.div
          initial={{ x: '-100%' }}
          animate={{
            x: '0%',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }
  

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const ScaleInText = () => {
  const texts = ['ScaleInText', 'Text 2', 'ScaleInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ scale: 0 }}
          animate={{
            scale: 1,
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const RotateInText = () => {
  const texts = ['RotateInText', 'Text 2', 'RotateInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ rotate: '0deg' }}
          animate={{
            rotate: '360deg',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const FlyInText = () => {
  const texts = ['FlyInText', 'Text 2', 'FlyInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ x: '-100%' }}
          animate={{
            x: '0%',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};


export const TypewriterText = () => {
  const texts = ['TypewriterText', 'Text 2', 'TypewriterText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ width: '0%' }}
          animate={{
            width: '100%',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const SlideUpText = () => {
  const texts = ['SlideUpText', 'Text 2', 'SlideUpText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ y: '100%' }}
          animate={{
            y: '0%',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const BounceInText = () => {
  const texts = ['BounceInText', 'Text 2', 'BounceInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ scale: 0 }}
          animate={{
            scale: 1,
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const ZoomInText = () => {
  const texts = ['ZoomInText', 'Text 2', 'ZoomInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ scale: 0 }}
          animate={{
            scale: 1,
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};



export const FlipInText = () => {
  const texts = ['FlipInText', 'Text 2', 'FlipInText', 'Text 4'];
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(()=>{
    const interval = setInterval(()=>{
        setCurrentIndex((prevIndex)=>(prevIndex+1)%texts.length)
    },6000)
    return()=>clearInterval(interval)
  },[currentIndex])

  const Temp = () => {
    return (
        <motion.div
          initial={{ rotateY: '180deg' }}
          animate={{
            rotateY: '0deg',
            transition: {
              duration: 4.0,
              delay: 0.5,
            },
          }}
          className="text-lg font-bold text-gray-800"
        >
          {texts[currentIndex]}
        </motion.div>
    )
  }

  return (
    <div className="container mx-auto p-4">
      <Temp />
    </div>
  );
};







================================================================================
LOCATION: action\lunch.ts
================================================================================

"use server";

import { auth } from "@/auth";
import { PrismaClient } from "@prisma/client";
import { revalidatePath } from "next/cache";

const prisma = new PrismaClient();

export async function getUserLunches() {
  const session = await auth();
  if (!session?.user?.id) {
    return { templates: [], schedules: [] };
  }

  const userId = session.user.id;

  try {
    const lunches = await prisma.cart.findMany({
      where: {
        userId,
        type: "lunch",
      },
      include: {
        products: {
            include: {
                product: true
            }
        },
      },
      orderBy: {
        updatedAt: 'desc'
      }
    });

    // Also fetch active subscriptions/schedules
    const schedules = await prisma.lunch.findMany({
        where: { userId },
        include: {
            carts: {
                include: {
                    products: { include: { product: true } }
                }
            }
        }
    });

    return { templates: lunches, schedules };
  } catch (error) {
    console.error("Error fetching lunches:", error);
    return { templates: [], schedules: [] };
  }
}

export async function createLunch(name: string, initialProductId?: string) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");
    
    const userId = session.user.id;

    try {
        const data: any = {
            userId,
            name,
            type: "lunch",
            total: 0,
            status: "active"
        };

        if (initialProductId) {
            data.products = {
                create: [
                    {
                        productId: initialProductId,
                        quantity: 1
                    }
                ]
            };
        }

        const newLunch = await prisma.cart.create({
            data
        });
        
        revalidatePath("/lunch");
        return { success: true, lunch: newLunch };
    } catch (error) {
        console.error("Error creating lunch:", error);
        return { success: false, error: "Failed to create lunch" };
    }
}

export async function addToLunch(lunchId: string, productId: string) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");

    try {
        // Check if item exists in this lunch
        const existingItem = await prisma.cartItem.findFirst({
            where: {
                cartId: lunchId,
                productId: productId
            }
        });

        if (existingItem) {
            await prisma.cartItem.update({
                where: { id: existingItem.id },
                data: { quantity: existingItem.quantity + 1 }
            });
        } else {
            await prisma.cartItem.create({
                data: {
                    cartId: lunchId,
                    productId: productId,
                    quantity: 1
                }
            });
        }
        
        revalidatePath("/lunch");
        return { success: true };
    } catch (error) {
        console.error("Error adding to lunch:", error);
        return { success: false, error: "Failed to add to lunch" };
    }
}

export async function updateLunchItemQuantity(itemId: string, quantity: number) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");
    
    try {
        if (quantity <= 0) {
            await prisma.cartItem.delete({
                where: { id: itemId }
            });
        } else {
            await prisma.cartItem.update({
                where: { id: itemId },
                data: { quantity }
            });
        }
        revalidatePath("/lunch");
        return { success: true };
    } catch (error) {
        return { success: false, error };
    }
}

export async function renameLunch(lunchId: string, name: string) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");

    try {
        await prisma.cart.update({
            where: { id: lunchId },
            data: { name }
        });
        revalidatePath("/lunch");
        return { success: true };
    } catch (error) {
        return { success: false, error };
    }
}

export async function addLunchToCart(lunchId: string) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");
    const userId = session.user.id;

    try {
        const lunch = await prisma.cart.findUnique({
            where: { id: lunchId },
            include: { products: true }
        });
        
        if (!lunch) throw new Error("Lunch not found");

        // Find or create main cart
        let mainCart = await prisma.cart.findFirst({
            where: { userId, type: "cart", status: "pending" }
        });

        if (!mainCart) {
            mainCart = await prisma.cart.create({
                data: {
                    userId,
                    type: "cart",
                    status: "pending",
                    total: 0
                }
            });
        }

        // Add items
        for (const item of lunch.products) {
            const existing = await prisma.cartItem.findFirst({
                where: { cartId: mainCart.id, productId: item.productId }
            });
            
            if (existing) {
                await prisma.cartItem.update({
                    where: { id: existing.id },
                    data: { quantity: existing.quantity + item.quantity }
                });
            } else {
                await prisma.cartItem.create({
                    data: {
                        cartId: mainCart.id,
                        productId: item.productId,
                        quantity: item.quantity
                    }
                });
            }
        }
        
        revalidatePath("/cart"); // assumption
        return { success: true };
    } catch (error) {
        console.error("Error moving lunch to cart", error);
        return { success: false, error: "Failed to move to cart" };
    }
}

export async function scheduleLunch(data: {
    templateId: string;
    name: string;
    frequency: string;
    daysOfWeek: string[];
    timesInDay: string[];
    startDate: Date;
    endDate: Date;
    deliveryFeeTotal: number;
}) {
    const session = await auth();
    if (!session?.user?.id) throw new Error("Unauthorized");
    const userId = session.user.id;

    try {
        const template = await prisma.cart.findUnique({
            where: { id: data.templateId },
            include: { products: { include: { product: true } } }
        });

        if (!template) throw new Error("Template not found");

        const scheduledDates = getScheduledDates(
            data.frequency,
            new Date(data.startDate),
            new Date(data.endDate),
            data.daysOfWeek,
            data.timesInDay
        );

        if (scheduledDates.length === 0) {
            return { success: false, error: "No delivery dates found for this schedule" };
        }

        const lunchRecord = await prisma.lunch.create({
            data: {
                userId,
                name: data.name,
                frequency: data.frequency,
                daysOfWeek: data.daysOfWeek,
                timesInDay: data.timesInDay,
                startDate: data.startDate,
                endDate: data.endDate,
                status: "active"
            }
        });

        const deliveryFeePerCart = data.deliveryFeeTotal / scheduledDates.length;
        const subtotalPerCart = template.products.reduce((acc, item) => acc + (item.product.price * item.quantity), 0);
        const totalPerCart = subtotalPerCart + deliveryFeePerCart;

        // Create carts for each date
        for (const date of scheduledDates) {
            await prisma.cart.create({
                data: {
                    userId,
                    lunchId: lunchRecord.id,
                    type: "cart",
                    status: "unconfirmed", // Requires payment
                    total: totalPerCart,
                    deliveryFee: deliveryFeePerCart,
                    deliveryDate: date,
                    name: `${data.name} - ${date.toLocaleDateString()}`,
                    products: {
                        create: template.products.map(p => ({
                            productId: p.productId,
                            quantity: p.quantity
                        }))
                    }
                }
            });
        }

        revalidatePath("/lunch");
        return { success: true, lunchId: lunchRecord.id };
    } catch (error) {
        console.error("Error scheduling lunch:", error);
        return { success: false, error: "Failed to schedule lunch" };
    }
}

function getScheduledDates(frequency: string, startDate: Date, endDate: Date, daysOfWeeks: string[], timesInDay: string[]) {
    const dates: Date[] = [];
    let current = new Date(startDate);
    const end = new Date(endDate);
    
    // Safety break
    let count = 0;

    while (current <= end && count < 1000) {
        count++;
        let match = false;
        if (frequency === 'daily') {
            match = true;
        } else if (frequency === 'weekly') {
            const dayName = current.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            // normalized check
            if (daysOfWeeks.some(d => d.toLowerCase() === dayName)) {
                match = true;
            }
        } else if (frequency === 'monthly') {
            if (current.getDate() === startDate.getDate()) {
                match = true;
            }
        } else if (frequency === 'once') {
            match = current.toDateString() === startDate.toDateString();
        }

        if (match) {
            for (const time of timesInDay) {
                const [hours, minutes] = time.split(':').map(Number);
                const d = new Date(current);
                d.setHours(hours || 12, minutes || 0, 0, 0);
                if (d >= startDate && d <= end) {
                    dates.push(d);
                }
            }
        }
        
        if (frequency === 'once') break;

        current.setDate(current.getDate() + 1);
    }
    return dates;
}



================================================================================
LOCATION: action\user.ts
================================================================================

//  @ts-nocheck
"use server";

import { redirect } from "next/navigation";
import { signIn } from "@/auth";
import { compare, hash } from 'bcryptjs';
import { prisma } from '@/lib/prisma';
import { isRedirectError } from "next/dist/client/components/redirect";

const login = async (formData: FormData) => {
  const email = formData.get("email") as string;
  const password = formData.get("password") as string;

  if (!email || !password) {
    return "Please provide both email and password";
  }

  try {
    await signIn("credentials", {
      email,
      password,
      redirectTo: "/",
    });
  } catch (error) {
    if (isRedirectError(error)) {
      throw error;
    }
    console.error("Login error:", error);
    return "Invalid credentials";
  }
};

const register = async (formData: FormData) => {
  const username = formData.get("username") as string;
  const email = formData.get("email") as string;
  const password = formData.get("password") as string;

  if (!username || !email || !password) {
    throw new Error("Please fill all fields");
  }

  // existing user
  const existingUser = await prisma.user.findUnique({
    where: { email },
  });
  if (existingUser) throw new Error("User already exists");

  const saltRounds = parseInt(process.env.SALT_ROUNDS || "10");
  const hashedPassword = await hash(password, saltRounds);

  await prisma.user.create({
    data: {
      email,
      username,
      password: hashedPassword,
    },
  });
  console.log(`User created successfully ðŸ¥‚`);
  redirect("/login");
};

export { register, login };




================================================================================
LOCATION: action\wishlist.ts
================================================================================

"use server";

import { auth } from "@/auth";
import { PrismaClient } from "@prisma/client";
import { revalidatePath } from "next/cache";

const prisma = new PrismaClient();

export async function toggleWishlist(productId: string) {
    const session = await auth();
    if (!session?.user?.id) {
        throw new Error("Unauthorized");
    }

    const userId = session.user.id;

    const existing = await prisma.wishlist.findUnique({
        where: {
            userId_productId: {
                userId,
                productId,
            },
        },
    });

    if (existing) {
        await prisma.wishlist.delete({
            where: {
                id: existing.id,
            },
        });
        revalidatePath("/");
        return { added: false };
    } else {
        await prisma.wishlist.create({
            data: {
                userId,
                productId,
            },
        });
        revalidatePath("/");
        return { added: true };
    }
}

export async function checkWishlisStatus(productId: string) {
    const session = await auth();
    if (!session?.user?.id) {
        return false;
    }
    const userId = session.user.id;
    const existing = await prisma.wishlist.findUnique({
        where: {
            userId_productId: {
                userId,
                productId,
            },
        },
    });
    return !!existing;
}



================================================================================
LOCATION: app\globals.css
================================================================================

@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: Arial, Helvetica, sans-serif;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 30 98% 50%;
    --accent-secondary: 107 77% 50%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 30 98% 50%;
    --accent-secondary: 107 77% 76%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}



@font-face {
  font-family: dance;
  src: url("./fonts/dancing/DancingScript-Regular.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: roboto_mono;
  src: url("./fonts/Roboto_Mono/static/AnyConv.com__RobotoMono-Medium.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: roboto;
  src: url("./fonts/Roboto/AnyConv.com__Roboto-Regular.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

.text-outline {
  -webkit-text-stroke: 1px hsl(var(--accent));
}

.text-outline-positive {
  -webkit-text-stroke: 1px hsl(var(--accent-secondary));
}

.text-outline-none {
  -webkit-text-stroke: 0px hsl(var(--accent));
}


.bg-blur{
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

.glass{
  background: rgba(255, 255, 255, 0.31);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.glass-outline{
  background: rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(8.6px);
  -webkit-backdrop-filter: blur(8.6px);
  border: 1px solid rgba(255, 255, 255, 1);
}

.glass-green{
  background: rgba(0, 255, 80, 0.1);
  border-radius: 16px;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(11.4px);
  -webkit-backdrop-filter: blur(11.4px);
  border: 1px solid rgba(0, 255, 80, 0.4);
}

.glow-green{
  -webkit-box-shadow:0px 0px 72px 22px rgba(45,255,196,0.55);
  -moz-box-shadow: 0px 0px 72px 22px rgba(45,255,196,0.55);
  box-shadow: 0px 0px 72px 22px rgba(45,255,196,0.55);
}

.glow-text{
  text-shadow: rgba(255,162,0,0.77) 0px 0px 39px;
}

.gradient-text{
  background: linear-gradient(90deg, hsl(var(--accent)), hsl(var(--primary)));
  /*font-family: Poppins;*/
  /*text-transform: uppercase;*/
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.animated-bg-gradient{
  background: linear-gradient(45deg, rgba(217, 217, 217, 0.327), hsl(var(--background)), rgb(217, 217, 217, 0.327), hsl(var(--background)));
  /*background: linear-gradient(45deg, #d2001a, #7462ff, #f48e21, #23d5ab);*/
  background-size: 300%;
  opacity: 2;
  animation: color 12s ease-in-out infinite;
}

@keyframes color
{
  0%{
    background-position: 0% 50%;
  }
  50%{
    background-position: 100% 50%;
  }
  100%{
    background-position: 0% 50%;
  }
}

.circle{
  position: relative;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background-color: #f0f0f0;
}

.s-div{
  position: absolute;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: #007bff;
  animation: move 2s infinite;
}


@keyframes move {
  0% {
    transform: translateX(0);
    transform: translateY(0);
  }
  50% {
    transform: translateX(100px) translateY(100px);
  }
  100% {
    transform: translateX(0);
    transform: translateY(0);
  }
}

.parallax-section {
  transform: translateY(0);
  transition: transform 0.5s ease-in-out;
}

.parallax-section.bg-scroll {
  transform: translateY(-20%);
}

.ani-shadow{
  content: " ";
  position: absolute;
  top: -4px;
  left: -4px;
  background: linear-gradient(45deg, #fb0094, #0000ff, #00ff00, #ffff00, #ff0000, #fb0094, #0000ff, #00ff00, #ffff00, #ff0000);
  background-size: 400%;
  width: calc(100% + 5px);
  height: calc(100% + 5px);
  z-index: -1;
  animation: bganimate 20s linear infinite;
}

.ani-shadow::after {
  filter: blur(20px);
}

@keyframes bganimate {
  0%{
    background-position: 0% 0%;
  }
  50%{
    background-position: 400% 0%;
  }
  100%{
    background-position: 0% 0%;
  }
}

.grad-trans{
  background: linear-gradient(to right, hsl(var(--secondary)) 0%, rgba(0, 0, 0, 0) 50% 100%);
}



================================================================================
LOCATION: app\layout.tsx
================================================================================

// @ts-nocheck
import type { Metadata } from "next";
// import localFont from "next/font/local";
import "./globals.css";
import { ThemeProvider } from "@/components/theme-provider"
import { Providers } from "@/store/providers";
import Navbar from "@/components/utility/navbar";
import { AppContextProvider } from "@/context/appContext";
import { Footer } from "@/components/myComponents/subs/footer";
import { CartProvider } from "@/hooks/use-cart";
import { SessionProvider } from "next-auth/react"
import { usersession } from "@/session";
import { VisitTracker } from "@/components/utility/VisitTracker";
// import {Roboto} from "next/font/google"

// const roboto = Roboto({
//   subsets : ["latin"], style : "normal"
// });

// const geistSans = localFont({
//   src: "./fonts/GeistVF.woff",
//   variable: "--font-geist-sans",
//   weight: "100 900",
// });
// const geistMono = localFont({
//   src: "./fonts/GeistMonoVF.woff",
//   variable: "--font-geist-mono",
//   weight: "100 900",
// });

interface Session {
  user?: {
    name?: string
    email?: string
    image?: string
  }
  expires: string
}

const metadata: Metadata = {
  title: "Succo Stores",
  description: "Your store for your satisfaction",
};

export const SEO_CONFIG = {
  description: 'Your one stop store for food items',
  fullName: "Succo Stores",
  name: "Succo Stores",
  slogan: "Succo Stores",
};

export const SYSTEM_CONFIG = {
  redirectAfterSignIn: "/dashboard/uploads",
  redirectAfterSignUp: "/dashboard/uploads",
  // repoName: "relivator",
  // repoOwner: "blefnk",
  // repoStars: true,
};

export default async function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  const session: Session | null = await usersession();
  return (
    <html lang="en">
      <SessionProvider session={session}>
        <AppContextProvider>
          <body
            className={`font-roboto_mono antialiased`}
          // ${geistSans.variable} ${geistMono.variable}
          >
            <Providers>
              <CartProvider>
                <ThemeProvider
                  attribute="class"
                  defaultTheme="light"
                  enableSystem
                  disableTransitionOnChange
                >
                  <VisitTracker />
                  <Navbar />
                  {children}
                  <Footer />
                </ThemeProvider>
              </CartProvider>
            </Providers>
          </body>
        </AppContextProvider>
      </SessionProvider>
    </html>
  );
}


================================================================================
LOCATION: app\page.tsx
================================================================================

"use client"
import HomeComponent from "./home/page";

export default function Home() {
  return (
    <div>
      <HomeComponent />
    </div>
  );
}



================================================================================
LOCATION: app\about\page.tsx
================================================================================

"use client"
import { Button} from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Textarea } from "@/components/ui/textarea"
import { ScrollArea } from "@/components/ui/scroll-area"
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from "@/components/ui/select"
import { FaPhone, FaSearchLocation} from "react-icons/fa"
import { Progress } from "@/components/ui/progress"
import { motion } from "framer-motion"
import Stats from "@/data/stats"
import Countup from "react-countup"
import contact from "@/data/cont"
// import Footer from "@/components/myComponents/subs/footer"
import { useAppContext } from "@/hooks/useAppContext"

const About = () => {
  const { selectedVideo, setSelectedVideo, useMock } = useAppContext();
  return (
    <motion.section 
      initial = {{ opacity: 0 }}
      animate = {{
        opacity : 1,
        transition : { delay: 0.5, duration: 0.6, ease: "easeIn"}
      }}
      className= "justify-center w-[100vw] overflow-clip /px-2"
    >
      <section className="md:max-w-[1200px] md:mx-auto md:h-[80vh]">
        <div className="flex flex-col md:flex-row md:justify-between mx-5 md:mx-10 mt-5">
         <span className="text-4xl font-semibold">About <span className="text-accent">Us</span></span>
        </div>
        <div className="flex flex-col md:flex-row mx-4 md:m-5">
          <div className="flex-1 mx-2 md:mx-10 my-5 text-secondary-foreground text-start">
            {/* {Stats.about.map((item, index) => (
              <div key={index} className="mb-2 indent-5">
                &nbsp;&nbsp;&nbsp;&nbsp;{item}
              </div>
            ))}
          </div> */}
          {Stats.about.map((item, index) => (
              <span key={index} className="mb-2 indent-5">
                &nbsp;&nbsp;&nbsp;&nbsp;{item}
              </span>
            ))}
          </div>

          <div className="flex-1 grid grid-cols-2 gap-5 max-w-[580px] my-5">
            {Stats.stats.map((stat, index)=>{
              return(
                <div key={index} className="bg-secondary rounded-lg p-5 shadow-md shadow-accent/50">
                  <Countup 
                    end={stat.num as number}
                    duration={10}
                    delay={2}
                    separator=""
                    className="text-3xl md:text-5xl text-outline font-extrabold text-background hover:text-accent py-5"
                  />
                  <div className="text-lg font-semibold text-secondary-foreground">{stat.text}</div>
                </div>
              )
            })}
          </div>
        </div>
      </section>
      {/* <div className="flex flex-col md:flex-row md:h-[80vh] items-center md:justify-center max-w-6xl mx-auto">
        <div className="flex flex-col items-center justify-center md:flex-1 mt-10">
          <div className="text-center text-4xl font-semibold md:mb-10">Meet the <span className="text-accent">Parochial</span></div>
          <Button variant={"outline"} className="border-accent text-accent text-lg  bg-transparent hover:text-slate-100 hidden md:flex">volunteer with us</Button>
        </div>
        <ScrollArea className="h-[41vh] md:h-[45vh] max-w-[720px]  self-center my-10 md:mx-20">
          <div className="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-5">
            {contact.team.map((member, index)=>{
              return (
                <div key={index} className="bg-secondary max-w-[170px] h-[20vh] rounded-lg p-5 flex flex-col justify-center">
                  <div className="font-semibold text-center text-lg">{member.name}</div>
                  <div className="text-center text-sm text-accent">{member.position}</div>
                </div>
              )
            })}
          </div>
        </ScrollArea>
        <Button variant={"outline"} className="border-accent text-accent text-lg  bg-transparent hover:text-slate-100 max-w-[220px] flex md:hidden">volunteer with us</Button>
      </div>
      <div className="flex flex-col /md:flex-row bg-secondary md:bg-background rounded-lg mt-10 /py-10 max-w-6xl md:mx-auto md:px-5">
        <div className="flex flex-col items-center justify-center flex-1">
          <div className="text-center text-4xl font-semibold my-10">Meet our <span className="text-accent">partners</span></div>
          <Button variant={"outline"} className="border-accent text-accent bg-transparent hover:text-slate-100 hidden">I will become a sponsor</Button>
        </div>
        <div className="grid grid-cols-2 /md:grid-cols-3 md:flex md:gap-5 max-w-[720px] my-5 md:mx-20 self-center">
          {contact.partners.map((partner, index)=>{
            return (
              <div key={index}>
                <img src={partner.uri} alt="" className="w-[150px] h-[120px] md:mx-5"/>
                
              </div>
            )
          })}
        </div>
        <Button variant={"outline"} className="border-accent text-accent text-lg bg-transparent hover:text-slate-100 self-center my-5 flex md:hidden">I will become a sponsor</Button>
      </div> */}
    </motion.section>
  )
}

export default About



================================================================================
LOCATION: app\account\page.tsx
================================================================================

"use client"
import { motion } from "framer-motion"
import {Signup} from "@/components/myComponents/subs"
import EditUser from "@/components/myComponents/subs/useredit"
import dynamic from 'next/dynamic'
const Login = dynamic(() => import('@/components/myComponents/subs').then((e) => e.Login),{ssr: false,})
import { Button } from "@/components/ui/button"
import { BiPencil } from "react-icons/bi"
import { useEffect } from "react"
import Link from "next/link"
import { useAppContext } from "@/hooks/useAppContext"
import { CiCamera } from "react-icons/ci"
import {ProfileImg} from "@/components/myComponents/subs/fileupload"
import { signOut } from "next-auth/react";
import UserShippingAddressForm from "@/prisma/forms/userShippingAddressForm"

const Account = () => {
  const {user, setUser } = useAppContext();
  if (user.name === "visitor" && user.email === "nil"){
    return(
      <div className="w-full h-[50vh] flex flex-col justify-center items-center">
        <div className="font-semibold text-lg text-destructive">You are not logged in</div>
        <div className="flex flex-row gap-5">
          <Login />
          <Signup />
        </div>
      </div>
    )
  }

  return (
    <motion.section
      initial = {{ opacity: 0 }}
      animate = {{
        opacity : 1,
        transition : { delay: 0.5, duration: 0.6, ease: "easeIn"}
      }}
      className="w-[100vw] min-h-full overflow-clip"
    >
      <div className="w-full h-full flex flex-col items-center">
        <div className="relative my-10 mx-2 flex justify-center items-center">
          <div className="w-44 h-44  rounded-full flex-1 overflow-clip justify-center items-center">
            <img src={(user.image==null || user.image == undefined || user.image =='') ? "https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png" : user.image } className="w-full" alt="" />
          </div>
          <ProfileImg /> 
        </div>
        <div className="flex flex-col gap-2 w-full max-w-xl">
          {/* <div className="w-full px-3">
            <div className="flex flex-row gap-3 items-center">
              <div className="w-14 h-14">icon</div>
              <div className="flex-1 flex flex-col">
                <div className="text-sm text-foreground/70">Name</div>
                <div className="text-lg font-semibold">Tobi Bola</div>
              </div>
              <div className="text-3xl text-accent"><BiPencil /></div>
            </div>
          </div> */}
          <div className="w-full px-3">
            <div className="flex flex-row gap-3">
              <div className="w-14 h-14">icon</div>
              <div className="flex-1">
                <div className="text-sm text-foreground/70">name</div>
                <div className="text-lg font-semibold">{user.name}</div>
              </div>
            </div>
          </div>
          {/* <div className="w-full px-3">
            <div className="flex flex-row gap-3">
              <div className="w-14 h-14">icon</div>
              <div className="flex-1">
                <div className="text-sm text-foreground/70">Department</div>
                <div className="text-lg font-semibold">{user.department}</div>
              </div>
            </div>
          </div> */}
          <div className="w-full px-3">
            <div className="flex flex-row gap-3">
              <div className="w-14 h-14">icon</div>
              <div className="flex-1">
                <div className="text-sm text-foreground/70">Email</div>
                <div className="text-lg font-semibold">{user.email}</div>
              </div>
            </div>
          </div>
          <div className="w-full px-3">
            <div className="flex flex-row gap-3">
              <div className="w-14 h-14">icon</div>
              <div className="flex-1">
                <div className="text-sm text-foreground/70">Contact</div>
                <div className="text-lg font-semibold">{user.contact}</div>
              </div>
            </div>
          </div>
          {user.addresses && user.addresses.length > 0 && user.addresses.map((addr, index) => (
            <div key={addr.id || index} className="w-full px-3">
              <div className="flex flex-row gap-3">
                <div className="w-14 h-14">icon</div>
                <div className="flex-1">
                  <div className="text-sm text-foreground/70">Address</div>
                  <div className="text-lg font-semibold">
                    {`${addr.address || ''} ${addr.city || ''}, ${addr.state || ''}`}
                  </div>
                </div>
              </div>
            </div>
          ))}
          

        </div>
        <div className="flex flex-row max-w-sm gap-2" >
          <Button
            className="bg-red border-2 border-red-500 text-red-600 w-full flex-1"
            variant="outline"
            onClick={() => {
              signOut({ callbackUrl: "/" }); // redirects after logout
              setUser({
                username: "visitor",
                id: "nil",
                email: "nil",
                avatarUrl: "https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png",
                role: "user",
                department: "nil",
                contact: "xxxx",
              });
            }}
          >
            Logout
          </Button>
          <EditUser />
        </div>
      </div>
    </motion.section> 
  )}

export default Account







================================================================================
LOCATION: app\admin\page.tsx
================================================================================

"use client";

import { motion } from "framer-motion";
import { useState, useMemo, useEffect } from "react";
import { Checkbox } from "@/components/ui/checkbox";
import { Input } from "@/components/ui/input";
import { DataTableDemo } from "@/components/myComponents/subs/datatable";
import { useAppContext } from "@/hooks/useAppContext";

import UserForm from "@/prisma/forms/UserForm";
import ProductForm from "@/prisma/forms/ProductForm";
import CategoryForm from "@/prisma/forms/CategoryForm";
import StockForm from "@/prisma/forms/StockForm";
import FeaturedProductForm from "@/prisma/forms/FeaturedProductForm";
import ReviewForm from "@/prisma/forms/ReviewForm";
import NotificationForm from "@/prisma/forms/NotificationForm";
import PaymentForm from "@/prisma/forms/PaymentForm";
import RefundForm from "@/prisma/forms/RefundForm";
import CartForm from "@/prisma/forms/CartForm";
import CouponForm from "@/prisma/forms/CouponForm";
import ShippingAddressForm from "@/prisma/forms/ShippingAddressForm";
import PostForm from "@/prisma/forms/PostForm";
import AddressPriceForm from "@/prisma/forms/AddressPriceForm";
import { CartDetailsDialog } from "@/components/myComponents/subs/CartDetailsDialog";
import { Button } from "@/components/ui/button";
import Link from "next/link";


function getWeekNumber(d: Date) {
  d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
  d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
  var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
  var weekNo = Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);
  return weekNo;
}

function getFirstDayOfWeek(d: Date) {
  const date = new Date(d);
  const day = date.getDay();
  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday
  return new Date(date.setDate(diff));
}

/* ================= FORMS ================= */

const allForms = [
  { name: "User", component: UserForm },
  { name: "Product", component: ProductForm },
  { name: "Category", component: CategoryForm },
  { name: "Stock", component: StockForm },
  { name: "FeaturedProduct", component: FeaturedProductForm },
  { name: "Review", component: ReviewForm },
  { name: "Notification", component: NotificationForm },
  { name: "Payment", component: PaymentForm },
  { name: "Refund", component: RefundForm },
  { name: "Cart", component: CartForm },
  { name: "Coupon", component: CouponForm },
  { name: "ShippingAddress", component: ShippingAddressForm },
  { name: "Post", component: PostForm },
  { name: "AddressPrice", component: AddressPriceForm },
];

const staffForms = ["Cart", "Stock", "Notification", "AddressPrice"];

/* ================= COMPONENT ================= */

const Admin = () => {
  const { user } = useAppContext();

  const isAdmin = user?.role === "admin";
  const isStaff = user?.role === "staff";

  const [selectedForms, setSelectedForms] = useState<string[]>([]);
  const [searchQuery, setSearchQuery] = useState("");
  const [cartData, setCartData] = useState<any[]>([]);
  const [notificationData, setNotificationData] = useState<any[]>([]);
  const [selectedCart, setSelectedCart] = useState<any | null>(null);
  const [cartDialogOpen, setCartDialogOpen] = useState(false);
  const [loadingCart, setLoadingCart] = useState(false);


  /* ================= PERMISSIONS ================= */

  const forms = isAdmin
    ? allForms
    : isStaff
      ? allForms.filter(f => staffForms.includes(f.name))
      : [];

  /* ================= FORM SELECTION ================= */

  const toggleForm = (name: string) => {
    setSelectedForms(prev =>
      prev.includes(name) ? prev.filter(f => f !== name) : [...prev, name]
    );
  };

  const filteredForms = useMemo(
    () => forms.filter(f => f.name.toLowerCase().includes(searchQuery.toLowerCase())),
    [searchQuery, forms]
  );

  const toggleAll = () => {
    if (selectedForms.length === filteredForms.length) {
      setSelectedForms([]);
    } else {
      setSelectedForms(filteredForms.map(f => f.name));
    }
  };

  const allSelected =
    selectedForms.length === filteredForms.length && filteredForms.length > 0;

  const partiallySelected =
    selectedForms.length > 0 && selectedForms.length < filteredForms.length;

  /* ================= TABLE COLUMNS ================= */

  const formColumns = useMemo(
    () => [
      {
        accessorKey: "name",
        header: () => (
          <div className="flex flex-col gap-1">
            <div className="flex items-center gap-2">
              <Checkbox
                checked={allSelected}
                onCheckedChange={toggleAll}
                className={partiallySelected ? "bg-gray-400" : ""}
              />
              <span>Form Name</span>
            </div>
            <Input
              placeholder="Search forms..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="mt-1"
            />
          </div>
        ),
      },
      {
        accessorKey: "select",
        header: "Select",
        cell: ({ row }: any) => (
          <Checkbox
            checked={selectedForms.includes(row.original.name)}
            onCheckedChange={() => toggleForm(row.original.name)}
          />
        ),
      },
    ],
    [selectedForms, searchQuery, filteredForms]
  );

  const cartColumns = useMemo(
    () => [
      { accessorKey: "name", header: "Name/Week" },
      { accessorKey: "userName", header: "User" },
      { accessorKey: "total", header: "Total" },
      { accessorKey: "status", header: "Status" },
      { accessorKey: "deliveryDate", header: "Delivery Time" },
      { accessorKey: "createdAt", header: "Created At" },
    ],
    []
  );

  const notificationColumns = useMemo(
    () => [
      { accessorKey: "id", header: "ID" },
      { accessorKey: "userName", header: "User" },
      { accessorKey: "message", header: "Message" },
      { accessorKey: "category", header: "Category" },
      { accessorKey: "createdAt", header: "Created At" },
    ],
    []
  );

  /* ================= DATA FETCH ================= */
  
  const [cartSearch, setCartSearch] = useState("");

  useEffect(() => {
    if (!isAdmin && !isStaff) return;

    const fetchData = async () => {
      try {
        /* ===== CARTS (PAID + UNCONFIRMED) ===== */
        const cartsRes = await fetch(
          `/api/dbhandler?model=cart&status=paid,unconfirmed&search=${cartSearch}`
        );

        let carts = await cartsRes.json();
        if (!Array.isArray(carts)) carts = [];

        // Sorting by deliveryDate
        carts.sort((a: any, b: any) => {
            const dateA = new Date(a.deliveryDate || a.createdAt).getTime();
            const dateB = new Date(b.deliveryDate || b.createdAt).getTime();
            return dateA - dateB;
        });

        // Grouping and adding separators
        const finalCarts: any[] = [];
        let currentWeek: number | null = null;

        carts.forEach((c: any) => {
            const deliveryDate = new Date(c.deliveryDate || c.createdAt);
            const weekNum = getWeekNumber(deliveryDate);
            
            if (currentWeek !== weekNum) {
                currentWeek = weekNum;
                const firstDay = getFirstDayOfWeek(new Date(deliveryDate));
                finalCarts.push({
                    id: `week-${weekNum}`,
                    name: `WEEK ${weekNum} - Starts ${firstDay.toLocaleDateString()}`,
                    userName: "",
                    total: "",
                    status: "separator",
                    deliveryDate: "",
                    createdAt: ""
                });
            }

            finalCarts.push({
                id: c.id,
                name: c.name || "N/A",
                userName: c.user?.name || "Unknown",
                total: c.total,
                status: c.status,
                deliveryDate: deliveryDate.toLocaleString(),
                createdAt: new Date(c.createdAt).toLocaleString(),
            });
        });

        setCartData(finalCarts);

        /* ===== NOTIFICATIONS ===== */
        // ... notifications fetch unchanged
        const notifRes = await fetch("/api/dbhandler?model=notification");
        let notifications = await notifRes.json();
        if (!Array.isArray(notifications)) notifications = [];

        notifications = notifications.filter(
          (n: any) => isAdmin || (isStaff && n.to?.toLowerCase() === "staff")
        );

        setNotificationData(
          notifications.map((n: any) => ({
            id: n.id,
            userName: n.username || "Unknown",
            message: n.message,
            category: n.category,
            createdAt: new Date(n.createdAt).toLocaleString(),
          }))
        );
      } catch (error) {
        console.error("Error fetching admin data:", error);
      }
    };

    const debounce = setTimeout(fetchData, 500);
    return () => clearTimeout(debounce);
  }, [isAdmin, isStaff, cartSearch]);

  /* ================= GUARD ================= */

  if (!isAdmin && !isStaff) {
    return (
      <div className="w-full p-4 text-center text-red-600 font-bold">
        You do not have permission to access this page.
      </div>
    );
  }

  const handleCartRowClick = async (cartRow: any) => {
    setLoadingCart(true);
    setCartDialogOpen(true);

    try {
      const res = await fetch(
        `/api/dbhandler?model=cart&id=${cartRow.id}`
      );
      const fullCart = await res.json();
      setSelectedCart(fullCart);
    } catch (err) {
      console.error("Failed to load cart details", err);
    } finally {
      setLoadingCart(false);
    }
  };

  const handleConfirmPayment = async () => {
    if (!selectedCart) return;

    try {
      const res = await fetch("/api/dbhandler?model=cart", {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          id: selectedCart.id,
          status: "paid",
          adminConfirmed: true,
        }),
      });

      if (!res.ok) throw new Error("Confirmation failed");

      // Update UI immediately
      setSelectedCart((prev: any) => ({
        ...prev,
        status: "paid",
      }));

      // Update table list
      setCartData(prev =>
        prev.map(c =>
          c.id === selectedCart.id ? { ...c, status: "paid" } : c
        )
      );
    } catch (err) {
      console.error("Failed to confirm payment", err);
    }
  };



  /* ================= UI ================= */

  return (
    <motion.section
      initial={{ opacity: 0 }}
      animate={{
        opacity: 1,
        transition: { delay: 0.5, duration: 0.6, ease: "easeIn" },
      }}
      className="w-[100vw] p-4"
    >
      <CartDetailsDialog
        open={cartDialogOpen}
        onOpenChange={setCartDialogOpen}
        cart={selectedCart}
        onConfirmPayment={handleConfirmPayment}
      />

      <div className="text-4xl font-semibold w-full text-center mb-6">
        Admin Dashboard
      </div>

      <div className="flex flex-col md:grid md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-5">
        {/* FORM SELECTOR */}
        <div>
          <Link href="/admin/analytics">
            <Button>Analytics</Button>
          </Link>
        </div>
        <div className="mb-6 max-w-md">
          <DataTableDemo columns={formColumns} data={filteredForms} />
        </div>

        {selectedForms.map(name => {
          const FormComponent = forms.find(f => f.name === name)?.component;
          return FormComponent ? <FormComponent key={name} /> : null;
        })}
      </div>

      {/* CARTS */}
      <div className="mt-8">
        <div className="flex justify-between items-center mb-2">
          <h3 className="text-xl font-semibold">
            Paid & Unconfirmed Carts
          </h3>
          <Input 
            placeholder="Search carts..." 
            value={cartSearch}
            onChange={(e) => setCartSearch(e.target.value)}
            className="max-w-xs"
          />
        </div>
        <DataTableDemo
          columns={cartColumns}
          data={cartData}
          onRowClick={handleCartRowClick}
        />
      </div>

      {/* NOTIFICATIONS */}
      <div className="mt-8">
        <h3 className="text-xl font-semibold mb-2">Notifications</h3>
        <DataTableDemo
          columns={notificationColumns}
          data={notificationData}
        />
      </div>
    </motion.section>
  );
};

export default Admin;



================================================================================
LOCATION: app\admin\analytics\page.tsx
================================================================================

"use client";

import { KpiSection } from "@/components/analytics/KpiSection";
import { ChartCard } from "@/components/analytics/cards/ChartCard";
import { RevenueChart } from "@/components/analytics/charts/RevenueChart";
import { CartStatusChart } from "@/components/analytics/charts/CartStatusChart";
import { TopProductsChart } from "@/components/analytics/charts/TopProductsChart";
import { ProfitChart } from "@/components/analytics/charts/ProfitChart";
import { VisitAnalysisChart } from "@/components/analytics/charts/VisitAnalysisChart";
import { RefundReasonChart } from "@/components/analytics/charts/RefundReasonChart";
import { Button } from "@/components/ui/button";
import { Download, Calendar as CalendarIcon } from "lucide-react";
import { useState } from "react";
import { DateRange } from "react-day-picker";
import { format, subDays } from "date-fns";
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover";
import { Calendar } from "@/components/ui/calendar";

export default function AnalyticsDashboard() {
    const [date, setDate] = useState<DateRange | undefined>({
        from: subDays(new Date(), 30),
        to: new Date(),
    });

    const queryParams = {
        from: date?.from?.toISOString(),
        to: date?.to?.toISOString()
    };

    return (
        <div className="flex-1 space-y-6 p-4 md:p-8 pt-6">
            <div className="flex flex-col space-y-2 md:flex-row md:items-center md:justify-between space-x-2">
                <h2 className="text-3xl font-bold tracking-tight">Analytics Dashboard</h2>
                <div className="flex items-center space-x-2">
                    <Popover>
                        <PopoverTrigger asChild>
                            <Button variant="outline" className="justify-start text-left font-normal w-[240px]">
                                <CalendarIcon className="mr-2 h-4 w-4" />
                                {date?.from ? (
                                    date.to ? (
                                        <>
                                            {format(date.from, "LLL dd, y")} -{" "}
                                            {format(date.to, "LLL dd, y")}
                                        </>
                                    ) : (
                                        format(date.from, "LLL dd, y")
                                    )
                                ) : (
                                    <span>Pick a date range</span>
                                )}
                            </Button>
                        </PopoverTrigger>
                        <PopoverContent className="w-auto p-0" align="end">
                            <Calendar
                                initialFocus
                                mode="range"
                                defaultMonth={date?.from}
                                selected={date}
                                onSelect={setDate}
                                numberOfMonths={2}
                            />
                        </PopoverContent>
                    </Popover>
                    <Button>
                        <Download className="mr-2 h-4 w-4" />
                        Export
                    </Button>
                </div>
            </div>

            <KpiSection params={queryParams} />

            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-7">
                <ChartCard title="Revenue Over Time" className="col-span-4">
                    <RevenueChart params={queryParams} />
                </ChartCard>
                <ChartCard title="Cart Status Distribution" className="col-span-3">
                    <CartStatusChart params={queryParams} />
                </ChartCard>
            </div>

            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-7">
                <ChartCard title="Profit & Revenue Analysis" className="col-span-4">
                    <ProfitChart params={queryParams} />
                </ChartCard>
                <ChartCard title="Top Selling Products" className="col-span-3">
                    <TopProductsChart params={queryParams} />
                </ChartCard>
            </div>

            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-7">
                <ChartCard title="Page Visit Analysis" className="col-span-4">
                    <VisitAnalysisChart params={queryParams} />
                </ChartCard>
                <ChartCard title="Refund Reasons (Mock)" className="col-span-3">
                    <RefundReasonChart params={queryParams} />
                </ChartCard>
            </div>
        </div>
    );
}



================================================================================
LOCATION: app\api\admin\analytics\route.ts
================================================================================

import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export async function GET(req: NextRequest) {
    const { searchParams } = new URL(req.url);
    const metric = searchParams.get("metric");
    const from = searchParams.get("from");
    const to = searchParams.get("to");

    // Default to last 30 days if not provided
    const endDate = to ? new Date(to) : new Date();
    const startDate = from ? new Date(from) : new Date(new Date().setDate(endDate.getDate() - 30));

    try {
        let data;

        switch (metric) {
            case "revenue":
                data = await getRevenue(startDate, endDate);
                break;
            case "orders":
                data = await getOrders(startDate, endDate);
                break;
            case "cart-status":
                data = await getCartStatusCounts(startDate, endDate);
                break;
            case "profit":
                data = await getProfit(startDate, endDate);
                break;
            case "visits":
                data = await getVisits(startDate, endDate);
                break;
            case "products":
                data = await getTopProducts(startDate, endDate);
                break;
            case "refunds":
                data = await getRefunds(startDate, endDate);
                break;
            case "kpi":
                data = await getKPIs(startDate, endDate);
                break;
            default:
                return NextResponse.json({ error: "Invalid metric" }, { status: 400 });
        }

        return NextResponse.json(data);
    } catch (error) {
        console.error("Analytics Error:", error);
        return NextResponse.json({ error: "Failed to fetch analytics" }, { status: 500 });
    }
}

async function getRevenue(from: Date, to: Date) {
    const payments = await prisma.payment.findMany({
        where: {
            createdAt: { gte: from, lte: to },
            cart: { status: "paid" },
        },
        select: { amount: true, createdAt: true },
        orderBy: { createdAt: "asc" },
    });

    // Basic aggregation by day could be done here or on client. 
    // Returning raw points for client flexibility as requested by "Raw + Derived" philosophy
    return payments.map(p => ({
        date: p.createdAt,
        revenue: p.amount,
    }));
}

async function getOrders(from: Date, to: Date) {
    const carts = await prisma.cart.findMany({
        where: {
            createdAt: { gte: from, lte: to },
        },
        select: { status: true, createdAt: true },
        orderBy: { createdAt: "asc" },
    });

    return carts.map(c => ({
        date: c.createdAt,
        status: c.status,
    }));
}

async function getCartStatusCounts(from: Date, to: Date) {
    const counts = await prisma.cart.groupBy({
        by: ["status"],
        where: {
            createdAt: { gte: from, lte: to },
        },
        _count: true,
    });

    return counts.map(c => ({
        name: c.status,
        value: c._count,
    }));
}

async function getProfit(from: Date, to: Date) {
    // This is expensive, so limit range or cache in production
    const paidCarts = await prisma.cart.findMany({
        where: {
            status: "paid",
            createdAt: { gte: from, lte: to },
        },
        include: {
            payment: true,
            products: {
                include: {
                    product: {
                        include: { stock: true },
                    },
                },
            },
        },
    });

    return paidCarts.map((cart) => {
        const payment = cart.payment;
        const revenue = payment?.amount || 0;

        let totalCost = 0;

        if (cart.products && Array.isArray(cart.products)) {
            totalCost = cart.products.reduce((sum, item) => {
                const stock = item.product?.stock?.[0];
                const costPerItem = stock?.costPerProduct || 0;
                return sum + (item.quantity * costPerItem);
            }, 0);
        }

        return {
            date: cart.createdAt,
            revenue,
            cost: totalCost,
            profit: revenue - totalCost,
        };
    });
}

async function getVisits(from: Date, to: Date) {
    // Grouping by day for efficiency? 
    // Prisma doesn't do date truncation group by easily without raw query.
    // Let's fetch and map for now.
    const visits = await prisma.visit.findMany({
        where: { visitDate: { gte: from, lte: to } },
        select: { visitDate: true },
        orderBy: { visitDate: 'asc' }
    });

    // We can return raw timestamps or aggregate. Let's return timestamps.
    return visits.map(v => v.visitDate);
}

async function getTopProducts(from: Date, to: Date) {
    const items = await prisma.cartItem.groupBy({
        by: ['productId'],
        where: {
            cart: {
                status: 'paid',
                createdAt: { gte: from, lte: to }
            }
        },
        _sum: { quantity: true },
        orderBy: { _sum: { quantity: 'desc' } },
        take: 10
    });

    // Hydrate names
    const productIds = items.map(i => i.productId);
    const products = await prisma.product.findMany({
        where: { id: { in: productIds } },
        select: { id: true, name: true }
    });

    return items.map(item => {
        const p = products.find(prod => prod.id === item.productId);
        return {
            name: p?.name || 'Unknown',
            sales: item._sum.quantity || 0
        };
    });
}

async function getRefunds(from: Date, to: Date) {
    const refunds = await prisma.refund.findMany({
        where: { createdAt: { gte: from, lte: to } },
        select: { amount: true, createdAt: true }
    });
    return refunds.map(r => ({ date: r.createdAt, amount: r.amount }));
}

async function getKPIs(from: Date, to: Date) {
    const revenueAgg = await prisma.payment.aggregate({
        where: { createdAt: { gte: from, lte: to }, cart: { status: 'paid' } },
        _sum: { amount: true }
    });

    const ordersCount = await prisma.cart.count({
        where: { createdAt: { gte: from, lte: to }, status: 'paid' }
    });

    const refundAgg = await prisma.refund.aggregate({
        where: { createdAt: { gte: from, lte: to } },
        _sum: { amount: true }
    });

    const userCount = await prisma.user.count({
        where: { createdAt: { gte: from, lte: to } }
    });

    // Total active users (all time) could be useful too, but let's stick to time range for "New Users"
    // Or just total users in general? The spec says "Active Users".
    const totalUsers = await prisma.user.count();

    return {
        totalRevenue: revenueAgg._sum.amount || 0,
        totalOrders: ordersCount,
        totalRefunds: refundAgg._sum.amount || 0,
        newUsers: userCount,
        totalUsers
    };
}



================================================================================
LOCATION: app\api\auth\login\route.ts
================================================================================

"use server"
import { PrismaClient } from '@prisma/client';
import { NextRequest } from 'next/server';
import bcrypt from 'bcrypt';

const prisma = new PrismaClient();





export async function POST(req: NextRequest) {

  const { searchParams } = new URL(req.url);
  // const formData = await req.formData
  // const file = formData.
  
  // Destructure and provide defaults
  const model = searchParams.get('model') || null;
  const id = searchParams.get('id') || null;
  // const body = searchParams.get('body') || null;

  // Parse JSON body
  let body = null;
  try {
    body = await req.json(); // This reads the JSON payload
  } catch (err) {
    return new Response('Invalid JSON', { status: 400 });
  }

  // const email = body.email

  const { method } = req; 
  console.log("in db handler",model, id, method, body)

  
  try {
    const data = body;
    
    // Find user by email or contact
    const user = await prisma.user.findFirst({
      where: {
        OR: [
          { email: body.email },
          { contact: body.email }
        ]
      },
    });

    // User not found
    if (!user) {
      return new Response(
        JSON.stringify({ error: 'Invalid email/contact or password' }),
        { status: 401, headers: { 'Content-Type': 'application/json' } }
      );
    }

    // User exists but has no password (OAuth user)
    if (!user.password) {
      return new Response(
        JSON.stringify({
          error: 'No password set',
          requiresEmailVerification: true,
          email: user.email,
          message: 'This account was created with Google or Facebook. Please verify your email to set a password.',
        }),
        { status: 403, headers: { 'Content-Type': 'application/json' } }
      );
    }

    // User has password, verify it
    const isValid = await bcrypt.compare(body.password, user.password);
    
    if (isValid) {
      const updatedUser = user;
      return new Response(JSON.stringify(updatedUser), {
        status: 200,
        headers: { 'Content-Type': 'application/json' },
      });
    } else {
      return new Response(
        JSON.stringify({ error: 'Invalid email/contact or password' }),
        { status: 401, headers: { 'Content-Type': 'application/json' } }
      );
    }
  } catch (error) {
    console.error('LOGIN ERROR:', error);
    return new Response(
      JSON.stringify({ error: 'Failed to Login' }),
      { status: 405, headers: { 'Content-Type': 'application/json' } }
    );
  }

}






================================================================================
LOCATION: app\api\auth\send-verification-code\route.ts
================================================================================

"use server";
import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";
import { sendVerificationEmail } from "@/lib/nodemailer";

const prisma = new PrismaClient();

// Generate a 6-digit code
function generateVerificationCode(): string {
  return Math.floor(100000 + Math.random() * 900000).toString();
}

export async function POST(req: NextRequest) {
  try {
    const body = await req.json();
    const { email } = body;

    if (!email) {
      return NextResponse.json({ error: "Email is required" }, { status: 400 });
    }

    // Check if user exists with this email
    const user = await prisma.user.findUnique({
      where: { email },
    });

    if (!user) {
      return NextResponse.json({ error: "User not found" }, { status: 404 });
    }

    // Check if user has a password (if they have one, they don't need this flow)
    if (user.password) {
      return NextResponse.json(
        { error: "User already has a password. Please use regular login." },
        { status: 400 }
      );
    }

    // Check if user signed up via OAuth (Google/Facebook)
    // In the User model, providerid is used for OAuth ID. 
    // If it's present, it means they might have signed up with OAuth.
    // Logic: If they have no password AND have a providerid, they likely signed up via OAuth and want to add a password.
    // Or if they just have no password.
    
    // Original logic:
    // if (!user.providerid) {
    //   return NextResponse.json(
    //     { error: "This account was not created via Google or Facebook" },
    //     { status: 400 }
    //   );
    // }

    // Delete any existing unverified codes for this email
    await prisma.emailVerificationCode.deleteMany({
      where: {
        email,
        verified: false,
      },
    });

    // Generate new verification code
    const code = generateVerificationCode();
    const expires = new Date(Date.now() + 15 * 60 * 1000); // 15 minutes expiry

    // Save the code to database
    await prisma.emailVerificationCode.create({
      data: {
        email,
        code,
        expires,
      },
    });

    // Send email using centralized function
    await sendVerificationEmail(email, code, user.name || "User");

    return NextResponse.json(
      {
        message: "Verification code sent to your email",
        requiresVerification: true,
      },
      { status: 200 }
    );
  } catch (error) {
    console.error("Error sending verification code:", error);
    return NextResponse.json(
      { error: "Failed to send verification code" },
      { status: 500 }
    );
  }
}




================================================================================
LOCATION: app\api\auth\verify-code-set-password\route.ts
================================================================================

"use server"
import { NextRequest, NextResponse } from 'next/server';
import { PrismaClient } from '@prisma/client';
import bcrypt from 'bcrypt';

const prisma = new PrismaClient();

export async function POST(req: NextRequest) {
  try {
    const body = await req.json();
    const { email, code, password } = body;

    if (!email || !code || !password) {
      return NextResponse.json(
        { error: 'Email, code, and password are required' },
        { status: 400 }
      );
    }

    // Find the verification code
    const verificationCode = await prisma.emailVerificationCode.findFirst({
      where: {
        email,
        code,
        verified: false,
      },
      orderBy: {
        createdAt: 'desc',
      },
    });

    if (!verificationCode) {
      return NextResponse.json(
        { error: 'Invalid verification code' },
        { status: 400 }
      );
    }

    // Check if code has expired
    if (verificationCode.expires < new Date()) {
      return NextResponse.json(
        { error: 'Verification code has expired. Please request a new one.' },
        { status: 400 }
      );
    }

    // Find the user
    const user = await prisma.user.findUnique({
      where: { email },
    });

    if (!user) {
      return NextResponse.json({ error: 'User not found' }, { status: 404 });
    }

    // Hash the new password
    const hashedPassword = await bcrypt.hash(password, 10);

    // Update user with new password
    await prisma.user.update({
      where: { email },
      data: {
        password: hashedPassword,
      },
    });

    // Mark verification code as used
    await prisma.emailVerificationCode.update({
      where: { id: verificationCode.id },
      data: { verified: true },
    });

    // Clean up old verification codes for this email
    await prisma.emailVerificationCode.deleteMany({
      where: {
        email,
        verified: true,
      },
    });

    return NextResponse.json(
      {
        message: 'Password set successfully. You can now login with your email and password.',
        success: true,
      },
      { status: 200 }
    );
  } catch (error) {
    console.error('Error verifying code and setting password:', error);
    return NextResponse.json(
      { error: 'Failed to verify code and set password' },
      { status: 500 }
    );
  }
}



================================================================================
LOCATION: app\api\auth\[...nextauth]\route.ts
================================================================================

import { handlers } from "@/auth";
export const { GET, POST } = handlers;

export const runtime = "nodejs";



================================================================================
LOCATION: app\api\cart\function.ts
================================================================================


import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const modelMap = {
  //ministries: prisma.ministry,
  cart: prisma.cart,
  cartItem: prisma.cartItem,
  category: prisma.category,
  coupon: prisma.coupon,
  featuredProduct: prisma.featuredProduct,
  notification: prisma.notification,
  payment: prisma.payment,
  post: prisma.post,
  product: prisma.product,
  refund: prisma.refund,
  review: prisma.review,
  shippingAddress: prisma.shippingAddress,
  stock: prisma.stock,
  user: prisma.user,
};

async function dbHandler({
  model = null,
  id = null,
  body = null,
  method,
  profileImage = false,
}: {
  model: any;
  id?: string;
  body?: any;
  method: 'GET' | 'POST' | 'PUT' | 'DELETE';
  profileImage?: boolean;
}) {
  console.log("In dbhandler function");

  const prismaModel = modelMap[model];

  if (!prismaModel) {
    return { status: 400, data: { message: 'Invalid model' } };
  }

  try {
    switch (method) {
      case 'GET':
        if (id) {
          const item = await prismaModel.findUnique({ where: { id } });
          if (!item) {
            return { status: 404, data: { error: 'Document not found' } };
          }
          return { status: 200, data: item };
        } else {
          const items = await prismaModel.findMany();
          return { status: 200, data: items };
        }
      case 'POST':
        const data = body;
        const newItem = await prismaModel.create({ data });
        if (profileImage && model === 'posts') {
          try {
            console.log("about to change user profile image")
            await prisma.user.update({
              where: { id: body.userId },
              data: { image: body.url },
            });
          } catch (error) {
            console.error('Database error:', error);
            return { status: 500, data: { error: 'Failed to update user profile image' } };
          }
        }
        return { status: 200, data: newItem };
      case 'PUT':
        const { _id, ...updatedata } = body;
        const updatedItem = await prismaModel.update({
          where: { id : _id },
          data: updatedata,
        });
        return { status: 200, data: updatedItem };
      case 'DELETE':
        await prismaModel.delete({ where: { id } });
        return { status: 200, data: { success: true } };
      default:
        return { status: 405, data: { error: 'Method not allowed' } };
    }
  } catch (error) {
    console.error('Database error:', error);
    return { status: 500, data: { error: 'Failed to perform operation' } };
  }
}

export default dbHandler;

// const result = await dbHandler({
//   model: 'posts',
//   method: 'POST',
//   body: {
//     // your post data
//   },
//   profileImage: true,
// });














// import { PrismaClient } from '@prisma/client';

// const prisma = new PrismaClient();

// const modelMap = {
//   ministries: prisma.ministry,
//   departments: prisma.department,
//   books: prisma.book,
//   users: prisma.user,
//   comments: prisma.comment,
//   likes: prisma.like,
//   billboards: prisma.billboard,
//   posts: prisma.post,
// };

// async function dbHandler({
//   model = null,
//   id = null,
//   body = null,
//   method,
// }: {
//   model: any;
//   id?: string;
//   body?: any;
//   method: 'GET' | 'POST' | 'PUT' | 'DELETE';
// }) {

//     console.log("In dbhandler function")
//   const prismaModel = modelMap[model];

//   if (!prismaModel) {
//     return { status: 400, data: { message: 'Invalid model' } };
//   }

//   try {
//     switch (method) {
//       case 'GET':
//         if (id) {
//           const item = await prismaModel.findUnique({ where: { id } });
//           if (!item) {
//             return { status: 404, data: { error: 'Document not found' } };
//           }
//           return { status: 200, data: item };
//         } else {
//           const items = await prismaModel.findMany();
//           return { status: 200, data: items };
//         }
//       case 'POST':
//         const data = body;
//         const newItem = await prismaModel.create({ data, });
//         return { status: 200, data: newItem };
//       case 'PUT':
//         const { id: _, ...updatedata } = body;
//         const updatedItem = await prismaModel.update({
//           where: { id },
//           data: updatedata,
//         });
//         return { status: 200, data: updatedItem };
//       case 'DELETE':
//         await prismaModel.delete({ where: { id } });
//         return { status: 200, data: { success: true } };
//       default:
//         return { status: 405, data: { error: 'Method not allowed' } };
//     }
//   } catch (error) {
//     console.error('Database error:', error);
//     return { status: 500, data: { error: 'Failed to perform operation' } };
//   }
// }



// export default dbHandler



// // const result = await dbHandler({
// //   model: 'users',
// //   method: 'GET',
// // });

// // console.log(result);



================================================================================
LOCATION: app\api\cart\route.tsx
================================================================================

"use server"
import { PrismaClient } from '@prisma/client';
import { NextRequest } from 'next/server';
import bcrypt from 'bcrypt';

const prisma = new PrismaClient();



export async function GET(req: NextRequest) {

  const { searchParams } = new URL(req.url);
  
  // Destructure and provide defaults
  const model = searchParams.get('model') || null;
  const id = searchParams.get('id') || null;
  const body = searchParams.get('body') || null;

  const { method } = req; 
  console.log("in db handler",model, id, method, body)


  const prismaModel = prisma.cart;

  
  if (id == null){
    try {
      const items = await prismaModel.findMany();
      return new Response(JSON.stringify(items), {
        status: 200,
        headers: { 'Content-Type': 'application/json' },
      });
    } catch (error) {
      console.error('Database error:', error);
      return new Response(
        JSON.stringify({ error: 'Failed to fetch items' }),
        { status: 405, headers: { 'Content-Type': 'application/json' } }
      );
    }
  }else{
    try {
        const item = await prismaModel.findUnique({
          where: { id },
        });

        if (!item) return new Response(
          JSON.stringify({ error: 'Document not found' }),
          { status: 405, headers: { 'Content-Type': 'application/json' } }
        );

        return new Response(JSON.stringify(item), {
          status: 200,
          headers: { 'Content-Type': 'application/json' },
        });
      } catch (error) {
        console.error('Database error:', error);
        return new Response(
          JSON.stringify({ error: 'Failed to fetch items' }),
          { status: 405, headers: { 'Content-Type': 'application/json' } }
        );
      }
  }
}



export async function POST(req: NextRequest) {

  const { searchParams } = new URL(req.url);
  // const formData = await req.formData
  // const file = formData.
  
  // Destructure and provide defaults
  // const id = searchParams.get('id') || null;
  // const body = searchParams.get('body') || null;

  // Parse JSON body
  let body = null;
  const {userId, cartItems}=body
  try {
    body = await req.json(); // This reads the JSON payload
  } catch (err) {
    return new Response('Invalid JSON', { status: 400 });
  }

  const { method } = req; 
  console.log("in cart db handler", method, body)



  const prismaModel = prisma.cart

  
  try {
    const data = body;

    console.log("form body:", data)
    //const newItem = await prismaModel.create({
    //  data,
    //});
   const cart = await prisma.cart.create({
    data: {
      user: { connect: { id: userId } },
      status: 'pending',
      total: 0, // You might calculate this based on items
      products: {
        create: cartItems.map(item => ({
          quantity: item.quantity,
          product: { connect: { id: item.productId } },
        })),
      },
    },
    include: {
      products: true, // Include created cart items in response
    },
  });

    return new Response(JSON.stringify(cart), {
      status: 200,
      headers: { 'Content-Type': 'application/json' },
    });
  } catch (error) {
    console.error('Database error:', error);
    return new Response(
      JSON.stringify({ error: 'Failed to POST items' }),
      { status: 405, headers: { 'Content-Type': 'application/json' } }
    );
  }

}




export async function PUT(req: NextRequest) {

  const { searchParams } = new URL(req.url);
  
    // Destructure and provide defaults
    const model = searchParams.get('model') || null;
    const id = searchParams.get('id') || null;
    // const body = searchParams.get('body') || null;
  
    // Parse JSON body
    let body = null;
    try {
      body = await req.json(); // This reads the JSON payload
    } catch (err) {
      return new Response('Invalid JSON', { status: 400 });
    }

  const { method } = req; 
  console.log("in db handler",model, id, method, body)


  const prismaModel = prisma.cart;

    // âœï¸ Update Object
  try {
    const { id, ...updatedata } = body;
    console.log("id removed from :", updatedata)
    const updatedItem = await prismaModel.update({
      where: {id},
      data: updatedata,
    });

    return new Response(JSON.stringify(updatedItem), {
      status: 200,
      headers: { 'Content-Type': 'application/json' },
    });
  } catch (error) {
    console.error('Database update error:', error);
    return new Response(
      JSON.stringify({ error: 'Failed to UPDATE/PUT item' }),
      { status: 405, headers: { 'Content-Type': 'application/json' } }
    );
  }

}




export async function DELETE(req: NextRequest) {

  const { searchParams } = new URL(req.url);
  
  // Destructure and provide defaults
  const model = searchParams.get('model') || null;
  const id = searchParams.get('id') || null;
  console.log("in db handler",model, id)


  const modelMap = {
    //ministries: prisma.ministry,
    cart: prisma.cart,
    cartItem: prisma.cartItem,
    category: prisma.category,
    coupon: prisma.coupon,
    featuredProduct: prisma.featuredProduct,
    notification: prisma.notification,
    payment: prisma.payment,
    post: prisma.post,
    product: prisma.product,
    refund: prisma.refund,
    review: prisma.review,
    shippingAddress: prisma.shippingAddress,
    stock: prisma.stock,
    user: prisma.user,
  };

  const prismaModel = modelMap[model];

  if (!prismaModel) {
    console.log("in prisma model check function")
    return new Response(JSON.stringify({message : "invalid model"}), {
      status: 400,
      headers: { 'Content-Type': 'application/json' },
    });
  }

    // âŒ Delete Object
  try {
    await prismaModel.delete({
      where: { id },
    });
    return new Response(JSON.stringify({success : true}), {
      status: 200,
      headers: { 'Content-Type': 'application/json' },
    });
  } catch (error) {
    console.error('Database DELETE error:', error);
    return new Response(
      JSON.stringify({ error: 'Failed to DELETE items' }),
      { status: 405, headers: { 'Content-Type': 'application/json' } }
    );
  }
}


































================================================================================
LOCATION: app\api\dbhandler\function.ts
================================================================================


import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const modelMap = {
  //ministries: prisma.ministry,
  cart: prisma.cart,
  cartItem: prisma.cartItem,
  category: prisma.category,
  coupon: prisma.coupon,
  featuredProduct: prisma.featuredProduct,
  notification: prisma.notification,
  payment: prisma.payment,
  post: prisma.post,
  product: prisma.product,
  refund: prisma.refund,
  review: prisma.review,
  shippingAddress: prisma.shippingAddress,
  stock: prisma.stock,
  user: prisma.user,
};

async function dbHandler({
  model = null,
  id = null,
  body = null,
  method,
  profileImage = false,
}: {
  model: any;
  id?: string;
  body?: any;
  method: 'GET' | 'POST' | 'PUT' | 'DELETE';
  profileImage?: boolean;
}) {
  console.log("In dbhandler function");

  const prismaModel = modelMap[model];

  if (!prismaModel) {
    return { status: 400, data: { message: 'Invalid model' } };
  }

  try {
    switch (method) {
      case 'GET':
        if (id) {
          const item = await prismaModel.findUnique({ where: { id } });
          if (!item) {
            return { status: 404, data: { error: 'Document not found' } };
          }
          return { status: 200, data: item };
        } else {
          const items = await prismaModel.findMany();
          return { status: 200, data: items };
        }
      case 'POST':
        const data = body;
        const newItem = await prismaModel.create({ data });
        if (profileImage && model === 'posts') {
          try {
            console.log("about to change user profile image")
            await prisma.user.update({
              where: { id: body.userId },
              data: { image: body.url },
            });
          } catch (error) {
            console.error('Database error:', error);
            return { status: 500, data: { error: 'Failed to update user profile image' } };
          }
        }
        return { status: 200, data: newItem };
      case 'PUT':
        const { _id, ...updatedata } = body;
        const updatedItem = await prismaModel.update({
          where: { id : _id },
          data: updatedata,
        });
        return { status: 200, data: updatedItem };
      case 'DELETE':
        await prismaModel.delete({ where: { id } });
        return { status: 200, data: { success: true } };
      default:
        return { status: 405, data: { error: 'Method not allowed' } };
    }
  } catch (error) {
    console.error('Database error:', error);
    return { status: 500, data: { error: 'Failed to perform operation' } };
  }
}

export default dbHandler;

// const result = await dbHandler({
//   model: 'posts',
//   method: 'POST',
//   body: {
//     // your post data
//   },
//   profileImage: true,
// });














// import { PrismaClient } from '@prisma/client';

// const prisma = new PrismaClient();

// const modelMap = {
//   ministries: prisma.ministry,
//   departments: prisma.department,
//   books: prisma.book,
//   users: prisma.user,
//   comments: prisma.comment,
//   likes: prisma.like,
//   billboards: prisma.billboard,
//   posts: prisma.post,
// };

// async function dbHandler({
//   model = null,
//   id = null,
//   body = null,
//   method,
// }: {
//   model: any;
//   id?: string;
//   body?: any;
//   method: 'GET' | 'POST' | 'PUT' | 'DELETE';
// }) {

//     console.log("In dbhandler function")
//   const prismaModel = modelMap[model];

//   if (!prismaModel) {
//     return { status: 400, data: { message: 'Invalid model' } };
//   }

//   try {
//     switch (method) {
//       case 'GET':
//         if (id) {
//           const item = await prismaModel.findUnique({ where: { id } });
//           if (!item) {
//             return { status: 404, data: { error: 'Document not found' } };
//           }
//           return { status: 200, data: item };
//         } else {
//           const items = await prismaModel.findMany();
//           return { status: 200, data: items };
//         }
//       case 'POST':
//         const data = body;
//         const newItem = await prismaModel.create({ data, });
//         return { status: 200, data: newItem };
//       case 'PUT':
//         const { id: _, ...updatedata } = body;
//         const updatedItem = await prismaModel.update({
//           where: { id },
//           data: updatedata,
//         });
//         return { status: 200, data: updatedItem };
//       case 'DELETE':
//         await prismaModel.delete({ where: { id } });
//         return { status: 200, data: { success: true } };
//       default:
//         return { status: 405, data: { error: 'Method not allowed' } };
//     }
//   } catch (error) {
//     console.error('Database error:', error);
//     return { status: 500, data: { error: 'Failed to perform operation' } };
//   }
// }



// export default dbHandler



// // const result = await dbHandler({
// //   model: 'users',
// //   method: 'GET',
// // });

// // console.log(result);


================================================================================
LOCATION: app\api\dbhandler\route.ts
================================================================================

"use server";

import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";
import bcrypt from "bcrypt";
import cloudinary from "cloudinary";

cloudinary.v2.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});

const prisma = new PrismaClient();

// Centralized model mapping
const modelMap: Record<string, any> = {
  cart: prisma.cart,
  cartItem: prisma.cartItem,
  category: prisma.category,
  coupon: prisma.coupon,
  featuredProduct: prisma.featuredProduct,
  notification: prisma.notification,
  payment: prisma.payment,
  post: prisma.post,
  product: prisma.product,
  refund: prisma.refund,
  review: prisma.review,
  shippingAddress: prisma.shippingAddress,
  stock: prisma.stock,
  user: prisma.user,
  deliveryFee: prisma.deliveryFee,
  visit: prisma.visit,
  message: prisma.message,
};

// =====================
// Utilities
// =====================
async function parseJson(req: NextRequest) {
  try {
    const json = await req.json();
    return typeof json === "object" && json !== null ? json : {};
  } catch {
    return {};
  }
}

async function handleUpload(file: File | string) {
  let dataURI = typeof file === "string" ? file : "";

  if (typeof file !== "string") {
    const buffer = await file.arrayBuffer();
    const b64 = Buffer.from(buffer).toString("base64");
    dataURI = `data:${file.type};base64,${b64}`;
  }

  const res = await cloudinary.v2.uploader.upload(dataURI, { resource_type: "auto" });
  return res;
}

function parseId(id: string | null, model: string) {
  if (!id) return null;
  // return ["user", "category", "product"].includes(model) ? id : Number(id);
  return id;
}


const DELIVERY_FEES_BY_STATE: Record<string, number> = {
  Kwara: 1000,

  Kogi: 2500,
  Niger: 3000,
  Oyo: 3000,
  Osun: 3000,

  Ogun: 3500,
  Ondo: 3500,
  Ekiti: 3500,
  Benue: 3500,
  Nasarawa: 3500,

  Lagos: 4000,
  FCT: 4000,
  Edo: 4000,

  Anambra: 4500,
  Enugu: 4500,
  Imo: 4500,
  Abia: 4500,
  Ebonyi: 4500,

  Delta: 4500,
  Rivers: 5000,
  Akwa_Ibom: 5500,
  Cross_River: 5500,
  Bayelsa: 5500,

  Kaduna: 4500,
  Kano: 5000,
  Katsina: 5000,
  Jigawa: 5000,
  Zamfara: 5000,
  Sokoto: 5500,
  Kebbi: 5500,

  Bauchi: 5500,
  Gombe: 5500,
  Adamawa: 6000,
  Taraba: 6000,
  Borno: 6500,
  Yobe: 6500,
};

const normalizeState = (state?: string | null): string | null => {
  if (!state) return null;
  return state.replace(/state/i, "").replace(/[-\s]/g, "_").trim();
};


// ==================== GET ====================
export async function GET(req: NextRequest) {
  const { searchParams } = new URL(req.url);

  const model = searchParams.get("model");
  const id = parseId(searchParams.get("id"), model || "");
  const searchQuery = searchParams.get("search")?.toLowerCase() || "";
  const categoryFilter = searchParams.get("category")?.toLowerCase() || "";
  const statusParam = searchParams.get("status"); // â† NEW

  if (!model || !modelMap[model]) {
    return NextResponse.json({ error: "Invalid model" }, { status: 400 });
  }

  const prismaModel = modelMap[model];

  // =====================
  // INCLUDE MAP
  // =====================
  const includeMap: Record<string, any> = {
    product: { category: true, stock: true, reviews: true },
    featuredProduct: {
      product: { include: { category: true, stock: true, reviews: true } },
    },
    review: {
      user: { select: { id: true, name: true, email: true, image: true } },
      product: true,
    },
    post: { author: true },
    cart: {
      products: {
        include: { product: true },
      },
      user: {
        select: { id: true, name: true, email: true },
      },
      payment: true,
    },
    user: {
      cart: true,
      reviews: true,
      addresses: true,
      post: true,
      notification: true,
    },
    category: { products: true },
    stock: { product: true },
    payment: { cart: true },
    refund: { cart: true },
    message: {
      user: { select: { id: true, name: true, email: true, image: true } },
    },
  };

  try {
    // =====================
    // SINGLE ITEM
    // =====================
    if (id) {
      if (model === "review") {
        const items = await prisma.review.findMany({
          where: { productId: id },
          include: includeMap.review,
        });
        return NextResponse.json(items);
      }

      const item = await prismaModel.findUnique({
        where: { id },
        include: includeMap[model],
      });

      if (!item) {
        return NextResponse.json(
          { error: "Document not found" },
          { status: 404 }
        );
      }

      return NextResponse.json(item);
    }

    // =====================
    // CART FILTERING (ðŸ”¥ FIX)
    // =====================
    // =====================
    // CART FILTERING (ðŸ”¥ FIX)
    // =====================
    if (model === "cart") {
      const where: any = {};

      if (statusParam) {
        const statuses = statusParam
          .split(",")
          .map(s => s.trim().toLowerCase());

        where.status = { in: statuses };
      }

      if (searchQuery) {
          where.OR = [
              { name: { contains: searchQuery, mode: 'insensitive' } },
              { user: { name: { contains: searchQuery, mode: 'insensitive' } } },
              { user: { email: { contains: searchQuery, mode: 'insensitive' } } },
              { user: { contact: { contains: searchQuery, mode: 'insensitive' } } },
              // Check id too just in case
              { id: { contains: searchQuery, mode: 'insensitive' } }
          ];
      }

      // If userId is passed via searchParam (often unrelated to text search)
      if (searchParams.get('userId')) {
         where.userId = searchParams.get('userId');
      }

      const carts = await prisma.cart.findMany({
        where,
        include: includeMap.cart,
        orderBy: { createdAt: "desc" },
      });

      return NextResponse.json(carts);
    }

    // =====================
    // PRODUCT SEARCH
    // =====================
    if (model === "product") {
      const where: any = {};

      if (searchQuery || categoryFilter) {
        where.OR = [];

        if (searchQuery) {
          where.OR.push({
            name: { contains: searchQuery, mode: "insensitive" },
          });
        }

        if (categoryFilter) {
          where.OR.push({
            category: {
              name: { contains: categoryFilter, mode: "insensitive" },
            },
          });
        }
      }

      const products = await prisma.product.findMany({
        where,
        include: includeMap.product,
        take: 50,
      });

      return NextResponse.json(products);
    }

    // =====================
    // DEFAULT FETCH ALL
    // =====================
    const items = await prismaModel.findMany({
      include: includeMap[model],
      orderBy: { createdAt: "desc" },
    });

    return NextResponse.json(items);
  } catch (error) {
    console.error("Database GET error:", error);
    return NextResponse.json(
      { error: "Failed to fetch items" },
      { status: 500 }
    );
  }
}


// ==================== POST ====================
export async function POST(req: NextRequest) {
  const { searchParams } = new URL(req.url);
  const model = searchParams.get("model");

  if (!model || !modelMap[model]) {
    return NextResponse.json({ error: "Invalid model" }, { status: 400 });
  }

  const prismaModel = modelMap[model];
  const contentType = req.headers.get("content-type") || "";
  let body: Record<string, any> = {};

  try {
    /**
     * =========================
     * BODY PARSING (JSON + FORM)
     * =========================
     */
    if (
      contentType.includes("multipart/form-data") ||
      contentType.includes("application/x-www-form-urlencoded")
    ) {
      const formData = await req.formData();
      const file = formData.get("file") as File | null;

      // Handle file upload
      if (file) {
        const uploadRes = await handleUpload(file);

        if (model === "category" || model === "user") {
          body.image = uploadRes.url;
        }

        if (model === "product") {
          body.images = [uploadRes.url];
        }
      }

      // Copy remaining fields
      formData.forEach((value, key) => {
        if (key === "file") return;
        body[key] = value;
      });
    }
    else if (contentType.includes("application/json")) {
      body = await parseJson(req);
    }
    else {
      return NextResponse.json(
        { error: "Unsupported Content-Type" },
        { status: 415 }
      );
    }

    /**
     * =========================
     * CART / PAYMENT CREATION
     * =========================
     */
    if (model === "cart") {
      const { userId, items, deliveryAddressId } = body;

      if (!userId || !items?.length || !deliveryAddressId) {
        return NextResponse.json(
          { error: "Missing checkout data" },
          { status: 400 }
        );
      }

      const productIds = items.map((i: any) => i.productId);
      const dbProducts = await prisma.product.findMany({
        where: { id: { in: productIds } },
        select: { id: true, price: true },
      });

      let subtotal = 0;
      for (const item of items) {
        const product = dbProducts.find(p => p.id === item.productId);
        if (!product) continue;
        subtotal += product.price * item.quantity;
      }

      const address = await prisma.shippingAddress.findUnique({
        where: { id: deliveryAddressId },
        select: { country: true, state: true, city: true },
      });

      let deliveryFee = 6500;

      if (address) {
        // 1. Try City specific
        const feeCity = await prisma.deliveryFee.findFirst({
          where: { country: address.country, state: address.state, city: address.city },
        });

        if (feeCity) {
          deliveryFee = feeCity.price;
        } else {
          // 2. Try State specific
          const feeState = await prisma.deliveryFee.findFirst({
            where: { country: address.country, state: address.state, city: null },
          });

          if (feeState) {
            deliveryFee = feeState.price;
          } else {
            // 3. Try Country specific
            const feeCountry = await prisma.deliveryFee.findFirst({
              where: { country: address.country, state: null, city: null },
            });

            if (feeCountry) {
              deliveryFee = feeCountry.price;
            } else {
              // 3b. Try Region/Group Specific (Fallback if no country match)
              // Assumption: We check if any Defined Region matches the user's country? 
              // Or rather, if the user's country is part of a region? 
              // Without a Country->Region map table, we can only check if the address.country
              // matches a 'region' field entry in DeliveryFee? 
              // No, wait. The user selects "United Kingdom" as country. 
              // If Admin sets Region="United Kingdom", Price=X.
              // We should search where region = address.country OR region = 'Europe' (if we knew).
              // For now, let's strictly check if the country name is used as a region key.

              const feeRegion = await prisma.deliveryFee.findFirst({
                where: { region: address.country }
              });

              if (feeRegion) {
                deliveryFee = feeRegion.price;
              } else {
                // 4. Fallback to hardcoded for Nigeria states if applicable
                const normalizedState = normalizeState(address.state);
                if (normalizedState && DELIVERY_FEES_BY_STATE[normalizedState]) {
                  deliveryFee = DELIVERY_FEES_BY_STATE[normalizedState];
                }
              }
            }
          }
        }
      }

      const total = subtotal + deliveryFee;

      const cart = await prisma.cart.create({
        data: {
          userId,
          total,
          deliveryFee,
          status: "pending",
          name: body.name, // optional name
          contact: body.contact, // optional contact
          products: {
            create: items.map((i: any) => ({
              productId: i.productId,
              quantity: i.quantity,
            })),
          },
        },
        include: { products: true },
      });

      return NextResponse.json(cart);
    }

    /**
     * =========================
     * USER PASSWORD HASHING
     * =========================
     */
    if (model === "user" && body.password) {
      const salt = await bcrypt.genSalt();
      body.password = await bcrypt.hash(body.password, salt);
    }

    if (body.price) body.price = parseFloat(body.price);

    console.log("Creating new", model, "with data:", body);

    const newItem = await prismaModel.create({ data: body });
    return NextResponse.json(newItem);
  } catch (error) {
    console.error("Database POST error:", error);
    return NextResponse.json(
      { error: "Failed to create item" },
      { status: 500 }
    );
  }
}




// ==================== PUT ====================
export async function PUT(req: NextRequest) {
  const { searchParams } = new URL(req.url);
  const model = searchParams.get("model");

  if (!model || !modelMap[model]) {
    return NextResponse.json({ error: "Invalid model" }, { status: 400 });
  }

  const prismaModel = modelMap[model];
  const contentType = req.headers.get("content-type") || "";
  const body: Record<string, any> = {};

  try {
    // =========================
    // FORM DATA
    // =========================
    if (
      contentType.includes("multipart/form-data") ||
      contentType.includes("application/x-www-form-urlencoded")
    ) {
      const formData = await req.formData();
      const file = formData.get("file") as File | null;

      // handle file upload only if present
      if (file instanceof File && file.size > 0) {
        const uploadRes = await handleUpload(file);

        if (model === "category" || model === "user") {
          body.image = uploadRes.url;
        }

        if (model === "product") {
          body.images = [uploadRes.url];
        }
      }

      // copy remaining fields
      formData.forEach((value, key) => {
        if (key === "file") return;
        body[key] = value;
      });
    }

    // =========================
    // JSON BODY
    // =========================
    else if (contentType.includes("application/json")) {
      const json = await req.json();
      Object.assign(body, json);

      if (json.image && (model === "user" || model === "category")) {
        body.image = json.image;
      }

      if (json.images && model === "product") {
        body.images = json.images;
      }
    } else {
      return NextResponse.json(
        { error: "Unsupported Content-Type" },
        { status: 415 }
      );
    }

    // =========================
    // ID RESOLUTION
    // =========================
    const id = parseId(body.id || searchParams.get("id"), model);
    if (!id) {
      return NextResponse.json(
        { error: "Missing or invalid id" },
        { status: 400 }
      );
    }

    // remove id from update payload
    const { id: _ignore, ...updatedData } = body;

    // =========================
    // TYPE FIXES (CRITICAL)
    // =========================
    if (updatedData.price) {
      updatedData.price = parseFloat(updatedData.price);
    }

    // =========================
    // CART PAYLOAD UPDATES
    // =========================
    if (model === "cart") {
        // Allow updating name and contact if provided
        // Logic handled by default update below unless it is status/payment specific
        
        // However, if it IS status/payment specific, we enter the block below.
        // We should merge logic or let the block below handle strict status/payment updates.
        // If the user is just renaming (body only has name), it skips the big block below.
    }

    if (!updatedData || Object.keys(updatedData).length === 0) {
      return NextResponse.json(
        { error: "Nothing to update" },
        { status: 400 }
      );
    }

    // =========================
    // UPDATE
    // =========================
    // =========================
    // CART PAYMENT UPDATE
    // =========================
    if (model === "cart" && (body.status || body.payment || body.total)) {
      // Fetch existing cart to check status
      const existingCart = await prisma.cart.findUnique({
        where: { id },
        select: { status: true },
      });

      const updatePayload: any = {};
      if (body.status) updatePayload.status = body.status;
      // Only allow total update if cart is still pending (not paid/completed)
      if (body.total && existingCart?.status === "pending") updatePayload.total = body.total;
      
      // Also allow updating name/contact here if passed
      if (body.name) updatePayload.name = body.name;
      if (body.contact) updatePayload.contact = body.contact;

      if (Object.keys(updatePayload).length > 0 || body.payment) {
          const updatedCart = await prisma.cart.update({
            where: { id },
            data: {
              ...updatePayload,
              ...(body.payment && {
                  payment: {
                    upsert: {
                      create: body.payment,
                      update: body.payment,
                    },
                  },
              })
            },
            include: {
                user: { include: { addresses: true } },
                products: { include: { product: true } },
                payment: true
            }
          });
          
          // Send email if paid
          if (body.status === 'paid' && updatedCart.user?.email && body.adminConfirmed) {
              const { sendPaymentConfirmationEmail } = await import('@/lib/nodemailer');
              // Use cart contact, then user contact, then address phone
              const contact = updatedCart.contact || updatedCart.user.contact || updatedCart.user.addresses?.[0]?.phone || 'N/A';
              
              const address = updatedCart.user.addresses?.[0];
              const addressStr = address 
                  ? `${address.address}, ${address.city}, ${address.state}, ${address.country}`
                  : "Address on file";

              await sendPaymentConfirmationEmail(updatedCart.user.email, {
                  customerName: updatedCart.user.name || 'Customer',
                  contact: contact,
                  address: addressStr,
                  products: updatedCart.products,
                  total: updatedCart.total,
                  deliveryFee: updatedCart.deliveryFee,
                  orderId: updatedCart.id
              });
          }

          return NextResponse.json(updatedCart);
      }
    }

    const updatedItem = await prismaModel.update({
      where: { id },
      data: updatedData,
    });

    return NextResponse.json(updatedItem);
  } catch (error) {
    console.error("Database PUT error:", error);
    return NextResponse.json(
      { error: "Failed to update item" },
      { status: 500 }
    );
  }
}


// ==================== DELETE ====================
export async function DELETE(req: NextRequest) {
  const { searchParams } = new URL(req.url);
  const model = searchParams.get("model");
  const id = `${parseId(searchParams.get("id"), model || "")}`;
  console.log("DELETE request for model:", model, "id:", id, 'search params id', searchParams.get("id"));

  if (!model || !modelMap[model]) return NextResponse.json({ error: "Invalid model" }, { status: 400 });
  if (!id) return NextResponse.json({ error: "Missing id" }, { status: 400 });

  const prismaModel = modelMap[model];

  try {
    await prismaModel.delete({ where: { id } });
    return NextResponse.json({ success: true });
  } catch (error) {
    console.error("Database DELETE error:", error);
    return NextResponse.json({ error: "Failed to delete item" }, { status: 500 });
  }
}



================================================================================
LOCATION: app\api\file\cloudinary.ts
================================================================================

const cloudinary = require("cloudinary").v2;

cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});


export async function handleUpload(file) {
  const res = await cloudinary.uploader.upload(file, {
    resource_type: "auto",
  });
  return res;
}


================================================================================
LOCATION: app\api\file\image\route.ts
================================================================================


import { NextRequest, NextResponse } from 'next/server';
import multer from "multer";
import { handleUpload } from "../cloudinary";
import axios from 'axios';
import dbHandler from '../../dbhandler/function';



export async function POST(req , res) {
  const Formdata = await req.formData();

  console.log("about to upload image", Formdata)
  
  const file = Formdata.get("file")
  if (file.size > (300 * 1024) && Formdata.get("title") === 'profile image'){
    return NextResponse.json({"error" : "file greater 300kb"}, {status : 413})
  }
  const buffer = await file.arrayBuffer()
  const b64 = Buffer.from(buffer).toString("base64");
  // console.log("buffer b64", b64)
  let dataURI = "data:" + file.type + ";base64," + b64;
  const cldRes = await handleUpload(dataURI);

  // const postRes = await axios.post(`${process.env.NEXT_PUBLIC_SITE_URL}/api/dbhandler?model=posts`,
  //   {
  //     description : Formdata.get("description"),
  //     type : Formdata.get("type"),
  //     userId : Formdata.get("userId"),
  //     title : Formdata.get("title"),
  //     url : cldRes.url,
  //   }
  // );

  const postRes = await dbHandler({
    model: 'posts',
    method: 'POST',
    profileImage : Formdata.get("profileImage")==="true",
    body: {
      description: Formdata.get("description"),
      type: Formdata.get("type"),
      userId: Formdata.get("userId"),
      title: Formdata.get("title"),
      for: Formdata.get("for"),
      url: cldRes.url,
      ministryId: "684f74ca135dd6d0efeab37d"
    },
  });
  

  console.log("Post Response", postRes)

  return NextResponse.json(postRes.data, { status: 200 });

  // cloudinary response {  work on cloudinary environment variable
  //   asset_id: 'a51be13d7609010625bdd7b5d8434bc6',
  //   public_id: 'v1xu59hejkllgvk7uvgv',
  //   version: 1750991876,
  //   version_id: '52d6e5a55fee379c994b83915e86a357',
  //   signature: '9dbc6e90d77375b186a14a3596a2fce8cf9ffa8a',
  //   width: 1080,
  //   height: 864,
  //   format: 'jpg',
  //   resource_type: 'image',
  //   created_at: '2025-06-27T02:37:56Z',
  //   tags: [],
  //   bytes: 89980,
  //   type: 'upload',
  //   etag: 'a00c074199d6dc33f71c45f16ca52870',
  //   placeholder: false,
  //   url: 'http://res.cloudinary.com/dc5khnuiu/image/upload/v1750991876/v1xu59hejkllgvk7uvgv.jpg',
  //   secure_url: 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1750991876/v1xu59hejkllgvk7uvgv.jpg',
  //   asset_folder: '',
  //   display_name: 'v1xu59hejkllgvk7uvgv',
  //   api_key: '474889658884221'
  // }


  
  // try {
  //   await runMiddleware(req, res, myUploadMiddleware);
  //   const Formdata = await req.formData();
  //   console.log("about to upload image", Formdata, Formdata.image.arrayBuffer())
  //   const b64 = Buffer.from(Formdata.file.arrayBuffer()).toString("base64");
  //   let dataURI = "data:" + req.file.mimetype + ";base64," + b64;
  //   const cldRes = await handleUpload(dataURI);
  //   return NextResponse.json(cldRes);
  // } catch (error) {
  //   console.log(error);
  //   return NextResponse.json({ message: error.message });
  // }
  
};























// export const config = {
//   api: {
//     bodyParser: false,
//   },
// };







// const storage = multer.memoryStorage();
// const upload = multer({ storage });
// const myUploadMiddleware = upload.single("file");

// function runMiddleware(req, res, fn) {
//   return new Promise((resolve, reject) => {
//     fn(req, res, (result) => {
//       if (result instanceof Error) {
//         return reject(result);
//       }
//       return resolve(result);
//     });
//   });
// }






// export default handler;
// ```

// This API route uses Multer to parse the file from the request body and then uploads it to Cloudinary using the `handleUpload` function. The `runMiddleware` function is used to run the Multer middleware and handle any errors that may occur.

// You can test this API route by sending a POST request with a file attached to the `sample_file` field. The response will contain the URL of the uploaded image.

// Note that you'll need to set the `CLOUD_NAME`, `API_KEY`, and `API_SECRET` environment variables to your Cloudinary credentials.
// [6/16, 11:36] Ileri_Oluwa: In a next API file route containing GET, POST,PUT,DELETE routes separately 

// How do I disable body parser for only POST and PUT  route
// [6/16, 11:37] Meta AI: To disable body parser for only specific routes (in this case, POST and PUT) in a Next.js API route file, you can use the `config` object with the `api` property set to `{ bodyParser: false }` for those specific routes. However, this configuration applies to the entire API route file.

// One way to achieve this is to separate the routes that require body parsing into different files. For example, you could have one file for GET and DELETE routes, and another file for POST and PUT routes that require `bodyParser: false`.

// If you want to keep all routes in the same file, you can manually parse the request body for POST and PUT requests using a library like `body-parser` or `multer` only when necessary.

// Here's an example of how you can structure your API route file:

// ```





















// import { NextRequest, NextResponse } from 'next/server';
// import multer from 'multer';

// // Initialize Multer
// const storage = multer.memoryStorage();
// const upload = multer({ storage });


// export async function POST(req) {
//   try {
//     // Use Multer middleware to parse the request body
//     const myUploadMiddleware = upload.single('sample_file');
//     await new Promise((resolve, reject) => {
//       myUploadMiddleware(req, {} as any, (result) => {
//         if (result instanceof Error) {
//           reject(result);
//         } else {
//           resolve(result);
//         }
//       });
//     });

//     // Handle file upload and return response
//     const file = req.file;
//     // Upload file to Cloudinary or handle it as needed
//     return NextResponse.json({ message: 'File uploaded successfully' });
//   } catch (error) {
//     return NextResponse.json({ message: 'Error uploading file' }, { status: 500 });
//   }
// }

// export async function PUT(req) {
//   // Similar implementation as POST
// }

// export async function DELETE(req) {
//   // Handle DELETE request
// }
// ```

// In this example, we're manually using the Multer middleware for the POST and PUT routes. Note that we're passing an empty object (`{}`) as the response object to the Multer middleware, as it's required but not used in this context.

// Keep in mind that you'll need to handle the request body parsing manually for the POST and PUT routes, while the GET and DELETE routes will still use the default body parsing behavior.


================================================================================
LOCATION: app\api\login\route.ts
================================================================================

import { NextApiRequest, NextApiResponse } from 'next';
import connect from '@/server/config/mongodb';
import User from '@/server/db/mongodb/models/users';
import { NextResponse } from 'next/server';
import { Types } from 'mongoose';
import { signIn } from "@/server/auth.ts";



export const POST = async (req: Request) => {
    try{
      const body =await req.json()
      const {email, password} = body
      console.log(email)

    if (!email && !password) {
         console.log("invalid account")
         return
    }

    try{
        await signIn("credentials", {
            // redirect: false,
            // callbackUrl: "/account",
            email,
            password,
        })
    } catch (error) {
        console.log("credentials sign in error")
    }

      return new NextResponse(JSON.stringify({message : "signed in user"}), {status: 200})
    } catch (error) {
      return new NextResponse(JSON.stringify({error : error}), {status: 500})
    }
  }


================================================================================
LOCATION: app\api\payment\route.ts
================================================================================

"use server";

import { NextRequest, NextResponse } from "next/server";
import crypto from "crypto";
import { PrismaClient } from "@prisma/client";
import axios from "axios";
import { sendOrderNotification } from "@/lib/nodemailer";

const prisma = new PrismaClient();

function generateTxRef() {
  return `TX-${Date.now()}-${crypto.randomBytes(4).toString("hex")}`;
}

export async function POST(req: NextRequest) {
  try {
    const url = new URL(req.url);
    const action = url.searchParams.get("action"); // ?action=confirm
    const body = await req.json();

    // ---------------- CONFIRM PAYMENT ----------------
    // CONFIRM PAYMENT
    if (action === "confirm") {
      const { tx_ref } = body;
      if (!tx_ref)
        return NextResponse.json({ error: "tx_ref is required" }, { status: 400 });

      const FLW_SECRET_KEY = process.env.FLW_SECRET_KEY;

      // Fetch transaction from FlutterWave
      const fwRes = await axios.get(
        `https://api.flutterwave.com/v3/transactions?tx_ref=${tx_ref}`,
        { headers: { Authorization: `Bearer ${FLW_SECRET_KEY}` } }
      );

      const data = fwRes.data?.data?.[0];

      if (!data)
        return NextResponse.json({ success: false, message: "Transaction not found" });

      if (data.status === "successful") {
        // Find payment by tx_ref
        const payment = await prisma.payment.findUnique({ where: { tx_ref } });

        if (payment) {
          // Mark cart as paid
          await prisma.cart.update({
            where: { id: payment.cartId },
            data: { status: "paid" },
          });
          // Send order notification
          // Sending to a test email as requested
          await sendOrderNotification(process.env.ORDER_RECEIVER_EMAIL, {
            tx_ref,
            amount: data.amount,
          });
          await sendOrderNotification('adepojuololade2020@gmail.com', {
            tx_ref,
            amount: data.amount,
          });
        }

        return NextResponse.json({ success: true, message: "Payment confirmed" });
      }

      return NextResponse.json({ success: false, message: "Payment not completed yet" });
    }


    // ---------------- INITIATE PAYMENT ----------------
    const { userId, items, cartId, deliveryFee = 0 } = body;

    if (!userId || !items?.length) {
      return NextResponse.json({ error: "Invalid payload" }, { status: 400 });
    }

    // Validate that user has contact field filled
    const user = await prisma.user.findUnique({ where: { id: userId } });
    if (!user) {
      return NextResponse.json({ error: "User not found" }, { status: 404 });
    }

    if (!user.contact || user.contact === "xxxx-xxx-xxxx") {
      return NextResponse.json({
        error: "Please update your contact information before checkout. Go to your account settings to add your phone number."
      }, { status: 400 });
    }

    // Calculate subtotal server-side
    const products = await prisma.product.findMany({
      where: { id: { in: items.map((i: any) => i.productId) } },
    });
    const subtotal = items.reduce((sum: number, item: any) => {
      const product = products.find((p) => p.id === item.productId);
      return sum + (product?.price || 0) * item.quantity;
    }, 0);

    // Add delivery fee to get total
    const total = subtotal + Number(deliveryFee);

    let cart;
    if (cartId) {
      const existingCart = await prisma.cart.findFirst({ where: { id: cartId, userId, status: "pending" } });
      if (!existingCart) return NextResponse.json({ error: "Cart not found or already processed" }, { status: 404 });

      await prisma.cartItem.deleteMany({ where: { cartId } });

      cart = await prisma.cart.update({
        where: { id: cartId },
        data: {
          total,
          deliveryFee: Number(deliveryFee),
          products: { create: items.map((i: any) => ({ productId: i.productId, quantity: i.quantity })) },
        },
      });
    } else {
      cart = await prisma.cart.create({
        data: {
          userId,
          total,
          deliveryFee: Number(deliveryFee),
          status: "pending",
          deliveryDate: new Date(),
          products: { create: items.map((i: any) => ({ productId: i.productId, quantity: i.quantity })) },
        },
      });
    }

    // Create payment record
    const tx_ref = generateTxRef();
    await prisma.payment.create({
      data: { cartId: cart.id, tx_ref, method: "flutterwave", amount: total },
    });

    return NextResponse.json({ cartId: cart.id, tx_ref, amount: total, currency: "NGN" });
  } catch (error) {
    console.error("Payment failed:", error);
    return NextResponse.json({ error: "Checkout failed" }, { status: 500 });
  }
}



================================================================================
LOCATION: app\api\product\function.ts
================================================================================


import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const modelMap = { 
  //ministries: prisma.ministry,
  cart: prisma.cart,
  cartItem: prisma.cartItem,
  category: prisma.category,
  coupon: prisma.coupon,
  featuredProduct: prisma.featuredProduct,
  notification: prisma.notification,
  payment: prisma.payment,
  post: prisma.post,
  product: prisma.product,
  refund: prisma.refund,
  review: prisma.review,
  shippingAddress: prisma.shippingAddress,
  stock: prisma.stock,
  user: prisma.user,
};

async function dbHandler({
  model = null,
  id = null,
  body = null,
  method,
  profileImage = false,
}: {
  model: any;
  id?: string;
  body?: any;
  method: 'GET' | 'POST' | 'PUT' | 'DELETE';
  profileImage?: boolean;
}) {
  console.log("In product dbhandler function");

  const prismaModel = modelMap[model];

  if (!prismaModel) {
    return { status: 400, data: { message: 'Invalid model' } };
  }

  try {
    switch (method) {
      case 'GET':
        if (id) {
          const item = await prismaModel.findUnique({ where: { id } });
          if (!item) {
            return { status: 404, data: { error: 'Document not found' } };
          }
          return { status: 200, data: item };
        } else {
          const items = await prismaModel.findMany();
          return { status: 200, data: items };
        }
      case 'POST':
        // const data = body;  Spicy, pepperish and groundnut yaji spice blend
        console.log('post product body:', body)
        const newItem = await prismaModel.create({//{ data }
            data: {
              description: body.description,
                name: body.name,
                categoryId: body.categoryId,
                category: body.category,
                price: parseFloat(body.price),
              // images: {
              //   push: body.url,
              // },
              images: [body.url],
            },
          } 
        );
        if (profileImage && model === 'posts') {
          try {
            console.log("about to change user profile image")
            await prisma.user.update({
              where: { id: body.userId },
              data: { image: body.url },
            });
          } catch (error) {
            console.error('Database error:', error);
            return { status: 500, data: { error: 'Failed to update user profile image' } };
          }
        }
        return { status: 200, data: newItem };
      case 'PUT':
        const { _id, ...updatedata } = body;
        const updatedItem = await prismaModel.update({
          where: { id : _id },
          data: updatedata,
        });
        return { status: 200, data: updatedItem };
      case 'DELETE':
        await prismaModel.delete({ where: { id } });
        return { status: 200, data: { success: true } };
      default:
        return { status: 405, data: { error: 'Method not allowed' } };
    }
  } catch (error) {
    console.error('Database error:', error);
    return { status: 500, data: { error: 'Failed to perform operation' } };
  }
}

export default dbHandler;

// const result = await dbHandler({
//   model: 'posts',
//   method: 'POST',
//   body: {
//     // your post data
//   },
//   profileImage: true,
// });














// import { PrismaClient } from '@prisma/client';

// const prisma = new PrismaClient();

// const modelMap = {
//   ministries: prisma.ministry,
//   departments: prisma.department,
//   books: prisma.book,
//   users: prisma.user,
//   comments: prisma.comment,
//   likes: prisma.like,
//   billboards: prisma.billboard,
//   posts: prisma.post,
// };

// async function dbHandler({
//   model = null,
//   id = null,
//   body = null,
//   method,
// }: {
//   model: any;
//   id?: string;
//   body?: any;
//   method: 'GET' | 'POST' | 'PUT' | 'DELETE';
// }) {

//     console.log("In dbhandler function")
//   const prismaModel = modelMap[model];

//   if (!prismaModel) {
//     return { status: 400, data: { message: 'Invalid model' } };
//   }

//   try {
//     switch (method) {
//       case 'GET':
//         if (id) {
//           const item = await prismaModel.findUnique({ where: { id } });
//           if (!item) {
//             return { status: 404, data: { error: 'Document not found' } };
//           }
//           return { status: 200, data: item };
//         } else {
//           const items = await prismaModel.findMany();
//           return { status: 200, data: items };
//         }
//       case 'POST':
//         const data = body;
//         const newItem = await prismaModel.create({ data, });
//         return { status: 200, data: newItem };
//       case 'PUT':
//         const { id: _, ...updatedata } = body;
//         const updatedItem = await prismaModel.update({
//           where: { id },
//           data: updatedata,
//         });
//         return { status: 200, data: updatedItem };
//       case 'DELETE':
//         await prismaModel.delete({ where: { id } });
//         return { status: 200, data: { success: true } };
//       default:
//         return { status: 405, data: { error: 'Method not allowed' } };
//     }
//   } catch (error) {
//     console.error('Database error:', error);
//     return { status: 500, data: { error: 'Failed to perform operation' } };
//   }
// }



// export default dbHandler



// // const result = await dbHandler({
// //   model: 'users',
// //   method: 'GET',
// // });

// // console.log(result);



================================================================================
LOCATION: app\api\product\route.ts
================================================================================


import { NextRequest, NextResponse } from 'next/server';
// import multer from "multer";
// import axios from 'axios';
import dbHandler from './function';
import { handleUpload } from '../file/cloudinary';



export async function POST(req , res) {
  const Formdata = await req.formData();

  console.log("about to post product", Formdata)
  
  const file = Formdata.get("file")
  if (file.size > (300 * 1024) && Formdata.get("title") === 'profile image'){
    return NextResponse.json({"error" : "file greater 300kb"}, {status : 413})
  }
  const buffer = await file.arrayBuffer()
  const b64 = Buffer.from(buffer).toString("base64");
  // console.log("buffer b64", b64)
  const dataURI = "data:" + file.type + ";base64," + b64;
  const cldRes = await handleUpload(dataURI);

  // const postRes = await axios.post(`${process.env.NEXT_PUBLIC_SITE_URL}/api/dbhandler?model=posts`,
  //   {
  //     description : Formdata.get("description"),
  //     type : Formdata.get("type"),
  //     userId : Formdata.get("userId"),
  //     title : Formdata.get("title"),
  //     url : cldRes.url,
  //   }
  // );

  const postRes = await dbHandler({
    model: 'product',
    method: 'POST',
    // profileImage : Formdata.get("productImage")==="true",
    body: {
      description: Formdata.get("description"),
      name: Formdata.get("name"),
      categoryId: Formdata.get("categoryId"),
      //category: Formdata.get("category"),
      price: parseFloat(Formdata.get("price")),
      url: cldRes.url,
    },
  });
  

  console.log("Post Response", postRes)

  return NextResponse.json(postRes.data, { status: 200 });

  // cloudinary response {  work on cloudinary environment variable
  //   asset_id: 'a51be13d7609010625bdd7b5d8434bc6',
  //   public_id: 'v1xu59hejkllgvk7uvgv',
  //   version: 1750991876,
  //   version_id: '52d6e5a55fee379c994b83915e86a357',
  //   signature: '9dbc6e90d77375b186a14a3596a2fce8cf9ffa8a',
  //   width: 1080,
  //   height: 864,
  //   format: 'jpg',
  //   resource_type: 'image',
  //   created_at: '2025-06-27T02:37:56Z',
  //   tags: [],
  //   bytes: 89980,
  //   type: 'upload',
  //   etag: 'a00c074199d6dc33f71c45f16ca52870',
  //   placeholder: false,
  //   url: 'http://res.cloudinary.com/dc5khnuiu/image/upload/v1750991876/v1xu59hejkllgvk7uvgv.jpg',
  //   secure_url: 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1750991876/v1xu59hejkllgvk7uvgv.jpg',
  //   asset_folder: '',
  //   display_name: 'v1xu59hejkllgvk7uvgv',
  //   api_key: '474889658884221'
  // }


  
  // try {
  //   await runMiddleware(req, res, myUploadMiddleware);
  //   const Formdata = await req.formData();
  //   console.log("about to upload image", Formdata, Formdata.image.arrayBuffer())
  //   const b64 = Buffer.from(Formdata.file.arrayBuffer()).toString("base64");
  //   let dataURI = "data:" + req.file.mimetype + ";base64," + b64;
  //   const cldRes = await handleUpload(dataURI);
  //   return NextResponse.json(cldRes);
  // } catch (error) {
  //   console.log(error);
  //   return NextResponse.json({ message: error.message });
  // }
  
};























// export const config = {
//   api: {
//     bodyParser: false,
//   },
// };







// const storage = multer.memoryStorage();
// const upload = multer({ storage });
// const myUploadMiddleware = upload.single("file");

// function runMiddleware(req, res, fn) {
//   return new Promise((resolve, reject) => {
//     fn(req, res, (result) => {
//       if (result instanceof Error) {
//         return reject(result);
//       }
//       return resolve(result);
//     });
//   });
// }






// export default handler;
// ```

// This API route uses Multer to parse the file from the request body and then uploads it to Cloudinary using the `handleUpload` function. The `runMiddleware` function is used to run the Multer middleware and handle any errors that may occur.

// You can test this API route by sending a POST request with a file attached to the `sample_file` field. The response will contain the URL of the uploaded image.

// Note that you'll need to set the `CLOUD_NAME`, `API_KEY`, and `API_SECRET` environment variables to your Cloudinary credentials.
// [6/16, 11:36] Ileri_Oluwa: In a next API file route containing GET, POST,PUT,DELETE routes separately 

// How do I disable body parser for only POST and PUT  route
// [6/16, 11:37] Meta AI: To disable body parser for only specific routes (in this case, POST and PUT) in a Next.js API route file, you can use the `config` object with the `api` property set to `{ bodyParser: false }` for those specific routes. However, this configuration applies to the entire API route file.

// One way to achieve this is to separate the routes that require body parsing into different files. For example, you could have one file for GET and DELETE routes, and another file for POST and PUT routes that require `bodyParser: false`.

// If you want to keep all routes in the same file, you can manually parse the request body for POST and PUT requests using a library like `body-parser` or `multer` only when necessary.

// Here's an example of how you can structure your API route file:

// ```





















// import { NextRequest, NextResponse } from 'next/server';
// import multer from 'multer';

// // Initialize Multer
// const storage = multer.memoryStorage();
// const upload = multer({ storage });


// export async function POST(req) {
//   try {
//     // Use Multer middleware to parse the request body
//     const myUploadMiddleware = upload.single('sample_file');
//     await new Promise((resolve, reject) => {
//       myUploadMiddleware(req, {} as any, (result) => {
//         if (result instanceof Error) {
//           reject(result);
//         } else {
//           resolve(result);
//         }
//       });
//     });

//     // Handle file upload and return response
//     const file = req.file;
//     // Upload file to Cloudinary or handle it as needed
//     return NextResponse.json({ message: 'File uploaded successfully' });
//   } catch (error) {
//     return NextResponse.json({ message: 'Error uploading file' }, { status: 500 });
//   }
// }

// export async function PUT(req) {
//   // Similar implementation as POST
// }

// export async function DELETE(req) {
//   // Handle DELETE request
// }
// ```

// In this example, we're manually using the Multer middleware for the POST and PUT routes. Note that we're passing an empty object (`{}`) as the response object to the Multer middleware, as it's required but not used in this context.

// Keep in mind that you'll need to handle the request body parsing manually for the POST and PUT routes, while the GET and DELETE routes will still use the default body parsing behavior.


================================================================================
LOCATION: app\api\product\routeold.ts
================================================================================

"use server";

import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";
import cloudinary from "cloudinary";

cloudinary.v2.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});

const prisma = new PrismaClient();

// Centralized model mapping
const modelMap: Record<string, any> = {
  cart: prisma.cart,
  cartItem: prisma.cartItem,
  category: prisma.category,
  coupon: prisma.coupon,
  featuredProduct: prisma.featuredProduct,
  notification: prisma.notification,
  payment: prisma.payment,
  post: prisma.post,
  product: prisma.product,
  refund: prisma.refund,
  review: prisma.review,
  shippingAddress: prisma.shippingAddress,
  stock: prisma.stock,
  user: prisma.user,
};

// =====================
// Cloudinary Upload
// =====================
async function handleUpload(file: File | string) {
  // Convert File to base64 if needed
  let dataURI = typeof file === "string" ? file : "";

  if (typeof file !== "string") {
    const buffer = await file.arrayBuffer();
    const b64 = Buffer.from(buffer).toString("base64");
    dataURI = `data:${file.type};base64,${b64}`;
  }

  const res = await cloudinary.v2.uploader.upload(dataURI, {
    resource_type: "auto",
  });

  return res;
}

// =====================
// DB Handler
// =====================
async function dbHandler({
  model,
  id,
  body,
  method,
  profileImage = false,
}: {
  model: string;
  id?: string;
  body?: any;
  method: "GET" | "POST" | "PUT" | "DELETE";
  profileImage?: boolean;
}) {
  const prismaModel = modelMap[model];
  if (!prismaModel) return { status: 400, data: { message: "Invalid model" } };

  try {
    switch (method) {
      case "GET":
        if (id) {
          const item = await prismaModel.findUnique({ where: { id } });
          if (!item) return { status: 404, data: { error: "Document not found" } };
          return { status: 200, data: item };
        } else {
          const items = await prismaModel.findMany();
          return { status: 200, data: items };
        }

      case "POST":
        if (body.price) body.price = parseFloat(body.price);
        if (body.url) body.images = [body.url]; // convert URL to images array
        const newItem = await prismaModel.create({ data: body });

        // Update profile image if required
        if (profileImage && model === "user" && body.userId && body.url) {
          await prisma.user.update({
            where: { id: body.userId },
            data: { image: body.url },
          });
        }

        return { status: 200, data: newItem };

      case "PUT":
        const { id: _id, ...updatedData } = body;
        const updatedItem = await prismaModel.update({
          where: { id: _id },
          data: updatedData,
        });
        return { status: 200, data: updatedItem };

      case "DELETE":
        await prismaModel.delete({ where: { id } });
        return { status: 200, data: { success: true } };

      default:
        return { status: 405, data: { error: "Method not allowed" } };
    }
  } catch (error) {
    console.error("Database error:", error);
    return { status: 500, data: { error: "Failed to perform operation" } };
  }
}

// =====================
// API Route
// =====================
export async function POST(req: NextRequest) {
  const formData = await req.formData();
  const file = formData.get("file") as File;

  // Limit profile images to 300KB
  if (file && file.size > 300 * 1024 && formData.get("title") === "profile image") {
    return NextResponse.json({ error: "File size exceeds 300KB" }, { status: 413 });
  }

  let uploadRes;
  if (file) uploadRes = await handleUpload(file);

  const body = {
    description: formData.get("description"),
    name: formData.get("name"),
    categoryId: formData.get("categoryId"),
    price: formData.get("price"),
    url: uploadRes?.url,
  };

  const result = await dbHandler({ model: "product", method: "POST", body });
  return NextResponse.json(result.data, { status: result.status });
}

export async function GET(req: NextRequest) {
  const url = new URL(req.url);
  const model = url.searchParams.get("model");
  const id = url.searchParams.get("id");

  if (!model) return NextResponse.json({ error: "Model required" }, { status: 400 });

  const result = await dbHandler({ model, method: "GET", id: id || undefined });
  return NextResponse.json(result.data, { status: result.status });
}

export async function PUT(req: NextRequest) {
  const body = await req.json();
  const result = await dbHandler({ model: body.model, method: "PUT", body });
  return NextResponse.json(result.data, { status: result.status });
}

export async function DELETE(req: NextRequest) {
  const url = new URL(req.url);
  const model = url.searchParams.get("model");
  const id = url.searchParams.get("id");

  if (!model || !id)
    return NextResponse.json({ error: "Model and ID required" }, { status: 400 });

  const result = await dbHandler({ model, method: "DELETE", id });
  return NextResponse.json(result.data, { status: result.status });
}



================================================================================
LOCATION: app\api\send-notification\route.ts
================================================================================

import { NextRequest, NextResponse } from "next/server";
import { sendOrderNotification } from "@/lib/nodemailer";

export async function POST(req: NextRequest) {
    try {
        const body = await req.json();
        const { orderDetails } = body;

        if (!orderDetails) {
            return NextResponse.json(
                { error: "Order details are required" },
                { status: 400 }
            );
        }

        await sendOrderNotification(process.env.ORDER_RECEIVER_EMAIL, orderDetails);
        await sendOrderNotification('adepojuololade2020@gmail.com', orderDetails);

        return NextResponse.json({ success: true, message: "Notification sent" });
    } catch (error) {
        console.error("Failed to send notification:", error);
        return NextResponse.json(
            { error: "Failed to send notification" },
            { status: 500 }
        );
    }
}



================================================================================
LOCATION: app\api\stock\route.ts
================================================================================

import { PrismaClient } from "@prisma/client";
import { NextResponse } from "next/server";

const prisma = new PrismaClient();

// -----------------------------------------
// GET â†’ fetch stock metrics for ALL products
// -----------------------------------------
export async function GET() {
  try {
    const products = await prisma.product.findMany({
      include: {
        stock: true,
        cartItems: true,
      },
    });

    const metrics = products.map((p) => {
      // SUM ALL STOCK ENTRIES
      const totalStock = p.stock.reduce((sum, s) => sum + s.addedQuantity, 0);

      // SUM ALL SOLD ENTRIES
      const totalSold = p.cartItems.reduce(
        (sum, item) => sum + item.quantity,
        0
      );

      const available = totalStock - totalSold;

      const profit = totalSold * p.price;

      return {
        id: p.id,
        name: p.name,
        price: p.price,
        totalStock,
        totalSold,
        available,
        profit,
      };
    });

    return NextResponse.json(metrics);
  } catch (e) {
    console.error(e);
    return NextResponse.json({ error: "Failed to fetch metrics" });
  }
}

// -------------------------------------------------
// POST â†’ Add NEW stock entry to a product
// -------------------------------------------------
export async function POST(req: Request) {
  const { productId, addedQuantity, costPerProduct, pricePerProduct } = await req.json();

  if (!productId || !addedQuantity) {
    return NextResponse.json(
      { error: "productId and amount are required" },
      { status: 400 }
    );
  }

  try {
    console.log("Data to create :", productId, addedQuantity);

    const stock = await prisma.stock.create({
      data: {
        productId,
        addedQuantity: Number(addedQuantity),
        costPerProduct: Number(costPerProduct || 0),
        pricePerProduct: Number(pricePerProduct || 0)
      },
    });
    return new Response(JSON.stringify(stock), { status: 200, headers: { 'Content-Type': 'application/json' } });
  } catch (error) {
    // console.error('Database POST error:', error);
    return new Response(JSON.stringify({ error: 'Failed to create item' }), { status: 500, headers: { 'Content-Type': 'application/json' } });
  }
}

// -------------------------------------------------
// PUT â†’ Edit existing stock record
// -------------------------------------------------
export async function PUT(req: Request) {
  const { stockId, addedQuantity } = await req.json();

  if (!stockId) {
    return NextResponse.json(
      { error: "stockId is required" },
      { status: 400 }
    );
  }

  const updated = await prisma.stock.update({
    where: { id: stockId },
    data: { addedQuantity },
  });

  return NextResponse.json(updated);
}

// -------------------------------------------------
// DELETE â†’ Remove a stock entry
// -------------------------------------------------
export async function DELETE(req: Request) {
  const { searchParams } = new URL(req.url);
  const stockId = searchParams.get("stockId");

  if (!stockId) {
    return NextResponse.json(
      { error: "stockId is required" },
      { status: 400 }
    );
  }

  const deleted = await prisma.stock.delete({
    where: { id: stockId },
  });

  return NextResponse.json(deleted);
}



================================================================================
LOCATION: app\api\user-data\route.ts
================================================================================

import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export async function GET(req: NextRequest) {
    const { searchParams } = new URL(req.url);
    const userId = searchParams.get("userId");
    const model = searchParams.get("model");

    if (!userId) {
        return NextResponse.json({ error: "Missing userId" }, { status: 400 });
    }

    if (!model) {
        return NextResponse.json({ error: "Missing model" }, { status: 400 });
    }

    try {
        if (model === "cart") {
            // Fetch list of carts for the user, optimized for list view
            const carts = await prisma.cart.findMany({
                where: { userId: userId },
                select: {
                    id: true,
                    total: true,
                    status: true,
                    createdAt: true,
                    _count: {
                        select: { products: true },
                    },
                },
                orderBy: { createdAt: "desc" },
            });
            return NextResponse.json(carts);
        }

        // Future extension:
        // if (model === "orders") { ... }

        return NextResponse.json({ error: "Invalid model type" }, { status: 400 });

    } catch (error) {
        console.error("User Data API Error:", error);
        return NextResponse.json({ error: "Failed to fetch user data" }, { status: 500 });
    }
}



================================================================================
LOCATION: app\api\visit\route.ts
================================================================================

"use server";

import { NextRequest, NextResponse } from "next/server";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export async function POST(req: NextRequest) {
    try {
        const body = await req.json();
        const { fingerprint, userAgent } = body;

        if (!fingerprint) {
            return NextResponse.json(
                { error: "Fingerprint is required" },
                { status: 400 }
            );
        }

        // Get today's date (start of day)
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        // Get IP address from request headers
        const ipAddress =
            req.headers.get("x-forwarded-for") ||
            req.headers.get("x-real-ip") ||
            "unknown";

        // Try to create a visit record
        // The unique constraint on [fingerprint, visitDate] will prevent duplicates
        try {
            const visit = await prisma.visit.create({
                data: {
                    fingerprint,
                    visitDate: today,
                    userAgent: userAgent || null,
                    ipAddress: ipAddress,
                },
            });

            return NextResponse.json({
                success: true,
                message: "Visit tracked",
                visitId: visit.id,
            });
        } catch (error: any) {
            // If error is due to unique constraint, it means visit already tracked today
            if (error.code === "P2002") {
                return NextResponse.json({
                    success: false,
                    message: "Visit already tracked for today",
                });
            }

            throw error;
        }
    } catch (error) {
        console.error("Visit tracking error:", error);
        return NextResponse.json(
            { error: "Failed to track visit" },
            { status: 500 }
        );
    }
}

// GET endpoint to retrieve visit statistics
export async function GET(req: NextRequest) {
    try {
        const { searchParams } = new URL(req.url);
        const days = parseInt(searchParams.get("days") || "30");

        // Get date range
        const endDate = new Date();
        const startDate = new Date();
        startDate.setDate(startDate.getDate() - days);
        startDate.setHours(0, 0, 0, 0);

        // Get visits in date range
        const visits = await prisma.visit.findMany({
            where: {
                visitDate: {
                    gte: startDate,
                    lte: endDate,
                },
            },
            orderBy: {
                visitDate: "desc",
            },
        });

        // Group by date
        const visitsByDate: Record<string, number> = {};

        visits.forEach((visit) => {
            const dateKey = visit.visitDate.toISOString().split("T")[0];
            visitsByDate[dateKey] = (visitsByDate[dateKey] || 0) + 1;
        });

        // Get total unique visitors
        const uniqueVisitors = await prisma.visit.groupBy({
            by: ["fingerprint"],
            where: {
                visitDate: {
                    gte: startDate,
                    lte: endDate,
                },
            },
        });

        return NextResponse.json({
            totalVisits: visits.length,
            uniqueVisitors: uniqueVisitors.length,
            visitsByDate,
            days,
        });
    } catch (error) {
        console.error("Visit stats error:", error);
        return NextResponse.json(
            { error: "Failed to fetch visit statistics" },
            { status: 500 }
        );
    }
}



================================================================================
LOCATION: app\cart\columns.tsx
================================================================================

"use client"

import { ColumnDef } from "@tanstack/react-table"
import { Badge } from "@/components/ui/badge"
import { Button } from "@/components/ui/button"
import { format } from "date-fns"
import { Eye } from "lucide-react"

// Define the shape of our data (matches the optimized API response)
export type CartSummary = {
    id: string
    name?: string // Added name
    total: number
    status: string
    createdAt: string
    _count: {
        products: number
    }
}

export const getColumns = (): ColumnDef<CartSummary>[] => [
    {
        accessorKey: "name",
        header: "Name",
        cell: ({ row }) => <span className="font-medium">{row.original.name || "Untitled"}</span>,
    },
    {
        accessorKey: "createdAt",
        header: "Date",
        cell: ({ row }) => {
            return <span className="text-xs text-muted-foreground whitespace-nowrap">
                {format(new Date(row.original.createdAt), "MMM d, yyyy")}
            </span>
        },
    },
    {
        accessorKey: "_count.products",
        header: "Items",
        cell: ({ row }) => <span className="text-center block">{row.original._count.products}</span>,
    },
    {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
            const status = row.original.status
            return (
                <Badge variant={status === "paid" || status === "completed" ? "default" : "secondary"} className="capitalize">
                    {status}
                </Badge>
            )
        },
    },
    {
        accessorKey: "total",
        header: () => <div className="text-right">Total</div>,
        cell: ({ row }) => {
            const amount = parseFloat(row.getValue("total"))
            return <div className="text-right font-medium">â‚¦{amount.toLocaleString()}</div>
        },
    },
]



================================================================================
LOCATION: app\cart\page.tsx
================================================================================

"use client";

import { CartClient } from "@/components/myComponents/subs/cart-client";
import { CartDetails } from "@/components/myComponents/subs/CartDetails";
import { DataTableDemo } from "@/components/myComponents/subs/datatable";
import { useAppContext } from "@/hooks/useAppContext";
import axios from "axios";
import { ShoppingBag } from "lucide-react";
import { useEffect, useState } from "react";
import { CartSummary, getColumns } from "./columns";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";

export default function CartPage() {
  const { user } = useAppContext();
  const [carts, setCarts] = useState<CartSummary[]>([]);
  const [selectedCartId, setSelectedCartId] = useState<string | null>(null);
  const [loading, setLoading] = useState(true);

  const fetchCarts = async () => {
    if (!user?.id || user.id === 'nil') return;
    try {
      setLoading(true);
      const res = await axios.get(`/api/user-data?userId=${user.id}&model=cart`);
      setCarts(res.data);
    } catch (error) {
      console.error("Failed to fetch carts:", error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchCarts();
  }, [user?.id]);

  const handleViewDetails = (id: string) => {
    setSelectedCartId(id);
    // Scroll to details view on mobile
    if (window.innerWidth < 1024) {
      setTimeout(() => {
        document.getElementById('cart-details-view')?.scrollIntoView({ behavior: 'smooth' });
      }, 100);
    }
  };

  const columns = getColumns();

  return (
    <div className="container mx-auto py-8 px-4 space-y-8">

      <div className="flex flex-col gap-8">
        <section className="space-y-4">
          <h1 className="text-3xl font-bold tracking-tight">Shopping Cart</h1>
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">

            {/* Left Panel: Active Cart Management */}
            <div className="lg:col-span-2 space-y-8">
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2">
                    <ShoppingBag className="h-5 w-5" />
                    Current Session
                  </CardTitle>
                  <CardDescription>
                    Manage items currently in your cart ready for checkout.
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="flex items-center gap-4 bg-secondary/20 p-4 rounded-lg">
                    <CartClient />
                    <div className="text-sm text-muted-foreground">
                      Click the icon to view and edit your current active cart.
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* History Table */}
              <Card>
                <CardHeader>
                  <CardTitle>Order History</CardTitle>
                  <CardDescription>
                    View your previous carts and their status.
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  {loading ? (
                    <div className="text-center py-4">Loading history...</div>
                  ) : carts.length > 0 ? (
                    <DataTableDemo
                      data={carts}
                      columns={columns}
                      onRowClick={(row) => handleViewDetails(row.id)}
                    />
                  ) : (
                    <div className="text-center py-8 text-muted-foreground">
                      No cart history found.
                    </div>
                  )}
                </CardContent>
              </Card>
            </div>

            {/* Right Panel: Selected Cart Details */}
            <div id="cart-details-view" className="lg:col-span-1">
              {selectedCartId ? (
                <div className="sticky top-4 h-[calc(100vh-2rem)]">
                  <CartDetails
                    cartId={selectedCartId}
                    onPaymentSuccess={() => {
                      fetchCarts(); // Refresh list on payment
                      // Optionally refresh details
                    }}
                  />
                </div>
              ) : (
                <div className="h-full min-h-[300px] flex items-center justify-center border-2 border-dashed rounded-lg text-muted-foreground bg-muted/10">
                  Select a cart to view details
                </div>
              )}
            </div>

          </div>
        </section>
      </div>

    </div>
  );
}



================================================================================
LOCATION: app\contact\page.tsx
================================================================================

"use client"
import info from "@/data/cont"
import { motion } from "framer-motion"
import contact from "@/data/cont"
import Social from "@/components/utility/social"
import ContactForm from "@/components/utility/contactForm"
import MessageHistory from "@/components/utility/MessageHistory"
import { Badge } from "@/components/ui/badge"
import { useSession } from "next-auth/react"
import { useState, useEffect } from "react"
import axios from "axios"

const Contact = () => {
  const { data: session } = useSession();
  const [unseenCount, setUnseenCount] = useState(0);

  useEffect(() => {
    const fetchUnseenCount = async () => {
      if (!session?.user?.email) return;

      try {
        const res = await axios.get("/api/dbhandler?model=message");
        const userMessages = res.data.filter(
          (msg: any) => msg.senderEmail === session.user.email && !msg.isSeen && msg.adminResponse
        );
        setUnseenCount(userMessages.length);
      } catch (error) {
        console.error("Failed to fetch unseen count:", error);
      }
    };

    fetchUnseenCount();
    // Poll every 30 seconds for new messages
    const interval = setInterval(fetchUnseenCount, 30000);
    return () => clearInterval(interval);
  }, [session]);

  return (
    <motion.section
      initial={{ opacity: 0 }}
      animate={{
        opacity: 1,
        transition: { delay: 0.5, duration: 0.6, ease: "easeIn" }
      }}
      className="w-[100vw] overflow-clip py-6 relative"
    >
      {/* Unseen Messages Badge */}
      {unseenCount > 0 && (
        <div className="fixed top-20 right-4 z-50 md:top-24 md:right-8">
          <Badge variant="destructive" className="text-sm px-3 py-1 shadow-lg animate-pulse">
            {unseenCount} New Message{unseenCount > 1 ? "s" : ""}
          </Badge>
        </div>
      )}

      <div className="container mx-auto">
        <div className="flex flex-col xl:flex-row gap-[30px]">
          <div className="xl:h-[54%] order-2 xl:order-none">
            <ContactForm />
          </div>
          <div className="flex flex-col flex-1 max-w-[480px] mx-3">
            <div className="text-2xl font-semibold my-3 text-center md:text-start">Let's talk</div>
            <div className="my-5">{contact.description}</div>
            <div className="flex flex-col">
              {contact.contact.map((contact, index) => {
                return (
                  <div className="flex flex-row m-2" key={index}>
                    <div className="p-2 text-3xl">{contact.icon}</div>
                    <div className="flex flex-col mx-5">
                      <div className="text-lg my-1">{contact.text}</div>
                      <div>{contact.value}</div>
                    </div>
                  </div>
                )
              })}
            </div>
            <div className="w-full mx-2 my-10 flex justify-center items-center">
              <Social
                containerStyles='flex gap-4 md:gap-6 mx-auto'
                iconStyles='w-9 h-9 border border-accent rounded-full flex justify-center items-center text-accent text-base hover:bg-accent hover:text-background/80 hover:transition-all duration-500'
              />
            </div>
          </div>
        </div>

        {/* Message History Section */}
        {session && (
          <div className="mt-12">
            <MessageHistory />
          </div>
        )}
      </div>
    </motion.section>
  )
}

export default Contact



================================================================================
LOCATION: app\help\page.tsx
================================================================================

"use client"
import { motion } from "framer-motion"

const Help = () => {
  return (
    <motion.section
      initial = {{ opacity: 0 }}
      animate = {{
        opacity : 1,
        transition : { delay: 0.5, duration: 0.6, ease: "easeIn"}
      }}
      className="w-[100vw] overflow-clip"
    >
      help
    </motion.section>
  )
}

export default Help



================================================================================
LOCATION: app\home\page.tsx
================================================================================

"use client"
import { motion } from "framer-motion"
import { Filters, Gallery } from "@/components/myComponents/subs"
import ECommerceSalesPage from "@/components/myComponents/salestore"
import Hero from "@/components/myComponents/subs/hero"
import FeaturedCategories from "@/components/myComponents/subs/featuredCategories"
import FeaturedProducts from "@/components/myComponents/subs/featuredProducts"
import Features from "@/components/myComponents/subs/features"
import { ScrollScaleWrapper } from "@/components/myComponents/subs/scroll-scale-wrapper"


const Home = () => {
  return (
    <motion.section
      initial={{ opacity: 0 }}
      animate={{
        opacity: 1,
        transition: { delay: 0.5, duration: 0.6, ease: "easeIn" }
      }}
      className="w-[100vw] min-h-full overflow-clip flex flex-col items-center"
    >
      {/* <Filters /> */}
      <Hero />
      {/* 'modern-split' | 'immersive' | 'carousel' | 'story' | 'menu' | 'experience' | 'local'; */}

      <ScrollScaleWrapper className="w-full flex justify-center">
        <FeaturedCategories />
      </ScrollScaleWrapper>

      <ScrollScaleWrapper className="w-full flex justify-center">
        <FeaturedProducts />
      </ScrollScaleWrapper>

      <ScrollScaleWrapper className="w-full flex justify-center">
        <Features />
      </ScrollScaleWrapper>

      {/* converted to a do you know section */}
      {/* <div className="flex-1 flex justify-center items-center w-full md:w-[85%] overflow-clip mx-auto">
        <Gallery />
      </div> */}
      {/* <ECommerceSalesPage /> */}
    </motion.section>
  )
}

export default Home



================================================================================
LOCATION: app\login\page.tsx
================================================================================

// @ts-nocheck
import { login } from "@/action/user";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
// import { IconBrandGithub, IconBrandGoogle } from "@tabler/icons-react";
import { signIn } from "@/auth";
import Link from "next/link";
import { redirect } from "next/navigation";
import { getSession } from "@/lib/getSession";
import { FaGithub } from "react-icons/fa";
import { FcGoogle } from "react-icons/fc";

const Login = async () => {
  const session = await getSession();
  const user = session?.user;
  // if (user) redirect("/");

  const googleSignIn = async () => {
    'use server'
    await signIn("google");
  }

  return (
    <div className="mt-10 max-w-md w-full mx-auto rounded-none md:rounded-2xl p-4 md:p-8 shadow-input bg-white border border-[#121212]  dark:bg-black">
      <form className="my-8" action={login}>
        <Label htmlFor="email">Email Address or Contact Number</Label>
        <Input
          id="email"
          placeholder="email or contact"
          type="text"
          name="email"
        />

        <Label htmlFor="password">Password</Label>
        <Input
          id="password"
          placeholder="*************"
          type="password"
          name="password"
          className="mb-6"
        />

        <button className="bg-gradient-to-br relative group/btn from-black dark:from-zinc-900 dark:to-zinc-900 to-neutral-600 block dark:bg-zinc-800 w-full text-white rounded-md h-10 font-medium shadow-[0px_1px_0px_0px_#ffffff40_inset,0px_-1px_0px_0px_#ffffff40_inset] dark:shadow-[0px_1px_0px_0px_var(--zinc-800)_inset,0px_-1px_0px_0px_var(--zinc-800)_inset]">
          Login &rarr;
        </button>

        <p className="text-right text-neutral-600 text-sm max-w-sm mt-4 dark:text-neutral-300">
          Don't have account? <Link href="/register">Register</Link>
        </p>

        <div className="bg-gradient-to-r from-transparent via-neutral-300 dark:via-neutral-700 to-transparent my-8 h-[1px] w-full" />
      </form>

      <form
        action={googleSignIn}
      >
        <button
          className=" relative group/btn flex space-x-2 items-center justify-start px-4 w-full text-black rounded-md h-10 font-medium shadow-input bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]"
          type="submit"
        >
          <FcGoogle className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
          <span className="text-neutral-700 dark:text-neutral-300 text-sm">
            Google
          </span>
        </button>
      </form>
    </div>
  );
};

export default Login;









// <form
//         action={async () => {
//           "use server";
//           await signIn("github");
//         }}
//       >
//         {/* <button
//           className=" relative group/btn flex space-x-2 items-center justify-start px-4 w-full text-black rounded-md h-10 font-medium shadow-input bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]"
//           type="submit"
//         >
//           <FaGithub className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
//           <span className="text-neutral-700 dark:text-neutral-300 text-sm">
//             Github
//           </span>
//         </button> */}
//       </form>


================================================================================
LOCATION: app\lunch\lunch-list.tsx
================================================================================

"use client"

import { useState } from "react"
import { Cart, CartItem, Product } from "@prisma/client"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Card, CardHeader, CardTitle, CardContent, CardFooter } from "@/components/ui/card"
import { updateLunchItemQuantity, addLunchToCart, createLunch, renameLunch } from "@/action/lunch"
import { toast } from "sonner"
import { Trash2, ShoppingCart, Plus, Edit2, Check, X, ChevronDown, ChevronUp, Calendar, Clock, History, Calendar as CalendarIcon } from "lucide-react"
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from "@/components/ui/collapsible"
import { Badge } from "@/components/ui/badge"
import { cn } from "@/lib/utils"

import { ScheduleLunchDialog } from "@/components/myComponents/subs/ScheduleLunchDialog"

type LunchWithProducts = Cart & {
    products: (CartItem & { product: Product })[]
}

interface LunchListProps {
    initialLunches: {
        templates: LunchWithProducts[],
        schedules: any[]
    }
}
export function LunchList({ initialLunches }: LunchListProps) {
    const [isCreating, setIsCreating] = useState(false)
    const [newLunchName, setNewLunchName] = useState("")
    const [activeTab, setActiveTab] = useState<"templates" | "schedules">("templates")
    
    const handleCreate = async () => {
        if (!newLunchName.trim()) return
        try {
            const res = await createLunch(newLunchName)
            if (res.success) {
                toast.success("Lunch list created")
                setIsCreating(false)
                setNewLunchName("")
            } else {
                toast.error("Failed to create lunch list")
            }
        } catch (e) {
            toast.error("Error creating lunch")
        }
    }

    return (
        <div className="space-y-6">
             <div className="flex gap-4 border-b">
                <button 
                    className={cn("pb-2 px-4 transition-colors", activeTab === "templates" ? "border-b-2 border-primary font-bold" : "text-muted-foreground")}
                    onClick={() => setActiveTab("templates")}
                >
                    Saved Templates
                </button>
                <button 
                    className={cn("pb-2 px-4 transition-colors", activeTab === "schedules" ? "border-b-2 border-primary font-bold" : "text-muted-foreground")}
                    onClick={() => setActiveTab("schedules")}
                >
                    Active Schedules
                </button>
            </div>

            {activeTab === "templates" ? (
                <>
                    <div className="flex justify-between items-center bg-muted/30 p-4 rounded-lg">
                        <h2 className="text-xl font-semibold">Your Saved Lunches</h2>
                        {!isCreating ? (
                            <Button onClick={() => setIsCreating(true)}>
                                <Plus className="mr-2 h-4 w-4" /> Create New Template
                            </Button>
                        ) : (
                            <div className="flex items-center gap-2">
                                <Input 
                                    value={newLunchName} 
                                    onChange={(e) => setNewLunchName(e.target.value)}
                                    placeholder="Lunch Name..."
                                    className="bg-background"
                                />
                                <Button size="icon" onClick={handleCreate}><Check className="h-4 w-4" /></Button>
                                <Button size="icon" variant="ghost" onClick={() => setIsCreating(false)}><X className="h-4 w-4" /></Button>
                            </div>
                        )}
                    </div>

                    <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                        {initialLunches.templates.map((lunch: any) => (
                            <LunchCard key={lunch.id} lunch={lunch} />
                        ))}
                    </div>
                    
                    {initialLunches.templates.length === 0 && (
                        <div className="text-center py-10 text-muted-foreground">
                            You don't have any lunch templates yet. Create one or add products from the store!
                        </div>
                    )}
                </>
            ) : (
                <div className="space-y-4">
                     <div className="grid gap-4">
                        {initialLunches.schedules.map((schedule: any) => (
                            <Card key={schedule.id} className="p-4">
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 className="font-bold text-lg">{schedule.name}</h3>
                                        <div className="flex items-center gap-2 text-sm text-muted-foreground flex-wrap">
                                            <Badge variant="outline" className="capitalize">{schedule.frequency}</Badge>
                                            <span className="flex items-center gap-1"><CalendarIcon className="h-3 w-3"/> {new Date(schedule.startDate).toLocaleDateString()} - {new Date(schedule.endDate).toLocaleDateString()}</span>
                                            {schedule.daysOfWeek.length > 0 && <span className="flex items-center gap-1"><History className="h-3 w-3"/> {schedule.daysOfWeek.join(", ")}</span>}
                                            <span className="flex items-center gap-1"><Clock className="h-3 w-3"/> {schedule.timesInDay.join(", ")}</span>
                                        </div>
                                    </div>
                                    <Badge className={schedule.status === "active" ? "bg-green-500 text-white" : "bg-gray-500 text-white"}>{schedule.status}</Badge>
                                </div>
                                <div className="text-sm text-muted-foreground">
                                    {schedule.carts?.length || 0} scheduled deliveries
                                </div>
                            </Card>
                        ))}
                        {initialLunches.schedules.length === 0 && (
                            <div className="text-center py-10 text-muted-foreground border-2 border-dashed rounded-xl">
                                No active schedules. Schedule a template to see it here!
                            </div>
                        )}
                     </div>
                </div>
            )}
        </div>
    )
}

function LunchCard({ lunch }: { lunch: LunchWithProducts }) {
    const [isEditingName, setIsEditingName] = useState(false)
    const [name, setName] = useState(lunch.name || "Untitled Lunch")
    const [isOpen, setIsOpen] = useState(false)
    const [loadingCart, setLoadingCart] = useState(false)
    const [isScheduleDialogOpen, setIsScheduleDialogOpen] = useState(false)

    const handleUpdateName = async () => {
        if (name === lunch.name) {
            setIsEditingName(false)
            return
        }
        try {
            await renameLunch(lunch.id, name)
            setIsEditingName(false)
            toast.success("Renamed successfully")
        } catch {
            toast.error("Failed to rename")
        }
    }

    const handleAddToCart = async () => {
        setLoadingCart(true)
        try {
            const res = await addLunchToCart(lunch.id)
            if (res.success) {
                toast.success("All items added to your cart!")
            } else {
                toast.error("Failed to add to cart")
            }
        } catch {
            toast.error("Error adding to cart")
        } finally {
            setLoadingCart(false)
        }
    }

    const totalItems = lunch.products.reduce((acc, item) => acc + item.quantity, 0)

    return (
        <Card className="overflow-hidden border-l-4 border-l-primary">
            <CardHeader className="pb-2">
                <div className="flex justify-between items-start">
                    {isEditingName ? (
                        <div className="flex items-center gap-2 flex-1 mr-2">
                            <Input value={name} onChange={(e) => setName(e.target.value)} className="h-8" />
                            <Button size="icon" variant="ghost" className="h-8 w-8" onClick={handleUpdateName}>
                                <Check className="h-4 w-4 text-green-500" />
                            </Button>
                        </div>
                    ) : (
                        <div className="flex items-center gap-2 flex-1 mr-2">
                            <CardTitle className="text-lg line-clamp-1">{lunch.name || "Untitled Lunch"}</CardTitle>
                            <Button size="icon" variant="ghost" className="h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity" onClick={() => setIsEditingName(true)}>
                                <Edit2 className="h-3 w-3" />
                            </Button>
                        </div>
                    )}
                    <Badge variant="secondary">{totalItems} items</Badge>
                </div>
            </CardHeader>
            <CardContent className="pb-2">
                <div className="text-sm text-muted-foreground mb-4">
                    Updated {new Date(lunch.updatedAt).toLocaleDateString()}
                </div>
                
                <Collapsible open={isOpen} onOpenChange={setIsOpen}>
                     <div className="flex flex-col gap-2">
                        {lunch.products.slice(0, isOpen ? undefined : 2).map((item) => (
                            <LunchItem key={item.id} item={item} />
                        ))}
                        
                        {lunch.products.length > 2 && !isOpen && (
                            <div className="text-xs text-center text-muted-foreground pt-1">
                                + {lunch.products.length - 2} more items
                            </div>
                        )}
                        
                        {lunch.products.length > 0 && (
                           <CollapsibleTrigger asChild>
                             <Button variant="ghost" size="sm" className="w-full mt-2 h-8 text-xs">
                                {isOpen ? <ChevronUp className="h-3 w-3 mr-1"/> : <ChevronDown className="h-3 w-3 mr-1"/>}
                                {isOpen ? "Show Less" : "Show All"}
                             </Button>
                           </CollapsibleTrigger>
                        )}
                     </div>
                </Collapsible>
            </CardContent>
            <CardFooter className="bg-muted/30 pt-4 flex-col gap-2">
                <Button className="w-full" onClick={handleAddToCart} disabled={loadingCart || lunch.products.length === 0}>
                    <ShoppingCart className="mr-2 h-4 w-4" />
                    {loadingCart ? "Adding..." : "Order Now"}
                </Button>
                <Button variant="outline" className="w-full" onClick={() => setIsScheduleDialogOpen(true)} disabled={lunch.products.length === 0}>
                    <Calendar className="mr-2 h-4 w-4" />
                    Schedule Recurring
                </Button>
            </CardFooter>

            <ScheduleLunchDialog 
                isOpen={isScheduleDialogOpen} 
                onClose={() => setIsScheduleDialogOpen(false)} 
                templateId={lunch.id}
                templateName={lunch.name || "Untitled Lunch"}
            />
        </Card>
    )
}

function LunchItem({ item }: { item: CartItem & { product: Product } }) {
    const handleQuantityChange = async (delta: number) => {
        const newQty = item.quantity + delta
        try {
            await updateLunchItemQuantity(item.id, newQty)
        } catch {
            toast.error("Failed to update quantity")
        }
    }

    // Default image fallback
    const image = item.product.images?.[0] || "/placeholder.png"

    return (
        <div className="flex items-center gap-3 p-2 rounded-md hover:bg-accent/50 transition-colors">
            <div className="h-10 w-10 overflow-hidden rounded bg-muted flex-shrink-0">
                <img src={image} alt={item.product.name} className="h-full w-full object-cover" />
            </div>
            <div className="flex-1 min-w-0">
                <div className="text-sm font-medium truncate">{item.product.name}</div>
                <div className="text-xs text-muted-foreground">â‚¦{item.product.price}</div>
            </div>
            <div className="flex items-center gap-1 bg-background border rounded-md h-7">
                <button className="px-2 hover:bg-muted h-full" onClick={() => handleQuantityChange(-1)}>-</button>
                <span className="text-xs w-4 text-center">{item.quantity}</span>
                <button className="px-2 hover:bg-muted h-full" onClick={() => handleQuantityChange(1)}>+</button>
            </div>
        </div>
    )
}



================================================================================
LOCATION: app\lunch\page.tsx
================================================================================


import { getUserLunches } from "@/action/lunch"
import { LunchList } from "./lunch-list"
import { motion } from "framer-motion"

export const metadata = {
  title: "My Lunch | Succo",
  description: "Manage your lunch orders",
}

export default async function LunchPage() {
    const lunches = await getUserLunches()
    
    return (
        <div className="container mx-auto py-8 px-4 min-h-screen">
             <div className="mb-8">
                <h1 className="text-3xl font-bold tracking-tight text-primary">Lunch & Events</h1>
                <p className="text-muted-foreground mt-2">
                    Create preset orders for your lunch breaks or events. Add items, save them, and order with one click.
                </p>
             </div>
             
             <LunchList initialLunches={lunches} />
        </div>
    )
}



================================================================================
LOCATION: app\myui\page.tsx
================================================================================

"use client"

import { AccordionDemo } from "@/components/myUI/accordion"
import { AlertDialogDemo } from "@/components/myUI/alertDialog"
import { CalendarDemo } from "@/components/myUI/calendar"
import { CardWithForm } from "@/components/myUI/card"
import { CheckboxDemo } from "@/components/myUI/checkbox"
import { CollapsibleDemo } from "@/components/myUI/collapsible"
import { ComboboxDemo } from "@/components/myUI/combobox"
import { CommandDemo } from "@/components/myUI/command"
import { ContextMenuDemo } from "@/components/myUI/contextmenu"
import { DataTableDemo } from "@/components/myUI/datatable"
import { DatePickerDemo } from "@/components/myUI/datepicker"
import { DialogDemo } from "@/components/myUI/dialog"
import { DrawerDemo } from "@/components/myUI/drawer"
import { DropdownMenuDemo } from "@/components/myUI/dropDownMenu"
import { MenubarDemo } from "@/components/myUI/menubar"
import { PaginationDemo } from "@/components/myUI/pagination"
import { PopoverDemo } from "@/components/myUI/popover"
import { ProgressDemo } from "@/components/myUI/progressbar"
import { RadioGroupDemo } from "@/components/myUI/radiogroup"
import { ResizableDemo } from "@/components/myUI/resizable"
import { SeparatorDemo } from "@/components/myUI/separator"
import { SkeletonDemo } from "@/components/myUI/skeleton"
import { SonnerDemo } from "@/components/myUI/sonner"
import { SwitchDemo } from "@/components/myUI/switch"
import { TableDemo } from "@/components/myUI/table"
import { ToastDemo } from "@/components/myUI/toast"
import { ToggleDemo } from "@/components/myUI/toggle"
import { ToggleGroupDemo } from "@/components/myUI/toggle-group"
import { TooltipDemo } from "@/components/myUI/tooltip"

const page = () => {
  return (
    <div className="flex flex-row justify-between px-10">
      my uis
            <div className="flex flex-col gap-10 max-w-md mx-auto">
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">accordion</div>
            <AccordionDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">alertDialog</div>
            <AlertDialogDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">calendar</div>
            <CalendarDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">Card</div>
            <CardWithForm />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">checkbox</div>
            <CheckboxDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">callapsible</div>
            <CollapsibleDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">combobox</div>
            <ComboboxDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">tooltip</div>
            <TooltipDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">toggle</div>
            <ToggleDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">toggle group</div>
            <ToggleGroupDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">toast</div>
            <ToastDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">table</div>
            <TableDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">switch</div>
            <SwitchDemo />
        </div>
        <div className="flex flex-col gap-10 max-w-md mx-auto">
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">sonner</div>
            <SonnerDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">skeleton</div>
            <SkeletonDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">separator</div>
            <SeparatorDemo /><div className="text-accent font-bold w-full text-center bg-secondary text-xl"></div>
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">resizable</div>
            <ResizableDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">radio group</div>
            <RadioGroupDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">progress</div>
            <ProgressDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">popover</div>
            <PopoverDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">pagination</div>
            <PaginationDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">menu bar</div>
            <MenubarDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">dropdown menu</div>
            <DropdownMenuDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">drawer</div>
            <DrawerDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">dialog</div>
            <DialogDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">date picker</div>
            <DatePickerDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">data table</div>
            <DataTableDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">context menu</div>
            <ContextMenuDemo />
            <div className="text-accent font-bold w-full text-center bg-secondary text-xl">command</div>
            <CommandDemo />
        </div>
    </div>
  )
}

export default page



================================================================================
LOCATION: app\signup\page.tsx
================================================================================

import { register } from "@/action/user";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { getSession } from "@/lib/getSession";
import Link from "next/link";
import { redirect } from "next/navigation";

const Register = async () => {
  const session = await getSession();
  const user = session?.user;
  if (user) redirect("/");

  return (
    <div className="mt-10 max-w-md w-full mx-auto rounded-none md:rounded-2xl p-4 md:p-8 shadow-input bg-white border border-[#121212]  dark:bg-black">
      <h2 className="font-bold text-xl text-neutral-800 dark:text-neutral-200">
        Welcome to MyShop
      </h2>
      <p className="text-neutral-600 text-sm max-w-sm mt-2 dark:text-neutral-300">
        Please provide all the necessary information
      </p>

      <form className="my-8" action={register}>
        <div className="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2 mb-4">
          <div className="flex flex-col">
            <Label htmlFor="firstname" className="mb-2">
              Username
            </Label>
            <Input
              id="username"
              placeholder="Username"
              type="text"
              name="username"
            />
          </div>
          {/* <div className="flex flex-col">
            <Label htmlFor="lastname" className="mb-2">
              Last Name
            </Label>
            <Input
              id="lastname"
              placeholder="Durden"
              type="text"
              name="lastname"
            />
          </div> */}
        </div>

        <Label htmlFor="email">Email Address</Label>
        <Input
          id="email"
          placeholder="projectmayhem@fc.com"
          type="email"
          name="email"
        />

        <Label htmlFor="password">Password</Label>
        <Input
          id="password"
          placeholder="***********"
          type="password"
          name="password"
          className="mb-5"
        />

        <button className="bg-gradient-to-br relative group/btn from-black dark:from-zinc-900 dark:to-zinc-900 to-neutral-600 block dark:bg-zinc-800 w-full text-white rounded-md h-10 font-medium shadow-[0px_1px_0px_0px_#ffffff40_inset,0px_-1px_0px_0px_#ffffff40_inset] dark:shadow-[0px_1px_0px_0px_var(--zinc-800)_inset,0px_-1px_0px_0px_var(--zinc-800)_inset]">
          Sign up &rarr;
        </button>

        <p className="text-neutral-600 text-sm max-w-sm mt-2 dark:text-neutral-300">
          Already have an account? <Link href="/login">Login</Link>
        </p>
      </form>
    </div>
  );
};
export default Register;



================================================================================
LOCATION: app\store\page.tsx
================================================================================

'use client'
import { useSearchParams } from 'next/navigation';
import { motion } from 'framer-motion';
import Stocks from '@/components/myComponents/subs/stocks';
import { SearchInput } from '@/components/myComponents/subs/searchcomponent';

const Store = () => {
  const searchParams = useSearchParams();
  const category = searchParams.get('category') || undefined;
  const id = searchParams.get('id') || undefined;
  const search = searchParams.get('search') || undefined;

  return (
    <motion.section
      initial={{ opacity: 0 }}
      animate={{ opacity: 1, transition: { delay: 0.5, duration: 0.6, ease: "easeIn" } }}
      className="w-[100vw] overflow-clip p-1"
    >
      <div className="relative w-full h-full flex flex-col justify-center items-center">
        <div className="flex z-20 md:hidden w-full justify-center items-center">
          {/* Search Input */}
          <SearchInput />
        </div>
        <Stocks categoryFilter={category} search={search} selectedId={id} />
      </div>
    </motion.section>
  );
};

export default Store;



================================================================================
LOCATION: app\store\[id]\page.tsx
================================================================================

"use client";

import { Minus, Plus, ShoppingCart, Star, Edit, Trash, ChevronLeft, ChevronRight, Upload } from "lucide-react";
import { useParams, useRouter } from "next/navigation";
import * as React from "react";
import { toast } from "sonner";
import axios from "axios";

import { useCart } from "@/hooks/use-cart";
import { useAppContext } from "@/hooks/useAppContext";
import { Button } from "@/components/ui/button";
import { Separator } from "@/components/ui/separator";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
  DialogFooter,
} from "@/components/ui/dialog";

import Similar from "@/components/myComponents/subs/similar";
import { ProductCard } from "@/components/myComponents/subs/productCard";
import { cn } from "@/lib/utils";

/* -------------------------------------------------------------------------- */
/* Types                                                                       */
/* -------------------------------------------------------------------------- */

interface Product {
  id: string;
  name: string;
  description: string;
  category: any;
  image: string[];
  price: number;
  originalPrice?: number;
  rating: number;
  inStock: boolean;
  features: string[];
  specs: Record<string, string>;
}

/* -------------------------------------------------------------------------- */

const CURRENCY = new Intl.NumberFormat("en-NG", {
  style: "currency",
  currency: "NGN",
});

/* -------------------------------------------------------------------------- */

export default function ProductDetailPage() {
  const { id } = useParams<{ id: string }>();
  const router = useRouter();
  const { items, addItem, updateQuantity, removeItem } = useCart();
  const { user } = useAppContext();

  const [product, setProduct] = React.useState<Product | null>(null);
  const [rawProduct, setRawProduct] = React.useState<any>(null);
  const [allProducts, setAllProducts] = React.useState<any[]>([]);
  const [loading, setLoading] = React.useState(true);
  const [isAdding, setIsAdding] = React.useState(false);

  // Image Navigation State
  const [currentImageIndex, setCurrentImageIndex] = React.useState(0);

  // Admin Edit States
  const [isEditingDescription, setIsEditingDescription] = React.useState(false);
  const [newDescription, setNewDescription] = React.useState("");
  const [newImageFile, setNewImageFile] = React.useState<File | null>(null);
  const [uploadingImage, setUploadingImage] = React.useState(false);
  const [isAddImageOpen, setIsAddImageOpen] = React.useState(false);


  /* ----------------------------- Fetch product ----------------------------- */

  const fetchProduct = React.useCallback(async () => {
    try {
      const res = await fetch(`/api/dbhandler?model=product&id=${id}`);
      const data = await res.json();
      if (!res.ok) throw new Error("Fetch failed");

      setRawProduct(data);

      /** âœ… FIX: calculate stock correctly */
      const totalStock =
        Array.isArray(data.stock)
          ? data.stock.reduce(
            (sum: number, s: any) => sum + (s.addedQuantity ?? 0),
            0
          )
          : 0;

      const transformed: Product = {
        id: data.id,
        name: data.name,
        description: data.description || "",
        category: data.category,
        image: data.images || [],
        price: data.price,
        originalPrice: data.originalPrice || undefined,
        rating: data.reviews?.length
          ? data.reviews.reduce(
            (acc: number, r: any) => acc + r.rating,
            0
          ) / data.reviews.length
          : 0,
        inStock: totalStock > 0,
        features: [],
        specs: {},
      };

      setProduct(transformed);
      // Only reset description if not editing, or always? 
      // It's safer to always reset on fetch unless we want to persist unsaved edits across polls.
      // But we are only fetching once or after save.
      setNewDescription(transformed.description);

      // Only fetch recommendations once
      if (allProducts.length === 0) {
        const all = await fetch(`/api/dbhandler?model=product`);
        setAllProducts(await all.json());
      }

      setLoading(false);
    } catch (err) {
      console.error(err);
      setLoading(false);
    }
  }, [id, allProducts.length]);

  React.useEffect(() => {
    fetchProduct();
  }, [fetchProduct]);

  /* ----------------------------- Cart helpers ------------------------------ */

  const cartItem = React.useMemo(
    () => items.find((i) => i.id === id),
    [items, id]
  );

  const quantity = cartItem?.quantity ?? 0;

  const handleDecrease = () => {
    if (!product) return;
    if (quantity <= 1) return removeItem(product.id);
    updateQuantity(product.id, quantity - 1);
  };

  const handleIncrease = () => {
    if (!product) return;
    if (quantity === 0) return addItem(rawProduct, 1);
    updateQuantity(product.id, quantity + 1);
  };

  const handleAddToCart = async () => {
    if (!product || !product.inStock) return;
    setIsAdding(true);
    addItem(rawProduct, 1);
    toast.success(`${product.name} added to cart`);
    setTimeout(() => setIsAdding(false), 400);
  };

  /* ----------------------------- Admin Actions ----------------------------- */
  const isAdmin = user?.role === 'admin';

  const handleSaveDescription = async () => {
    if (!product) return;
    try {
      await axios.put(`/api/dbhandler?model=product&id=${product.id}`, {
        description: newDescription,
      });
      toast.success("Description updated successfully");
      setIsEditingDescription(false);
      fetchProduct(); // Refresh data
    } catch (error) {
      console.error("Failed to update description", error);
      toast.error("Failed to update description");
    }
  };

  const handleAddImage = async () => {
    if (!newImageFile || !product) return;
    setUploadingImage(true);

    try {
      // 1. Upload image to server/cloudinary
      const formData = new FormData();
      formData.append("file", newImageFile);
      formData.append("description", "Product Image");
      formData.append("type", "image");
      formData.append("userId", user.id);
      formData.append("title", product.name);
      formData.append("for", "product");

      // Assuming this endpoint returns { url: string } or similar
      const uploadRes = await axios.post(`/api/file/image`, formData);

      if (uploadRes.status === 200) {
        const newImageUrl = uploadRes.data.url;

        // 2. Update product content with new image URL appended
        const updatedImages = [...product.image, newImageUrl];
        await axios.put(`/api/dbhandler?model=product&id=${product.id}`, {
          images: updatedImages,
        });

        toast.success("Image added successfully");
        setIsAddImageOpen(false);
        setNewImageFile(null);
        fetchProduct();
      } else {
        toast.error("Image upload failed");
      }
    } catch (error) {
      console.error("Failed to add image", error);
      toast.error("Failed to add image");
    } finally {
      setUploadingImage(false);
    }
  };

  const handleDeleteImage = async (indexToDelete: number) => {
    if (!product) return;
    if (!confirm("Are you sure you want to delete this image?")) return;

    try {
      const updatedImages = product.image.filter((_, idx) => idx !== indexToDelete);
      await axios.put(`/api/dbhandler?model=product&id=${product.id}`, {
        images: updatedImages,
      });
      toast.success("Image removed");
      // Adjust index if needed
      if (currentImageIndex >= updatedImages.length && updatedImages.length > 0) {
        setCurrentImageIndex(updatedImages.length - 1);
      } else if (updatedImages.length === 0) {
        setCurrentImageIndex(0);
      }
      fetchProduct();
    } catch (error) {
      console.error("Failed to delete image", error);
      toast.error("Failed to delete image");
    }
  };


  /* ----------------------------- Image Carousel Logic --------------------- */

  const nextImage = () => {
    if (!product || product.image.length === 0) return;
    setCurrentImageIndex((prev) => (prev + 1) % product.image.length);
  };

  const prevImage = () => {
    if (!product || product.image.length === 0) return;
    setCurrentImageIndex((prev) => (prev - 1 + product.image.length) % product.image.length);
  };

  // Swipe handlers (using touch events)
  const [touchStart, setTouchStart] = React.useState<number | null>(null);
  const [touchEnd, setTouchEnd] = React.useState<number | null>(null);

  const minSwipeDistance = 50;

  const onTouchStart = (e: React.TouchEvent) => {
    setTouchEnd(null);
    setTouchStart(e.targetTouches[0].clientX);
  };

  const onTouchMove = (e: React.TouchEvent) => {
    setTouchEnd(e.targetTouches[0].clientX);
  };

  const onTouchEnd = () => {
    if (!touchStart || !touchEnd) return;
    const distance = touchStart - touchEnd;
    const isLeftSwipe = distance > minSwipeDistance;
    const isRightSwipe = distance < -minSwipeDistance;
    if (isLeftSwipe && product && product.image.length > 1) nextImage();
    if (isRightSwipe && product && product.image.length > 1) prevImage();
  };

  /* ----------------------------- UI States -------------------------------- */

  if (loading) {
    return (
      <div className="flex min-h-screen items-center justify-center">
        Loading productâ€¦
      </div>
    );
  }

  if (!product) {
    return (
      <div className="p-10">
        <h1 className="text-2xl font-bold">Product not found</h1>
        <Button onClick={() => router.push("/store")} className="mt-4">
          Back to Store
        </Button>
      </div>
    );
  }

  const currentImage = product.image && product.image.length > 0
    ? product.image[currentImageIndex]
    : "https://via.placeholder.com/600x600?text=No+Image";

  /* ----------------------------- Render ---------------------------------- */

  const renderStars = () => {
    const rating = product.rating ?? 0;
    // const fullStars = Math.floor(rating);
    const fullStars = 5;
    const hasHalfStar = rating % 1 >= 0.5;

    return (
      <div className="flex items-center /bg-red-500">
        {Array.from({ length: 5 }).map((_, i) => (
          <Star
            key={`star-${product.id}-${i}`}
            className={cn(
              "h-4 w-4",
              i < fullStars
                ? "fill-yellow-400 text-yellow-400"
                : i === fullStars && hasHalfStar
                  ? "fill-yellow-400/50 text-yellow-400"
                  : "stroke-muted/40 text-muted"
            )}
          />
        ))}
        {rating > 0 && (
          <span className="ml-1 text-xs text-muted-foreground">
            {rating.toFixed(1)}
          </span>
        )}
      </div>
    );
  };

  return (
    <div className="min-h-screen py-10 relative">
      <div className="container grid gap-8 md:grid-cols-2">
        {/* Image Section */}
        <div className="group relative aspect-square bg-muted rounded-lg overflow-hidden flex items-center justify-center select-none">
          <img
            src={currentImage}
            alt={product.name}
            className="h-full w-full object-cover transition-transform duration-300 pointer-events-auto"
            onTouchStart={onTouchStart}
            onTouchMove={onTouchMove}
            onTouchEnd={onTouchEnd}
          />

          {/* Navigation Arrows */}
          {product.image.length > 1 && (
            <>
              <button 
                onClick={(e) => { e.preventDefault(); prevImage(); }} 
                className="absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-black/30 backdrop-blur-sm text-white rounded-full hover:bg-black/50 transition-all opacity-0 group-hover:opacity-100 z-10"
              >
                <ChevronLeft size={24} />
              </button>
              <button 
                onClick={(e) => { e.preventDefault(); nextImage(); }} 
                className="absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-black/30 backdrop-blur-sm text-white rounded-full hover:bg-black/50 transition-all opacity-0 group-hover:opacity-100 z-10"
              >
                <ChevronRight size={24} />
              </button>

              {/* Dots / Thumbnails Overlay */}
              <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10">
                {product.image.map((_, idx) => (
                  <button
                    key={idx}
                    onClick={() => setCurrentImageIndex(idx)}
                    className={cn(
                      "w-2.5 h-2.5 rounded-full transition-all shadow-md",
                      currentImageIndex === idx ? "bg-white scale-110" : "bg-white/50 hover:bg-white/80"
                    )}
                  />
                ))}
              </div>
            </>
          )}

          {/* Admin Image Controls */}
          {isAdmin && (
            <div className="absolute top-2 right-2 flex flex-col gap-2 z-20">
              {/* Add Image */}
              <Dialog open={isAddImageOpen} onOpenChange={setIsAddImageOpen}>
                <DialogTrigger asChild>
                  <Button size="icon" variant="secondary" className="shadow-lg h-10 w-10 rounded-full bg-white/90 hover:bg-white text-green-600 hover:text-green-700">
                    <Plus size={20} />
                  </Button>
                </DialogTrigger>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>Add Product Image</DialogTitle>
                  </DialogHeader>
                  <div className="py-4">
                    <Input
                      type="file"
                      accept="image/*"
                      onChange={(e) => setNewImageFile(e.target.files?.[0] || null)}
                    />
                  </div>
                  <DialogFooter>
                    <Button variant="outline" onClick={() => setIsAddImageOpen(false)}>Cancel</Button>
                    <Button onClick={handleAddImage} disabled={!newImageFile || uploadingImage}>
                      {uploadingImage ? "Uploading..." : "Upload & Add"}
                    </Button>
                  </DialogFooter>
                </DialogContent>
              </Dialog>

              {/* Delete Image */}
              {product.image.length > 0 && (
                <Button
                  size="icon"
                  variant="destructive"
                  className="shadow-lg h-10 w-10 rounded-full opacity-80 hover:opacity-100 transition-opacity"
                  onClick={() => handleDeleteImage(currentImageIndex)}
                >
                  <Trash size={18} />
                </Button>
              )}
            </div>
          )}
        </div>

        {/* Info Section */}
        <div className="flex flex-col">
          <div className="flex justify-between items-start">
            <h1 className="text-3xl font-bold">{product.name}</h1>
          </div>

          <div className="mt-2 flex items-center gap-2 min-w-20">
            {renderStars()}
            <span className="text-sm text-muted-foreground">
              ({product.rating.toFixed(1)})
            </span>
          </div>

          <p className="mt-4 text-3xl font-bold text-primary">
            {CURRENCY.format(product.price)}
          </p>

          <div className="mt-6 flex-1 relative group/desc">
            <div className="flex items-center justify-between mb-2">
              <h3 className="font-semibold text-lg">Description</h3>
              {isAdmin && !isEditingDescription && (
                 <Button
                 size="sm"
                 variant="ghost"
                 className="text-blue-600 hover:text-blue-700 hover:bg-blue-50"
                 onClick={() => {
                   setNewDescription(product.description);
                   setIsEditingDescription(true);
                 }}
               >
                 <Edit size={14} className="mr-1" /> Edit
               </Button>
              )}
            </div>
            
            {!isEditingDescription ? (
               <div className="prose prose-sm max-w-none text-muted-foreground leading-relaxed whitespace-pre-wrap">
                  {product.description}
               </div>
            ) : (
              <div className="space-y-3 p-4 bg-muted/30 rounded-lg border border-border animate-in fade-in zoom-in-95 duration-200">
                <Textarea
                  value={newDescription}
                  onChange={(e) => setNewDescription(e.target.value)}
                  className="min-h-[150px] bg-background"
                  placeholder="Enter product description..."
                />
                <div className="flex justify-end gap-2">
                  <Button size="sm" variant="outline" onClick={() => setIsEditingDescription(false)}>Cancel</Button>
                  <Button size="sm" onClick={handleSaveDescription}>Save Changes</Button>
                </div>
              </div>
            )}
          </div>

          {/* Stock */}
          <div className="mt-6 flex items-center gap-2">
             <div className={`w-2.5 h-2.5 rounded-full ${product.inStock ? "bg-green-500" : "bg-red-500"}`} />
             <p className={`font-medium ${product.inStock ? "text-green-700" : "text-red-600"}`}>
               {product.inStock ? "In Stock" : "Out of Stock"}
             </p>
          </div>
          

          {/* Controls */}
          <div className="mt-8 flex flex-col gap-4">
             <div className="flex items-center gap-4">
               <div className="flex items-center border border-input rounded-md">
                  <Button variant="ghost" size="icon" onClick={handleDecrease} disabled={quantity <= 0} className="h-10 w-10">
                    <Minus size={16} />
                  </Button>
                  <span className="w-12 text-center font-medium">{quantity}</span>
                  <Button variant="ghost" size="icon" onClick={handleIncrease} className="h-10 w-10">
                    <Plus size={16} />
                  </Button>
               </div>
               
               <Button
                  className="flex-1 h-10 text-base shadow-md hover:shadow-lg transition-all"
                  disabled={!product.inStock || isAdding}
                  onClick={handleAddToCart}
                >
                  <ShoppingCart className="mr-2 h-5 w-5" />
                  {isAdding ? "Adding..." : "Add to Cart"}
                </Button>
             </div>
          </div>

        </div>
      </div>

      <Separator className="my-16" />

      <Similar similar={allProducts} />

      <Separator className="my-16" />

      <div className="container pb-20">
        <h2 className="text-2xl font-bold mb-6">More to Explore</h2>
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {allProducts
            .filter((p) => p.id !== id)
            .slice(0, 8) // Limit to 8 products
            .map((prod) => (
              <ProductCard
                key={prod.id}
                product={prod}
                orientation="vertical"
                onAddToCart={(p) => {
                  addItem(p, 1);
                  toast.success(`${p.name} added to cart`);
                }}
              />
            ))}
        </div>
      </div>
    </div>
  );
}



================================================================================
LOCATION: bin\middleware.ts
================================================================================

// "use server"
// export { auth as middleware } from "@/server/auth"



// export const config = {
//     unstable_allowDynamic: [npm r
//       // '/node_modules/mongoose/dist/browser.umd.js',
//       // '/server/config/mongodb.ts',
//       // '/server/auth.ts',
//       '/middleware.ts',
//     ],
//   }



// export { default } from "next-auth/middleware"

// export const config = { matcher: ["/admin"] }


================================================================================
LOCATION: components\commentCard.tsx
================================================================================

import { normalizeDateTime } from "@/utils";
import axios from "axios";
import { useAppContext } from "@/hooks/useAppContext";
import { Button } from '@/components/ui/button'

const CommentCard = (prop: { name: string, createdAt: string, comment: string, id: string }) => {
  const { user, openDialog } = useAppContext();

  const handleDelete = async () => {
    try {
      const response = await axios.delete(`/api/dbhandler?model=comments&id=${prop.id}`);
      if (response.status === 200) {
        openDialog("Comment deleted", "Success");
        // You may want to reload the comments list here
      }
    } catch (error) {
      console.log(error);
    }
  };

  return (
    <div className="w-full mb-1 py-1">
      <div className="w-full bg-m-hover p-1 flex justify-between items-center">
        <div>
          <span className="font-semibold italic pr-2">{prop.name}</span>
          <span className="text-xs">[{normalizeDateTime(prop.createdAt)}]</span>
        </div>
        {(user.role === "admin" || user.role === "moderator") && (
          <Button variant={"destructive"} size={"sm"} onClick={handleDelete}>
            Delete
          </Button>
        )}
      </div>
      <p className="bg-m-contrast p-1 text-sm">{prop.comment}</p>
    </div>
  );
};

export default CommentCard;




================================================================================
LOCATION: components\comments.tsx
================================================================================

"use client";
import { useEffect, useState } from "react";
import CommentCard from "./commentCard";
import { useAppContext } from "@/hooks/useAppContext";
import Modal from "./modal";
import TextArea from "./textArea";
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from "./ui/collapsible";
import { ChevronsUpDown } from "lucide-react";
// import { commentsObject } from "@/mock/comments";
import { BASE_URL, headers } from "@/utils/constants";
import axios from "axios";
import { Button } from '@/components/ui/button'

const baseUrl = BASE_URL + "/comments";

const Comments = ( props : {videoId : string}) => {
  const { user, isModal, setIsModal, comments, setComments} = useAppContext();
  const [compComments, setCompComments] = useState([]); //<CommentType[]>
  const [comment, setComment] = useState<string>("");
  const [loading, setLoading] = useState(true);



  const getComments = async (videoId: string) => {
    try {
      const res = await axios.get(`/api/dbhandler?model=comments&id=${videoId}`);
      //console.log(res.data)
     return res.data;
    } catch (error) {
      console.log(error);
    }
  };
  
  const postComment = async (videoId: string) => {
    try {
      const response = await axios.post('/api/dbhandler?model=comments', {
        userId: user.id,
        username: user.name,
        contentId: videoId,
        comment: comment,
      });
      return response.data;
    } catch (error) {
      console.log(error);
    }
  };



  useEffect(() => {
    // if (!selectedVideo?.id) return;
    
    getComments(props.videoId)
      .then((res) => {
        setComments([...comments, ...res]);
        setLoading(false);
      })
      .catch((err) => console.log(err));

    setCompComments(comments.filter((comment)=> comment.contentId === props.videoId))
    console.log('all comment',comments,'filtered comments', comments.filter((comment)=> comment.contentId === props.videoId))
  }, [props.videoId]);
  

  if (!props.videoId) return;

  const validate = (): boolean => comment.length > 0;

  const showModal = () => {
    setIsModal(true);
  };

  const save = () => {
    if (!validate()) return;
    console.log('video id', props.videoId)
    postComment(props.videoId)
      .then(() => {
        // request a list of new videos, because there is no ID  in the response
        getComments(props.videoId)
          .then((res) => setComments(res.comments))
          .catch((err) => console.log(err));
      })
      .finally(() => setComment(""));
    setIsModal(false);
  };
  //for collapsible
  const [isOpen, setIsOpen] = useState(false)

  return (
    <Collapsible
      open={isOpen}
      onOpenChange={setIsOpen}
      className="w-full space-y-2 px-2"
    >
      <div className="flex items-center justify-between space-x-4 px-4">
        <CollapsibleTrigger asChild>
          <div className="w-full rounded-md border px-2 py-1 /hover:bg-secondary/90">
            {loading&&compComments?.length<1 ? <div>no comment ...</div> : <CommentCard 
            name={comments?.at(0)?.name} 
            createdAt={comments?.at(0)?.createdAt} 
            comment={comments?.at(0)?.comment}
            id={comments?.at(0)?.id}
          />}
            <div><ChevronsUpDown className="h-4 w-4" /></div>
          </div>
        </CollapsibleTrigger>
      </div>

      <CollapsibleContent className="space-y-2">
        <Button onClick={showModal}>Add comment</Button>

        {compComments?.map((comment) => (
          <div key={comment.id}>
            <CommentCard 
              name={comment.name} 
              createdAt={comment.createdAt} 
              comment={comment.comment} 
              id={comment.id}
            />
          </div>
        ))}

        {isModal && (
          <Modal
            close={() => setIsModal(false)}
            save={save}
            isSaveAllowed={validate()}
            className="bg-secondary overflow-clip"
          >
            <h3 className="text-base my-2">
              <span className="font-semibold">@{user.name}</span>
            </h3>
            <TextArea onChange={(e) => setComment(e.target.value)} className="h-[15%]" />
          </Modal>
        )}
      </CollapsibleContent>
    </Collapsible>
  );
};

export default Comments;



================================================================================
LOCATION: components\modal.tsx
================================================================================

import React from "react";
// import { Button } from "./button";
import { Button } from "./ui/button";

interface ModalProps {
  children?: React.ReactNode;
  className?: string;
  close: () => void;
  save: () => any
  isSaveAllowed?: boolean;
}

const Modal: React.FC<ModalProps> = ({
  children,
  className,
  isSaveAllowed,
  close,
  save,
}) => {
  return (
    <div className="fixed inset-0 flex items-center justify-center z-10 bg-background/50">
      <div className="fixed inset-0 bg-black opacity-25" />
      <div
        className={`/fixed relative flex flex-col sm:w-full md:w-3/4 min-h-[200px] max-h-[40%] p-4 bg-m-base-end border-2 border-accent rounded-lg
         ${className ? className : ""}`}
      >
        <div className="flex-1">{children}</div>
        <div className="absolute flex gap-3 justify-center bottom-2 right-2 w-full max-w-sm">
          <Button variant="outline" onClick={close} className="flex-1">Cancel</Button>
          <Button onClick={save} disabled={!isSaveAllowed} className="flex-1">Send</Button>
        </div>
      </div>
    </div>
  );
};

export default Modal;



================================================================================
LOCATION: components\textArea.tsx
================================================================================

import React, { ChangeEvent } from "react";

interface TextAreaProps {
  className?: string;
  disabled?: boolean;
  value?: string;
  onChange: (e: ChangeEvent<HTMLTextAreaElement>) => void;
  placeholder?: string;
  rows?: number;
}

const TextArea: React.FC<TextAreaProps> = ({
  className,
  disabled,
  onChange,
  rows,
  ...rest
}) => {
  return (
    <textarea
      className={`w-full p-1 mb-2 
        ${disabled ? "" : "border rounded"}
        ${className || ""}`}
      rows={rows || 2}
      onChange={onChange}
      {...rest}
    />
  );
};

export default TextArea;



================================================================================
LOCATION: components\theme-provider.tsx
================================================================================

'use client'

import * as React from 'react'
import { type ThemeProviderProps } from 'next-themes'
import dynamic from 'next/dynamic'

const NextThemesProvider = dynamic(
	() => import('next-themes').then((e) => e.ThemeProvider),
	{
		ssr: false,
	}
)



export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
	return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}


================================================================================
LOCATION: components\analytics\analytics.tsx
================================================================================




================================================================================
LOCATION: components\analytics\KpiSection.tsx
================================================================================

"use client";

import { useAnalytics } from "./hooks/useAnalytics";
import { KpiCard } from "./cards/KpiCard";
import { DollarSign, ShoppingCart, Users, ArrowUpRight, ArrowDownRight } from "lucide-react";

interface KpiSectionProps {
    params?: Record<string, any>;
}

export function KpiSection({ params }: KpiSectionProps) {
    const { data, isLoading } = useAnalytics("kpi", params);

    if (isLoading) return <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4 w-full h-24 animate-pulse bg-muted rounded-md" />;
    if (!data) return null;

    return (
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <KpiCard
                title="Total Revenue"
                value={`â‚¦${data.totalRevenue.toLocaleString()}`}
                icon={<DollarSign className="h-4 w-4 text-muted-foreground" />}
            />
            <KpiCard
                title="Total Orders"
                value={data.totalOrders.toLocaleString()}
                icon={<ShoppingCart className="h-4 w-4 text-muted-foreground" />}
            />
            <KpiCard
                title="Refunds"
                value={`â‚¦${data.totalRefunds.toLocaleString()}`}
                icon={<ArrowDownRight className="h-4 w-4 text-red-500" />}
            />
            <KpiCard
                title="New Users"
                value={data.newUsers.toLocaleString()}
                description={`of ${data.totalUsers.toLocaleString()} total`}
                icon={<Users className="h-4 w-4 text-muted-foreground" />}
            />
        </div>
    );
}



================================================================================
LOCATION: components\analytics\cards\ChartCard.tsx
================================================================================

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { cn } from "@/lib/utils";

interface ChartCardProps {
    title: string;
    children: React.ReactNode;
    className?: string;
    action?: React.ReactNode;
}

export function ChartCard({ title, children, className, action }: ChartCardProps) {
    return (
        <Card className={cn("w-full shadow-sm hover:shadow-md transition-shadow", className)}>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                <CardTitle className="text-base font-semibold">{title}</CardTitle>
                {action && <div>{action}</div>}
            </CardHeader>
            <CardContent className="pt-4">
                {children}
            </CardContent>
        </Card>
    );
}



================================================================================
LOCATION: components\analytics\cards\KpiCard.tsx
================================================================================

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";

interface KpiCardProps {
    title: string;
    value: string | number;
    description?: string;
    icon?: React.ReactNode;
    trend?: "up" | "down" | "neutral";
}

export function KpiCard({ title, value, description, icon }: KpiCardProps) {
    return (
        <Card className="shadow-sm">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                <CardTitle className="text-sm font-medium">{title}</CardTitle>
                {icon && <div className="text-muted-foreground">{icon}</div>}
            </CardHeader>
            <CardContent>
                <div className="text-2xl font-bold">{value}</div>
                {description && (
                    <p className="text-xs text-muted-foreground mt-1">
                        {description}
                    </p>
                )}
            </CardContent>
        </Card>
    );
}



================================================================================
LOCATION: components\analytics\charts\CartStatusChart.tsx
================================================================================

"use client";

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, PieChart, Pie, Cell, Tooltip, Legend } from "recharts";

const COLORS = ["#00C49F", "#FFBB28", "#FF8042", "#0088FE"];

interface ChartProps {
    params?: Record<string, any>;
}

export function CartStatusChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("cart-status", params);

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;
    if (!data || data.length === 0) return <div className="h-[300px] flex items-center justify-center text-muted-foreground">No data available</div>;

    return (
        <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
                <PieChart>
                    <Pie
                        data={data}
                        cx="50%"
                        cy="50%"
                        innerRadius={60}
                        outerRadius={80}
                        fill="#8884d8"
                        paddingAngle={5}
                        dataKey="value"
                    >
                        {data.map((entry: any, index: number) => (
                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                        ))}
                    </Pie>
                    <Tooltip
                        contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                        itemStyle={{ color: "hsl(var(--foreground))" }}
                    />
                    <Legend />
                </PieChart>
            </ResponsiveContainer>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\charts\ProfitChart.tsx
================================================================================

"use client";

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, ComposedChart, Line, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from "recharts";
import { format } from "date-fns";

interface ChartProps {
    params?: Record<string, any>;
}

export function ProfitChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("profit", params);

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;
    if (!data || !Array.isArray(data) || data.length === 0) return <div className="h-[300px] flex items-center justify-center text-muted-foreground">No data available</div>;

    const formattedData = data.map((d: any) => ({
        ...d,
        dateStr: format(new Date(d.date), "MMM d"),
    }));

    return (
        <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
                <ComposedChart data={formattedData}>
                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                    <XAxis dataKey="dateStr" tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                    <YAxis tickLine={false} axisLine={false} tickFormatter={(val) => `â‚¦${val}`} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                    <Tooltip
                        contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                        itemStyle={{ color: "hsl(var(--foreground))" }}
                    />
                    <Legend />
                    <Bar dataKey="revenue" fill="hsl(var(--primary))" radius={[4, 4, 0, 0]} name="Revenue" barSize={30} />
                    <Line type="monotone" dataKey="profit" stroke="#10b981" strokeWidth={2} name="Profit" />
                </ComposedChart>
            </ResponsiveContainer>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\charts\RefundReasonChart.tsx
================================================================================

"use client";

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, PieChart, Pie, Cell, Tooltip, Legend } from "recharts";

const COLORS = ["#00C49F", "#FFBB28", "#FF8042", "#0088FE", "#8884d8"];

interface ChartProps {
    params?: Record<string, any>;
}

export function RefundReasonChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("refunds", params); // Assuming we update API to group by reason if possible, or just mock reasons if unimplemented

    // Mock data for reasons if API only returns total list, or if API response structure is just list of amounts
    // For now let's assume we want to visualize this even if data is simple
    // If data is just array of { date, amount }, we can't do reasons.
    // Let's create a derived dummy breakdown or just return null if no reasons data.

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;

    // Placeholder logic until DB supports refund reasons
    const dummyData = [
        { name: "Damaged", value: 4 },
        { name: "Wrong Item", value: 2 },
        { name: "Late Delivery", value: 1 },
        { name: "Changed Mind", value: 3 },
    ];

    return (
        <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
                <PieChart>
                    <Pie
                        data={dummyData}
                        cx="50%"
                        cy="50%"
                        innerRadius={60}
                        outerRadius={80}
                        fill="#8884d8"
                        paddingAngle={5}
                        dataKey="value"
                    >
                        {dummyData.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                        ))}
                    </Pie>
                    <Tooltip
                        contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                        itemStyle={{ color: "hsl(var(--foreground))" }}
                    />
                    <Legend />
                </PieChart>
            </ResponsiveContainer>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\charts\RevenueChart.tsx
================================================================================

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, AreaChart, Area, BarChart, Bar } from "recharts";
import { format } from "date-fns";
import { useState } from "react";
import { Button } from "@/components/ui/button";

interface ChartProps {
    params?: Record<string, any>;
}

export function RevenueChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("revenue", params);
    const [chartType, setChartType] = useState<"line" | "area" | "bar">("line");

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;
    if (!data || !Array.isArray(data) || data.length === 0) return <div className="h-[300px] flex items-center justify-center text-muted-foreground">No data available</div>;

    // Simple aggregation or formatting if needed
    const formattedData = data.map((d: any) => ({
        ...d,
        dateStr: format(new Date(d.date), "MMM d"),
    }));

    return (
        <div className="space-y-4">
            <div className="flex justify-end space-x-2">
                <Button variant={chartType === "line" ? "default" : "outline"} size="sm" onClick={() => setChartType("line")}>Line</Button>
                <Button variant={chartType === "area" ? "default" : "outline"} size="sm" onClick={() => setChartType("area")}>Area</Button>
                <Button variant={chartType === "bar" ? "default" : "outline"} size="sm" onClick={() => setChartType("bar")}>Bar</Button>
            </div>
            <div className="h-[300px] w-full">
                <ResponsiveContainer width="100%" height="100%">
                    {chartType === "line" ? (
                        <LineChart data={formattedData}>
                            <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                            <XAxis dataKey="dateStr" tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <YAxis tickLine={false} axisLine={false} tickFormatter={(val) => `â‚¦${val}`} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <Tooltip
                                contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                                itemStyle={{ color: "hsl(var(--foreground))" }}
                            />
                            <Line type="monotone" dataKey="revenue" stroke="hsl(var(--primary))" strokeWidth={2} dot={false} activeDot={{ r: 4 }} />
                        </LineChart>
                    ) : chartType === "area" ? (
                        <AreaChart data={formattedData}>
                            <defs>
                                <linearGradient id="colorRevenue" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="5%" stopColor="hsl(var(--primary))" stopOpacity={0.3} />
                                    <stop offset="95%" stopColor="hsl(var(--primary))" stopOpacity={0} />
                                </linearGradient>
                            </defs>
                            <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                            <XAxis dataKey="dateStr" tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <YAxis tickLine={false} axisLine={false} tickFormatter={(val) => `â‚¦${val}`} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <Tooltip
                                contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                                itemStyle={{ color: "hsl(var(--foreground))" }}
                            />
                            <Area type="monotone" dataKey="revenue" stroke="hsl(var(--primary))" fillOpacity={1} fill="url(#colorRevenue)" />
                        </AreaChart>
                    ) : (
                        <BarChart data={formattedData}>
                            <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                            <XAxis dataKey="dateStr" tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <YAxis tickLine={false} axisLine={false} tickFormatter={(val) => `â‚¦${val}`} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                            <Tooltip
                                contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                                itemStyle={{ color: "hsl(var(--foreground))" }}
                            />
                            <Bar dataKey="revenue" fill="hsl(var(--primary))" radius={[4, 4, 0, 0]} />
                        </BarChart>
                    )}
                </ResponsiveContainer>
            </div>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\charts\TopProductsChart.tsx
================================================================================

"use client";

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip } from "recharts";

interface ChartProps {
    params?: Record<string, any>;
}

export function TopProductsChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("products", params);

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;
    if (!data || data.length === 0) return <div className="h-[300px] flex items-center justify-center text-muted-foreground">No data available</div>;

    return (
        <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
                <BarChart layout="vertical" data={data} margin={{ left: 40, right: 40 }}>
                    <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                    <XAxis type="number" hide />
                    <YAxis dataKey="name" type="category" width={100} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} tickLine={false} axisLine={false} />
                    <Tooltip
                        cursor={{ fill: "hsl(var(--muted)/0.4)" }}
                        contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                        itemStyle={{ color: "hsl(var(--foreground))" }}
                    />
                    <Bar dataKey="sales" fill="hsl(var(--primary))" radius={[0, 4, 4, 0]} barSize={20} />
                </BarChart>
            </ResponsiveContainer>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\charts\VisitAnalysisChart.tsx
================================================================================

"use client";

import { useAnalytics } from "../hooks/useAnalytics";
import { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from "recharts";
import { format } from "date-fns";
import { useState } from "react";
import { Button } from "@/components/ui/button";

interface ChartProps {
    params?: Record<string, any>;
}

export function VisitAnalysisChart({ params }: ChartProps) {
    const { data, isLoading } = useAnalytics("visits", params);

    if (isLoading) return <div className="h-[300px] w-full animate-pulse bg-muted rounded-md" />;
    if (!data || !Array.isArray(data) || data.length === 0) return <div className="h-[300px] flex items-center justify-center text-muted-foreground">No visit data available</div>;

    // Aggregate visits by date
    // Data is array of ISO date strings
    const aggregated = data.reduce((acc: any, dateStr: string) => {
        const day = format(new Date(dateStr), "yyyy-MM-dd");
        if (!acc[day]) acc[day] = 0;
        acc[day]++;
        return acc;
    }, {});

    const chartData = Object.keys(aggregated).map(key => ({
        dateStr: format(new Date(key), "MMM d"),
        visits: aggregated[key]
    })).sort((a: any, b: any) => new Date(a.dateStr).getTime() - new Date(b.dateStr).getTime()); // Basic sort relying on MMM d might be risky across years but okay for short term

    return (
        <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
                <BarChart data={chartData}>
                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="hsl(var(--muted-foreground)/0.2)" />
                    <XAxis dataKey="dateStr" tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                    <YAxis tickLine={false} axisLine={false} tick={{ fontSize: 12, fill: "hsl(var(--muted-foreground))" }} />
                    <Tooltip
                        contentStyle={{ backgroundColor: "hsl(var(--background))", borderRadius: "8px", border: "1px solid hsl(var(--border))" }}
                        itemStyle={{ color: "hsl(var(--foreground))" }}
                    />
                    <Legend />
                    <Bar dataKey="visits" fill="hsl(var(--primary))" radius={[4, 4, 0, 0]} name="Page Visits" />
                </BarChart>
            </ResponsiveContainer>
        </div>
    );
}



================================================================================
LOCATION: components\analytics\hooks\useAnalytics.ts
================================================================================

import useSWR from 'swr';

const fetcher = (url: string) => fetch(url).then((res) => res.json());

export function useAnalytics(metric: string, params?: Record<string, any>) {
    const query = new URLSearchParams(params).toString();
    const { data, error, isLoading } = useSWR(
        `/api/admin/analytics?metric=${metric}&${query}`,
        fetcher
    );

    return {
        data,
        isLoading,
        isError: error,
    };
}



================================================================================
LOCATION: components\myComponents\bookdrawer.tsx
================================================================================

import * as React from "react"
import { Minus, Plus } from "lucide-react"
import { Bar, BarChart, ResponsiveContainer } from "recharts"

import { Button } from "@/components/ui/button"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { useSelector } from "react-redux"
import { RootState } from "@/store"
import { Input } from "../ui/input"
import { useState } from "react"




import { useAppContext } from "@/hooks/useAppContext";

export function BookDrawer(props: { cart: any }) {
  const { openDialog } = useAppContext();
  let total = 0
  let qty = 0

  props.cart.forEach((item) => { total = total + item.totalPrice })
  props.cart.forEach((item) => { qty = qty + item.quantity })

  const productsIdQty = props.cart.map(item => ({ _id: item.id, quantity: item.quantity }));

  const cartSale = {
    products: productsIdQty,
    totalSale: total,
    totalQty: qty,
    status: "pending",
    paymentStatus: "unpaid"
  }
  console.log(cartSale)

  const saveCart = async () => {
    //before saving modify the sale data, set it to payment not made, try adding time field to the sale data, set transaction id to null

    const submitToServer = async () => {
      await fetch("/api/data/sale", {
        //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
        method: "POST",
        // headers: {
        //     "Content-Type": "application/json",
        // },
        body: JSON.stringify(cartSale),
        // body: JSON.stringify(form)
      })
        .then((response) => response.json())
        .then((data) => {
          // emptyCart({
          //   username : "",
          //   email : "",
          //   emailto : "",
          //   category : "",
          //   message : "",
          // }); 
          openDialog("Cart successfully saved", "Success")
        })
        .catch((error) => console.error(error));
    }
    console.log(`about to send to server ${props.cart}`)

    submitToServer()
  };

  return (
    <Drawer>
      <DrawerTrigger asChild>
        <Button variant="outline">Book</Button>
      </DrawerTrigger>
      <DrawerContent>
        <div className="mx-auto w-full max-w-sm">
          <DrawerHeader>
            <DrawerTitle>Book your order</DrawerTitle>
            <DrawerDescription>Your order will be saved till when you are ready to make a purchase.</DrawerDescription>
          </DrawerHeader>
          <div>
            <div>Input a name for this cart</div>
            <Input type="text" className="w-40" />
          </div>
          <DrawerFooter>
            {/* <Button>Book</Button> */}
            <DrawerClose asChild>
              <Button variant="outline" onClick={saveCart}>Book</Button>
            </DrawerClose>
          </DrawerFooter>
        </div>
      </DrawerContent>
    </Drawer>
  )
}





================================================================================
LOCATION: components\myComponents\booked.tsx
================================================================================

import * as React from "react"

import { Button } from "@/components/ui/button"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { useSelector } from "react-redux"
import { RootState } from "@/store"


export function Booked() {
  const cartItems = useSelector((state : RootState)=>state.cart.itemsList)

  let total = 0

  cartItems.forEach((item)=>{ total = total + item.totalPrice})


  return (
    <Drawer>
      <DrawerTrigger asChild>
        <Button variant="outline">Booked</Button>
      </DrawerTrigger>
      <DrawerContent>
        <div className="mx-auto w-full max-w-sm">
          <DrawerHeader>
            <DrawerTitle>Booked Orders</DrawerTitle>
            <DrawerDescription>click an order to view what it contains</DrawerDescription>
          </DrawerHeader>
          <div>
            list of saved orders from server
          </div>
          <DrawerFooter>
            <Button>Submit</Button>
            <DrawerClose asChild>
              <Button variant="outline">Cancel</Button>
            </DrawerClose>
          </DrawerFooter>
        </div>
      </DrawerContent>
    </Drawer>
  )
}



================================================================================
LOCATION: components\myComponents\paydrawer.tsx
================================================================================

import * as React from "react"
import { Minus, Plus } from "lucide-react"
import { Bar, BarChart, ResponsiveContainer } from "recharts"

import { Button } from "@/components/ui/button"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { useSelector } from "react-redux"
import { RootState } from "@/store"




export function PayDrawer(props : {cart: any}) {
  let total = 0

  props.cart.forEach((item)=>{ total = total + item.totalPrice})

  const [goal, setGoal] = React.useState(total)

  function onClick(adjustment: number) {
    setGoal(Math.max(200, Math.min(400, goal + adjustment)))
  }

  return (
    <Drawer>
      <DrawerTrigger asChild>
        <Button variant="outline">Order</Button>
      </DrawerTrigger>
      <DrawerContent>
        <div className="mx-auto w-full max-w-sm">
          <DrawerHeader>
            <DrawerTitle>Move Goal</DrawerTitle>
            <DrawerDescription>Set your daily activity goal.</DrawerDescription>
          </DrawerHeader>
          <div className="p-4 pb-0">
            <div className="flex items-center justify-center space-x-2">
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8 shrink-0 rounded-full"
                onClick={() => onClick(-10)}
                disabled={goal <= 200}
              >
                <Minus className="h-4 w-4" />
                <span className="sr-only">Decrease</span>
              </Button>
              <div className="flex-1 text-center">
                <div className="text-7xl font-bold tracking-tighter">
                  {goal}
                </div>
                <div className="text-[0.70rem] uppercase text-muted-foreground">
                  Calories/day
                </div>
              </div>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8 shrink-0 rounded-full"
                onClick={() => onClick(10)}
                disabled={goal >= 400}
              >
                <Plus className="h-4 w-4" />
                <span className="sr-only">Increase</span>
              </Button>
            </div>
          </div>
          <DrawerFooter>
            <Button>Submit</Button>
            <DrawerClose asChild>
              <Button variant="outline">Cancel</Button>
            </DrawerClose>
          </DrawerFooter>
        </div>
      </DrawerContent>
    </Drawer>
  )
}



================================================================================
LOCATION: components\myComponents\salestore.tsx
================================================================================

// components/ECommerceSalesPage.js

import { Button } from "../ui/button";

const products = [
  {
    id: 1,
    image: 'https://via.placeholder.com/250x250',
    title: 'Product 1',
    price: '$19.99',
  },
  {
    id: 2,
    image: 'https://via.placeholder.com/250x250',
    title: 'Product 2',
    price: '$29.99',
  },
  // Add more products as needed
];

const ECommerceSalesPage = () => {
  return (
    <div className="bg-white">
      {/* Fixed Cart Icon */}
      <div className="fixed top-4 right-4 z-50">
        <div className="bg-primary text-white rounded-full p-2 flex items-center justify-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            className="w-6 h-6"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
            />
          </svg>
          <span className="ml-2 text-sm">2</span>
        </div>
      </div>

      {/* Product Grid */}
      <div className="container mx-auto py-8">
        <h1 className="text-3xl font-bold text-primary text-center mb-8">Our Products</h1>
        <div className="grid gap-6 md:grid-cols-4 tablet:grid-cols-3 mobile:grid-cols-2">
          {products.map((product) => (
            <div
              key={product.id}
              className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300"
            >
              <div className="relative">
                <img
                  src={product.image}
                  alt={product.title}
                  className="w-full h-32 md:h-48 object-cover"
                />
              </div>
              <div className="p-4">
                <h2 className="text-lg font-bold text-center mb-2">{product.title}</h2>
                <p className="text-accent text-xl font-semibold text-center mb-4">{product.price}</p>
                <div className="flex justify-center space-x-4">
                  <Button variant="secondary" className="px-4 py-2">
                    View Details
                  </Button>
                  <Button variant="secondary" className="px-4 py-2">
                    Add to Cart
                  </Button>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default ECommerceSalesPage;


================================================================================
LOCATION: components\myComponents\subs\AddLunchDialog.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"
import { Label } from "@/components/ui/label"
import { getUserLunches, createLunch, addToLunch } from "@/action/lunch"
import { Plus, Loader2 } from "lucide-react"
import { toast } from "sonner"

interface AddLunchDialogProps {
  isOpen: boolean
  onClose: () => void
  productId: string
}

export function AddLunchDialog({ isOpen, onClose, productId }: AddLunchDialogProps) {
  const [lunches, setLunches] = useState<any[]>([])
  const [loading, setLoading] = useState(false)
  const [submitting, setSubmitting] = useState(false)
  const [selectedLunchId, setSelectedLunchId] = useState<string>("")
  const [isCreatingNew, setIsCreatingNew] = useState(false)
  const [newLunchName, setNewLunchName] = useState("")

  useEffect(() => {
    if (isOpen) {
      fetchLunches()
      setIsCreatingNew(false)
      setSelectedLunchId("")
      setNewLunchName("")
    }
  }, [isOpen])

  const fetchLunches = async () => {
    setLoading(true)
    try {
      const data = await getUserLunches()
      setLunches(data.templates || [])
    } catch (error) {
      console.error("Failed to fetch lunches", error)
      toast.error("Failed to load your lunch lists")
    } finally {
      setLoading(false)
    }
  }

  const handleSave = async () => {
    setSubmitting(true)
    try {
      if (isCreatingNew) {
        if (!newLunchName.trim()) {
           toast.error("Please enter a name for the new lunch")
           setSubmitting(false)
           return
        }
        const res = await createLunch(newLunchName, productId)
        if (res.success) {
            toast.success(`Created "${newLunchName}" and added product`)
            onClose()
        } else {
            toast.error("Failed to create lunch")
        }
      } else {
        if (!selectedLunchId) {
            toast.error("Please select a lunch list")
             setSubmitting(false)
            return
        }
        const res = await addToLunch(selectedLunchId, productId)
        if (res.success) {
            toast.success("Added to lunch list")
            onClose()
        } else {
            toast.error("Failed to add to lunch")
        }
      }
    } catch (error) {
        console.error(error)
        toast.error("An error occurred")
    } finally {
        setSubmitting(false)
    }
  }

  return (
    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>
      <DialogContent className="sm:max-w-md">
        <DialogHeader>
          <DialogTitle>Add to Lunch List</DialogTitle>
        </DialogHeader>
        
        <div className="py-4">
          {loading ? (
            <div className="flex justify-center py-4">
              <Loader2 className="h-6 w-6 animate-spin text-primary" />
            </div>
          ) : (
            <div className="space-y-4">
              {lunches.length > 0 && !isCreatingNew ? (
                <div className="space-y-3">
                   <Label>Select a Lunch List</Label>
                   <RadioGroup value={selectedLunchId} onValueChange={setSelectedLunchId}>
                      {lunches.map((lunch) => (
                        <div key={lunch.id} className="flex items-center space-x-2 border p-3 rounded-md hover:bg-accent/50 cursor-pointer">
                          <RadioGroupItem value={lunch.id} id={lunch.id} />
                          <Label htmlFor={lunch.id} className="cursor-pointer flex-1 cursor-pointer">
                            {lunch.name} <span className="text-muted-foreground text-xs">({lunch.products?.length || 0} items)</span>
                          </Label>
                        </div>
                      ))}
                   </RadioGroup>
                   
                   <div className="pt-2">
                     <Button variant="outline" size="sm" className="w-full" onClick={() => setIsCreatingNew(true)}>
                        <Plus className="mr-2 h-4 w-4" /> Create New Lunch
                     </Button>
                   </div>
                </div>
              ) : (
                <div className="space-y-3">
                    <Label>{lunches.length === 0 ? "You don't have any lunch lists yet" : "Create New Lunch List"}</Label>
                    <Input 
                        placeholder="e.g. Work Lunch, Weekend Treat" 
                        value={newLunchName}
                        onChange={(e) => setNewLunchName(e.target.value)}
                    />
                    
                    {lunches.length > 0 && (
                        <Button variant="ghost" size="sm" onClick={() => setIsCreatingNew(false)}>
                            Cancel
                        </Button>
                    )}
                </div>
              )}
            </div>
          )}
        </div>

        <DialogFooter>
          <Button variant="secondary" onClick={onClose} disabled={submitting}>Cancel</Button>
          <Button onClick={handleSave} disabled={submitting || loading || (!isCreatingNew && !selectedLunchId)}>
            {submitting && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
            Save
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}



================================================================================
LOCATION: components\myComponents\subs\advert.tsx
================================================================================

"use client"
import React from 'react'

const Advert = () => {
  return (
    <header className='w-full overflow-clip h-[30px] bg-accent/50 dark:bg-accent flex flex-row justify-center items-center text-center text-background font-semibold gap-5'>
      <div className='animate-pulse'>Welcome to Succo</div>
    </header>
  )
}

export default Advert



================================================================================
LOCATION: components\myComponents\subs\auth.tsx
================================================================================

import { authActions } from '@/store/auth-slice';
import React from 'react'
import { useDispatch } from 'react-redux';

const Auth = () => {
    const dispatch = useDispatch()
    const handleSubmit = (e : any) => {
        e.preventDefault();
        dispatch(authActions.login())
    };
  return (
    <div>
      <form action="" onSubmit={handleSubmit}></form>
    </div>
  )
}

export default Auth



================================================================================
LOCATION: components\myComponents\subs\avatar.tsx
================================================================================

"use client";

import type * as React from "react";

import * as AvatarPrimitive from "@radix-ui/react-avatar";

import { cn } from "@/lib/utils"

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      className={cn(
        "relative flex size-8 shrink-0 overflow-hidden rounded-full",
        className,
      )}
      data-slot="avatar"
      {...props}
    />
  );
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      className={cn(
        "flex size-full items-center justify-center rounded-full bg-muted",
        className,
      )}
      data-slot="avatar-fallback"
      {...props}
    />
  );
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      className={cn("aspect-square size-full", className)}
      data-slot="avatar-image"
      {...props}
    />
  );
}

export { Avatar, AvatarFallback, AvatarImage };



================================================================================
LOCATION: components\myComponents\subs\carrousels.tsx
================================================================================


import React, { useEffect, useState } from 'react';

interface CarouselProps {
  numCards: number;
}

export const CoverCarousel: React.FC<CarouselProps> = ({ numCards }) => {
  const [currentIndex, setCurrentIndex] = useState(0);

  const cards = Array.from({ length: numCards }, (_, i) => (
    <div
      key={i}
      className={`absolute w-full h-full bg-white rounded-lg shadow-lg transform-3d ${
        i === currentIndex ? 'translate-z-0' : 'translate-z-[-100px]'
      } ${i < currentIndex ? '-rotate-y-45' : i > currentIndex ? 'rotate-y-45' : ''}`}
    >
      Card {i + 1}
    </div>
  ));

  const handlePrev = () => {
    setCurrentIndex((prevIndex) => (prevIndex - 1 + numCards) % numCards);
  };

  const handleNext = () => {
    setCurrentIndex((prevIndex) => (prevIndex + 1) % numCards);
  };

  return (
    <div className="relative w-full h-[400px] perspective-[1000px]">
      <div className="absolute w-full h-full transform-3d rotate-y-0 transition-transform duration-1000">
        {cards}
      </div>
      <button
        onClick={handlePrev}
        className="absolute top-1/2 left-0 transform -translate-y-1/2 bg-gray-200 p-2 rounded-full"
      >
        Prev
      </button>
      <button
        onClick={handleNext}
        className="absolute top-1/2 right-0 transform -translate-y-1/2 bg-gray-200 p-2 rounded-full"
      >
        Next
      </button>
    </div>
  );
};





interface TextCarouselProps {
    text?: string;
    speed?: number;
    image?: boolean;
    imageUrl?: string;
    direction?: "left" | "right";
  }
  export const TextCarousel: React.FC<TextCarouselProps> = ({
    text = 'INPUT YOUR CAROUSEL TEXT HERE',
    speed = 3000,
    image = false,
    imageUrl = 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1751682480/inhqujbmn3pxu9nefbuj.jpg',
    direction = "left" 
  }) => {
    const texts = [...text]; 
    const [currentIndex, setCurrentIndex] = useState(0);
    const [rotationAngle, setRotationAngle] = useState(0);

  

          useEffect(() => {
            const intervalId = setInterval(() => {
              if (direction === 'right') {
                setRotationAngle((prevAngle) => prevAngle + 7.2);
              } else {
                setRotationAngle((prevAngle) => prevAngle - 7.2);
              }
            }, speed);
        
            return () => clearInterval(intervalId);
          }, [speed, direction]);

      
      
  
    return (
      <div 
        className="relative h-[400px] flex flex-col justify-center items-center overflow-clip bg-background p-5 /rounded-full"
        style={{
          transformStyle: 'preserve-3d',
          perspective: '1000px',
          transform: 'rotateX(16deg)',
        }}
        >
        <div className="absolute w-full max-w-lg h-full z-10 bg-background/80"></div>
        {image && (
          <img
            src={imageUrl}
            alt="Carousel Image"
            className="h-full transform /-translate-x-1/2 /-translate-y-1/2 z-10"
          />
        )}
      {texts.map((text, index) => (
        <div
          key={index}
          className={`absolute /self-center top-[60%] transform-3d /bg-secondary/30 text-accent text-center transform-3d ${`rotate-y-${index * 7.2}`} transition-transform duration-1000`}
          style={{
            transform: `rotateY(${index * (360 / texts.length) + rotationAngle}deg) translateZ(190px)`,
            zIndex: Math.round(Math.cos((index * (360 / texts.length) + rotationAngle) * Math.PI / 180) * 2) * 10,
          }}                
        >
          <h2 className="text-5xl font-extrabold text-outline-primary text-accent">{text}</h2>
        </div>
      ))}
    </div>
  );
};


  


================================================================================
LOCATION: components\myComponents\subs\cart-client-faalback.tsx
================================================================================

"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
    Drawer,
    DrawerClose,
    DrawerContent,
    DrawerTrigger,
} from "@/components/ui/drawer";
import { Separator } from "@/components/ui/separator";
import {
    Sheet,
    SheetClose,
    SheetContent,
    SheetHeader,
    SheetTitle,
    SheetTrigger,
} from "@/components/ui/sheet";
import { useCart } from "@/hooks/use-cart";
import { useMediaQuery } from "@/hooks/use-media-query";
import { cn } from "@/lib/utils";
import axios from "axios";
import { AnimatePresence, motion } from "framer-motion";
import { Minus, Plus, ShoppingCart, X } from "lucide-react";
import Link from "next/link";
import * as React from "react";
import { useAppContext } from "@/hooks/useAppContext";
import FlutterWaveButtonHook from "../../payment/flutterwavehook";
import dynamic from 'next/dynamic'
import { Login } from "@/components/myComponents/subs"
import { Signup } from "@/components/myComponents/subs"
import EditUser from "./useredit";
import { BankTransferForm } from "@/components/payment/BankTransferForm";

/* DELIVERY FEES */
export const DELIVERY_FEES_BY_STATE: Record<string, number> = {
    Kwara: 500, Kogi: 5000, Niger: 5000, Oyo: 4000, Osun: 4000,
    Ogun: 4000, Ondo: 4000, Ekiti: 4000, Benue: 5000, Nasarawa: 3500,
    Lagos: 4000, FCT: 4000, Edo: 4000,
    Anambra: 6000, Enugu: 5000, Imo: 6000, Abia: 6000, Ebonyi: 6000,
    Delta: 6000, Rivers: 6000, Akwa_Ibom: 6000, Cross_River: 6000, Bayelsa: 6000,
    Kaduna: 5000, Kano: 5000, Katsina: 5000, Jigawa: 5000, Zamfara: 5000,
    Sokoto: 5500, Kebbi: 5500, Bauchi: 5500, Gombe: 5500, Adamawa: 6000,
    Taraba: 6000, Borno: 6500, Yobe: 6500,
};

/* TYPES */
export interface CartItem {
    category: string;
    id: string;
    images: any[];
    name: string;
    price: number;
    quantity: number;
}

interface CartProps {
    className?: string;
    cart?: any;
}

interface Address {
    id: string;
    address?: string | null;
    city?: string | null;
    state?: string | null;
}

/* HELPERS */
const normalizeState = (state?: string | null): string | null => {
    if (!state) return null;
    return state.replace(/state/i, "").replace(/[-\s]/g, "_").trim();
};

/* COMPONENT */
export function CartClient({ className }: CartProps) {
    const [isOpen, setIsOpen] = React.useState(false);
    const [isMounted, setIsMounted] = React.useState(false);

    const isDesktop = useMediaQuery("(min-width: 768px)");
    const { items, removeItem, clearCart, subtotal, updateQuantity, itemCount, setCheckoutData, checkoutData, clearCheckoutData } = useCart();
    const { user } = useAppContext();

    const [selectedAddressId, setSelectedAddressId] = React.useState<string | null>(
        user?.addresses?.[0]?.id ?? null
    );

    React.useEffect(() => setIsMounted(true), []);

    React.useEffect(() => {
        if (!selectedAddressId && user?.addresses?.length) {
            setSelectedAddressId(user.addresses[0].id);
        }
    }, [user?.addresses, selectedAddressId]);

    /* DELIVERY FEE LOGIC */
    const calculateDeliveryFee = (address?: Address | null): number => {
        const normalizedState = normalizeState(address?.state);
        if (!normalizedState) return 0;
        return DELIVERY_FEES_BY_STATE[normalizedState] ?? 6500;
    };

    const selectedAddress: Address | undefined = user?.addresses?.find(
        (a: Address) => a.id === selectedAddressId
    );

    const deliveryFee = items.length > 0 ? calculateDeliveryFee(selectedAddress) : 0;
    const totalAmount = Number(subtotal || 0) + Number(deliveryFee || 0);

    /* CHECKOUT */
    const prepareCheckout = async () => {
        if (!user?.id || !selectedAddressId || items.length === 0) return;

        try {
            const payload = {
                userId: user.id,
                items: items.map((i) => ({
                    productId: i.id,
                    quantity: i.quantity,
                })),
                deliveryFee,
                total: totalAmount,
                deliveryAddressId: selectedAddressId,
                ...(checkoutData?.cartId ? { cartId: checkoutData.cartId } : {}),
            };

            const res = await axios.post("/api/payment", payload);
            setCheckoutData(res.data);
            return res.data; // Return for reuse
        } catch (err) {
            console.error("Checkout initiation failed:", err);
            // alert("Checkout failed, please try again.");
            return null;
        }
    };

    // Wrapper for manual transfer that ensures cart exists first
    const handleBankTransferClick = async () => {
        // Logic: we need a cart ID to link the transfer to. 
        // Reuse prepareCheckout to generate the cart in DB.
        // If checkoutData already exists, use it.

        let cartId = checkoutData?.cartId;

        if (!cartId) {
            const data = await prepareCheckout();
            if (data && data.cartId) {
                cartId = data.cartId;
            }
        }

        return cartId; // Return to BankTransferForm if we could render it conditionally or pass it
    };

    /* CART TRIGGER */
    const CartTrigger = (
        <Button aria-label="Open cart" className="relative h-9 w-9 rounded-full" size="icon" variant="outline">
            <ShoppingCart className="h-4 w-4" />
            {itemCount > 0 && (
                <Badge className="absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-[10px] flex justify-center items-center">
                    {itemCount}
                </Badge>
            )}
        </Button>
    );

    /* CART CONTENT */
    const CartContent = (
        <div className="flex flex-col h-full">
            {/* HEADER */}
            <div className="flex items-center justify-between border-b px-6 py-4">
                <div>
                    <div className="text-xl font-semibold">Your Cart</div>
                    <div className="text-sm text-muted-foreground">
                        {itemCount === 0 ? "Your cart is empty" : `You have ${itemCount} item${itemCount !== 1 ? "s" : ""}`}
                    </div>
                </div>
                <div className="flex items-center gap-2">
                    <Link href="/cart">
                        <Button variant="outline" size="sm">
                            All Carts
                        </Button>
                    </Link>
                    {isDesktop && (
                        <SheetClose asChild>
                            <Button size="icon" variant="ghost">
                                <X className="h-5 w-5" />
                            </Button>
                        </SheetClose>
                    )}
                </div>
            </div>

            {/* ITEMS */}
            <div className="flex-1 overflow-y-auto px-6">
                <AnimatePresence>
                    {items.length === 0 ? (
                        <motion.div className="py-12 text-center">
                            <ShoppingCart className="mx-auto mb-4 h-10 w-10 text-muted-foreground" />
                            <p className="text-muted-foreground">Your cart is empty</p>
                        </motion.div>
                    ) : (
                        <div className="space-y-4 py-4">
                            {items.map((item) => {
                                const imageUrl =
                                    Array.isArray(item.images) && item.images.length > 0
                                        ? item.images[0]
                                        : "/placeholder.jpg";

                                return (
                                    <motion.div key={item.id} layout className="flex rounded-lg border bg-card p-2">
                                        <img src={imageUrl} alt={item.name ?? "Product"} className="h-20 w-20 rounded object-cover" />
                                        <div className="ml-4 flex flex-1 flex-col justify-between">
                                            <div className="flex justify-between">
                                                <Link href={`/store/${item.id}`} className="text-sm font-medium">
                                                    {item.name ?? "Unnamed product"}
                                                </Link>
                                                <button onClick={() => removeItem(item.id)}>
                                                    <X className="h-4 w-4" />
                                                </button>
                                            </div>

                                            <div className="mt-2 flex justify-between items-center">
                                                <div className="flex items-center border rounded">
                                                    <button
                                                        disabled={item.quantity <= 1}
                                                        onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                        className="px-2"
                                                    >
                                                        <Minus size={12} />
                                                    </button>
                                                    <span className="px-3 text-sm">{item.quantity}</span>
                                                    <button
                                                        onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                                        className="px-2"
                                                    >
                                                        <Plus size={12} />
                                                    </button>
                                                </div>
                                                <span className="text-sm font-medium">
                                                    â‚¦{(Number(item.price || 0) * Number(item.quantity || 0)).toFixed(2)}
                                                </span>
                                            </div>
                                        </div>
                                    </motion.div>
                                );
                            })}
                        </div>
                    )}
                </AnimatePresence>
            </div>

            {/* SUMMARY */}
            {items.length > 0 && (
                <div className="border-t px-6 py-4 space-y-3 w-full flex flex-col bg-background">

                    {/* DELIVERY ADDRESS OR EDIT USER */}
                    {user?.id !== 'nil' ? (
                        <div className="space-y-1">
                            <label className="text-sm font-medium">Delivery Address</label>
                            {user.addresses && user.addresses.length > 0 ? (
                                <div>
                                    <select
                                        className="w-full rounded-md border px-3 py-2 text-sm"
                                        value={selectedAddressId ?? ""}
                                        onChange={(e) => setSelectedAddressId(e.target.value)}
                                    >
                                        {user.addresses.map((address: Address) => (
                                            <option key={address.id} value={address.id}>
                                                {[address.address, address.city, address.state].filter(Boolean).join(", ")}
                                            </option>
                                        ))}
                                    </select>
                                    <div>
                                        <div className="mb-2 font-semibold text-xs mt-1">
                                            <EditUser />
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div>
                                    <p className="text-sm text-red-500">No addresses found.</p>
                                    <EditUser />
                                </div>
                            )}
                        </div>
                    ) : (
                        <div className="w-full flex flex-col justify-center items-center space-y-4">
                            <p className="font-medium text-red-500 text-center">
                                Please log in to proceed with checkout.
                            </p>
                            <div className="flex flex-row gap-5">
                                <Login />
                                <Signup />
                            </div>
                        </div>
                    )}

                    {/* SUBTOTAL & DELIVERY FEE */}
                    <div className="flex justify-between text-sm">
                        <span>Subtotal</span>
                        <span>â‚¦{Number(subtotal || 0).toFixed(2)}</span>
                    </div>

                    <div className="flex justify-between text-sm">
                        <span>Delivery Fee</span>
                        <span>â‚¦{Number(deliveryFee || 0).toFixed(2)}</span>
                    </div>

                    <Separator />

                    <div className="flex justify-between font-semibold">
                        <span>Total</span>
                        <span>â‚¦{totalAmount.toFixed(2)}</span>
                    </div>

                    {/* CHECKOUT BUTTONS */}
                    {user.id !== 'nil' ? (
                        <div className="space-y-3">
                            {/* 
                   Logic: 
                   1. User clicks "Checkout" -> creates cart in DB -> shows Payment Options.
                   OR
                   2. We show payment options directly if 'checkoutData' exists.
                 */}

                            {!checkoutData ? (
                                <Button
                                    disabled={
                                        user?.id === 'nil' || !selectedAddressId || (user?.addresses?.length === 0)
                                    }
                                    onClick={prepareCheckout}
                                    className="w-full"
                                >
                                    Proceed to Checkout
                                </Button>
                            ) : (
                                <div className="grid grid-cols-2 gap-2">
                                    <FlutterWaveButtonHook
                                        tx_ref={checkoutData.tx_ref}
                                        amount={totalAmount}
                                        currency="NGN"
                                        email={user?.email ?? "noemail@loyzfoods.com"}
                                        phonenumber={user?.contact ?? "0000000000"}
                                        name={user?.name ?? "Customer"}
                                        onSuccess={async () => {
                                            await axios.post(`/api/payment?action=confirm`, { tx_ref: checkoutData.tx_ref });
                                            clearCart();
                                            clearCheckoutData();
                                            setIsOpen(false);
                                        }}
                                    />

                                    {/* Manual Transfer - Need to pass cartID */}
                                    <BankTransferForm
                                        amount={totalAmount}
                                        cartId={checkoutData.cartId}
                                        onSuccess={() => {
                                            clearCart();
                                            clearCheckoutData();
                                            setIsOpen(false);
                                        }}
                                    />
                                </div>
                            )}
                        </div>
                    ) : null}
                </div>
            )}

        </div>
    );

    if (!isMounted) return null;

    return (
        <div className={cn("relative", className)}>
            {isDesktop ? (
                <Sheet open={isOpen} onOpenChange={setIsOpen}>
                    <SheetTrigger asChild>{CartTrigger}</SheetTrigger>
                    <SheetContent className="p-0 w-[400px]">
                        <SheetHeader className="sr-only">
                            <SheetTitle>Shopping Cart</SheetTitle>
                        </SheetHeader>
                        {CartContent}
                    </SheetContent>
                </Sheet>
            ) : (
                <Drawer open={isOpen} onOpenChange={setIsOpen}>
                    <DrawerTrigger asChild>{CartTrigger}</DrawerTrigger>
                    <DrawerContent className="h-[85vh]">
                        {CartContent}
                    </DrawerContent>
                </Drawer>
            )}
        </div>
    );
}


================================================================================
LOCATION: components\myComponents\subs\cart-client.tsx
================================================================================

"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerTrigger,
} from "@/components/ui/drawer";
import { Separator } from "@/components/ui/separator";
import {
  Sheet,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet";
import { useCart } from "@/hooks/use-cart";
import { useMediaQuery } from "@/hooks/use-media-query";
import { cn } from "@/lib/utils";
import axios from "axios";
import { AnimatePresence, motion } from "framer-motion";
import { Minus, Plus, ShoppingCart, X } from "lucide-react";
import Link from "next/link";
import * as React from "react";
import { useAppContext } from "@/hooks/useAppContext";
import FlutterWaveButtonHook from "../../payment/flutterwavehook";
import dynamic from 'next/dynamic'
import { Login } from "@/components/myComponents/subs"
import { Signup } from "@/components/myComponents/subs"
import EditUser from "./useredit";
import { BankTransferForm } from "@/components/payment/BankTransferForm";

/* DELIVERY FEES */
export const DELIVERY_FEES_BY_STATE: Record<string, number> = {
  Kwara: 500, Kogi: 5000, Niger: 5000, Oyo: 4000, Osun: 4000,
  Ogun: 4000, Ondo: 4000, Ekiti: 4000, Benue: 5000, Nasarawa: 3500,
  Lagos: 4000, FCT: 4000, Edo: 4000,
  Anambra: 6000, Enugu: 5000, Imo: 6000, Abia: 6000, Ebonyi: 6000,
  Delta: 6000, Rivers: 6000, Akwa_Ibom: 6000, Cross_River: 6000, Bayelsa: 6000,
  Kaduna: 5000, Kano: 5000, Katsina: 5000, Jigawa: 5000, Zamfara: 5000,
  Sokoto: 5500, Kebbi: 5500, Bauchi: 5500, Gombe: 5500, Adamawa: 6000,
  Taraba: 6000, Borno: 6500, Yobe: 6500,
};

/* TYPES */
export interface CartItem {
  category: string;
  id: string;
  images: any[];
  name: string;
  price: number;
  quantity: number;
}

interface CartProps {
  className?: string;
  cart?: any;
}

interface Address {
  id: string;
  address?: string | null;
  city?: string | null;
  state?: string | null;
  country?: string | null;
  zip?: string | null;
  phone?: string | null;
}

/* HELPERS */
const normalizeState = (state?: string | null): string | null => {
  if (!state) return null;
  return state.replace(/state/i, "").replace(/[-\s]/g, "_").trim();
};

/* COMPONENT */
export function CartClient({ className }: CartProps) {
  const [isOpen, setIsOpen] = React.useState(false);
  const [isMounted, setIsMounted] = React.useState(false);

  const isDesktop = useMediaQuery("(min-width: 768px)");
  const { items, removeItem, clearCart, subtotal, updateQuantity, itemCount, setCheckoutData, checkoutData, clearCheckoutData } = useCart();
  const { user } = useAppContext();

  const [selectedAddressId, setSelectedAddressId] = React.useState<string | null>(
    user?.addresses?.[0]?.id ?? null
  );

  React.useEffect(() => setIsMounted(true), []);

  React.useEffect(() => {
    if (!selectedAddressId && user?.addresses?.length) {
      setSelectedAddressId(user.addresses[0].id);
    }
  }, [user?.addresses, selectedAddressId]);

  /* DELIVERY FEE LOGIC */
  const [dbDeliveryFee, setDbDeliveryFee] = React.useState<number>(0);
  const [loadingFee, setLoadingFee] = React.useState(false);

  const selectedAddress: Address | undefined = user?.addresses?.find(
    (a: Address) => a.id === selectedAddressId
  );

  React.useEffect(() => {
    const fetchDeliveryFee = async () => {
      if (!selectedAddress) {
        setDbDeliveryFee(0);
        return;
      }

      setLoadingFee(true);
      try {
        // Fetch all fees - optimization: could filter server side but fetching all is fine for small scale
        const res = await axios.get('/api/dbhandler?model=deliveryFee');
        const fees: any[] = res.data;

        if (!Array.isArray(fees)) return;

        const { country, state, city } = selectedAddress;

        // Normalize state similarly to before if needed, but assuming DB matches address input
        // Since we formerly normalized "Lagos State" to "Lagos", we might need to handle that.
        // For now, simple matching. The AddressPriceForm allows selecting exact states.

        // Priority: 
        // 1. Country + State + City
        // 2. Country + State
        // 3. Country only

        const normalizedState = normalizeState(state); // Reuse helper if state names vary
        // However, if we are using the Country-State-City library in Admin, 
        // we should ensure the user's address state matches that format or we normalize it.
        // The previous normalizeState removed "State" and underscores. 
        // Let's rely on flexible matching or normalized check. 

        // Let's stick closer to the user's previous hardcoded keys, which were like "Lagos", "Kwara".
        // If the DB has "Lagos State" (from library), we might miss it.
        // I'll try to match loosely.

        // Actually, the user asked to migrate the hardcoded values. 
        // So the DB will contain "Lagos", "Kwara" etc. (as state names).

        const match = fees.find(f =>
          f.country === (country || 'Nigeria') && // Defaulting to Nigeria if missing for now
          f.state === normalizedState &&
          f.city === city
        ) || fees.find(f =>
          f.country === (country || 'Nigeria') &&
          f.state === normalizedState &&
          !f.city
        ) || fees.find(f =>
          f.country === (country || 'Nigeria') &&
          !f.state
        );

        setDbDeliveryFee(match ? match.price : 6500); // Default fallback
      } catch (err) {
        console.error("Failed to fetch delivery fee", err);
        setDbDeliveryFee(6500);
      } finally {
        setLoadingFee(false);
      }
    };

    fetchDeliveryFee();
  }, [selectedAddress]);



  const deliveryFee = items.length > 0 ? dbDeliveryFee : 0;
  const totalAmount = Number(subtotal || 0) + Number(deliveryFee || 0);

  /* CHECKOUT */
  const prepareCheckout = async () => {
    if (!user?.id || !selectedAddressId || items.length === 0) return;

    // Check if user has contact filled
    if (!user?.contact || user.contact === "xxxx-xxx-xxxx") {
      alert("Please update your contact information before checkout. Go to your account settings to add your phone number.");
      return null;
    }

    try {
      const payload = {
        userId: user.id,
        items: items.map((i) => ({
          productId: i.id,
          quantity: i.quantity,
        })),
        deliveryFee,
        total: totalAmount,
        deliveryAddressId: selectedAddressId,
        ...(checkoutData?.cartId ? { cartId: checkoutData.cartId } : {}),
      };

      const res = await axios.post("/api/payment", payload);
      setCheckoutData(res.data);
      return res.data; // Return for reuse
    } catch (err: any) {
      console.error("Checkout initiation failed:", err);
      const errorMessage = err?.response?.data?.error || "Checkout failed, please try again.";
      alert(errorMessage);
      return null;
    }
  };

  // Wrapper for manual transfer that ensures cart exists first
  const handleBankTransferClick = async () => {
    // Logic: we need a cart ID to link the transfer to. 
    // Reuse prepareCheckout to generate the cart in DB.
    // If checkoutData already exists, use it.

    let cartId = checkoutData?.cartId;

    if (!cartId) {
      const data = await prepareCheckout();
      if (data && data.cartId) {
        cartId = data.cartId;
      }
    }

    return cartId; // Return to BankTransferForm if we could render it conditionally or pass it
  };

  /* CART TRIGGER */
  const CartTrigger = (
    <Button aria-label="Open cart" className="relative h-9 w-9 rounded-full" size="icon" variant="outline">
      <ShoppingCart className="h-4 w-4" />
      {itemCount > 0 && (
        <Badge className="absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-[10px] flex justify-center items-center">
          {itemCount}
        </Badge>
      )}
    </Button>
  );

  /* CART CONTENT */
  const CartContent = (
    <div className="flex flex-col h-full">
      {/* HEADER */}
      <div className="flex items-center justify-between border-b px-6 py-4">
        <div>
          <div className="text-xl font-semibold">Your Cart</div>
          <div className="text-sm text-muted-foreground">
            {itemCount === 0 ? "Your cart is empty" : `You have ${itemCount} item${itemCount !== 1 ? "s" : ""}`}
          </div>
        </div>
        <div className="flex items-center gap-2">
          <Link href="/cart">
            <Button variant="outline" size="sm">
              All Carts
            </Button>
          </Link>
          {isDesktop && (
            <SheetClose asChild>
              <Button size="icon" variant="ghost">
                <X className="h-5 w-5" />
              </Button>
            </SheetClose>
          )}
        </div>
      </div>

      {/* ITEMS */}
      <div className="flex-1 overflow-y-auto px-6">
        <AnimatePresence>
          {items.length === 0 ? (
            <motion.div className="py-12 text-center">
              <ShoppingCart className="mx-auto mb-4 h-10 w-10 text-muted-foreground" />
              <p className="text-muted-foreground">Your cart is empty</p>
            </motion.div>
          ) : (
            <div className="space-y-4 py-4">
              {items.map((item) => {
                const imageUrl =
                  Array.isArray(item.images) && item.images.length > 0
                    ? item.images[0]
                    : "/placeholder.jpg";

                return (
                  <motion.div key={item.id} layout className="flex rounded-lg border bg-card p-2">
                    <img src={imageUrl} alt={item.name ?? "Product"} className="h-20 w-20 rounded object-cover" />
                    <div className="ml-4 flex flex-1 flex-col justify-between">
                      <div className="flex justify-between">
                        <Link href={`/store/${item.id}`} className="text-sm font-medium">
                          {item.name ?? "Unnamed product"}
                        </Link>
                        <button onClick={() => removeItem(item.id)}>
                          <X className="h-4 w-4" />
                        </button>
                      </div>

                      <div className="mt-2 flex justify-between items-center">
                        <div className="flex items-center border rounded">
                          <button
                            disabled={item.quantity <= 1}
                            onClick={() => updateQuantity(item.id, item.quantity - 1)}
                            className="px-2"
                          >
                            <Minus size={12} />
                          </button>
                          <span className="px-3 text-sm">{item.quantity}</span>
                          <button
                            onClick={() => updateQuantity(item.id, item.quantity + 1)}
                            className="px-2"
                          >
                            <Plus size={12} />
                          </button>
                        </div>
                        <span className="text-sm font-medium">
                          â‚¦{(Number(item.price || 0) * Number(item.quantity || 0)).toFixed(2)}
                        </span>
                      </div>
                    </div>
                  </motion.div>
                );
              })}
            </div>
          )}
        </AnimatePresence>
      </div>

      {/* SUMMARY */}
      {items.length > 0 && (
        <div className="border-t px-6 py-4 space-y-3 w-full flex flex-col bg-background">

          {/* DELIVERY ADDRESS OR EDIT USER */}
          {user?.id !== 'nil' ? (
            <div className="space-y-1">
              <label className="text-sm font-medium">Delivery Address</label>
              {user.addresses && user.addresses.length > 0 ? (
                <div>
                  <select
                    className="w-full rounded-md border px-3 py-2 text-sm"
                    value={selectedAddressId ?? ""}
                    onChange={(e) => setSelectedAddressId(e.target.value)}
                  >
                    {user.addresses.map((address: Address) => (
                      <option key={address.id} value={address.id}>
                        {[address.address, address.city, address.state].filter(Boolean).join(", ")}
                      </option>
                    ))}
                  </select>
                  <div>
                    <div className="mb-2 font-semibold text-xs mt-1">
                      <EditUser />
                    </div>
                  </div>
                </div>
              ) : (
                <div>
                  <p className="text-sm text-red-500">No addresses found.</p>
                  <EditUser />
                </div>
              )}
            </div>
          ) : (
            <div className="w-full flex flex-col justify-center items-center space-y-4">
              <p className="font-medium text-red-500 text-center">
                Please log in to proceed with checkout.
              </p>
              <div className="flex flex-row gap-5">
                <Login />
                <Signup />
              </div>
            </div>
          )}

          {/* SUBTOTAL & DELIVERY FEE */}
          <div className="flex justify-between text-sm">
            <span>Subtotal</span>
            <span>â‚¦{Number(subtotal || 0).toFixed(2)}</span>
          </div>

          <div className="flex justify-between text-sm">
            <span>Delivery Fee</span>
            <span>â‚¦{Number(deliveryFee || 0).toFixed(2)}</span>
          </div>

          <Separator />

          <div className="flex justify-between font-semibold">
            <span>Total</span>
            <span>â‚¦{totalAmount.toFixed(2)}</span>
          </div>

          {/* CHECKOUT BUTTONS */}
          {user.id !== 'nil' ? (
            <div className="space-y-3">
              {/* 
                   Logic: 
                   1. User clicks "Checkout" -> creates cart in DB -> shows Payment Options.
                   OR
                   2. We show payment options directly if 'checkoutData' exists.
                 */}

              {!checkoutData ? (
                <Button
                  disabled={
                    user?.id === 'nil' || !selectedAddressId || (user?.addresses?.length === 0)
                  }
                  onClick={prepareCheckout}
                  className="w-full"
                >
                  Proceed to Checkout
                </Button>
              ) : (
                <div className="grid grid-cols-2 gap-2">
                  <FlutterWaveButtonHook
                    tx_ref={checkoutData.tx_ref}
                    amount={totalAmount}
                    currency="NGN"
                    email={user?.email ?? "noemail@loyzfoods.com"}
                    phonenumber={user?.contact ?? "0000000000"}
                    name={user?.name ?? "Customer"}
                    onSuccess={async () => {
                      await axios.post(`/api/payment?action=confirm`, { tx_ref: checkoutData.tx_ref });
                      clearCart();
                      clearCheckoutData();
                      setIsOpen(false);
                    }}
                  />

                  {/* Manual Transfer - Need to pass cartID */}
                  <BankTransferForm
                    amount={totalAmount}
                    cartId={checkoutData.cartId}
                    onSuccess={() => {
                      clearCart();
                      clearCheckoutData();
                      setIsOpen(false);
                    }}
                  />
                </div>
              )}
            </div>
          ) : null}
        </div>
      )}

    </div>
  );

  if (!isMounted) return null;

  return (
    <div className={cn("relative", className)}>
      {isDesktop ? (
        <Sheet open={isOpen} onOpenChange={setIsOpen}>
          <SheetTrigger asChild>{CartTrigger}</SheetTrigger>
          <SheetContent className="p-0 w-[400px]">
            <SheetHeader className="sr-only">
              <SheetTitle>Shopping Cart</SheetTitle>
            </SheetHeader>
            {CartContent}
          </SheetContent>
        </Sheet>
      ) : (
        <Drawer open={isOpen} onOpenChange={setIsOpen}>
          <DrawerTrigger asChild>{CartTrigger}</DrawerTrigger>
          <DrawerContent className="h-[85vh]">
            {CartContent}
          </DrawerContent>
        </Drawer>
      )}
    </div>
  );
}


================================================================================
LOCATION: components\myComponents\subs\cart.tsx
================================================================================


import { cn } from "@/lib/utils";
import { CartClient } from "./cart-client";
import { useAppContext } from "@/hooks/useAppContext";

export interface CartItem {
  category: string;
  id: string;
  images: string[];
  name: string;
  price: number;
  quantity: number;
}

interface CartProps {
  className?: string;
}

// const mockCart: CartItem[] = [
//   {
//     category: "Audio",
//     id: "1",
//     image:
//       "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
//     name: "Premium Wireless Headphones",
//     price: 199.99,
//     quantity: 1,
//   },
//   {
//     category: "Wearables",
//     id: "2",
//     image:
//       "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
//     name: "Smart Watch Series 5",
//     price: 299.99,
//     quantity: 2,
//   },
// ];

export function Cart({ className }: CartProps) { 
  const { user, setUser, cart, setCart } = useAppContext();
  return (
    <div className={cn("relative", className)}>
      {/* // TODO: Fetch cart from e.g. LocalStorage and/or database
      <CartClient className={cn("", className)} mockCart={mockCart} /> */}
      <CartClient className={cn("", className)} cart={cart} />
    </div>
  );
}



================================================================================
LOCATION: components\myComponents\subs\CartDetails.tsx
================================================================================

"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { cn } from "@/lib/utils";
import axios from "axios";
import { Loader2, RefreshCcw, ShoppingCart, Plus } from "lucide-react";
import React, { useEffect, useState } from "react";
import FlutterWaveButtonHook from "../../payment/flutterwavehook";
import { useAppContext } from "@/hooks/useAppContext";
import { DELIVERY_FEES_BY_STATE } from "./cart-client"; // Assuming export
import { motion, AnimatePresence } from "framer-motion";
import Link from "next/link";
import EditUser from "./useredit";
import { BankTransferForm } from "@/components/payment/BankTransferForm";
import { useCart } from "@/hooks/use-cart";
import { toast } from "sonner"; // Assuming sonner

interface CartDetailsProps {
    cartId: string;
    onPaymentSuccess?: () => void;
}

interface CartItem {
    id: string;
    quantity: number;
    product: {
        id: string;
        name: string;
        price: number;
        images: string[];
    };
}

interface CartData {
    id: string;
    name?: string;
    total: number;
    deliveryFee?: number;
    status: string;
    createdAt: string;
    products: CartItem[];
    payment?: {
        method: string;
        amount: number;
        tx_ref?: string;
    } | null;
}

const normalizeState = (state?: string | null): string | null => {
    if (!state) return null;
    return state.replace(/state/i, "").replace(/[-\s]/g, "_").trim();
};

interface Address {
    id: string;
    address?: string | null;
    city?: string | null;
    state?: string | null;
}

export function CartDetails({ cartId, onPaymentSuccess }: CartDetailsProps) {
    const [cart, setCart] = useState<CartData | null>(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState<string | null>(null);
    const { user, openDialog } = useAppContext();
    const { clearCart, addItem } = useCart();

    const [selectedAddressId, setSelectedAddressId] = useState<string | null>(null);
    
    // Name editing state
    const [isEditingName, setIsEditingName] = useState(false);
    const [editedName, setEditedName] = useState("");

    useEffect(() => {
        if (user?.addresses?.length && !selectedAddressId) {
            setSelectedAddressId(user.addresses[0].id);
        }
    }, [user?.addresses]);

    useEffect(() => {
        const fetchCartDetails = async () => {
            if (!cartId) return;
            setLoading(true);
            setError(null);
            try {
                const res = await axios.get(`/api/dbhandler?model=cart&id=${cartId}`);
                setCart(res.data);
                setEditedName(res.data.name || "");
            } catch (err) {
                console.error("Failed to fetch cart details:", err);
                setError("Failed to load cart details.");
            } finally {
                setLoading(false);
            }
        };

        fetchCartDetails();
    }, [cartId]);

    const handleSaveName = async () => {
        if (!cart) return;
        try {
            await axios.put(`/api/dbhandler?model=cart&id=${cart.id}`, { name: editedName });
            setCart({ ...cart, name: editedName });
            setIsEditingName(false);
            toast.success("Cart name updated");
        } catch (err) {
            console.error("Failed to update name", err);
            toast.error("Failed to update cart name");
        }
    }

    // ... existing ...

    const calculateDeliveryFee = (address?: Address | null): number => {
        const normalizedState = normalizeState(address?.state);
        if (!normalizedState) return 0;
        return DELIVERY_FEES_BY_STATE[normalizedState] ?? 6500;
    };

    const selectedAddress = user?.addresses?.find(a => a.id === selectedAddressId);
    const subtotal = cart?.products?.reduce((acc, item) => acc + ((item.product?.price || 0) * item.quantity), 0) || 0;

    // Is paid OR Unconfirmed (awaiting approval)
    const isLocked = cart?.status === "paid" || cart?.status === "completed" || cart?.status === "unconfirmed" || !!cart?.payment;

    // âœ… FIX 4: Use stored delivery fee for locked carts (NO recalculation)
    const deliveryFee = isLocked
        ? (cart?.deliveryFee ?? 0)  // Use stored value from DB
        : (cart?.products?.length ?? 0) > 0 ? calculateDeliveryFee(selectedAddress) : 0;

    const totalAmount = isLocked
        ? (cart?.total || 0)
        : subtotal + deliveryFee;

    // --- RE-CARTING ACTIONS ---
    const handleMakeCurrent = () => {
        if (!cart) return;
        if (confirm("This will replace your current active cart with the items from this order. Continue?")) {
            clearCart();
            cart.products.forEach(item => {
                // Mapping DB item to Cart Store item structure
                // NOTE: Store item expects { category, id, images, name, price }
                addItem({
                    id: item.product.id,
                    name: item.product.name,
                    price: item.product.price,
                    images: item.product.images,
                    category: "Generic" // We might need to fetch/store category if strictly required, or use default
                }, item.quantity);
            });
            // alert("Cart updated successfully!");
            openDialog("Cart updated successfully!", "Cart Updated");
            // Optional: Open cart drawer logic if accessible
        }
    };

    const handleAddToCurrent = () => {
        if (!cart) return;
        cart.products.forEach(item => {
            addItem({
                id: item.product.id,
                name: item.product.name,
                price: item.product.price,
                images: item.product.images,
                category: "Generic"
            }, item.quantity);
        });
        // alert("Items added to your active cart!");
        openDialog("Items added to your active cart!", "Cart Updated");
    };

    if (loading) {
        return (
            <Card className="w-full h-full min-h-[400px] flex items-center justify-center">
                <Loader2 className="h-8 w-8 animate-spin text-muted-foreground" />
            </Card>
        );
    }

    if (error || !cart) {
        return (
            <Card className="w-full">
                <CardContent className="py-10 text-center text-muted-foreground">
                    {error || "Cart not found"}
                </CardContent>
            </Card>
        );
    }

    return (
        <Card className="w-full h-full overflow-hidden flex flex-col border-none shadow-none lg:border lg:shadow-sm">
            <CardHeader className="bg-muted/30 pb-4 border-b mb-4">
                <div className="flex flex-col gap-4">
                    <div className="flex items-center justify-between">
                        <div className="flex items-center gap-2">
                             {isEditingName ? (
                                 <div className="flex items-center gap-2">
                                     <input 
                                         className="h-8 rounded border px-2 text-sm max-w-[150px]"
                                         value={editedName}
                                         onChange={(e) => setEditedName(e.target.value)}
                                         placeholder="Name this cart..."
                                     />
                                     <Button size="sm" onClick={handleSaveName}>Save</Button>
                                     <Button size="sm" variant="ghost" onClick={() => setIsEditingName(false)}>Cancel</Button>
                                 </div>
                             ) : (
                                 <CardTitle className="text-xl font-semibold flex items-center gap-2 group cursor-pointer" onClick={() => setIsEditingName(true)}>
                                     {cart?.name || (isLocked ? "Order Details" : "Review & Pay")}
                                     <span className="text-xs text-muted-foreground opacity-0 group-hover:opacity-100 font-normal ml-2">(Edit Name)</span>
                                 </CardTitle>
                             )}
                        </div>
                        <Badge variant={cart?.status === 'paid' ? "default" : cart?.status === 'unconfirmed' ? "outline" : "destructive"}>
                            {cart?.status}
                        </Badge>
                    </div>

                    {/* Re-Carting Controls */}
                    <div className="flex gap-2">
                        <Button variant="outline" size="sm" className="flex-1 text-xs" onClick={handleAddToCurrent}>
                            <Plus className="mr-2 h-3 w-3" /> Add to Cart
                        </Button>
                        <Button variant="outline" size="sm" className="flex-1 text-xs" onClick={handleMakeCurrent}>
                            <RefreshCcw className="mr-2 h-3 w-3" /> Make Current
                        </Button>
                    </div>
                </div>
            </CardHeader>

            <CardContent className="flex-1 overflow-auto p-0 px-1">
                <div className="flex flex-col h-full">

                    {/* Items List */}
                    <div className="flex-1 overflow-y-auto px-4 space-y-4 pb-4">
                        <AnimatePresence>
                            {cart.products?.map((item) => {
                                const imageUrl = item.product?.images?.[0] || "/placeholder.jpg";
                                return (
                                    <motion.div
                                        key={item.id}
                                        className="flex rounded-lg border bg-card p-2 shadow-sm"
                                    >
                                        <img
                                            src={imageUrl}
                                            alt={item.product?.name ?? "Product"}
                                            className="h-20 w-20 rounded object-cover bg-muted"
                                        />
                                        <div className="ml-4 flex flex-1 flex-col justify-between">
                                            <div className="flex justify-between items-start gap-2">
                                                <Link href={`/store/${item.product?.id}`} className="text-sm font-medium line-clamp-2 hover:underline">
                                                    {item.product?.name ?? "Unnamed product"}
                                                </Link>
                                            </div>

                                            <div className="mt-2 flex justify-between items-center">
                                                <div className="flex items-center text-sm text-muted-foreground bg-secondary/50 px-2 py-1 rounded">
                                                    <span>Qty: {item.quantity}</span>
                                                </div>
                                                <span className="text-sm font-medium">
                                                    â‚¦{((item.product?.price || 0) * item.quantity).toFixed(2)}
                                                </span>
                                            </div>
                                        </div>
                                    </motion.div>
                                );
                            })}
                        </AnimatePresence>
                    </div>

                    {/* Footer / Summary */}
                    <div className="bg-muted/10 p-6 space-y-3 border-t mt-auto">

                        {/* Address Selection (Only for pending) */}
                        {!isLocked && user?.id !== 'nil' && (
                            <div className="space-y-1 mb-4 p-3 bg-background border rounded-lg">
                                <label className="text-sm font-medium flex items-center gap-2">
                                    Delivery Address
                                </label>
                                {user?.addresses && user?.addresses.length > 0 ? (
                                    <div className="space-y-2">
                                        <select
                                            className="w-full rounded-md border border-input bg-background px-3 py-2 text-sm"
                                            value={selectedAddressId ?? ""}
                                            onChange={(e) => setSelectedAddressId(e.target.value)}
                                        >
                                            {user.addresses.map((address: Address) => (
                                                <option key={address.id} value={address.id}>
                                                    {[address.address, address.city, address.state].filter(Boolean).join(", ")}
                                                </option>
                                            ))}
                                        </select>
                                    </div>
                                ) : (
                                    <div className="space-y-2">
                                        <p className="text-sm text-destructive">No addresses found.</p>
                                        <EditUser />
                                    </div>
                                )}
                            </div>
                        )}

                        <div className="flex justify-between text-sm">
                            <span>Subtotal</span>
                            <span>â‚¦{subtotal.toFixed(2)}</span>
                        </div>

                        <div className="flex justify-between text-sm">
                            <span className="flex items-center gap-2">
                                Delivery Fee
                                {!isLocked && <span className="text-xs text-muted-foreground">({selectedAddress?.state || "Standard"})</span>}
                            </span>
                            <span>â‚¦{deliveryFee.toFixed(2)}</span>
                        </div>

                        <Separator />

                        <div className="flex justify-between font-semibold text-lg">
                            <span>Total</span>
                            <span>â‚¦{totalAmount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                        </div>

                        {/* Payment Actions */}
                        {!isLocked && user && (
                            <div className="pt-4 space-y-3">
                                <div className="grid grid-cols-2 gap-2">
                                    <FlutterWaveButtonHook
                                        tx_ref={`retry-${cart.id}-${Date.now()}`}
                                        amount={totalAmount}
                                        currency="NGN"
                                        email={user?.email || ""}
                                        phonenumber={user?.contact || ""}
                                        name={user?.name || "Customer"}
                                        disabled={!selectedAddressId}
                                        onSuccess={async (response) => {
                                            try {
                                                await axios.put(`/api/dbhandler?model=cart&id=${cart.id}`, {
                                                    status: "paid",
                                                    total: totalAmount,
                                                });
                                                setCart(prev => prev ? ({ ...prev, status: "paid", total: totalAmount }) : null);
                                                if (onPaymentSuccess) onPaymentSuccess();
                                            } catch (err) {
                                                console.error("Failed to update cart status", err);
                                            }
                                        }}
                                    />

                                    <BankTransferForm
                                        cartId={cart.id}
                                        amount={totalAmount}
                                        onSuccess={() => {
                                            // Refresh cart logic
                                            setCart(prev => prev ? ({ ...prev, status: "unconfirmed" }) : null);
                                            if (onPaymentSuccess) onPaymentSuccess();
                                        }}
                                    />
                                </div>

                                {!selectedAddressId && (
                                    <p className="text-xs text-destructive text-center">
                                        Select address to pay.
                                    </p>
                                )}
                            </div>
                        )}

                        {cart.status === 'unconfirmed' && (
                            <div className="p-3 bg-yellow-50 text-yellow-800 text-sm rounded border border-yellow-200">
                                Payment is checking unconfirmed. Waiting for admin approval.
                            </div>
                        )}
                    </div>
                </div>
            </CardContent>
        </Card>
    );
}



================================================================================
LOCATION: components\myComponents\subs\CartDetailsDialog.tsx
================================================================================

"use client";

import {
    Dialog,
    DialogContent,
    DialogHeader,
    DialogTitle,
    DialogFooter,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";

export function CartDetailsDialog({
    open,
    onOpenChange,
    cart,
    onConfirmPayment,
}: {
    open: boolean;
    onOpenChange: (open: boolean) => void;
    cart: any;
    onConfirmPayment: () => void;
}) {
    if (!cart) return null;

    return (
        <Dialog open={open} onOpenChange={onOpenChange}>
            <DialogContent className="max-w-3xl">
                <DialogHeader>
                    <DialogTitle>Cart Details</DialogTitle>
                </DialogHeader>

                {/* USER */}
                <div className="text-sm text-muted-foreground p-3 border rounded-md bg-muted/50">
                    <div className="grid grid-cols-2 gap-2">
                        <div>
                            <span className="font-semibold block text-xs uppercase">Customer</span>
                            {cart.user?.name || "Guest"}
                        </div>
                        <div>
                            <span className="font-semibold block text-xs uppercase">Email</span>
                            {cart.user?.email || "N/A"}
                        </div>
                        <div>
                            <span className="font-semibold block text-xs uppercase">Contact</span>
                            {cart.user?.contact || "N/A"}
                        </div>
                         <div>
                            <span className="font-semibold block text-xs uppercase">Status</span>
                            <span className={`badge ${cart.status === 'paid' ? 'text-green-600' : 'text-orange-600'}`}>
                                {cart.status}
                            </span>
                        </div>
                    </div>
                </div>

                {/* PRODUCTS */}
                <div className="mt-4">
                    <h4 className="font-semibold mb-2">Products</h4>
                    <div className="space-y-2">
                        {cart.products.map((item: any) => (
                            <div
                                key={item.id}
                                className="flex justify-between border-b pb-1"
                            >
                                <div>
                                    <p className="font-medium">{item.product.name}</p>
                                    <p className="text-sm text-muted-foreground">
                                        Qty: {item.quantity}
                                    </p>
                                </div>
                                <p>
                                    â‚¦{(item.product.price * item.quantity).toFixed(2)}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>

                {/* PAYMENT */}
                <div className="mt-4">
                    <h4 className="font-semibold mb-2">Payment</h4>
                    {cart.payment ? (
                        <>
                            <p>Method: {cart.payment.method}</p>
                            <p>Amount: â‚¦{cart.payment.amount}</p>
                            <p>TX Ref: {cart.payment.tx_ref}</p>
                        </>
                    ) : (
                        <p className="text-muted-foreground">No payment record</p>
                    )}
                </div>

                {/* TOTAL */}
                <div className="mt-4 font-bold text-lg">
                    Total: â‚¦{cart.total}
                </div>

                {/* CONFIRM BUTTON */}
                {cart.status === "unconfirmed" && (
                    <DialogFooter>
                        <Button onClick={onConfirmPayment}>
                            Confirm Payment
                        </Button>
                    </DialogFooter>
                )}
            </DialogContent>
        </Dialog>
    );
}



================================================================================
LOCATION: components\myComponents\subs\cartitem.tsx
================================================================================

"use client"
import { Button } from "@/components/ui/button"
import { cartActions } from "@/store/cart-slice"
import { useDispatch } from "react-redux"
import { Minus, Plus } from "lucide-react"


const Cartitem = (props:{name: string, price: number, qty: number, totalPrice: number, id: string, img: string}) => {
    // const img = stocks.stocks.find((stock)=>{
    //     return (stock.id = props.id)
    // })
    const dispatch = useDispatch()
    const subFromCart = (name : string, id : string, price : number) => {
      dispatch(
        cartActions.subFromCart({
          name,
          id,
          price,
        })
      )
    }

    const removeFromCart = (name : string, id : string, price : number) => {
      dispatch(
        cartActions.removeFromCart({
          name,
          id,
          price,
        })
      )
    }

    const cart = (name : string, id : string, price : number) => {
      dispatch(
        cartActions.addToCart({
          name,
          id,
          price,
        })
      )
    }

  return (
    <div className="h-36 flex flex-row w-full max-w-4xl /px-1 gap-2 bg-secondary rounded-sm mb-2">
      <div className="w-36 h-36 overflow-clip flex justify-center items-center"><img src={props.img} className="h-full" alt="" /></div>
      <div className="flex flex-col h-full w-full flex-1">
        <div className="flex flex-1 flex-row justify-between">
          <div className="h-full flex flex-col justify-between">
              <div className="text-2xl md:text-3xl font-semibold text-accent text-nowrap whitespace-nowrap /font-dance">{props.name}</div>
              <div>
                <div className="">Price: <span className="text-xl font-semibold text-foreground/80">â‚¦ {props.price}</span></div>
                <div>Qty : <span className="text-xl">{props.qty}</span></div>
              </div>
              <div className="w-[130px] flex md:hidden flex-row justify-between mt-2 pb-2">
                <Button size="icon" className="text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>cart(props.name, props.id, props.price)}><Plus className="h-4 w-4" /></Button>
                <Button size="icon" className="text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>subFromCart(props.name, props.id, props.price)}><Minus className="h-4 w-4" /></Button>
                <Button size="icon" variant={"outline"} className="text-accent bg-transparent text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>removeFromCart(props.name, props.id, props.price)}>x</Button></div>
          </div>
          <div className="h-full flex flex-col p-2 gap-1 justify-end relative">
            <div className="text-xl font-semibold text-center absolute top-2 right-3 whitespace-nowrap bg-secondary">â‚¦ {props.totalPrice}</div>
            <div className="w-[130px] hidden md:flex flex-row justify-between mt-2">
              <Button size="icon" className="text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>cart(props.name, props.id, props.price)}><Plus className="h-4 w-4" /></Button>
              <Button size="icon" className="text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>subFromCart(props.name, props.id, props.price)}><Minus className="h-4 w-4" /></Button>
              <Button size="icon" variant={"outline"} className="text-accent bg-transparent text-3xl font-bold w-10 h-10 rounded-full" onClick={()=>removeFromCart(props.name, props.id, props.price)}>x</Button></div>
          </div>
        </div>
        <div>

        </div>
      </div>
    </div>
  )
}

export default Cartitem



================================================================================
LOCATION: components\myComponents\subs\dashboard.tsx
================================================================================

import React from 'react'

const Dashboard = () => {
  return (
    <div>
      
    </div>
  )
}

export default Dashboard



================================================================================
LOCATION: components\myComponents\subs\datatable.tsx
================================================================================

"use client"

import * as React from "react"
import {
  ColumnDef,
  ColumnFiltersState,
  SortingState,
  VisibilityState,
  flexRender,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  useReactTable,
} from "@tanstack/react-table"
import { ArrowUpDown, ChevronDown, MoreHorizontal } from "lucide-react"

import { Button } from "@/components/ui/button"
import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import { Input } from "@/components/ui/input"
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table"



// const data: Payment[] = [
//   {
//     id: "m5gr84i9",
//     amount: 316,
//     status: "success",
//     email: "ken99@yahoo.com",
//   },
//   {
//     id: "3u1reuv4",
//     amount: 242,
//     status: "success",
//     email: "Abe45@gmail.com",
//   },
//   {
//     id: "derv1ws0",
//     amount: 837,
//     status: "processing",
//     email: "Monserrat44@gmail.com",
//   },
//   {
//     id: "5kma53ae",
//     amount: 874,
//     status: "success",
//     email: "Silas22@gmail.com",
//   },
//   {
//     id: "bhqecj4p",
//     amount: 721,
//     status: "failed",
//     email: "carmella@hotmail.com",
//   },
// ]

// export type Payment = {
//   id: string
//   amount: number
//   status: "pending" | "processing" | "success" | "failed"
//   email: string
// }

// export const columns: ColumnDef<Payment>[] = [
//   {
//     id: "select",
//     header: ({ table }) => (
//       <Checkbox
//         checked={
//           table.getIsAllPageRowsSelected() ||
//           (table.getIsSomePageRowsSelected() && "indeterminate")
//         }
//         onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
//         aria-label="Select all"
//       />
//     ),
//     cell: ({ row }) => (
//       <Checkbox
//         checked={row.getIsSelected()}
//         onCheckedChange={(value) => row.toggleSelected(!!value)}
//         aria-label="Select row"
//       />
//     ),
//     enableSorting: false,
//     enableHiding: false,
//   },
//   {
//     accessorKey: "status",
//     header: "Status",
//     cell: ({ row }) => (
//       <div className="capitalize">{row.getValue("status")}</div>
//     ),
//   },
//   {
//     accessorKey: "email",
//     header: ({ column }) => {
//       return (
//         <Button
//           variant="ghost"
//           onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
//         >
//           Email
//           <ArrowUpDown className="ml-2 h-4 w-4" />
//         </Button>
//       )
//     },
//     cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
//   },
//   {
//     accessorKey: "amount",
//     header: () => <div className="text-right">Amount</div>,
//     cell: ({ row }) => {
//       const amount = parseFloat(row.getValue("amount"))

//       // Format the amount as a dollar amount
//       const formatted = new Intl.NumberFormat("en-US", {
//         style: "currency",
//         currency: "USD",
//       }).format(amount)

//       return <div className="text-right font-medium">{formatted}</div>
//     },
//   },
//   {
//     id: "actions",
//     enableHiding: false,
//     cell: ({ row }) => {
//       const payment = row.original

//       return (
//         <DropdownMenu>
//           <DropdownMenuTrigger asChild>
//             <Button variant="ghost" className="h-8 w-8 p-0">
//               <span className="sr-only">Open menu</span>
//               <MoreHorizontal className="h-4 w-4" />
//             </Button>
//           </DropdownMenuTrigger>
//           <DropdownMenuContent align="end">
//             <DropdownMenuLabel>Actions</DropdownMenuLabel>
//             <DropdownMenuItem
//               onClick={() => navigator.clipboard.writeText(payment.id)}
//             >
//               Copy payment ID
//             </DropdownMenuItem>
//             <DropdownMenuSeparator />
//             <DropdownMenuItem>View customer</DropdownMenuItem>
//             <DropdownMenuItem>View payment details</DropdownMenuItem>
//           </DropdownMenuContent>
//         </DropdownMenu>
//       )
//     },
//   },
// ]







export function DataTableDemo(props: { data: any, columns: any, onRowClick?: (row: any) => void }) {
  const [sorting, setSorting] = React.useState<SortingState>([])
  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>(
    []
  )
  const [columnVisibility, setColumnVisibility] =
    React.useState<VisibilityState>({})
  const [rowSelection, setRowSelection] = React.useState({})

  const table = useReactTable({
    data: props.data,
    columns: props.columns,
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    getCoreRowModel: getCoreRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    onColumnVisibilityChange: setColumnVisibility,
    onRowSelectionChange: setRowSelection,
    state: {
      sorting,
      columnFilters,
      columnVisibility,
      rowSelection,
    },
  })

  return (
    <div className="w-full  max-w-3xl mx-auto">
      <div className="flex items-center py-4">
        {/* <Input
          placeholder="Filter emails..."
          value={(table.getColumn("email")?.getFilterValue() as string) ?? ""}
          onChange={(event) =>
            table.getColumn("email")?.setFilterValue(event.target.value)
          }
          className="max-w-sm"
        /> */}
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="outline" className="ml-auto">
              Columns <ChevronDown className="ml-2 h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            {table
              .getAllColumns()
              .filter((column) => column.getCanHide())
              .map((column) => {
                return (
                  <DropdownMenuCheckboxItem
                    key={column.id}
                    className="capitalize"
                    checked={column.getIsVisible()}
                    onCheckedChange={(value) =>
                      column.toggleVisibility(!!value)
                    }
                  >
                    {column.id}
                  </DropdownMenuCheckboxItem>
                )
              })}
          </DropdownMenuContent>
        </DropdownMenu>
      </div>
      <div className="rounded-md border /bg-red-500">
        <Table>
          <TableHeader>
            {table.getHeaderGroups().map((headerGroup) => (
              <TableRow key={headerGroup.id}>
                {headerGroup.headers.map((header) => {
                  return (
                    <TableHead key={header.id} className="/bg-red-500 max-w-sm">
                      {header.isPlaceholder
                        ? null
                        : flexRender(
                          header.column.columnDef.header,
                          header.getContext()
                        )}
                    </TableHead>
                  )
                })}
              </TableRow>
            ))}
          </TableHeader>
          <TableBody>
            {table.getRowModel().rows?.length ? (
              table.getRowModel().rows.map((row) => {
                const status = (row.original as any).status;
                let rowClass = "cursor-pointer transition-colors hover:bg-muted/50 ";

                if (status === "separator") rowClass = "bg-primary/20 font-bold h-12 pointer-events-none sticky top-0 z-10";
                else if (status === "pending") rowClass += "bg-yellow-100/50 dark:bg-yellow-900/20 hover:bg-yellow-200/50 dark:hover:bg-yellow-900/30";
                else if (status === "paid" || status === "completed") rowClass += "bg-green-100/50 dark:bg-green-900/20 hover:bg-green-200/50 dark:hover:bg-green-900/30";
                else if (status === "unconfirmed") rowClass += "bg-orange-100/50 dark:bg-orange-900/20 hover:bg-orange-200/50 dark:hover:bg-orange-900/30";

                return (
                  <TableRow
                    key={row.id}
                    data-state={row.getIsSelected() && "selected"}
                    className={rowClass}
                    onClick={() => props.onRowClick && props.onRowClick(row.original)}
                  >
                    {row.getVisibleCells().map((cell) => (
                      <TableCell key={cell.id}>
                        {flexRender(
                          cell.column.columnDef.cell,
                          cell.getContext()
                        )}
                      </TableCell>
                    ))}
                  </TableRow>
                )
              })
            ) : (
              <TableRow>
                <TableCell
                  // colSpan={columns.length}
                  colSpan={props.columns.length}
                  className="h-24 text-center"
                >
                  No results.
                </TableCell>
              </TableRow>
            )}
          </TableBody>
        </Table>
      </div>
      <div className="flex items-center justify-end space-x-2 py-4">
        <div className="flex-1 text-sm text-muted-foreground">
          {table.getFilteredSelectedRowModel().rows.length} of{" "}
          {table.getFilteredRowModel().rows.length} row(s) selected.
        </div>
        <div className="space-x-2">
          <Button
            variant="outline"
            size="sm"
            onClick={() => table.previousPage()}
            disabled={!table.getCanPreviousPage()}
          >
            Previous
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={() => table.nextPage()}
            disabled={!table.getCanNextPage()}
          >
            Next
          </Button>
        </div>
      </div>
    </div>
  )
}



================================================================================
LOCATION: components\myComponents\subs\featuredCategories.tsx
================================================================================

"use client";
import Link from 'next/link';
import { useEffect, useState } from 'react';

// Fetch categories from backend
async function getCategories() {
  const res = await fetch(`/api/dbhandler?model=category`);

  if (!res.ok) return [];

  const categories = await res.json();

  return categories.map((cat: any) => ({
    image: cat.image || "/logo.png",
    name: cat.name,
    productCount: cat.products?.length || 0,
  }));
}

const FeaturedCategories = () => {
  const [categories, setCategories] = useState([]);

  useEffect(() => {
    const fetchCategories = async () => {
      const cats = await getCategories();
      setCategories(cats);
    };

    fetchCategories(); // <-- you need to call it
  }, []); // <-- run only once

  return (
    <section className="py-12 md:py-16">
      <div className="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">

        <div className="mb-8 flex flex-col items-center text-center">
          <h2 className="font-display text-3xl leading-tight font-bold tracking-tight md:text-4xl">
            Shop by Category
          </h2>
          <div className="mt-2 h-1 w-12 rounded-full bg-primary" />
          <p className="mt-4 max-w-2xl text-center text-muted-foreground">
            Find the perfect product for your needs from our curated collections
          </p>
        </div>

        <div className="grid grid-cols-2 gap-4 md:grid-cols-4 md:gap-6">
          {categories.map((category: any) => (
            <Link
              key={category.name}
              href={`/store?category=${category.name.toLowerCase()}`}
              aria-label={`Browse ${category.name} products`}
              className="group relative flex flex-col space-y-4 overflow-hidden
                         rounded-2xl border bg-card shadow transition-all duration-300 hover:shadow-lg"
            >
              <div className="relative aspect-[4/3] overflow-hidden">
                <div className="absolute inset-0 z-10 bg-gradient-to-t from-background/80 to-transparent" />
                <img
                  src={category.image}
                  alt={category.name}
                  className="object-cover transition duration-300 group-hover:scale-105 w-full h-full"
                />
              </div>

              <div className="relative z-20 -mt-6 p-4">
                <div className="mb-1 text-lg font-semibold">{category.name}</div>
                <p className="text-sm text-muted-foreground">
                  {category.productCount} products
                </p>
              </div>
            </Link>
          ))}
        </div>

      </div>
    </section>
  );
};

export default FeaturedCategories;



================================================================================
LOCATION: components\myComponents\subs\featuredProducts.tsx
================================================================================

"use client";

import { Button } from "@/components/ui/button";
import { ArrowRight } from "lucide-react";
import Link from "next/link";
import React, { useEffect, useMemo, useRef, useState } from "react";
import { ProductCard } from "./productCard";
import Autoplay from "embla-carousel-autoplay";

import {
  Carousel,
  CarouselContent,
  CarouselItem,
} from "@/components/ui/carousel";
import { useCart } from "@/hooks/use-cart";
import { useToast } from "@/hooks/use-toast";

/* ===============================
   Types
================================ */
export interface FeaturedProductType {
  id: string;
  name: string;
  category: {
    name: string;
  };
  price: number;
  images: string[];
  inStock: boolean;
  rating?: number;
}

/* ===============================
   Component
================================ */
const FeaturedProducts = () => {
  const [products, setProducts] = useState<FeaturedProductType[]>([]);
  const [loading, setLoading] = useState(true);

  /* Autoplay plugins */
  const autoplayLTR = useRef(
    Autoplay({ delay: 2500, stopOnInteraction: false })
  );

  const autoplayRTL = useRef(
    Autoplay({ delay: 2800, stopOnInteraction: false })
  );

  /* ===============================
     Fetch + Normalize Data
  ================================ */
  useEffect(() => {
    async function fetchFeaturedProducts() {
      try {
        const res = await fetch("/api/dbhandler?model=featuredProduct");
        const data = await res.json();

        const mapped: FeaturedProductType[] = data.map((item: any) => {
          const totalStock =
            item.product.stock?.reduce(
              (sum: number, s: any) => sum + (s.addedQuantity ?? 0),
              0
            ) ?? 0;

          const rating =
            item.product.reviews?.length > 0
              ? item.product.reviews.reduce(
                (acc: number, r: any) => acc + r.rating,
                0
              ) / item.product.reviews.length
              : undefined;

          return {
            id: item.product.id,
            name: item.product.name,
            category: {
              name: item.product.category.name,
            },
            price: item.product.price,
            images:
              item.product.images?.length > 0
                ? item.product.images
                : ["/placeholder.png"],
            inStock: totalStock > 0,
            rating,
          };
        });

        setProducts(mapped);
      } catch (err) {
        console.error("Failed to fetch featured products", err);
      } finally {
        setLoading(false);
      }
    }

    fetchFeaturedProducts();
  }, []);

  /* ===============================
     Split products for dual carousel
     â€“ Distribute alternately for balance
  ================================ */
  const [topRow, bottomRow] = useMemo(() => {
    const top: FeaturedProductType[] = [];
    const bottom: FeaturedProductType[] = [];
    products.forEach((p, i) => {
      if (i % 2 == 0) top.push(p);
      else bottom.push(p);
    });
    return [top, bottom];
  }, [products]);

  /* ===============================
     Cart Hook
  ================================ */
  const { addItem } = useCart();
  const { toast } = useToast();

  const handleAddToCart = (product: FeaturedProductType) => {
    // Map FeaturedProductType to the structure expected by cart if necessary
    // Assuming cart expects { id, name, price, images, ... } which FeaturedProductType has
    addItem(product as any, 1);
    toast({
      description: `${product.name} added to cart`,
      duration: 2000,
    });
  };

  return (
    <section className="bg-muted/50 py-12 md:py-16 overflow-hidden">
      <div className="container mx-auto max-w-7xl px-4">
        <div className="mb-10 flex flex-col items-center text-center">
          <h2 className="text-3xl font-bold md:text-4xl">
            Featured Products
          </h2>
          <div className="mt-2 h-1 w-12 rounded-full bg-primary" />
          <p className="mt-4 max-w-2xl text-muted-foreground">
            Hand-picked products customers love most
          </p>
        </div>

        {loading ? (
          <p className="text-center text-muted-foreground">Loadingâ€¦</p>
        ) : (
          <div className="space-y-8">
            {/* ===============================
                TOP CAROUSEL (LTR)
            ================================ */}
            <Carousel
              opts={{ loop: true }}
              plugins={[autoplayLTR.current]}
              className="w-screen max-w-screen-md mx-auto"
            >
              <CarouselContent>
                {topRow.map((product) => (
                  <CarouselItem
                    key={product.id}
                    className="basis-1/2 md:basis-1/4 /lg:basis-1/7  px-3"
                  >
                    <ProductCard
                      product={product}
                      onAddToCart={() => handleAddToCart(product)}
                    />
                  </CarouselItem>
                ))}
              </CarouselContent>
            </Carousel>

            {/* ===============================
                BOTTOM CAROUSEL (RTL)
            ================================ */}
            <Carousel
              opts={{ loop: true, direction: "rtl" }}
              plugins={[autoplayRTL.current]}
              className="w-screen  max-w-screen-md mx-auto"
            >
              <CarouselContent>
                {bottomRow.map((product) => (
                  <CarouselItem
                    key={product.id}
                    className="basis-1/2 md:basis-1/4 px-3"
                  >
                    <ProductCard
                      product={product}
                      onAddToCart={() => handleAddToCart(product)}
                    />
                  </CarouselItem>
                ))}
              </CarouselContent>
            </Carousel>
          </div>
        )}

        <div className="mt-12 flex justify-center">
          <Link href="/store">
            <Button
              variant="outline"
              size="lg"
              className="group h-12 px-8 border-2"
            >
              View All Products
              <ArrowRight className="ml-2 h-4 w-4 transition-transform group-hover:translate-x-1" />
            </Button>
          </Link>
        </div>
      </div>
    </section>
  );
};

export default FeaturedProducts;



================================================================================
LOCATION: components\myComponents\subs\features.tsx
================================================================================

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Clock, ShoppingBag, Star, Truck } from 'lucide-react';
import React from 'react'

const Features = () => {
    const featuresWhyChooseUs = [
        {
          description:
            "Free shipping on all orders over â‚¦200,000 within Nigeria. Fast and reliable delivery to your doorstep.",
          icon: <Truck className="h-6 w-6 text-primary" />,
          title: "Free Shipping",
        },
        {
          description:
            "Your payment information is always safe and secure with us. We use industry-leading encryption.",
          icon: <ShoppingBag className="h-6 w-6 text-primary" />,
          title: "Secure Checkout",
        },
        {
          description:
            "Our customer support team is always available to help with any questions or concerns.",
          icon: <Clock className="h-6 w-6 text-primary" />,
          title: "24/7 Support",
        },
        {
          description:
            "We stand behind the quality of every product we sell. 30-day money-back guarantee.",
          icon: <Star className="h-6 w-6 text-primary" />,
          title: "Quality Guarantee",
        },
      ];
  return (
    <section
    className={`
      py-12
      md:py-16
    `}
    id="features"
  >
    {/* Features Section */}
    <div
      className={`
        container mx-auto max-w-7xl px-4
        sm:px-6
        lg:px-8
      `}
    >
      <div className="mb-8 flex flex-col items-center text-center">
        <h2
          className={`
            font-display text-3xl leading-tight font-bold tracking-tight
            md:text-4xl
          `}
        >
          Why Choose Us
        </h2>
        <div className="mt-2 h-1 w-12 rounded-full bg-primary" />
        <p
          className={`
            mt-4 max-w-2xl text-center text-muted-foreground
            md:text-lg
          `}
        >
          We offer the best shopping experience with premium features.
          We are dedicated to providing a seamless and reliable shopping experience by offering high-quality food products and spice blends that meet strict standards of freshness, hygiene, and authenticity. Our commitment goes beyond just selling productsâ€”we carefully source our ingredients, maintain consistent quality control, ensure secure packaging, and deliver promptly to meet the needs of homes and businesses alike. With customer satisfaction at the core of everything we do, we combine competitive pricing, dependable service, and responsive support to build lasting trust and deliver value with every order.
        </p>
      </div>
      <div
        className={`
          grid gap-8
          md:grid-cols-2
          lg:grid-cols-4
        `}
      >
        {featuresWhyChooseUs.map((feature) => (
          <Card
            className={`
              rounded-2xl border-none bg-background shadow transition-all
              duration-300
              hover:shadow-lg
            `}
            key={feature.title}
          >
            <CardHeader className="pb-2">
              <div
                className={`
                  mb-3 flex h-12 w-12 items-center justify-center
                  rounded-full bg-primary/10
                `}
              >
                {feature.icon}
              </div>
              <CardTitle>{feature.title}</CardTitle>
            </CardHeader>
            <CardContent>
              <CardDescription className="text-base">
                {feature.description}
              </CardDescription>
            </CardContent>
          </Card>
        ))}
      </div>
    </div>
  </section>
  )
}

export default Features


================================================================================
LOCATION: components\myComponents\subs\fileupload.tsx
================================================================================

"use client"
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import dynamic from 'next/dynamic'
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { Button } from "@/components/ui/button"
import { Input } from '@/components/ui/input'
import axios from 'axios'
import { useAppContext } from '@/hooks/useAppContext'
import { CldUploadWidget } from 'next-cloudinary'
// import {cloudUpload, uploadCloudinary} from '@/server/config/cloudinary'
import { CiCamera, CiCirclePlus } from 'react-icons/ci'
import { BiPlus } from 'react-icons/bi'


















export const ProfileImg = () => {
  const { selectedVideo, setSelectedVideo, useMock, user, setUser, openDialog } = useAppContext();
  const [formData, setFormData] = useState({
    description: '',
    type: 'image',
    userId: user.id,
    title: 'profile image',
    for: 'post',
  });

  const [preview, setPreview] = useState(null);
  const [uploadStatus, setUploadStatus] = useState("");

  const [file, setFile] = useState(null);


  const form = useRef<HTMLFormElement>(null);

  //   const fetchUsers = async () => {
  //     const res = await axios('/api/dbhandler?model=users');
  //     setUsers(res.data);
  //   };


  const handleSubmit = async (e) => {
    e.preventDefault();
    const pformData = new FormData();
    pformData.append("file", file);
    pformData.append("description", formData.description)
    pformData.append("type", formData.type)
    pformData.append("userId", user.id)
    pformData.append("title", formData.title)
    pformData.append("profileImage", "true")
    pformData.append('for', formData.for)

    try {
      const response = await axios.post(`/api/file/image`, pformData);
      if (response.status === 200) {
        const data = response.data;
        // do something with the data
        console.log(data)
        setUser({ ...user, image: data.url });
      } else {
        openDialog("wrong input or connection error", "Upload Error")
      }
    } catch (error) {
      // handle error
      console.error(error);
    }
    resetForm();
    // fetchUsers();
  };

  // const handleDelete = async (id) => {
  //   await axios.delete(`/api/dbhandler?model=users&id=${id}`);
  //   fetchUsers();
  // };

  const resetForm = () => {
    setPreview(null)
    setFormData({
      description: '',
      type: 'image',
      userId: user.id,
      title: 'profile image',
      for: 'post',
    });
  };

  const handleImageChange = (e) => {
    const selectedFile = e.target.files[0];
    if (selectedFile.size > 3 * 1024) {
      openDialog("file size greater than 300kb file may not upload", "File too large")
    }
    setFile(selectedFile);
    setPreview(URL.createObjectURL(selectedFile));
  }


  useEffect(() => {
    // if (file) {
    //     setPreview(URL.createObjectURL(file))
    // }
  }, [preview,]);



  return (
    <div className='absolute inline z-10 translate-x-[140px] translate-y-[140px]'>
      <Drawer>
        <DrawerTrigger asChild className='w-12 h-12 flex items-center rounded-full font-bold text-accent text-2xl border-2 border-accent p-2 hover:text-primary hover:bg-accent/40 place-self-end self-end z-10'>
          <CiCamera />
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 /bg-red-500 max-w-5xl mx-auto'>

          <DrawerHeader>
            <DrawerTitle className='w-full text-center'>Edit your profile image (300kb max)</DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
          <form onSubmit={handleSubmit} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl">

            {preview && (
              <div style={{ marginTop: '1rem' }}>
                <img src={preview} alt="Selected preview" style={{ maxHeight: '300px' }} />
              </div>
            )}
            <div>{user.id}</div>
            <Input
              type="file"
              name='image'
              id='image'
              placeholder="Avatar URL"
              // value={formData.image || ''}
              // onChange={(e) => setFormData({ ...formData, image: e.target.value })}
              onChange={handleImageChange}
            />

            <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
              {/* <Button>Submit</Button> */}
              <DrawerClose className='flex-1' asChild>
                <Button className='flex-1' variant="outline">Cancel</Button>
              </DrawerClose>
              <Button type="submit" className="flex-1 before:ani-shadow w-full">Upload &rarr;</Button>
            </DrawerFooter>
          </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}











export const PostButton = () => {
  const { user, setUser } = useAppContext();
  const isAdminOrModerator = user.role === "admin" || user.role === "moderator";


  const [formData, setFormData] = useState({
    description: '',
    type: 'image',
    userId: user.id,
    title: isAdminOrModerator ? 'Title, Event, etc' : 'post',

    for: 'post',
  });

  const [preview, setPreview] = useState(null);
  const [uploadStatus, setUploadStatus] = useState("");
  const [file, setFile] = useState(null);


  const form = useRef<HTMLFormElement>(null);

  //   const fetchUsers = async () => {
  //     const res = await axios('/api/dbhandler?model=users');
  //     setUsers(res.data);
  //   };


  const handleSubmit = async (e) => {
    if (user.name === "visitor" && user.email === "nil") {
      alert("login or create an account to make a post")
      return
    }
    e.preventDefault();
    const pformData = new FormData();
    pformData.append("file", file);
    pformData.append("description", formData.description)
    pformData.append("type", formData.type)
    pformData.append("userId", user.id)
    pformData.append("title", formData.title)
    pformData.append("for", formData.for)
    pformData.append("profileImage", "false")

    try {
      const response = await axios.post(`/api/file/image`, pformData);
      if (response.status === 200) {
        const data = response.data;
        // do something with the data
        console.log(data)
        // setUser({...user, image : data.url});
      } else {
        alert("wrong input or connection error")
      }
    } catch (error) {
      // handle error
      console.error(error);
    }
    resetForm();
    // fetchUsers();
  };

  // const handleDelete = async (id) => {
  //   await axios.delete(`/api/dbhandler?model=users&id=${id}`);
  //   fetchUsers();
  // };

  const resetForm = () => {
    setPreview(null)
    setFormData({
      description: '',
      type: 'image',
      userId: user.id,
      title: isAdminOrModerator ? 'Title, event, etc' : 'post',
      for: 'post',
    });
  };

  // const handleImageChange = (e) => {
  //   const selectedFile = e.target.files[0];
  //   setFile(selectedFile);
  //   setPreview(URL.createObjectURL(selectedFile));
  // }

  const handleImageChange = (e) => {
    const selectedFile = e.target.files[0];
    setFile(selectedFile);
    setPreview(URL.createObjectURL(selectedFile));

    const fileType = selectedFile.type.split('/')[0];
    switch (fileType) {
      case 'image':
        setFormData({ ...formData, type: 'image' });
        break;
      case 'video':
        setFormData({ ...formData, type: 'video' });
        break;
      case 'audio':
        setFormData({ ...formData, type: 'audio' });
        break;
      default:
        setFormData({ ...formData, type: 'document' });
        break;
    }
  }



  useEffect(() => {
    // if (file) {
    //     setPreview(URL.createObjectURL(file))
    // }
  }, [preview,]);



  return (
    <div className='z-10 w-full'>
      <Drawer>
        <DrawerTrigger asChild className='w-full h-10 border-2 border-accent flex items-center rounded-full font-bold text-accent text-2xl hover:text-accent hover:bg-accent/40 z-10'>
          <BiPlus />
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 /bg-red-500 max-w-5xl mx-auto'>
          <DrawerHeader>
            <DrawerTitle className='w-full text-center'>
              {isAdminOrModerator ? 'Create a new content as an Administrator' : 'Create a new post'}
            </DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
          <form onSubmit={handleSubmit} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl">
            {preview && (
              <div style={{ marginTop: '1rem' }}>
                {formData.type === 'image' && (
                  <img src={preview} alt="Selected preview" style={{ maxHeight: '300px' }} />
                )}
                {formData.type === 'video' && (
                  <video src={preview} controls style={{ maxHeight: '300px' }} />
                )}
                {formData.type === 'audio' && (
                  <audio src={preview} controls />
                )}
                {formData.type === 'document' && (
                  <p>Selected document: {file.name}</p>
                )}
              </div>
            )}
            <div>{user.name}</div>
            <Input type="file" name='image' id='image' placeholder="Avatar URL" onChange={handleImageChange} />
            {isAdminOrModerator && (
              <Input type="text" placeholder="Title" value={formData.title} onChange={(e) => setFormData({ ...formData, title: e.target.value })} />
            )}
            <Input type="text" placeholder="Description" value={formData.description} onChange={(e) => setFormData({ ...formData, description: e.target.value })} />
            {isAdminOrModerator && (
              <select value={formData.for} onChange={(e) => setFormData({ ...formData, for: e.target.value })}>
                <option value="event">event</option>
                <option value="project">project</option>
                <option value="testimony">testimony</option>
                <option value="post">post</option>
                <option value="service">service</option>
                <option value="preaching">preaching</option>
              </select>
            )}
            <select value={formData.type} onChange={(e) => setFormData({ ...formData, type: e.target.value })}>
              <option value="image">image</option>
              <option value="video">video</option>
              <option value="audio">audio</option>
              <option value="document">document</option>
            </select>
            <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
              <DrawerClose className='flex-1' asChild>
                <Button className='flex-1' variant="outline">Cancel</Button>
              </DrawerClose>
              <Button type="submit" className="flex-1 before:ani-shadow w-full">Upload &rarr;</Button>
            </DrawerFooter>
          </form>
        </DrawerContent>
      </Drawer>
    </div>
  );
}








================================================================================
LOCATION: components\myComponents\subs\filters.tsx
================================================================================

"use client"
import React from 'react'

const Filters = () => {
  return (
    <div>
      filter
    </div>
  )
}

export default Filters



================================================================================
LOCATION: components\myComponents\subs\footer.tsx
================================================================================

import { Facebook, Github, Instagram, Linkedin, Twitter } from "lucide-react";
import Link from "next/link";
import { prisma } from "@/lib/prisma";
import linksData from "../../../data/links";

import { SEO_CONFIG } from "../../../app/layout";
import { cn } from "@/lib/utils"
// import { Button } from "~/ui/primitives/button";
import { Button } from "@/components/ui/button";

export async function Footer({ className }: { className?: string }) {
  const socialMediaLinks = [
    { href: "#", icon: <Facebook className="h-4 w-4" />, label: "Facebook" },
    { href: "#", icon: <Twitter className="h-4 w-4" />, label: "Twitter" },
    { href: "#", icon: <Instagram className="h-4 w-4" />, label: "Instagram" },
    //{ href: "#", icon: <Github className="h-4 w-4" />, label: "GitHub" },
    { href: "#", icon: <Linkedin className="h-4 w-4" />, label: "LinkedIn" },
  ];
  
  // Fetch categories from DB
  const categories = await prisma.category.findMany({
      take: 6,
      orderBy: { name: 'asc' },
      select: { id: true, name: true }
  });

  const pageLinks = linksData.Links.map(l => ({
      href: l.path,
      label: l.name
  }));
  
  const categoryLinks = categories.map(c => ({
      href: `/store?category=${c.name}`,
      label: c.name
  }));
  
  const supportLinks = [
    { href: "/help", label: "Help Center" },
    { href: "/contact", label: "Contact and Advert" },
    { href: "/privacy", label: "Privacy Policy" },  
    { href: "/terms", label: "Terms of Service" },
  ];
  
  const footerLinks = [
    { href: "/privacy", label: "Privacy" },
    { href: "/terms", label: "Terms" },
    { href: "/cookies", label: "Cookies" },
    { href: "/sitemap", label: "Sitemap" },
  ];

  const columns = [
    {
      label : 'Pages',
      links : pageLinks,
    },
    {
      label : 'Categories',
      links : categoryLinks,
    },
    {
      label : 'Support and Advert',
      links : supportLinks,
    },
  ]
  
  return (
    <footer className={cn("border-t bg-background", className)}>
      <div
        className={`container mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8 `}
      >
            <div className="space-y-4 mb-3">
              <Link className="flex items-center gap-2" href="/">
                <span
                  className={`
                    bg-gradient-to-r from-primary to-primary/70 bg-clip-text
                    text-xl font-bold tracking-tight text-transparent
                  `}
                >
                  {SEO_CONFIG.name}
                </span>
              </Link>
              <p className="text-sm text-muted-foreground">
                {SEO_CONFIG.description}
              </p>

              {/* socials */}
              <div className="flex space-x-4">
                {
                  socialMediaLinks.map((social, index)=>(
                    <Button
                      className="h-8 w-8 rounded-full"
                      size="icon"
                      variant="ghost"
                      key={index}
                    >
                      {social.icon}
                      <span className="sr-only">{social.label}</span>
                    </Button>
                  ))
                }
              </div>
            </div>

        <div
          className={`grid grid-cols-3 gap-8 md:grid-cols-4`}
        >
          {/* Collumns */}
          {columns.map((column, index)=>(
            <div key={index}>
              <h3 className="mb-4 text-sm font-semibold">{column.label}</h3>
              <ul className="space-y-2 text-sm">
                {
                  column.links.map((link, index)=>(
                    <li key={index}>
                      <Link
                        className={`
                          text-muted-foreground
                          hover:text-foreground
                        `}
                        href={link.href}
                      >
                        {link.label}
                      </Link>
                    </li>
                  ))
                }
              </ul>
            </div>
          ))}
        </div>
        <div className="mt-12 border-t pt-8">
          <div
            className={`
              flex flex-col items-center justify-between gap-4
              md:flex-row
            `}
          >
            <p className="text-sm text-muted-foreground">
              &copy; {new Date().getFullYear()} {SEO_CONFIG.name}. All rights
              reserved.
            </p>
            <div
              className={
                "flex items-center gap-4 text-sm text-muted-foreground"
              }
            >
              {
                footerLinks.map((link, index)=>(
                  <Link key={index} className="hover:text-foreground" href={link.href}>
                    {link.label}
                  </Link>
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </footer>
  );
}



================================================================================
LOCATION: components\myComponents\subs\gallery.tsx
================================================================================

"use client"
// import { Button } from "@/components/ui/button"
import { CiShoppingCart, } from "react-icons/ci"
import { useSelector, useDispatch } from "react-redux"
import { cartActions } from "@/store/cart-slice"
import { RootState } from "@/store"
import { useEffect, useRef, useState } from "react"
import { Button } from "@/components/ui/button"
import { motion, useInView, useAnimation } from "framer-motion"

import { useAppContext } from "@/hooks/useAppContext"

const Gallery = () => {
  const { openDialog } = useAppContext();
  const ref = useRef(null)
  const isInView = useInView(ref, { once: true })

  useEffect(() => {
    console.log(isInView)
  }, [isInView])

  type stockCategory = {
    _id: string;
    name: string;
    description: string;
    img: string;
    price: number;
    cost: number;
    qty: number;
    __v: number;
  };

  const [data, setData] = useState<stockCategory[]>([]);
  const [error, setError] = useState(null);
  const [loading, setLoading] = useState(true);

  // const cartItems = useSelector((state : RootState)=>state.cart.itemsList)
  const dispatch = useDispatch();
  const cart = (name: string, id: string, price: number, img: string) => {
    dispatch(
      cartActions.addToCart({
        name,
        id,
        price,
        img,
      })
    )
    // console.log(cartItems)
  }

  useEffect(() => {
    fetch(`/api/data/stock?limit=10`)
      .then(response => response.json())
      .then(data => data.slice().sort(() => Math.random() - 0.5))
      .then(data => {
        setData(data);
        // data.forEach((obj : any) => {
        //   console.log(obj._id, obj.name, obj.price);
        // });
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        openDialog("unable to connect to server please check your network connection", "Connection Error");
        setLoading(true);
      });
  }, []);

  if (loading) {
    return <p>Loading...</p>;
  }

  // if (error) {
  //   return <p>Error: {error}</p>;
  // }

  return (
    <section className="w-full max-w-[1000px] overflow-clip">
      <div ref={ref} className="flex flex-col w-full gap-5">
        {data.map((stock, index) => {
          return (
            <div className="flex flex-col md:flex-row /bg-accent-secondary/5 w-full items-center md:items-start md:justify-between" key={index}>
              <div className={`${(index % 2) ? "md:order-2" : ""} w-[350px] h-[350px] contain-content flex justify-center items-center`}>
                <img src={stock.img} alt="" className="h-full w-auto rounded-sm" />
              </div>
              <div className="flex flex-col flex-1 /justify-between items-center text-center p-5 max-w-md md:self-end">
                <div className="flex flex-1 flex-col justify-center items-center">
                  <div className="text-lg font-semibold text-accent">{stock.name}</div>
                  <div className="text-2xl font-dance max-h-32 md:max-h-none overflow-auto md:overscroll-none hi">{stock.description}</div>
                </div>
                <Button onClick={() => cart(stock.name, stock._id, stock.price, stock.img)} className="relative max-w-[220px] text-3xl //text-accent border-2 font-semibold rounded-md px-20  hover:bg-accent/10 hover:border-2 hover:border-accent hover:text-accent"><CiShoppingCart /></Button>
              </div>
            </div>
          )
        })}
      </div>
    </section>
  )
}

export default Gallery



================================================================================
LOCATION: components\myComponents\subs\googlesignin.tsx
================================================================================

// @ts-nocheck
'use server'

import { signIn } from "@/auth";
import { FcGoogle } from "react-icons/fc";
import { FaFacebook } from "react-icons/fa";

/* ================= GOOGLE ================= */

export const GoogleSignIn = async () => {
  const googleSignInAction = async () => {
    "use server";
    await signIn("google");
  };

  return (
    <div className="m-2">
      <form action={googleSignInAction}>
        <button
          type="submit"
          className="relative group/btn flex space-x-2 items-center justify-start px-4 w-full text-black rounded-md h-10 font-medium shadow-input bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]"
        >
          <FcGoogle className="h-4 w-4" />
          <span className="text-sm">Google</span>
        </button>
      </form>
    </div>
  );
};

export const googleSignIn = async () => {
  "use server";
  await signIn("google");
};

/* ================= FACEBOOK ================= */

export const FacebookSignIn = async () => {
  const facebookSignInAction = async () => {
    "use server";
    await signIn("facebook");
  };

  return (
    <div className="m-2">
      <form action={facebookSignInAction}>
        <button
          type="submit"
          className="relative group/btn flex space-x-2 items-center justify-start px-4 w-full text-white rounded-md h-10 font-medium shadow-input bg-blue-600 hover:bg-blue-700"
        >
          <FaFacebook className="h-4 w-4" />
          <span className="text-sm">Facebook</span>
        </button>
      </form>
    </div>
  );
};

export const facebookSignIn = async () => {
  "use server";
  await signIn("facebook");
};



================================================================================
LOCATION: components\myComponents\subs\hero-badge.tsx
================================================================================

import { SEO_CONFIG, SYSTEM_CONFIG } from "@/app/layout";
import { GithubIcon } from "lucide-react";
import Link from "next/link";



export function HeroBadge() {

  return (
    <Link
      className={`
        inline-flex items-center rounded-lg bg-primary/10 px-3 py-1 text-sm
        font-semibold text-primary
      `}
      href={ "/store" }
      rel={"noopener noreferrer"}
      target={"_blank"}
    >
      {(
        <div className="flex items-center gap-1">
          <span>{SEO_CONFIG.fullName}</span>
          <span className="text-muted-foreground">|</span>
          <GithubIcon className="h-3.5 w-3.5" />
          { (<span>â­ {'2'} stars on GitHub</span>)}
        </div>
      )}
    </Link>
  );
}



================================================================================
LOCATION: components\myComponents\subs\hero-variants.tsx
================================================================================

"use client"
import React, { useState } from 'react'
import Link from 'next/link'
import { Button } from '@/components/ui/button'
import {
  ArrowRight, Clock, Truck, Star, ShieldCheck, MapPin,
  Calendar, Users, Instagram, ChevronLeft, ChevronRight,
  Search, Menu, ShoppingCart, User, Phone
} from 'lucide-react'
import { motion, AnimatePresence } from "framer-motion"
import { Input } from '@/components/ui/input'
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion"

type HeroVariant = 'carousel' | 'story' | 'menu' | 'experience' | 'local'

interface HeroVariantProps {
  variant: HeroVariant
}

// Hero Variant 1: Image Carousel + Online Ordering
const CarouselHero = () => {
  const [currentSlide, setCurrentSlide] = useState(0)
  const [showNotification, setShowNotification] = useState(true)
  const [isOrderNowFloating, setIsOrderNowFloating] = useState(false)

  const slides = [
    '/small chops 1.jpg',
    '/small chops 3.jpg',
    '/small chops 4.jpg',
    '/small chops 5.jpg',
    '/shawama pics 1.jpg',
  ]

  const nextSlide = () => setCurrentSlide((prev) => (prev + 1) % slides.length)
  const prevSlide = () => setCurrentSlide((prev) => (prev - 1 + slides.length) % slides.length)

  // Auto-advance slides
  React.useEffect(() => {
    const timer = setInterval(nextSlide, 5000)
    return () => clearInterval(timer)
  }, [])

  // Detect scroll for floating button
  React.useEffect(() => {
    const handleScroll = () => {
      setIsOrderNowFloating(window.scrollY > 400)
    }
    window.addEventListener('scroll', handleScroll)
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  return (
    <div className="relative h-screen w-full overflow-hidden">
      {/* Sticky Navigation */}
      <nav className="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b">
        <div className="container mx-auto px-4 flex items-center justify-between h-16">
          <div className="font-bold text-xl text-accent">Lois Food & Spices</div>
          <div className="hidden md:flex gap-6">
            <Link href="/" className="hover:text-accent transition">Home</Link>
            <Link href="/store" className="hover:text-accent transition">Menu</Link>
            <Link href="/about" className="hover:text-accent transition">About</Link>
            <Link href="/contact" className="hover:text-accent transition">Contact</Link>
          </div>
          <div className="flex items-center gap-4">
            <MapPin className="h-5 w-5 hidden md:block" />
            <User className="h-5 w-5" />
            <ShoppingCart className="h-5 w-5" />
            <Menu className="h-5 w-5 md:hidden" />
          </div>
        </div>
      </nav>

      {/* Notification Bar */}
      {showNotification && (
        <motion.div
          initial={{ y: -50 }}
          animate={{ y: 0 }}
          className="fixed top-16 left-0 right-0 z-40 bg-accent text-white py-2 px-4 text-center text-sm"
        >
          Free delivery on orders over â‚¦5,000
          <button onClick={() => setShowNotification(false)} className="ml-4 underline">Dismiss</button>
        </motion.div>
      )}

      {/* Carousel */}
      <div className="relative h-full w-full mt-16">
        <AnimatePresence mode="wait">
          <motion.img
            key={currentSlide}
            src={slides[currentSlide]}
            alt={`Slide ${currentSlide + 1}`}
            className="w-full h-full object-cover"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 1 }}
          />
        </AnimatePresence>

        {/* Dark Overlay */}
        <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent" />

        {/* Carousel Controls */}
        <button
          onClick={prevSlide}
          className="absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur-sm rounded-full p-3 z-20"
        >
          <ChevronLeft className="h-6 w-6 text-white" />
        </button>
        <button
          onClick={nextSlide}
          className="absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur-sm rounded-full p-3 z-20"
        >
          <ChevronRight className="h-6 w-6 text-white" />
        </button>

        {/* Pagination Dots */}
        <div className="absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2 z-20">
          {slides.map((_, index) => (
            <button
              key={index}
              onClick={() => setCurrentSlide(index)}
              className={`h-2 rounded-full transition-all ${
                index === currentSlide ? 'w-8 bg-accent' : 'w-2 bg-white/50'
              }`}
            />
          ))}
        </div>

        {/* CTA Content */}
        <div className="absolute inset-0 flex flex-col items-center justify-center text-center z-10 px-4">
          <motion.h1
            initial={{ y: 30, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            className="text-4xl md:text-6xl font-bold text-white mb-6"
          >
            Order Fresh Food & Spices Online
          </motion.h1>

          <motion.div
            initial={{ y: 30, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ delay: 0.2 }}
            className="flex flex-col md:flex-row gap-4"
          >
            <Link href="/store">
              <Button size="lg" className="bg-accent hover:bg-accent/90 text-white px-8 py-6 text-lg">
                Order Now <ArrowRight className="ml-2" />
              </Button>
            </Link>
            <Link href="/store">
              <Button size="lg" variant="outline" className="bg-transparent border-2 border-white text-white hover:bg-white hover:text-black px-8 py-6 text-lg">
                View Menu
              </Button>
            </Link>
          </motion.div>

          {/* Location Selector (Desktop) */}
          <motion.div
            initial={{ y: 30, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ delay: 0.4 }}
            className="mt-8 hidden md:flex items-center gap-2 bg-white/10 backdrop-blur-md rounded-lg px-4 py-2"
          >
            <MapPin className="h-5 w-5 text-white" />
            <select className="bg-transparent text-white border-none outline-none">
              <option value="lagos">Lagos</option>
              <option value="abuja">Abuja</option>
              <option value="port-harcourt">Port Harcourt</option>
            </select>
          </motion.div>
        </div>
      </div>

      {/* Floating "Order Online" Button (shown after scroll) */}
      <AnimatePresence>
        {isOrderNowFloating && (
          <motion.div
            initial={{ y: 100, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            exit={{ y: 100, opacity: 0 }}
            className="fixed bottom-6 right-6 z-50"
          >
            <Link href="/store">
              <Button className="bg-accent hover:bg-accent/90 text-white shadow-2xl rounded-full px-6 py-6">
                <ShoppingCart className="mr-2" />
                Order Online
              </Button>
            </Link>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Info Section (visible at bottom) */}
      <div className="absolute bottom-0 left-0 right-0 bg-background/90 backdrop-blur-md border-t py-6 px-4 hidden lg:block">
        <div className="container mx-auto grid grid-cols-3 gap-8 text-center">
          <div>
            <Clock className="h-8 w-8 mx-auto mb-2 text-accent" />
            <h3 className="font-semibold">Mon-Sat: 8AM-8PM</h3>
            <p className="text-sm text-muted-foreground">Sundays Closed</p>
          </div>
          <div>
            <Truck className="h-8 w-8 mx-auto mb-2 text-accent" />
            <h3 className="font-semibold">Fast Delivery</h3>
            <p className="text-sm text-muted-foreground">30-60 minutes</p>
          </div>
          <div>
            <Star className="h-8 w-8 mx-auto mb-2 text-accent" />
            <h3 className="font-semibold">Special Offers</h3>
            <p className="text-sm text-muted-foreground">Save up to 20%</p>
          </div>
        </div>
      </div>
    </div>
  )
}

// Hero Variant 2: Story-Driven UI
const StoryHero = () => {
  const [expandedSection, setExpandedSection] = useState<string | null>(null)

  return (
    <div className="relative min-h-screen w-full">
      {/* Parallax Background */}
      <motion.div
        className="fixed inset-0 w-full h-full -z-10"
        style={{ backgroundImage: 'url(/small chops 1.jpg)', backgroundSize: 'cover', backgroundPosition: 'center' }}
        initial={{ scale: 1 }}
        whileInView={{ scale: 1.1 }}
        transition={{ duration: 2 }}
      />
      <div className="fixed inset-0 bg-gradient-to-r from-black/80 via-black/60 to-black/30 -z-10" />

      <div className="container mx-auto px-4 py-20 min-h-screen grid lg:grid-cols-2 gap-12">
        {/* Left: Story Content */}
        <div className="flex flex-col justify-center space-y-6 text-white">
          <motion.h1
            initial={{ x: -50, opacity: 0 }}
            whileInView={{ x: 0, opacity: 1 }}
            className="text-5xl md:text-6xl font-bold leading-tight"
          >
            Crafted with <span className="text-accent">Passion</span>,<br />
            Served with <span className="text-accent">Love</span>
          </motion.h1>

          <motion.p
            initial={{ x: -50, opacity: 0 }}
            whileInView={{ x: 0, opacity: 1 }}
            transition={{ delay: 0.2 }}
            className="text-lg text-gray-300 leading-relaxed"
          >
            For over 15 years, Lois Food and Spices has been bringing authentic Nigerian flavors to homes and businesses across the nation.
          </motion.p>

          <Accordion type="single" collapsible className="w-full">
            <AccordionItem value="story" className="border-white/20">
              <AccordionTrigger className="text-white text-xl hover:text-accent">Our Story</AccordionTrigger>
              <AccordionContent className="text-gray-300">
                Founded in 2010, Lois Food and Spices started as a small family business with a passion for quality and authenticity. Today, we serve thousands of customers nationwide, maintaining the same dedication to excellence that defined our beginnings.
              </AccordionContent>
            </AccordionItem>

            <AccordionItem value="team" className="border-white/20">
              <AccordionTrigger className="text-white text-xl hover:text-accent">Meet the Team</AccordionTrigger>
              <AccordionContent className="text-gray-300">
                Our team consists of experienced chefs, sourcing specialists, and customer service experts who work tirelessly to ensure every product meets our high standards.
              </AccordionContent>
            </AccordionItem>
          </Accordion>

          <motion.div
            initial={{ y: 30, opacity: 0 }}
            whileInView={{ y: 0, opacity: 1 }}
            transition={{ delay: 0.4 }}
          >
            <Link href="/store">
              <Button size="lg" className="bg-accent hover:bg-accent/90 text-white">
                Join us for dinner <ArrowRight className="ml-2" />
              </Button>
            </Link>
          </motion.div>
        </div>

        {/* Right: Sidebar */}
        <div className="hidden lg:flex flex-col justify-center space-y-6 bg-white/10 backdrop-blur-md rounded-2xl p-8">
          <h3 className="text-2xl font-bold text-white">Why Choose Us?</h3>
          <div className="space-y-4">
            <div className="flex items-start gap-3">
              <ShieldCheck className="h-6 w-6 text-accent flex-shrink-0 mt-1" />
              <div>
                <h4 className="text-white font-semibold">100% Natural Ingredients</h4>
                <p className="text-gray-300 text-sm">No preservatives, just pure quality</p>
              </div>
            </div>
            <div className="flex items-start gap-3">
              <Truck className="h-6 w-6 text-accent flex-shrink-0 mt-1" />
              <div>
                <h4 className="text-white font-semibold">Fast Nationwide Delivery</h4>
                <p className="text-gray-300 text-sm">From our kitchen to yours in hours</p>
              </div>
            </div>
            <div className="flex items-start gap-3">
              <Star className="h-6 w-6 text-accent flex-shrink-0 mt-1" />
              <div>
                <h4 className="text-white font-semibold">Award-Winning Taste</h4>
                <p className="text-gray-300 text-sm">Trusted by thousands of customers</p>
              </div>
            </div>
          </div>

          {/* Social Proof */}
          <div className="pt-6 border-t border-white/20">
            <div className="flex items-center gap-2 mb-2">
              <Instagram className="h-5 w-5 text-accent" />
              <span className="text-white font-semibold">Follow us on Instagram</span>
            </div>
            <div className="grid grid-cols-3 gap-2">
              {['/small chops 3.jpg', '/small chops 4.jpg', '/small chops 5.jpg'].map((img, i) => (
                <img key={i} src={img} alt="" className="rounded-lg aspect-square object-cover hover:scale-105 transition cursor-pointer" />
              ))}
            </div>
          </div>
        </div>
      </div>

      {/* Sticky Join Button (mobile) */}
      <div className="fixed bottom-6 left-0 right-0 px-4 lg:hidden z-50">
        <Link href="/store" className="block">
          <Button size="lg" className="w-full bg-accent hover:bg-accent/90 text-white shadow-2xl">
            Join us for dinner
          </Button>
        </Link>
      </div>
    </div>
  )
}

// Hero Variant 3: Menu Highlights UI
const MenuHighlightsHero = () => {
  const [activeTab, setActiveTab] = useState('all')
  const [searchQuery, setSearchQuery] = useState('')

  const menuItems = [
    { name: 'Jollof Rice', category: 'mains', price: 2500, image: '/small chops 1.jpg' },
    { name: 'Small Chops', category: 'starters', price: 1500, image: '/small chops 3.jpg' },
    { name: 'Shawarma', category: 'mains', price: 1800, image: '/shawama pics 1.jpg' },
    { name: 'Pepper Soup', category: 'starters', price: 1200, image: '/small chops 4.jpg' },
    { name: 'Fried Rice', category: 'mains', price: 2300, image: '/small chops 5.jpg' },
    { name: 'Chapman', category: 'drinks', price: 800, image: '/small chops 1.jpg' },
  ]

  const chefsPicks = menuItems.slice(0, 3)

  const filteredItems = menuItems.filter(item =>
    (activeTab === 'all' || item.category === activeTab) &&
    item.name.toLowerCase().includes(searchQuery.toLowerCase())
  )

  return (
    <div className="min-h-screen bg-gradient-to-b from-background to-secondary/20">
      {/* Header */}
      <div className="bg-accent/10 py-16 px-4">
        <div className="container mx-auto text-center">
          <motion.h1
            initial={{ y: -20, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            className="text-4xl md:text-6xl font-bold mb-4"
          >
            Our <span className="text-accent">Menu</span>
          </motion.h1>
          <p className="text-muted-foreground text-lg max-w-2xl mx-auto mb-8">
            Explore our delicious selection of authentic Nigerian cuisine
          </p>

          {/* Category Tabs + Search */}
          <div className="flex flex-col md:flex-row items-center justify-center gap-4 mb-8">
            <div className="flex gap-2 flex-wrap justify-center">
              {['all', 'starters', 'mains', 'desserts', 'drinks'].map((tab) => (
                <Button
                  key={tab}
                  onClick={() => setActiveTab(tab)}
                  variant={activeTab === tab ? 'default' : 'outline'}
                  className={activeTab === tab ? 'bg-accent hover:bg-accent/90' : ''}
                >
                  {tab.charAt(0).toUpperCase() + tab.slice(1)}
                </Button>
              ))}
            </div>
            <div className="relative w-full md:w-auto">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
              <Input
                type="search"
                placeholder="Search menu..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="pl-10 w-full md:w-64"
              />
            </div>
          </div>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        {/* Featured Dishes Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
          {filteredItems.map((item, index) => (
            <motion.div
              key={index}
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
              className="bg-card rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition group"
            >
              <div className="relative h-48 overflow-hidden">
                <img
                  src={item.image}
                  alt={item.name}
                  className="w-full h-full object-cover group-hover:scale-110 transition duration-500"
                />
              </div>
              <div className="p-5">
                <h3 className="font-bold text-lg mb-1">{item.name}</h3>
                <p className="text-muted-foreground text-sm mb-3 capitalize">{item.category}</p>
                <div className="flex items-center justify-between">
                  <span className="text-2xl font-bold text-accent">â‚¦{item.price.toLocaleString()}</span>
                  <Button size="sm" className="bg-accent hover:bg-accent/90">
                    <ShoppingCart className="h-4 w-4 mr-1" />
                    Add to cart
                  </Button>
                </div>
              </div>
            </motion.div>
          ))}
        </div>

        {/* Chef's Picks Carousel */}
        <div className="bg-secondary/50 rounded-2xl p-8 mb-12">
          <h2 className="text-3xl font-bold mb-6 text-center">Chef's Picks</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {chefsPicks.map((item, index) => (
              <div key={index} className="bg-card rounded-lg p-4 text-center">
                <img src={item.image} alt={item.name} className="w-full h-32 object-cover rounded-lg mb-3" />
                <h4 className="font-semibold">{item.name}</h4>
                <p className="text-accent font-bold">â‚¦{item.price.toLocaleString()}</p>
              </div>
            ))}
          </div>
        </div>

        {/* Sticky Actions */}
        <div className="fixed bottom-0 left-0 right-0 bg-background border-t p-4 flex gap-4 z-50 md:hidden">
          <Link href="/store" className="flex-1">
            <Button className="w-full bg-accent hover:bg-accent/90">View Full Menu</Button>
          </Link>
          <Link href="/cart" className="flex-1">
            <Button variant="outline" className="w-full">Order Now</Button>
          </Link>
        </div>
      </div>
    </div>
  )
}

// Hero Variant 4: Experience Focus UI
const ExperienceHero = () => {
  const [lightboxOpen, setLightboxOpen] = useState(false)
  const [lightboxImage, setLightboxImage] = useState('')

  const galleryImages = [
    '/small chops 1.jpg',
    '/small chops 3.jpg',
    '/small chops 4.jpg',
    '/small chops 5.jpg',
    '/shawama pics 1.jpg',
  ]

  const reviews = [
    { name: 'John Doe', rating: 5, comment: 'Amazing food and great service!' },
    { name: 'Jane Smith', rating: 5, comment: 'Best Nigerian restaurant in town' },
    { name: 'Mike Johnson', rating: 4, comment: 'Quality ingredients, authentic taste' },
  ]

  return (
    <div className="min-h-screen">
      <div className="container mx-auto px-4 py-12">
        <div className="grid lg:grid-cols-2 gap-12 items-start">
          {/* Left: Gallery */}
          <div>
            <h2 className="text-4xl font-bold mb-6">Experience Our <span className="text-accent">Ambiance</span></h2>
            <div className="grid grid-cols-2 gap-4 mb-8">
              {galleryImages.map((img, index) => (
                <motion.div
                  key={index}
                  whileHover={{ scale: 1.05 }}
                  className="cursor-pointer rounded-lg overflow-hidden shadow-lg"
                  onClick={() => {
                    setLightboxImage(img)
                    setLightboxOpen(true)
                  }}
                >
                  <img src={img} alt="" className="w-full h-48 object-cover" />
                </motion.div>
              ))}
            </div>

            {/* Countdown Timer */}
            <div className="bg-accent text-white rounded-xl p-6 text-center mb-6">
              <h3 className="text-xl font-bold mb-2">Special Offer Ends In:</h3>
              <div className="flex gap-4 justify-center text-3xl font-bold">
                <div><span>12</span><p className="text-sm font-normal">Hours</p></div>
                <div><span>34</span><p className="text-sm font-normal">Minutes</p></div>
                <div><span>56</span><p className="text-sm font-normal">Seconds</p></div>
              </div>
            </div>
          </div>

          {/* Right: Info Panel */}
          <div className="space-y-6">
            <Accordion type="single" collapsible defaultValue="events">
              <AccordionItem value="events">
                <AccordionTrigger className="text-2xl font-bold">Events & Catering</AccordionTrigger>
                <AccordionContent className="text-muted-foreground text-lg">
                  We cater for weddings, corporate events, and private parties. Our team can handle events of any size with professionalism and delicious food.
                  <div className="mt-4">
                    <Link href="/contact">
                      <Button className="bg-accent hover:bg-accent/90">Book Now</Button>
                    </Link>
                  </div>
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="private-dining">
                <AccordionTrigger className="text-2xl font-bold">Private Dining</AccordionTrigger>
                <AccordionContent className="text-muted-foreground text-lg">
                  Reserve our private dining space for intimate gatherings. Enjoy personalized service and a customized menu.
                </AccordionContent>
              </AccordionItem>
            </Accordion>

            {/* Reviews */}
            <div className="bg-secondary/50 rounded-xl p-6">
              <h3 className="text-2xl font-bold mb-4">Customer Reviews</h3>
              <div className="space-y-4">
                {reviews.map((review, index) => (
                  <motion.div
                    key={index}
                    initial={{ x: -20, opacity: 0 }}
                    whileInView={{ x: 0, opacity: 1 }}
                    transition={{ delay: index * 0.1 }}
                    className="bg-card p-4 rounded-lg"
                  >
                    <div className="flex items-center gap-2 mb-2">
                      <div className="font-semibold">{review.name}</div>
                      <div className="flex">
                        {Array.from({ length: review.rating }).map((_, i) => (
                          <Star key={i} className="h-4 w-4 fill-accent text-accent" />
                        ))}
                      </div>
                    </div>
                    <p className="text-muted-foreground text-sm">{review.comment}</p>
                  </motion.div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Sticky Book Button */}
      <div className="fixed bottom-6 right-6 z-50">
        <Link href="/contact">
          <Button size="lg" className="bg-accent hover:bg-accent/90 text-white shadow-2xl rounded-full px-8">
            <Calendar className="mr-2" />
            Book a Table
          </Button>
        </Link>
      </div>

      {/* Lightbox */}
      {lightboxOpen && (
        <div
          className="fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4"
          onClick={() => setLightboxOpen(false)}
        >
          <img src={lightboxImage} alt="" className="max-w-full max-h-full object-contain" />
        </div>
      )}
    </div>
  )
}

// Hero Variant 5: Local + Fresh UI
const LocalFreshHero = () => {
  const [email, setEmail] = useState('')

  const locations = [
    { name: 'Lagos Branch', lat: 6.5244, lng: 3.3792 },
    { name: 'Abuja Branch', lat: 9.0765, lng: 7.3986 },
  ]

  const carouselImages = [
    '/small chops 1.jpg',
    '/small chops 3.jpg',
    '/shawama pics 1.jpg',
  ]

  return (
    <div className="min-h-screen">
      <div className="grid lg:grid-cols-2 gap-0">
        {/* Left: Map */}
        <div className="h-[50vh] lg:h-screen bg-secondary/20 flex items-center justify-center relative">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3964.029476250563!2d3.3792!3d6.5244!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNsKwMzEnMjcuOCJOIDPCsDIyJzQ1LjEiRQ!5e0!3m2!1sen!2sng!4v1234567890"
            width="100%"
            height="100%"
            style={{ border: 0 }}
            allowFullScreen
            loading="lazy"
          />
          <div className="absolute bottom-4 left-4 right-4 bg-card p-4 rounded-lg shadow-lg">
            <h3 className="font-bold mb-2">Find Us</h3>
            <div className="flex gap-2 flex-wrap">
              {locations.map((loc, index) => (
                <Button key={index} size="sm" variant="outline">
                  <MapPin className="h-4 w-4 mr-1" />
                  {loc.name}
                </Button>
              ))}
            </div>
          </div>
        </div>

        {/* Right: Info */}
        <div className="p-8 lg:p-12 flex flex-col justify-center space-y-8">
          <motion.div
            initial={{ x: 20, opacity: 0 }}
            whileInView={{ x: 0, opacity: 1 }}
          >
            <h1 className="text-4xl md:text-6xl font-bold mb-4">
              Farm-to-Table <span className="text-accent">Freshness</span>
            </h1>
            <p className="text-muted-foreground text-lg leading-relaxed">
              We partner with local farmers to bring you the freshest ingredients, supporting our community while delivering exceptional quality.
            </p>
          </motion.div>

          {/* Carousel */}
          <div className="bg-secondary/30 rounded-xl p-6">
            <h3 className="text-2xl font-bold mb-4">From Our Farm Partners</h3>
            <div className="grid grid-cols-3 gap-4">
              {carouselImages.map((img, index) => (
                <motion.img
                  key={index}
                  src={img}
                  alt=""
                  className="rounded-lg aspect-square object-cover"
                  whileHover={{ scale: 1.05 }}
                />
              ))}
            </div>
          </div>

          {/* Newsletter */}
          <div className="bg-accent/10 rounded-xl p-6">
            <h3 className="text-2xl font-bold mb-2">Stay Updated</h3>
            <p className="text-muted-foreground mb-4">Subscribe to get special offers and updates</p>
            <div className="flex gap-2">
              <Input
                type="email"
                placeholder="Your email address"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="flex-1"
              />
              <Button className="bg-accent hover:bg-accent/90">Subscribe</Button>
            </div>
          </div>

          {/* Actions */}
          <div className="flex gap-4">
            <Link href="/store" className="flex-1">
              <Button className="w-full bg-accent hover:bg-accent/90">
                <ShoppingCart className="mr-2" />
                See Menu
              </Button>
            </Link>
            <Link href="/contact" className="flex-1">
              <Button variant="outline" className="w-full">
                <Phone className="mr-2" />
                Order
              </Button>
            </Link>
          </div>

          {/* Social Feed */}
          <div className="hidden lg:block">
            <h3 className="font-bold mb-3">Follow @loisfoodspices</h3>
            <div className="grid grid-cols-3 gap-2">
              {['/small chops 4.jpg', '/small chops 5.jpg', '/shawama pics 1.jpg'].map((img, i) => (
                <a key={i} href="#" className="block">
                  <img src={img} alt="" className="rounded-lg aspect-square object-cover hover:opacity-80 transition" />
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      {/* Bottom Nav (Mobile) */}
      <div className="fixed bottom-0 left-0 right-0 bg-card border-t p-4 flex gap-2 lg:hidden z-50">
        <Link href="/store" className="flex-1">
          <Button variant="outline" className="w-full">Menu</Button>
        </Link>
        <Link href="/contact" className="flex-1">
          <Button variant="outline" className="w-full">Location</Button>
        </Link>
        <Link href="/cart" className="flex-1">
          <Button className="w-full bg-accent hover:bg-accent/90">Order</Button>
        </Link>
      </div>
    </div>
  )
}

// Main export component with variant selector
const HeroVariants: React.FC<HeroVariantProps> = ({ variant = 'carousel' }) => {
  const variants = {
    carousel: CarouselHero,
    story: StoryHero,
    menu: MenuHighlightsHero,
    experience: ExperienceHero,
    local: LocalFreshHero,
  }

  const HeroComponent = variants[variant]
  return <HeroComponent />
}

export default HeroVariants
export { CarouselHero, StoryHero, MenuHighlightsHero, ExperienceHero, LocalFreshHero }



================================================================================
LOCATION: components\myComponents\subs\hero.tsx
================================================================================

"use client"
import React, { useState, useEffect } from 'react'
import Link from 'next/link'
import { Badge } from "@/components/ui/badge"
import { cn } from "@/lib/utils"
import { Button } from '@/components/ui/button'
import {
  ArrowRight, Clock, Truck, Star, ShieldCheck, CreditCard, ShoppingCart,
  Store, Banknote, Wallet, MapPin, User, Menu, ChevronLeft, ChevronRight,
  Instagram, Calendar, Phone, Search
} from 'lucide-react'
import { SearchInput } from './searchcomponent'
import { RiseAndFadeText } from './textctrl'
import { useAppContext } from '@/hooks/useAppContext'
import { motion, AnimatePresence } from "framer-motion"
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion"
import { Input } from '@/components/ui/input'
import { ProductCarousel } from './ProductCarousel'

type HeroVariant = 'modern-split' | 'immersive' | 'carousel' | 'story' | 'menu' | 'experience' | 'local';

interface HeroProps {
  variant?: HeroVariant;
}

// --- Shared Components ---

const BackgroundEffects = () => {
  return (
    <div className="absolute inset-0 overflow-hidden pointer-events-none z-0">
      <div className="absolute bottom-20 left-0 w-full opacity-[0.04]">
        <IconMarquee />
      </div>
      {/* Ribbons */}
      <motion.div
        animate={{ y: [0, 20, 0], rotate: [0, 5, 0], scale: [1, 1.1, 1] }}
        transition={{ duration: 10, repeat: Infinity, ease: "easeInOut" }}
        className="absolute top-[10%] left-[5%] w-[150px] h-[150px] md:w-[300px] md:h-[300px] bg-accent/10 md:bg-accent/20 rounded-full blur-[60px] md:blur-[80px]"
      />
      <motion.div
        animate={{ x: [0, -30, 0], y: [0, 40, 0], rotate: [0, -10, 0] }}
        transition={{ duration: 15, repeat: Infinity, ease: "easeInOut", delay: 2 }}
        className="absolute bottom-[20%] right-[10%] w-[200px] h-[200px] md:w-[400px] md:h-[400px] bg-primary/10 md:bg-primary/20 rounded-full blur-[80px] md:blur-[100px]"
      />
      {/* Wave */}
      <div className="absolute top-1/2 left-0 w-[200%] h-32 opacity-[0.04] md:opacity-[0.06] text-accent flex overflow-hidden">
        <motion.div
          className="flex w-full"
          animate={{ x: ["0%", "-50%"] }}
          transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
        >
          <WaveSVG />
          <WaveSVG />
        </motion.div>
      </div>
    </div>
  )
}

const WaveSVG = () => (
  <svg className="w-1/2 h-full flex-shrink-0" viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
    <path fill="currentColor" fillOpacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z" />
  </svg>
)

const IconMarquee = () => {
  const icons = [
    { Icon: ShoppingCart, key: 'cart' }, { Icon: CreditCard, key: 'card' },
    { Icon: Store, key: 'store' }, { Icon: Banknote, key: 'banknote' }, { Icon: Wallet, key: 'wallet' },
  ];
  const marqueeIcons = [...icons, ...icons, ...icons, ...icons, ...icons, ...icons];
  return (
    <motion.div
      className="flex items-center space-x-24 whitespace-nowrap"
      animate={{ x: [0, -1000] }}
      transition={{ x: { repeat: Infinity, repeatType: "loop", duration: 40, ease: "linear" } }}
    >
      {marqueeIcons.map((item, index) => (
        <div key={index} className="flex items-center text-foreground">
          <item.Icon className="h-12 w-12 opacity-80" />
        </div>
      ))}
    </motion.div>
  );
};

// --- Main Component ---

const Hero = ({ variant = 'modern-split' }: HeroProps) => {
  const { user } = useAppContext();

  // Shared Logic
  const DynamicText = () => (
    <RiseAndFadeText
      texts={[
        "From Succo Stores", "Card & Bank Transfer Payments", "Login With Google or Facebook",
        "Naturally Processed Spices", "Quality You Can Trust", "Trusted by Homes and Businesses",
        "Fast & Reliable Delivery", "Carefully Packed for Freshness", "Customer Satisfaction Guaranteed",
        "Premium Products, Fair Prices", "Authentic Nigerian Spice Blends", "Locally Sourced, Globally Delivered",
        "Traditional Taste, Modern Quality", "Export-Standard Food Products", "Crafted for Every Kitchen",
        "Pure. Natural. Flavorful.", "Freshness in Every Pack", "Spices That Elevate Your Meals",
        "Taste You Can Trust", "Quality Without Compromise",
      ]}
      className="text-xl md:text-2xl mt-2 font-semibold text-muted-foreground overflow-hidden"
    />
  );

  const buttonBounce = {
    y: [0, -4, 0],
    transition: { duration: 2, repeat: Infinity, ease: "easeInOut" }
  };

  const CTAButtons = ({ className = "" }: { className?: string }) => (
    <div className={`flex flex-col gap-3 sm:flex-row z-10 ${className}`}>
      <Link href="/" className='w-full max-w-52'>
        <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }} animate={buttonBounce}>
          <Button className={`h-12 gap-1.5 px-8 transition-all duration-200 bg-accent hover:bg-accent/90 w-full text-white font-bold text-lg shadow-xl shadow-accent/20`} size="lg">
            Shop Now <ArrowRight className="h-5 w-5 animate-pulse" />
          </Button>
        </motion.div>
      </Link>
      {user?.id === "nil" && (
        <Link href="/account" className="w-full max-w-52">
          <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }} animate={buttonBounce} transition={{ delay: 0.2 }}>
            <Button className="h-12 px-8 w-full border-2 border-accent text-accent hover:bg-accent/10 transition-colors duration-200 font-semibold" size="lg" variant="outline">
              Login
            </Button>
          </motion.div>
        </Link>
      )}
    </div>
  );

  const TrustBadges = ({ className = "text-muted-foreground" }: { className?: string }) => (
    <div className={`flex flex-wrap gap-5 text-sm ${className} mt-4`}>
      <div className="flex items-center gap-1.5">
        <Truck className="h-5 w-5 text-primary" />
        <span>Free shipping over â‚¦200,000</span>
      </div>
      <div className="flex items-center gap-1.5">
        <Clock className="h-5 w-5 text-primary" />
        <span>24/7 Customer Support</span>
      </div>
    </div>
  );

  // --- VARIANTS ---

  if (variant === 'modern-split') {
    return (
      <div className="relative overflow-hidden py-8 md:py-20 bg-background">
        <BackgroundEffects />
        <div className="relative z-10 container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mb-12">
          <div className="grid items-center gap-12 lg:grid-cols-2">
            <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ duration: 0.5 }} className="flex flex-col justify-center space-y-8">
              <div className="flex z-50 md:hidden w-full justify-center items-center"><SearchInput /></div>
              <div className="space-y-4">
                <div className="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold bg-accent/10 text-accent hover:bg-accent/20">
                  <Star className="mr-1 h-3 w-3 fill-accent" /> #1 Choice
                </div>
                <h1 className="font-display text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl lg:text-7xl">
                  <span className="block text-foreground">World of flavors! ðŸ´</span>
                  <span className="block text-accent">Succo</span>
                </h1>
                 <DynamicText />
                 <p className="max-w-[600px] text-lg text-muted-foreground md:text-xl leading-relaxed">
                  Discover premium products at competitive prices, with fast shipping and exceptional customer service.
                </p>
              </div>
              <ProductCarousel />
              <CTAButtons />
              <TrustBadges />
            </motion.div>
            <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5, delay: 0.2 }} className="relative hidden lg:block h-[500px] w-full">
              <div className="absolute inset-0 flex items-center justify-center">
                <div className="relative w-[400px] h-[400px] bg-accent/10 rounded-full animate-blob mix-blend-multiply filter blur-xl opacity-70"></div>
                <div className="relative w-[400px] h-[400px] bg-primary/10 rounded-full animate-blob animation-delay-2000 mix-blend-multiply filter blur-xl opacity-70 -ml-20"></div>
                <img src="/mission-burrito-fast-food-shawarma-kati-roll-breakfast-6dd86711999109a88eae948201cd24bf.png" alt="Delicious Food" className="relative z-10 w-[450px] h-auto object-contain drop-shadow-2xl hover:scale-105 transition-transform duration-500" />
              </div>
            </motion.div>
          </div>
        </div>
      </div>
    );
  }

  if (variant === 'immersive') {
    return (
      <div className="relative w-full h-[80vh] min-h-[600px] flex items-center justify-center overflow-hidden">
        <div className="absolute inset-0 w-full h-full">
          <img src="/small chops 1.jpg" alt="Background" className="w-full h-full object-cover scale-105" />
          <div className="absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent" />
        </div>
        <div className="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 h-full flex flex-col justify-center">
          <div className="max-w-2xl">
            <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.6 }} className="backdrop-blur-md bg-black/30 p-8 md:p-10 rounded-2xl border border-white/10 shadow-2xl">
              <div className="flex z-50 md:hidden w-full justify-center items-center mb-6"><SearchInput /></div>
              <h1 className="text-4xl md:text-6xl font-bold text-white leading-tight mb-4 drop-shadow-md">
                Indulge in a world of flavors! ðŸ´ <br /><span className="text-accent">Succo</span>
              </h1>
              <div className="text-gray-200 mb-8"><DynamicText /></div>
              <CTAButtons />
              <TrustBadges className="text-gray-300" />
            </motion.div>
          </div>
        </div>
      </div>
    );
  }

  if (variant === 'carousel') {
    const slides = ['/small chops 1.jpg', '/small chops 3.jpg', '/small chops 4.jpg'];
    const [currentSlide, setCurrentSlide] = useState(0);
    const [isFloating, setIsFloating] = useState(false);
    
    useEffect(() => {
        const t = setInterval(() => setCurrentSlide(c => (c + 1) % slides.length), 5000);
        return () => clearInterval(t);
    }, []);
    
    useEffect(() => {
        const handleScroll = () => setIsFloating(window.scrollY > 400);
        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    return (
      <div className="relative h-screen w-full overflow-hidden">
        {/* Nav & Notification can be part of layout, but here simplified as part of hero */}
        <div className="absolute top-0 left-0 right-0 z-40 bg-accent text-white py-1 text-center text-sm font-bold">Free delivery on orders over â‚¦5,000</div>
        
        <div className="absolute inset-0 bg-black/60 z-10" />
        <AnimatePresence mode='wait'>
            <motion.img key={currentSlide} src={slides[currentSlide]} initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}} transition={{duration:1}} className="absolute inset-0 w-full h-full object-cover" />
        </AnimatePresence>

        <div className="relative z-20 container mx-auto h-full flex flex-col justify-center items-center text-center px-4 pt-20">
           <h1 className="text-5xl md:text-7xl font-bold text-white mb-6">Order Fresh <span className="text-accent">Online</span></h1>
           <div className="text-gray-200 mb-8 text-xl"><DynamicText /></div>
           <CTAButtons />
           <div className="mt-8 flex gap-4 bg-white/10 backdrop-blur rounded-lg p-2 text-white">
                <MapPin /> <span className='font-bold'>Select Location:</span> Lagos (Main)
           </div>
           
           <div className="absolute bottom-0 w-full bg-background/90 backdrop-blur-md py-6 border-t hidden md:block">
              <div className="container mx-auto grid grid-cols-3 gap-4">
                  <div className='flex flex-col items-center'><Clock className="text-accent h-6 w-6"/><span className="font-bold">Mon-Sat: 8AM-8PM</span></div>
                  <div className='flex flex-col items-center'><Truck className="text-accent h-6 w-6"/><span className="font-bold">Fast Delivery</span></div>
                  <div className='flex flex-col items-center'><Star className="text-accent h-6 w-6"/><span className="font-bold">5-Star Quality</span></div>
              </div>
           </div>
        </div>
        
        {isFloating && (
           <motion.div initial={{y:100}} animate={{y:0}} className="fixed bottom-6 right-6 z-50">
              <Button size="lg" className="rounded-full h-16 w-16 shadow-2xl bg-accent text-white"><ShoppingCart /></Button>
           </motion.div>
        )}
      </div>
    )
  }

  if (variant === 'story') {
    return (
        <div className="relative min-h-screen w-full overflow-hidden">
            <div className="fixed inset-0 -z-10 bg-[url('/small%20chops%201.jpg')] bg-cover bg-center bg-fixed opacity-20" />
            <div className="container mx-auto px-4 py-20 min-h-screen grid lg:grid-cols-2 gap-12 items-center">
                <div className="space-y-8">
                    <h1 className="text-6xl font-bold">Crafted with <span className="text-accent">Passion</span></h1>
                    <div className="text-muted-foreground text-xl"><DynamicText /></div>
                    <Accordion type="single" collapsible className="w-full bg-background/80 backdrop-blur-sm rounded-lg p-4">
                        <AccordionItem value="story">
                            <AccordionTrigger className='text-lg font-bold'>Our Story</AccordionTrigger>
                            <AccordionContent>Founded in 2010... bringing authentic flavors to your table.</AccordionContent>
                        </AccordionItem>
                        <AccordionItem value="team">
                            <AccordionTrigger className='text-lg font-bold'>Meet the Team</AccordionTrigger>
                            <AccordionContent>Expert chefs and nutritionists dedicated to quality.</AccordionContent>
                        </AccordionItem>
                    </Accordion>
                    <CTAButtons />
                </div>
                <div className="bg-muted p-8 rounded-2xl space-y-6">
                    <h3 className="text-2xl font-bold">Why Choose Us?</h3>
                    <TrustBadges className="" />
                    <div className="flex gap-2 mt-4">
                        <Instagram className="text-accent" /> Follow our journey
                    </div>
                </div>
            </div>
            <div className="fixed bottom-6 right-6 z-40">
                <Button className="bg-accent text-white shadow-xl rounded-full px-6 py-4 font-bold">Join us for dinner</Button>
            </div>
        </div>
    )
  }

  if (variant === 'menu') {
      return (
          <div className="min-h-screen bg-secondary/10 flex flex-col items-center py-20 px-4">
               <div className="text-center mb-12">
                   <h1 className="text-5xl font-bold mb-4">Our <span className="text-accent">Menu</span> Highlights</h1>
                   <DynamicText />
               </div>
               
               <div className="flex gap-4 mb-8 overflow-x-auto w-full justify-center">
                   {['Starters', 'Mains', 'Desserts', 'Drinks'].map(c => (
                       <Button key={c} variant="outline" className="rounded-full px-6">{c}</Button>
                   ))}
               </div>
               
               <div className="grid md:grid-cols-3 gap-6 max-w-6xl w-full">
                   {[1,2,3].map(i => (
                       <div key={i} className="bg-card rounded-xl overflow-hidden shadow-lg group">
                           <div className="h-48 bg-muted relative overflow-hidden">
                               <img src={`/small chops ${i}.jpg`} className="object-cover w-full h-full group-hover:scale-110 transition duration-500" />
                           </div>
                           <div className="p-6">
                               <h3 className="text-xl font-bold">Special Delicacy {i}</h3>
                               <p className="text-muted-foreground text-sm mb-4">Delicious and spicy...</p>
                               <div className="flex justify-between items-center">
                                   <span className="text-accent font-bold text-lg">â‚¦2,500</span>
                                   <Button size="sm">Add to Cart</Button>
                               </div>
                           </div>
                       </div>
                   ))}
               </div>
               
               <div className="mt-12 w-full max-w-4xl bg-background rounded-xl p-8 shadow-sm flex flex-col md:flex-row items-center justify-between">
                   <div>
                       <h3 className="text-2xl font-bold">Chef's Picks</h3>
                       <p className="text-muted-foreground">Hand-picked favorites for you.</p>
                   </div>
                   <div className="mt-4 md:mt-0"><CTAButtons /></div>
               </div>
          </div>
      )
  }

  if (variant === 'experience') {
      return (
          <div className="min-h-screen container mx-auto py-20 px-4 grid lg:grid-cols-2 gap-12">
              <div className="space-y-6">
                  <h1 className="text-5xl font-bold">Experience the <span className="text-accent">Ambiance</span></h1>
                  <DynamicText />
                  <div className="grid grid-cols-2 gap-4">
                       <img src="/small chops 1.jpg" className="rounded-lg shadow hover:scale-105 transition cursor-pointer" />
                       <img src="/small chops 3.jpg" className="rounded-lg shadow hover:scale-105 transition cursor-pointer" />
                       <img src="/shawama pics 1.jpg" className="rounded-lg shadow hover:scale-105 transition cursor-pointer col-span-2 h-40 object-cover" />
                  </div>
              </div>
              <div className="flex flex-col justify-center space-y-8">
                  <div className="bg-accent/10 p-6 rounded-lg text-center">
                      <h3 className="text-xl font-bold">Special Offer Ends In:</h3>
                      <div className="text-4xl font-mono font-bold text-accent mt-2">12:34:56</div>
                  </div>
                  <Accordion type="single" collapsible className="w-full">
                        <AccordionItem value="event"><AccordionTrigger>Events</AccordionTrigger><AccordionContent>Book your events...</AccordionContent></AccordionItem>
                        <AccordionItem value="private"><AccordionTrigger>Private Dining</AccordionTrigger><AccordionContent>Exclusive dining...</AccordionContent></AccordionItem>
                  </Accordion>
                  <CTAButtons />
                  <TrustBadges />
              </div>
          </div>
      )
  }

  if (variant === 'local') {
      return (
          <div className="min-h-screen flex flex-col lg:flex-row">
              <div className="lg:w-1/2 bg-muted relative min-h-[400px]">
                 <div className="absolute inset-0 bg-secondary/20 flex items-center justify-center">
                     <span className="text-muted-foreground font-bold">[Map Embed Placeholder]</span>
                 </div>
                 <div className="absolute bottom-4 left-4 bg-card p-4 rounded shadow-lg max-w-xs">
                     <h4 className="font-bold">Visit Us</h4>
                     <p className="text-sm">123 Food Street, Lagos</p>
                 </div>
              </div>
              <div className="lg:w-1/2 p-12 flex flex-col justify-center space-y-8">
                  <h1 className="text-5xl font-bold">Local & <span className="text-accent">Fresh</span></h1>
                  <DynamicText />
                  <p className="text-lg text-muted-foreground">We partner with local farmers...</p>
                  <div className="grid grid-cols-3 gap-2">
                       <img src="/small chops 1.jpg" className="rounded aspect-square object-cover" />
                       <img src="/small chops 3.jpg" className="rounded aspect-square object-cover" />
                       <img src="/shawama pics 1.jpg" className="rounded aspect-square object-cover" />
                  </div>
                  <CTAButtons />
                  <div className="flex gap-2">
                      <Input placeholder="Enter email for newsletter" />
                      <Button>Subscribe</Button>
                  </div>
              </div>
          </div>
      )
  }

  return null;
}

export default Hero



================================================================================
LOCATION: components\myComponents\subs\index.ts
================================================================================

"use client"
import  { lazy } from "react"
import dynamic from "next/dynamic"

export const Advert = dynamic(()=>import('./advert'), { ssr: false,}) 
export const Dashboard = dynamic(()=>import("./dashboard"), { ssr: false,}) 
export const Filters = dynamic(()=>import("./filters"), { ssr: false, }) 
export const Gallery = dynamic(()=>import("./gallery"), { ssr: false, }) 
export const Item = dynamic(()=>import("./item"), { ssr: false,}) 
export const Login = dynamic(()=>import("./login"), { ssr: false, }) 
export const Search = dynamic(()=>import("./search"), { ssr: false, }) 
export const Signup = dynamic(()=>import("./signup"), { ssr: false, }) 
export const Stocks = dynamic(()=>import("./stocks"), { ssr: false, }) 
// export const Footer = dynamic(()=>import("./footer"), { ssr: false, }) 
export const CartItems = dynamic(()=>import("./cartitem"), { ssr: false, }) 


================================================================================
LOCATION: components\myComponents\subs\item.tsx
================================================================================

import React from 'react'

const Item = () => {
  return (
    <div>
      
    </div>
  )
}

export default Item



================================================================================
LOCATION: components\myComponents\subs\login.tsx
================================================================================

"use client"
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { Button } from "@/components/ui/button"
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import axios from 'axios'
import { useAppContext } from '@/hooks/useAppContext'
import { FcGoogle } from 'react-icons/fc'
import { FaFacebook } from "react-icons/fa";
import { facebookSignIn, googleSignIn } from './googlesignin'
import Signup from './signup'
import { Loader2, Mail, Lock, CheckCircle, AlertCircle } from 'lucide-react';
import { Alert, AlertDescription } from "@/components/ui/alert"
import { signIn } from "next-auth/react";

const Login = () => {
  const { setUser } = useAppContext();
  const [formData, setFormData] = useState({
    email: '',
    password: '',
  });
  
  const [verificationStep, setVerificationStep] = useState<'login' | 'verify' | 'setPassword'>('login');
  const [verificationCode, setVerificationCode] = useState('');
  const [newPassword, setNewPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [errorMessage, setErrorMessage] = useState('');
  const [successMessage, setSuccessMessage] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    setErrorMessage('');
    setSuccessMessage('');
    setIsLoading(true);

    try {
      // First check if it's an OAuth account that needs a password set
      try {
        const checkRes = await axios.post('/api/auth/login', formData);
      } catch (error: any) {
        if (error.response?.status === 403 && error.response?.data?.requiresEmailVerification) {
          setErrorMessage(error.response.data.message);
          setVerificationStep('verify');
          setIsLoading(false);
          return;
        }
      }

      // If not caught by verification flow, proceed with actual NextAuth sign in
      const result = await signIn('credentials', {
        email: formData.email,
        password: formData.password,
        redirect: false,
      });

      if (result?.error) {
        setErrorMessage('Login failed. Please check your credentials.');
      } else {
        setSuccessMessage('Login successful!');
        // Small delay to show success message before reload
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      }
    } catch (error) {
      console.error('Login error:', error);
      setErrorMessage('An unexpected error occurred.');
    } finally {
      setIsLoading(false);
    }
  };

  const handleSendVerificationCode = async () => {
    setErrorMessage('');
    setSuccessMessage('');
    setIsLoading(true);

    try {
      await axios.post('/api/auth/send-verification-code', {
        email: formData.email,
      });
      setSuccessMessage('Verification code sent to your email!');
      setVerificationStep('setPassword');
    } catch (error: any) {
      setErrorMessage(error.response?.data?.error || 'Failed to send verification code');
    } finally {
      setIsLoading(false);
    }
  };

  const handleVerifyAndSetPassword = async (e: FormEvent) => {
    e.preventDefault();
    setErrorMessage('');
    setSuccessMessage('');

    if (newPassword !== confirmPassword) {
      setErrorMessage('Passwords do not match');
      return;
    }

    if (newPassword.length < 6) {
      setErrorMessage('Password must be at least 6 characters long');
      return;
    }

    setIsLoading(true);

    try {
      const res = await axios.post('/api/auth/verify-code-set-password', {
        email: formData.email,
        code: verificationCode,
        password: newPassword,
      });
      setSuccessMessage(res.data.message);
      
      setTimeout(() => {
        setVerificationStep('login');
        resetForm();
      }, 2000);
    } catch (error: any) {
      setErrorMessage(error.response?.data?.error || 'Failed to verify code and set password');
    } finally {
      setIsLoading(false);
    }
  };

  const resetForm = () => {
    setFormData({ email: '', password: '' });
    setVerificationCode('');
    setNewPassword('');
    setConfirmPassword('');
    setErrorMessage('');
    setSuccessMessage('');
  };

  return (
    <div className='inline w-full'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline" className='w-full border-2 border-green-500 hover:bg-green-500'>Login</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 max-w-5xl mx-auto'>

          <DrawerHeader>
            <DrawerTitle className='w-full text-center'>
              {verificationStep === 'login' && 'Login to '}
              {verificationStep === 'verify' && 'Verify Your Email'}
              {verificationStep === 'setPassword' && 'Set Your Password'}
              <span className='text-accent'> Lois Food and Spices</span>
            </DrawerTitle>
            <DrawerDescription>
              {verificationStep === 'verify' && 'We need to verify your email address'}
              {verificationStep === 'setPassword' && 'Check your email for the verification code'}
            </DrawerDescription>
          </DrawerHeader>

          {errorMessage && (
            <Alert variant="destructive" className="max-w-xl mb-4">
              <AlertCircle className="h-4 w-4" />
              <AlertDescription>{errorMessage}</AlertDescription>
            </Alert>
          )}
          {successMessage && (
            <Alert className="max-w-xl mb-4 border-green-500 bg-green-50 text-green-800">
              <CheckCircle className="h-4 w-4" />
              <AlertDescription>{successMessage}</AlertDescription>
            </Alert>
          )}

          {verificationStep === 'login' && (
            <form onSubmit={handleSubmit} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl w-full"> 
              <div className="space-y-2">
                <Label htmlFor="email">Email or Contact</Label>
                <div className="relative">
                  <Mail className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
                  <Input
                    id="email"
                    type="text"
                    placeholder="Email or Contact"
                    value={formData.email}
                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                    className="pl-10"
                    required
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="password">Password</Label>
                <div className="relative">
                  <Lock className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
                  <Input
                    id="password"
                    type="password"
                    placeholder="Password"
                    value={formData.password}
                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                    className="pl-10"
                    required
                  />
                </div>
              </div>
              
              <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                <DrawerClose className='flex-1' asChild>
                  <Button className='flex-1' variant="outline">Cancel</Button>
                </DrawerClose>
                <Button type="submit" className="flex-1 before:ani-shadow w-full" disabled={isLoading}>
                  {isLoading ? (
                    <>
                      <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                      Logging in...
                    </>
                  ) : (
                    'Login â†’'
                  )}
                </Button>
              </DrawerFooter>
            </form>
          )}

          {verificationStep === 'verify' && (
            <div className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl w-full">
              <div className="text-center space-y-3">
                <Mail className="h-16 w-16 mx-auto text-accent" />
                <p className="text-sm text-muted-foreground">
                  Your account was created using Google or Facebook. To login with your email and password, you need to verify your email first.
                </p>
                <p className="text-sm font-semibold">Email: {formData.email}</p>
              </div>

              <DrawerFooter className="flex flex-row w-full gap-2 mt-4">
                <Button onClick={() => { setVerificationStep('login'); resetForm(); }} className='flex-1' variant="outline">Cancel</Button>
                <Button onClick={handleSendVerificationCode} className="flex-1 bg-accent hover:bg-accent/90" disabled={isLoading}>
                  {isLoading ? (
                    <>
                      <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                      Sending...
                    </>
                  ) : (
                    'Send Verification Code'
                  )}
                </Button>
              </DrawerFooter>
            </div>
          )}

          {verificationStep === 'setPassword' && (
            <form onSubmit={handleVerifyAndSetPassword} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl w-full">
              <div className="space-y-2">
                <Label htmlFor="verificationCode">Verification Code</Label>
                <Input
                  id="verificationCode"
                  type="text"
                  placeholder="Enter 6-digit code"
                  value={verificationCode}
                  onChange={(e) => setVerificationCode(e.target.value)}
                  maxLength={6}
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="newPassword">New Password</Label>
                <div className="relative">
                  <Lock className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
                  <Input
                    id="newPassword"
                    type="password"
                    placeholder="Enter new password"
                    value={newPassword}
                    onChange={(e) => setNewPassword(e.target.value)}
                    className="pl-10"
                    required
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="confirmPassword">Confirm Password</Label>
                <div className="relative">
                  <Lock className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
                  <Input
                    id="confirmPassword"
                    type="password"
                    placeholder="Confirm your password"
                    value={confirmPassword}
                    onChange={(e) => setConfirmPassword(e.target.value)}
                    className="pl-10"
                    required
                  />
                </div>
              </div>

              <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                <Button onClick={() => { setVerificationStep('login'); resetForm(); }} className='flex-1' variant="outline" type="button">Cancel</Button>
                <Button type="submit" className="flex-1 bg-accent hover:bg-accent/90" disabled={isLoading}>
                  {isLoading ? (
                    <>
                      <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                      Setting Password...
                    </>
                  ) : (
                    'Set Password'
                  )}
                </Button>
              </DrawerFooter>
            </form>
          )}

          {verificationStep === 'login' && (
            <div className="w-full my-2 flex flex-col gap-2">
              <form action={googleSignIn}>
                <Button className="border-2 border-primary relative w-full max-w-[300px] mx-auto flex items-center justify-center text-black rounded-md h-10 font-medium shadow-input hover:bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]" type="submit" variant='outline'>
                  <FcGoogle className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
                  <span className="text-neutral-700 dark:text-neutral-300 text-sm">Google</span>
                </Button>
              </form>
              <form action={facebookSignIn}>
                <Button className="border-2 border-primary relative w-full max-w-[300px] mx-auto flex items-center justify-center text-black rounded-md h-10 font-medium shadow-input hover:bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]" type="submit" variant='outline'>
                  <FaFacebook className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
                  <span className="text-neutral-700 dark:text-neutral-300 text-sm">Facebook</span>
                </Button>
              </form>
              <div className="border-2 border-primary max-w-[300px] mx-auto w-full my-2 rounded-md font-medium shadow-input flex justify-center items-center bg-green-500">
                <Signup />
              </div>
            </div>
          )}
          
        </DrawerContent>
      </Drawer>
    </div>
  )
}

export default Login



================================================================================
LOCATION: components\myComponents\subs\post.tsx
================================================================================

"use client"
import React, { useEffect, useState } from 'react'
import { BiLike, BiSolidLike, BiComment, BiDownload } from 'react-icons/bi'
import { Button } from '@/components/ui/button'
import Comments from '@/components/comments'
import axios from 'axios'
import { useAppContext } from '@/hooks/useAppContext'
import Modal from '@/components/modal'
import TextArea from '@/components/textArea'

type post = {
  url: string,
  ownerurl: any,
  post: string,
  time: string,
  owner: any,
  event: string,
  type: string,
  title: string,
  for: string,
  id: string
}

const Post = (props: post = {
  ownerurl: 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png',
  owner: "Visitor",
  url: "", post: "", time: "", event: "", type: "", title: "", for: "", id: ""
}) => {
  const { user, isModal, setIsModal, openDialog } = useAppContext();
  const [liked, setLiked] = useState(false);
  const [likeId, setLikeId] = useState(null);
  const [likeCount, setLikeCount] = useState(0);
  const [deleted, setDeleted] = useState(false);
  const [comment, setComment] = useState<string>("");
  const [reload, setReload] = useState(false);




  const fetchLikeCount = async () => {
    try {
      const response = await axios.get(`/api/dbhandler?model=likes&id=${props.id}`);
      if (response.status === 200) {
        setLikeCount(response.data.length);
        const userLike = response.data.find(like => like.userId === user.id);
        if (userLike) {
          setLikeId(userLike.id);
          setLiked(true);
        } else {
          setLikeId(null);
          setLiked(false);
        }
      }
    } catch (error) {
      console.error(error);
    }
  };



  useEffect(() => {
    fetchLikeCount();
    console.log('post id', props.id)
  }, [liked, reload]);


  const handleLike = async () => {
    if (user.name === "visitor" && user.email === "nil") {
      openDialog("Login to react", "Authentication Required")
      return
    }
    try {
      if (!liked) {
        const response = await axios.post('/api/dbhandler?model=likes', {
          userId: user.id,
          contentId: props.id,
        });
        if (response.status === 200) {
          setLikeId(response.data.id);
          setLiked(true);
        }
      } else {
        const response = await axios.delete(`/api/dbhandler?model=likes&id=${likeId}`);
        if (response.status === 200) {
          setLikeId(null);
          setLiked(false);
        }
      }
    } catch (error) {
      console.error(error);
    }
  };



  const postComment = async (id: any) => {
    if (user.name === "visitor" && user.email === "nil") {
      openDialog("Login to comment", "Authentication Required")
      return
    }
    try {
      console.log('comment id', id)
      const response = await axios.post('/api/dbhandler?model=comments', {
        userId: user.id,
        username: user.name,
        contentId: id,
        comment: comment,
      });
      if (response.status === 200) {
        setIsModal(false);
        setReload(true);
      }
      return response.data;
    } catch (error) {
      console.log(error);
    }
  };



  function formatDate(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diff = now.getTime() - date.getTime();
    const seconds = Math.floor(diff / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);
    const months = Math.floor(days / 30);
    const years = Math.floor(days / 365);

    if (years > 0) {
      return `last ${years} y`;
    } else if (months > 0) {
      return `last ${months} m`;
    } else if (days > 0) {
      return `last ${days} d`;
    } else if (hours > 0) {
      return `last ${hours} h`;
    } else if (minutes > 0) {
      return `last ${minutes} m`;
    } else {
      return 'just now';
    }
  }



  const handleDelete = async () => {
    try {
      const response = await axios.delete(`/api/dbhandler?model=posts&id=${props.id}`);
      if (response.status === 200) {
        setDeleted(true);
        openDialog("Post deleted", "Success");
      }
    } catch (error) {
      console.error(error);
    }
  };



  return (
    <div className='mt-10 flex flex-col rounded-sm w-[100vw] overflow-clip max-w-sm /max-h-[512px]'>
      {(user.role === "admin" || user.role === "moderator") && (
        <Button variant={"destructive"} className='ml-2' onClick={handleDelete} disabled={deleted}>
          {deleted ? "Deleted" : "Delete"}
        </Button>
      )}
      {/* {<div> <img src={props.owner} alt="" /> </div>} */}
      <div className='w-full flex flex-col justify-center items-center'>
        <div className='w-full flex flex-row'>
          <img src={props.ownerurl} alt="" className='w-10 h-10 rounded-full m-1' />
          <div className='flex flex-row w-full'>
            <div className=' flex-1 text-xl font-semibold px-3'>{props.owner}</div>
            <div className='text-sm w-14'>{formatDate(props.time)}</div>
          </div>
        </div>
        <div className='w-full flex flex-col justify-center items-center'>
          {props.type === 'image' && <img src={props.url} alt="" className='w-full m-1' />}
          {props.type === 'video' && (
            <video controls src={props.url} className="w-full max-w-[360px] my-2" />
          )}
          {props.type === 'audio' && (
            <audio controls>
              <source src={props.url} type="audio/mpeg" />
              Your browser does not support the audio tag.
            </audio>
          )}
        </div>
        <div className="w-full bg-secondary pb-2">
          <div className='w-full flex flex-col p-2'>
            {props.for !== 'post' && (
              <div className="w-full font-semibold text-lg">{props.title}</div>
            )}
            <div className='w-full'>{props.post}</div>
          </div>
          <div className='flex flex-row gap-2 px-2 items-center'>{likeCount} <BiSolidLike /></div>
          <div className='w-full flex flex-row gap-2 px-2 mt-1'>
            <Button className={`flex-1 text-2xl ${liked ? 'bg-blue-500 text-white' : ''}`} onClick={handleLike}>
              {liked ? <BiSolidLike /> : <BiLike />}
            </Button>
            <Button onClick={() => setIsModal(true)} variant={"outline"} className='bg-transparent flex-1 text-2xl text-accent border-2 border-accent'>
              <BiComment />
            </Button>
            {/* <Button variant={"outline"} className='bg-transparent flex-1 text-2xl text-accent'>
              <BiDownload />
            </Button> */}
          </div>
          <Comments videoId={props.id} />
          {isModal && (
            <Modal
              close={() => setIsModal(false)}
              save={() => postComment(props.id)}
              isSaveAllowed={comment.length > 0}
              className="bg-secondary overflow-clip"
            >
              <h3 className="text-base my-2">
                <span className="font-semibold">@{user.name}</span>
                {/* {", "}
              <span>
                a comment will be created
                 for the video &quot;
                {selectedVideo.title}
                &quot;
              </span> */}
              </h3>
              <TextArea onChange={(e) => setComment(e.target.value)} className="h-[15%]" />
            </Modal>
          )}
        </div>
      </div>
    </div>
  )
}

export default Post



================================================================================
LOCATION: components\myComponents\subs\posts.tsx
================================================================================

"use client";
import React, { useEffect, useState } from 'react';
import Post from './post';
import axios from 'axios';

const Posts = ({ page }) => {
  const [allpost, setallpost] = useState(null);
  const [sortOrder, setSortOrder] = useState('desc');
  const [postTypes, setPostTypes] = useState({ video: true, audio: true, image: true, });

  const fetchallpost = () =>{
    axios.get('/api/dbhandler', { params: { model: 'posts', } })
      .then(response => {
        const posts = response.data;
        let filteredPosts = posts.filter(post => post.for === page && postTypes[post.type]);
        filteredPosts = filteredPosts.sort((a, b) => sortOrder === 'asc' ? new Date(a.updatedAt).getTime() - new Date(b.updatedAt).getTime() : new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());
        setallpost(filteredPosts);
      })
      .catch(error => {
        console.error(error);
      });
  }

  useEffect(() => {
    fetchallpost();
  }, [sortOrder, postTypes, page]);

  const handleSortChange = (e) => {
    setSortOrder(e.target.value);
  }

  const handlePostTypeChange = (e) => {
    setPostTypes({ ...postTypes, [e.target.name]: e.target.checked, });
  }

  if (!allpost) return <div>Loading...</div>;

  return (
    <div className='flex flex-col w-fit mx-auto'>
      <div className="/absolute w-[360px] flex flex-row justify-between">
        <select value={sortOrder} onChange={handleSortChange} className="mb-4 w-20">
          <option value="asc">Asc</option>
          <option value="desc">Dsc</option>
        </select>
        <div className="mb-4">
          <label>
            <input type="checkbox" name="video" checked={postTypes.video} onChange={handlePostTypeChange} />
            Video
          </label>
          <label className="ml-4">
            <input type="checkbox" name="audio" checked={postTypes.audio} onChange={handlePostTypeChange} />
            Audio
          </label>
          <label className="ml-4">
            <input type="checkbox" name="image" checked={postTypes.image} onChange={handlePostTypeChange} />
            Image
          </label>
        </div>
      </div>
      {allpost && allpost.length > 0 ? (
        allpost.map((post, index)=>{
          //console.log('post', index, 'post id', post.id)
          return(
            <Post 
              key={index} 
              url={post.url} 
              ownerurl={(post?.user?.image==undefined) ? 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png' : post.user.image}
              time={post.updatedAt} 
              owner={post?.user?.name == undefined ? "Engr Adepoju" : post.user.name} 
              event={post.event} 
              post={post.description} 
              type={post.type} 
              id={post.id} 
              for={post.for} 
              title={post.title}
            />
          )
        })
      ) : (
        <div className='w-full mt-20 justify-center items-center font-bold text-xl'>No {page}s available.</div>
      )}
    </div>
  )
}

export default Posts;



================================================================================
LOCATION: components\myComponents\subs\productCard.tsx
================================================================================

"use client";

import { toggleWishlist, checkWishlisStatus } from "@/action/wishlist";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardFooter } from "@/components/ui/card";
import { cn } from "@/lib/utils";
import { getProductPrice, isProductInStock } from "@/lib/stock-pricing";
import { Heart, ShoppingCart, Star, Utensils } from "lucide-react";
import { AddLunchDialog } from "./AddLunchDialog";
import Link from "next/link";
import * as React from "react";

type ProductCardProps = Omit<
  React.HTMLAttributes<HTMLDivElement>,
  "onError"
> & {
  orientation?: "vertical" | "horizontal";
  onAddToCart?: (product: any) => void;
  onAddToWishlist?: (productId: string) => void;
  product: any;
  variant?: "compact" | "default";
  showDiscount?: boolean; // âœ… NEW PROP
};

export function ProductCard({
  className,
  orientation = "vertical",
  onAddToCart,
  onAddToWishlist,
  product,
  variant = "default",
  showDiscount = false, // âœ… default false
  ...props
}: ProductCardProps) {
  const [isHovered, setIsHovered] = React.useState(false);
  const [isAddingToCart, setIsAddingToCart] = React.useState(false);
  const [isInWishlist, setIsInWishlist] = React.useState(false);
  const [isLunchDialogOpen, setIsLunchDialogOpen] = React.useState(false);

  React.useEffect(() => {
    if (product?.id) {
      checkWishlisStatus(product.id)
        .then((status) => setIsInWishlist(status))
        .catch(() => { });
    }
  }, [product?.id]);

  const handleAddToCart = (e: React.MouseEvent) => {
    e.preventDefault();
    if (onAddToCart) {
      setIsAddingToCart(true);
      setTimeout(() => {
        onAddToCart(product);
        setIsAddingToCart(false);
      }, 600);
    }
  };

  const handleAddToWishlist = async (e: React.MouseEvent) => {
    e.preventDefault();
    const startState = isInWishlist;
    setIsInWishlist(!startState);
    try {
      await toggleWishlist(product.id);
      if (onAddToWishlist) {
        onAddToWishlist(product.id);
      }
    } catch (err) {
      setIsInWishlist(startState);
    }
  };

  /**
   * Safe Data Access
   */
  const currentPrice = getProductPrice(product);
  const inStock = typeof product.inStock === 'boolean' ? product.inStock : isProductInStock(product);
  const categoryName = product?.category?.name || "Product";
  const image = product?.images?.[0] || "/placeholder.png";

  // Rating Logic
  const ratingValue = React.useMemo(() => {
    if (typeof product.rating === 'number') return product.rating;
    if (Array.isArray(product.reviews) && product.reviews.length > 0) {
      const total = product.reviews.reduce((acc: number, r: any) => acc + (r.rating || 0), 0);
      return total / product.reviews.length;
    }
    return 0;
  }, [product]);

  const hasDiscount = showDiscount && (product.discount ?? 0) > 0;
  const discountPercent = hasDiscount ? product.discount : 0;
  const originalPrice = currentPrice;
  const discountedPrice = hasDiscount
    ? currentPrice * (1 - discountPercent / 100)
    : currentPrice;

  const renderStars = () => {
    const fullStars = Math.floor(ratingValue);
    const hasHalfStar = ratingValue % 1 >= 0.5;

    return (
      <div className="flex items-center">
        {Array.from({ length: 5 }).map((_, i) => (
          <Star
            key={`star-${product.id}-${i}`}
            className={cn(
              "h-4 w-4",
              i < fullStars
                ? "fill-yellow-400 text-yellow-400"
                : i === fullStars && hasHalfStar
                  ? "fill-yellow-400/50 text-yellow-400"
                  : "stroke-muted/40 text-muted"
            )}
          />
        ))}
        {ratingValue > 0 && (
          <span className="ml-1 text-xs text-muted-foreground">
            {ratingValue.toFixed(1)}
          </span>
        )}
      </div>
    );
  };

  return (
    <>
      <div className={cn("group", className)} {...props}>
        <Link href={`/store/${product.id}`}>
          <Card
            className={cn(
              `
                relative w-full overflow-clip rounded-lg py-0 transition-all
                duration-200 ease-in-out
                shadow-md m-1 flex md:flex-col
              `,
              orientation === "horizontal" ? "flex-row" : "flex-col",
              isHovered && "ring-1 ring-primary/20"
            )}
            onMouseEnter={() => setIsHovered(true)}
            onMouseLeave={() => setIsHovered(false)}
          >
            {/* Image */}
            <div
              className={cn(
                "relative aspect-square overflow-hidden rounded-t-lg flex justify-center items-center bg-muted md:w-full",
                orientation === "horizontal" ? "w-[40%]" : "w-full"
              )}
            >
              <img
                alt={product?.name || "Product"}
                className={cn(
                  "object-cover w-full transition-transform duration-300 ease-in-out",
                  isHovered && "scale-105"
                )}
                src={image}
              />

              {/* Category badge */}
              <Badge
                className="absolute top-2 left-2 bg-background/80 backdrop-blur-sm"
                variant="outline"
              >
                {categoryName}
              </Badge>

              {/* Discount & Lunch Icon Container */}
              <div className="absolute top-2 right-2 flex flex-col gap-2 items-end z-20">
                 {hasDiscount && (
                  <Badge
                    className="bg-destructive text-destructive-foreground pointer-events-none"
                  >
                    {discountPercent}% OFF
                  </Badge>
                )}
                
                <Button
                  className={cn(
                    "h-8 w-8 rounded-full bg-background/80 backdrop-blur-sm transition-opacity duration-300",
                    !isHovered && "opacity-0 md:opacity-100" // Show on mobile or hover
                  )}
                  onClick={(e) => {
                    e.preventDefault();
                    e.stopPropagation(); // Prevent Link navigation
                    setIsLunchDialogOpen(true);
                  }}
                  size="icon"
                  type="button"
                  variant="outline"
                >
                  <Utensils className="h-4 w-4 text-orange-500" />
                </Button>
              </div>

              {/* Wishlist */}
              <Button
                className={cn(
                  `
                    absolute right-2 bottom-2 z-10 rounded-full bg-background/80
                    backdrop-blur-sm transition-opacity duration-300
                  `,
                  !isHovered && !isInWishlist && "opacity-0"
                )}
                onClick={handleAddToWishlist}
                size="icon"
                type="button"
                variant="outline"
              >
                <Heart
                  className={cn(
                    "h-4 w-4",
                    isInWishlist
                      ? "fill-destructive text-destructive"
                      : "text-muted-foreground"
                  )}
                />
              </Button>
            </div>

            <div className="w-full flex-1">
              <CardContent className="p-4 pt-2">
                <h3 className="line-clamp-2 text-base font-semibold group-hover:text-primary">
                  {product?.name || "Product Name"}
                </h3>

                {variant === "default" && (
                  <>
                    <div className="mt-1.5">{renderStars()}</div>

                    <div className="mt-2 flex items-center gap-1.5">
                      <span className="font-medium text-foreground">
                        â‚¦{discountedPrice.toFixed(2)}
                      </span>
                      {hasDiscount && (
                        <span className="text-sm text-muted-foreground line-through">
                          â‚¦{originalPrice.toFixed(2)} has
                        </span>
                      )}
                    </div>
                  </>
                )}
              </CardContent>

              {variant === "default" && (
                <CardFooter className="p-4 pt-0">
                  <Button
                    className={cn(
                      "w-full gap-2 transition-all",
                      isAddingToCart && "opacity-70"
                    )}
                    disabled={isAddingToCart}
                    onClick={handleAddToCart}
                  >
                    {isAddingToCart ? (
                      <div className="h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent" />
                    ) : (
                      <ShoppingCart className="h-4 w-4" />
                    )}
                    Add to Cart
                  </Button>
                </CardFooter>
              )}

              {variant === "compact" && (
                <CardFooter className="p-4 pt-0">
                  <div className="flex w-full items-center justify-between">
                    <div className="flex items-center gap-1.5">
                      <span className="font-medium text-foreground">
                        â‚¦{discountedPrice.toFixed(2)}
                      </span>
                      {hasDiscount && (
                        <span className="text-sm text-muted-foreground line-through">
                          â‚¦{originalPrice.toFixed(2)} has
                        </span>
                      )}
                    </div>
                    <Button
                      className="h-8 w-8 rounded-full"
                      disabled={isAddingToCart}
                      onClick={handleAddToCart}
                      size="icon"
                      variant="ghost"
                    >
                      <ShoppingCart className="h-4 w-4" />
                    </Button>
                  </div>
                </CardFooter>
              )}

              {!inStock && (
                <div className="absolute inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm">
                  <Badge className="px-3 py-1 text-sm" variant="destructive">
                    Out of Stock
                  </Badge>
                </div>
              )}
            </div>
          </Card>
        </Link>
      </div>
      
      <AddLunchDialog 
        isOpen={isLunchDialogOpen} 
        onClose={() => setIsLunchDialogOpen(false)} 
        productId={product.id} 
      />
    </>
  );
}



================================================================================
LOCATION: components\myComponents\subs\ProductCarousel.tsx
================================================================================

"use client"

import React, { useEffect, useState } from "react"
import { motion, useAnimationControls } from "framer-motion"
import { Utensils, Heart, ShoppingCart } from "lucide-react"
import { toggleWishlist, checkWishlisStatus } from "@/action/wishlist"
import { AddLunchDialog } from "./AddLunchDialog"
import Link from "next/link"
import { toast } from "sonner"

export function ProductCarousel() {
    const [products, setProducts] = useState<any[]>([])
    const [loading, setLoading] = useState(true)

    useEffect(() => {
        fetch("/api/product?limit=10")
            .then(res => res.json())
            .then(data => {
                const shuffled = (data.products || []).sort(() => Math.random() - 0.5)
                setProducts(shuffled)
                setLoading(false)
            })
            .catch(() => setLoading(false))
    }, [])

    if (loading || products.length === 0) return <div className="h-40 flex items-center justify-center">Loading products...</div>

    // Duplicate products for infinite effect
    const displayProducts = [...products, ...products, ...products, ...products]

    return (
        <div className="w-full overflow-hidden py-4 px-2 relative group/carousel">
            <motion.div 
                className="flex gap-4"
                animate={{ x: [0, -100 * products.length] }}
                transition={{ 
                    duration: products.length * 5, 
                    repeat: Infinity, 
                    ease: "linear" 
                }}
                whileHover={{ animationPlayState: "paused" }}
            >
                {displayProducts.map((product, idx) => (
                    <CarouselCard key={`${product.id}-${idx}`} product={product} />
                ))}
            </motion.div>
        </div>
    )
}

function CarouselCard({ product }: { product: any }) {
    const [isLunchDialogOpen, setIsLunchDialogOpen] = useState(false)
    const [isInWishlist, setIsInWishlist] = useState(false)
    const image = product.images?.[0] || "/placeholder.png"

    useEffect(() => {
        checkWishlisStatus(product.id).then(setIsInWishlist).catch(() => {})
    }, [product.id])

    const handleWishlist = async (e: React.MouseEvent) => {
        e.preventDefault()
        e.stopPropagation()
        setIsInWishlist(!isInWishlist)
        await toggleWishlist(product.id)
    }

    return (
        <>
            <div className="relative w-48 h-48 md:w-64 md:h-64 flex-shrink-0 group rounded-lg overflow-hidden shadow-lg bg-muted">
                <Link href={`/store/${product.id}`} className="block w-full h-full">
                    <img src={image} alt={product.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                </Link>

                {/* Top Right Semi-Quarter Circle for Lunch */}
                <div className="absolute top-0 right-0 w-12 h-12 overflow-hidden pointer-events-none">
                     <div 
                        className="absolute top-[-50%] right-[-50%] w-[200%] h-[200%] bg-background/60 backdrop-blur-md rounded-full cursor-pointer pointer-events-auto flex items-center justify-center pt-[25%] pr-[25%]"
                        onClick={(e) => {
                            e.preventDefault()
                            e.stopPropagation()
                            setIsLunchDialogOpen(true)
                        }}
                    >
                        <Utensils className="h-5 w-5 text-orange-500 translate-x-[-12px] translate-y-[12px]" />
                    </div>
                </div>

                {/* Wishlist Icon */}
                <button 
                    onClick={handleWishlist}
                    className="absolute top-2 right-12 bg-background/60 backdrop-blur-sm p-1.5 rounded-full z-10 hover:bg-background transition-colors"
                >
                    <Heart className={cn("h-4 w-4", isInWishlist ? "fill-destructive text-destructive" : "text-muted-foreground")} />
                </button>

                {/* Add to Cart Overlay */}
                <div className="absolute bottom-0 left-0 right-0 h-1/5 bg-background/60 backdrop-blur-md opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <button 
                        className="w-full h-full flex items-center justify-center gap-2 font-bold text-sm text-primary hover:bg-primary hover:text-white transition-colors"
                        onClick={(e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            toast.success("Added to cart")
                        }}
                    >
                        <ShoppingCart className="h-4 w-4" /> Add to Cart
                    </button>
                </div>
            </div>

            <AddLunchDialog 
                isOpen={isLunchDialogOpen} 
                onClose={() => setIsLunchDialogOpen(false)} 
                productId={product.id} 
            />
        </>
    )
}

function cn(...classes: any[]) {
    return classes.filter(Boolean).join(" ")
}



================================================================================
LOCATION: components\myComponents\subs\profileCards.tsx
================================================================================

import { cn } from "@/lib/utils";

interface ProfileCardProps {
    className?: string;
    name: string;
    title: string;
    profileImage: string;
  }

  
  export const ProfileCard = ({ className, name, title, profileImage }: ProfileCardProps) => {
    return (
      <div
        className={cn(
          "relative w-56 h-64 flex flex-col items-center justify-between bg-secondary rounded-lg m-1 shadow-md shadow-accent/50 overflow-clip",
          className
        )}
      >
        <div className="h-[40%] w-full bg-accent/70 flex justify-center items-center">
          <div className="/absolute relative w-40 h-40 translate-y-10 bg-white rounded-full overflow-clip self-center flex justify-center items-center">
            <img src={profileImage} alt={`${name}'s profile`} />
          </div>
        </div>
        <div className="my-2">
          <div className="font-medium text-lg text-accent w-full text-center">Papa Oshofa</div>
          <div className="font-normal text-sm text-[#78858F]">Pastor Founder</div>
        </div>
      </div>
    );
  };
  
  


================================================================================
LOCATION: components\myComponents\subs\ScheduleLunchDialog.tsx
================================================================================

"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import {
    Dialog,
    DialogContent,
    DialogDescription,
    DialogFooter,
    DialogHeader,
    DialogTitle,
} from "@/components/ui/dialog"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Checkbox } from "@/components/ui/checkbox"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { scheduleLunch } from "@/action/lunch"
import { toast } from "sonner"
import { Calendar as CalendarIcon, Clock, Plus, Trash2 } from "lucide-react"
import { format } from "date-fns"
import { Calendar } from "@/components/ui/calendar"
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
import { cn } from "@/lib/utils"

interface ScheduleLunchDialogProps {
    isOpen: boolean
    onClose: () => void
    templateId: string
    templateName: string
}

const DAYS = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]

export function ScheduleLunchDialog({ isOpen, onClose, templateId, templateName }: ScheduleLunchDialogProps) {
    const [name, setName] = useState(`Schedule for ${templateName}`)
    const [frequency, setFrequency] = useState("daily")
    const [startDate, setStartDate] = useState<Date>(new Date())
    const [endDate, setEndDate] = useState<Date>(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000))
    const [daysOfWeek, setDaysOfWeek] = useState<string[]>([])
    const [timesInDay, setTimesInDay] = useState<string[]>(["12:00"])
    const [deliveryFeeTotal, setDeliveryFeeTotal] = useState(1000)
    const [loading, setLoading] = useState(false)

    const handleSchedule = async () => {
        if (!name) return toast.error("Please enter a name")
        if (frequency === 'weekly' && daysOfWeek.length === 0) return toast.error("Please select at least one day")
        
        setLoading(true)
        try {
            const res = await scheduleLunch({
                templateId,
                name,
                frequency,
                daysOfWeek,
                timesInDay,
                startDate,
                endDate,
                deliveryFeeTotal
            })
            if (res.success) {
                toast.success("Lunch scheduled successfully!")
                onClose()
            } else {
                toast.error(res.error || "Failed to schedule lunch")
            }
        } catch (e) {
            toast.error("Error scheduling lunch")
        } finally {
            setLoading(false)
        }
    }

    const toggleDay = (day: string) => {
        setDaysOfWeek(prev => prev.includes(day) ? prev.filter(d => d !== day) : [...prev, day])
    }

    const addTime = () => setTimesInDay([...timesInDay, "12:00"])
    const updateTime = (index: number, val: string) => {
        const newTimes = [...timesInDay]
        newTimes[index] = val
        setTimesInDay(newTimes)
    }
    const removeTime = (index: number) => {
        if (timesInDay.length > 1) {
            setTimesInDay(timesInDay.filter((_, i) => i !== index))
        }
    }

    return (
        <Dialog open={isOpen} onOpenChange={onClose}>
            <DialogContent className="sm:max-w-[500px] max-h-[90vh] overflow-y-auto">
                <DialogHeader>
                    <DialogTitle>Schedule Periodic Lunch</DialogTitle>
                    <DialogDescription>
                        Set up a recurring delivery schedule for this lunch list.
                    </DialogDescription>
                </DialogHeader>
                
                <div className="grid gap-4 py-4">
                    <div className="grid gap-2">
                        <Label htmlFor="name">Schedule Name</Label>
                        <Input id="name" value={name} onChange={(e) => setName(e.target.value)} />
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                        <div className="grid gap-2">
                            <Label>Frequency</Label>
                            <Select value={frequency} onValueChange={setFrequency}>
                                <SelectTrigger>
                                    <SelectValue />
                                </SelectTrigger>
                                <SelectContent>
                                    <SelectItem value="daily">Daily</SelectItem>
                                    <SelectItem value="weekly">Weekly</SelectItem>
                                    <SelectItem value="monthly">Monthly</SelectItem>
                                    <SelectItem value="once">Once</SelectItem>
                                </SelectContent>
                            </Select>
                        </div>
                        <div className="grid gap-2">
                            <Label>Total Delivery Fee (Spread)</Label>
                            <Input type="number" value={deliveryFeeTotal} onChange={(e) => setDeliveryFeeTotal(Number(e.target.value))} />
                        </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                        <div className="grid gap-2">
                            <Label>Start Date</Label>
                            <Popover>
                                <PopoverTrigger asChild>
                                    <Button variant="outline" className={cn("justify-start text-left font-normal", !startDate && "text-muted-foreground")}>
                                        <CalendarIcon className="mr-2 h-4 w-4" />
                                        {startDate ? format(startDate, "PPP") : <span>Pick a date</span>}
                                    </Button>
                                </PopoverTrigger>
                                <PopoverContent className="w-auto p-0">
                                    <Calendar mode="single" selected={startDate} onSelect={(d) => d && setStartDate(d)} initialFocus />
                                </PopoverContent>
                            </Popover>
                        </div>
                        <div className="grid gap-2">
                            <Label>End Date</Label>
                            <Popover>
                                <PopoverTrigger asChild>
                                    <Button variant="outline" className={cn("justify-start text-left font-normal", !endDate && "text-muted-foreground")}>
                                        <CalendarIcon className="mr-2 h-4 w-4" />
                                        {endDate ? format(endDate, "PPP") : <span>Pick a date</span>}
                                    </Button>
                                </PopoverTrigger>
                                <PopoverContent className="w-auto p-0">
                                    <Calendar mode="single" selected={endDate} onSelect={(d) => d && setEndDate(d)} initialFocus />
                                </PopoverContent>
                            </Popover>
                        </div>
                    </div>

                    {frequency === "weekly" && (
                        <div className="grid gap-2">
                            <Label>Days of Week</Label>
                            <div className="flex flex-wrap gap-2">
                                {DAYS.map(day => (
                                    <div key={day} className="flex items-center space-x-2 bg-muted px-2 py-1 rounded-md">
                                        <Checkbox id={day} checked={daysOfWeek.includes(day)} onCheckedChange={() => toggleDay(day)} />
                                        <Label htmlFor={day} className="capitalize cursor-pointer text-xs">{day.slice(0,3)}</Label>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    <div className="grid gap-2">
                        <div className="flex justify-between items-center">
                            <Label>Delivery Times in Day</Label>
                            <Button variant="ghost" size="sm" onClick={addTime}><Plus className="h-4 w-4 mr-1"/> Add</Button>
                        </div>
                        <div className="space-y-2">
                            {timesInDay.map((time, idx) => (
                                <div key={idx} className="flex gap-2 items-center">
                                    <Input type="time" value={time} onChange={(e) => updateTime(idx, e.target.value)} className="flex-1" />
                                    <Button variant="ghost" size="icon" onClick={() => removeTime(idx)} disabled={timesInDay.length === 1}>
                                        <Trash2 className="h-4 w-4 text-destructive" />
                                    </Button>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>

                <DialogFooter>
                    <Button variant="outline" onClick={onClose}>Cancel</Button>
                    <Button onClick={handleSchedule} disabled={loading}>
                        {loading ? "Scheduling..." : "Schedule Lunch"}
                    </Button>
                </DialogFooter>
            </DialogContent>
        </Dialog>
    )
}



================================================================================
LOCATION: components\myComponents\subs\scroll-scale-wrapper.tsx
================================================================================

"use client";
import React, { useRef } from "react";
import { motion, useScroll, useTransform } from "framer-motion";

interface ScrollScaleWrapperProps {
    children: React.ReactNode;
    className?: string;
}

export const ScrollScaleWrapper = ({ children, className = "" }: ScrollScaleWrapperProps) => {
    const ref = useRef<HTMLDivElement>(null);
    const { scrollYProgress } = useScroll({
        target: ref,
        offset: ["0 1", "1.2 1"], // Starts entering viewport -> Fully visible
    });

    const scale = useTransform(scrollYProgress, [0, 1], [0.8, 1]);
    const opacity = useTransform(scrollYProgress, [0, 1], [0.6, 1]);

    return (
        <motion.div
            ref={ref}
            style={{ scale }}//{{ scale, opacity }}
            className={`w-full ${className}`}
        >
            {children}
        </motion.div>
    );
};



================================================================================
LOCATION: components\myComponents\subs\search.tsx
================================================================================

import React from 'react'

const Search = () => {
  return (
    <div>
      
    </div>
  )
}

export default Search



================================================================================
LOCATION: components\myComponents\subs\searchcomponent.tsx
================================================================================

'use client'
import { useEffect, useRef, useState } from 'react';
import axios from 'axios';
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { DropdownMenu, DropdownMenuContent, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';
import { Table, TableBody, TableCell, TableRow } from '@/components/ui/table';
import Link from 'next/link';
import { AiOutlineSearch } from "react-icons/ai";

export function SearchInput() {
  const [query, setQuery] = useState("");
  const [products, setProducts] = useState<any[]>([]);
  const [loading, setLoading] = useState(false);
  const [isFocused, setIsFocused] = useState(false);
  const dropdownRef = useRef<HTMLDivElement>(null);

  // Fetch products from backend
  const fetchProducts = async (search: string) => {
    if (search.length < 3) {
      setProducts([]);
      return;
    }
    setLoading(true);
    try {
      const res = await axios.get(`/api/dbhandler?model=product&search=${encodeURIComponent(search)}`);
      setProducts(res.data || []);
    } catch (error) {
      console.error("Search error:", error);
      setProducts([]);
    } finally {
      setLoading(false);
    }
  };

  // Debounced search
  useEffect(() => {
    if (!isFocused) return;
    const timeout = setTimeout(() => fetchProducts(query), 300);
    return () => clearTimeout(timeout);
  }, [query, isFocused]);

  return (
    <div className="relative w-full /w-[230px] md:w-[300px] mx-5 flex flex-row bg-background">
      <Input
        placeholder="Search products..."
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        onFocus={() => setIsFocused(true)}
        onBlur={() => setTimeout(() => setIsFocused(false), 200)}
        className="flex-1 border-0 dark:border-2 bg-accent/10 z-30"
      />
      <DropdownMenu open={isFocused} onOpenChange={setIsFocused}>
        <DropdownMenuTrigger asChild>
          <Button className="absolute right-0 h-full rounded-sm text-background text-xl">
            <AiOutlineSearch />
          </Button>
        </DropdownMenuTrigger>

        {products.length > 0 && (
          <DropdownMenuContent
            ref={dropdownRef}
            className=" w-full max-w-sm max-h-[400px] overflow-auto shadow-lg bg-secondary z-30 rounded-md"
          >
            <Table className="w-full text-sm sm:text-base">
              <TableBody>
                {products.map((product) => {
                  const productUrl = `/store?id=${product.id}&category=${product.category?.name || ''}&search=${encodeURIComponent(query)}`;
                  return (
                    <TableRow key={product.id} className="hover:bg-accent/20">
                      <TableCell className="truncate max-w-[400px] sm:max-w-none">
                        <Link
                          href={productUrl}
                          className="font-semibold capitalize hover:text-blue-800 truncate"
                        >
                          {product.name} - {product.category?.name || 'General'}
                        </Link>
                      </TableCell>
                    </TableRow>
                  );
                })}
              </TableBody>
            </Table>
          </DropdownMenuContent>
        )}
      </DropdownMenu>
    </div>
  );
}



================================================================================
LOCATION: components\myComponents\subs\signup.tsx
================================================================================

"use client"
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import dynamic from 'next/dynamic'
// const AlertDialog = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialog),{ssr: false,})
// const AlertDialogAction = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogAction),{ssr: false,})
// const AlertDialogCancel = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogCancel),{ssr: false,})
// const AlertDialogContent = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogContent),{ssr: false,})
// const AlertDialogDescription = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogDescription),{ssr: false,})
// const AlertDialogFooter = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogFooter),{ssr: false,})
// const AlertDialogHeader = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogHeader),{ssr: false,})
// const AlertDialogTitle = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogTitle),{ssr: false,})
// const AlertDialogTrigger = dynamic(() => import('@/components/ui/alert-dialog').then((e) => e.AlertDialogTrigger),{ssr: false,})
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"
import { Button } from "@/components/ui/button"
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { register } from '@/server/action/signup'
import axios from 'axios'
import Login from './login'
import { FcGoogle } from 'react-icons/fc'
import { FaFacebook } from "react-icons/fa";
import { facebookSignIn, googleSignIn } from './googlesignin'

const Signup = () => {
  // const [details, setDetails] = useState({
  //   userName : "",
  //   email : "",
  //   password : "",
  // })

  // // const [render, setRender] = useState(0);

  // // useEffect(() => {
  // // }, [render]);

  // interface RefObject<T> {
  //   readonly current: T | null
  // }

  //   const form = useRef<HTMLFormElement>(null);


  //   const handleChange = (e : any)=>{
  //     const { name, value } = e.target;

  //     setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
  //   }
  
  const [users, setUsers] = useState([]);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    name: '',
    image: '',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {

  }, []);

  const form = useRef<HTMLFormElement>(null);


  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=user&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=user', formData);
    }
    resetForm();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=users&id=${id}`);
  };

  const resetForm = () => {
    setFormData({
      email: '',
      password: '',
      name: '',
      image: '',
    });
    setEditId(null);
  };

  return (
    <div className='inline w-full'>
      <Drawer>
        <DrawerTrigger asChild className='bg-green-500 w-full'>
          <Button variant="outline" className='bg-green-500 w-full'>Sign up</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 /bg-red-500 max-w-5xl mx-auto'>

          <DrawerHeader>
            <DrawerTitle className='w-full text-center'>Create an account with <span className='text-accent'>Lois Food and Spices</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
          <form onSubmit={handleSubmit} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl"> 
          <Input
              type="text"
              placeholder="Name"
              value={formData.name || ''}
              onChange={(e) => setFormData({ ...formData, name: e.target.value })}
            />
            <Input
              type="email"
              placeholder="Email"
              value={formData.email}
              onChange={(e) => setFormData({ ...formData, email: e.target.value })}
            />
            <Input
              type="password"
              placeholder="Password"
              value={formData.password}
              onChange={(e) => setFormData({ ...formData, password: e.target.value })}
            />
            {/* <select
              value={formData.department}
              onChange={(e) => setFormData({ ...formData, department : e.target.value })}
            >
              <option value="member">Member</option>
              <option value="choir">Choir</option>
              <option value="youth">Youth</option>
              <option value="worker">Worker</option>
              <option value="parochial">Parochial</option>
              <option value="elder">Elder</option>
            </select> */}
            {/* <select
              value={formData.sex}
              onChange={(e) => setFormData({ ...formData, sex: e.target.value })}
            >
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select> */}
            
            <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
              {/* <Button>Submit</Button> */}
              <DrawerClose className='flex-1' asChild>
                <Button className='flex-1' variant="outline">Cancel</Button>
              </DrawerClose>
              <Button type="submit" className="flex-1 before:ani-shadow w-full">{editId ? 'Update' : 'Sign up'} &rarr;</Button>
            </DrawerFooter>
          </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}

          <div className="w-full my-2 flex flex-col gap-2">
            <form
              action={googleSignIn}
            >
              <Button
                className="border-2 border-primary relative w-full max-w-[300px] mx-auto flex /space-x-2 items-center justify-center text-black rounded-md h-10 font-medium shadow-input hover:bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]"
                type="submit"
                variant='outline'
              >
                <FcGoogle className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
                <span className="text-neutral-700 dark:text-neutral-300 text-sm">
                  Google
                </span>
              </Button>
            </form>
            <form
              action={facebookSignIn}
            >
              <Button
                className="border-2 border-primary relative w-full max-w-[300px] mx-auto flex /space-x-2 items-center justify-center text-black rounded-md h-10 font-medium shadow-input hover:bg-gray-50 dark:bg-zinc-900 dark:shadow-[0px_0px_1px_1px_var(--neutral-800)]"
                type="submit"
                variant='outline'
              >
                <FaFacebook className="h-4 w-4 text-neutral-800 dark:text-neutral-300" />
                <span className="text-neutral-700 dark:text-neutral-300 text-sm">
                  Facebook
                </span>
              </Button>
            </form>
            <div className="border-2 border-primary max-w-[300px] mx-auto w-full my-2 rounded-md font-medium shadow-input flex justify-center items-center bg-green-500">
              <Login />
            </div>
          </div>
        </DrawerContent>
      </Drawer>
    </div>
  )
}

export default Signup





================================================================================
LOCATION: components\myComponents\subs\similar.tsx
================================================================================

"use client";

import * as React from "react";
import Autoplay from "embla-carousel-autoplay";

import {
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselNext,
  CarouselPrevious,
} from "@/components/ui/carousel";

import { Button } from "@/components/ui/button";
import Link from "next/link";
import { CiShoppingCart } from "react-icons/ci";
import { useCart } from "@/hooks/use-cart";


export default function Similar({ similar }: { similar: any }) {
  const plugin = React.useRef(
    Autoplay({ delay: 2000, stopOnInteraction: true })
  );

  const { addItem } = useCart();
  // const [editId, setEditId] = React.useState(null);

  console.log("similar products", similar);
  // IMPORTANT FIX â€” prevent slice() crash
  const list: any[] = Array.isArray(similar) ? similar : [];

  const shuffled = list.slice().sort(() => Math.random() - 0.5);

  const addToCart = (product: any) => {
    addItem(product, 1);
  };

  return (
    <>
      {similar.length == 0 && (
        <p className="text-center text-muted-foreground py-10">
          No similar products available.
        </p>
      )}

      {shuffled.length > 0 && (
        <Carousel
          plugins={[plugin.current]}
          className="w-screen overflow-clip lg:max-w-[850px] xl:max-w-[1000px] mx-auto mt-10"
          opts={{ loop: true }}
          orientation="horizontal"
        >
          <CarouselContent>
            {shuffled.map((product, index) => (
              <CarouselItem
                key={index}
                className="basis-1/3 md:basis-1/5 lg:basis-1/7 flex flex-col overflow-clip justify-center items-center w-full ml-2"
              >
                <Link href={`/store/${product.id}`}>
                  <div className="h-[100px] w-full mx-2 md:mx-0 flex justify-center items-center">
                    <img
                      src={product.images?.[0] ?? ""}
                      alt={product.name}
                      className="h-full rounded-sm"
                    />
                  </div>
                </Link>

                <div className="flex flex-1 flex-col text-center justify-center items-center w-full">
                  <Link href={`/store/${product.id}`}>
                    <div className="w-full text-center flex flex-col justify-center items-center">
                      <div className="font-semibold text-sm">
                        {product.name}
                      </div>
                      <div className="font-semibold text-foreground/80 text-sm">
                        â‚¦ {product.price?.toLocaleString()}
                      </div>
                    </div>
                  </Link>

                  <div className="flex flex-row w-full max-w-[100px] gap-1 mt-1">
                    <Button
                      onClick={() => addToCart(product)}
                      variant="outline"
                      className="rounded-lg flex-1 w-full h-6 font-semibold text-accent-secondary border-accent-secondary hover:bg-accent-secondary/60 hover:text-background border-2"
                    >
                      <CiShoppingCart />
                    </Button>
                  </div>
                </div>
              </CarouselItem>
            ))}
          </CarouselContent>

          <CarouselPrevious />
          <CarouselNext />
        </Carousel>
      )}
    </>
  );
}



================================================================================
LOCATION: components\myComponents\subs\stocks.tsx
================================================================================

'use client';

import { Button } from "@/components/ui/button";
import { useState, useEffect } from "react";
import axios from "axios";
import { ProductCard } from "./productCard";
import { useCart } from "@/hooks/use-cart";
import { Skeleton } from "@/components/ui/skeleton";

type StocksProps = {
  categoryFilter?: string;
  search?: string;
  selectedId?: string;
};

type Product = {
  id: string;
  name: string;
  price: number;
  images: string[];
  category: any;
  rating?: number;
};

import { useAppContext } from "@/hooks/useAppContext";

const Stocks = ({ categoryFilter, search, selectedId }: StocksProps) => {
  const { addItem } = useCart();
  const { openDialog } = useAppContext();
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchProducts = async () => {
    try {
      const res = await axios.get("/api/dbhandler?model=product");
      let fetchedProducts: Product[] = res.data;

      // Filter and prioritize
      let prioritized: Product[] = [];

      // 1ï¸âƒ£ Product by selectedId first
      if (selectedId) {
        const selectedProduct = fetchedProducts.find(p => p.id === selectedId);
        if (selectedProduct) prioritized.push(selectedProduct);
      }

      // 2ï¸âƒ£ Products whose name contains search
      if (search) {
        const searchMatches = fetchedProducts.filter(
          p => p.name.toLowerCase().includes(search.toLowerCase()) &&
            p.id !== selectedId
        );
        prioritized.push(...searchMatches);
      }

      // 3ï¸âƒ£ Products in same category
      if (categoryFilter) {
        const categoryMatches = fetchedProducts.filter(
          p =>
            p.category?.name?.toLowerCase() === categoryFilter.toLowerCase() &&
            p.id !== selectedId &&
            !(search && p.name.toLowerCase().includes(search.toLowerCase()))
        );
        prioritized.push(...categoryMatches);
      }


      // If nothing matches, fallback to all products
      if (prioritized.length === 0) {
        prioritized = fetchedProducts.sort(() => Math.random() - 0.5);
      }

      setProducts(prioritized);
      setLoading(false);
    } catch (err) {
      console.error(err);
      setError("Failed to fetch products, please check your network connection");
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchProducts();
  }, [categoryFilter, search, selectedId]);

  if (loading) {
    return (
      <div className="h-full max-w-[500px] md:max-w-[1000px] flex gap-5 flex-wrap relative p-2 mx-auto justify-between">
        <div className="absolute w-full h-full flex justify-center items-center z-10 bg-black/30 p-2">
          {error && <p className="w-full text-center text-white">{error}</p>}
        </div>
        {[...Array(8)].map((_, index) => (
          <Skeleton
            key={index}
            className="w-[100vw] md:w-[200px] h-[150px] md:h-[300px] mb-5"
          />
        ))}
      </div>
    );
  }

  return (
    <div className="h-full max-w-[500px] md:max-w-[1000px] flex gap-5 flex-wrap mx-5 p-2 self-center justify-between">
      {products.map((product) => (
        <ProductCard
          key={product.id}
          product={{
            ...product,
            inStock: true,
            rating: product.rating ?? 5,
          }}
          orientation="horizontal"
          onAddToCart={addItem}
          onAddToWishlist={(id) => openDialog(`Add ${id} to wishlist`, "Wishlist")}
          className="w-[100vw] md:w-[200px] mb-5 flex flex-row md:flex-col"
        />
      ))}
    </div>
  );
};

export default Stocks;



================================================================================
LOCATION: components\myComponents\subs\testimonialProp.tsx
================================================================================

import { cn } from "@/lib/utils"
import { Avatar, AvatarImage } from "./avatar";

export interface TestimonialAuthor {
  avatar: string;
  handle: string;
  name: string;
}

export interface TestimonialCardProps {
  author: TestimonialAuthor;
  className?: string;
  href?: string;
  text: string;
}

export function TestimonialCard({
  author,
  className,
  href,
  text,
}: TestimonialCardProps) {
  const Card = href ? "a" : "div";

  return (
    <Card
      {...(href ? { href } : {})}
      className={cn(
        "flex flex-col rounded-lg border-t",
        "bg-gradient-to-b from-muted/50 to-muted/10",
        `
          p-4 text-start
          sm:p-6
        `,
        "hover:from-muted/60 hover:to-muted/20",
        `
          max-w-[320px]
          sm:max-w-[320px]
        `,
        "transition-colors duration-300",
        className,
      )}
    >
      <div className="flex items-center gap-3">
        <Avatar className="h-12 w-12">
          <AvatarImage alt={author.name} src={author.avatar} />
        </Avatar>
        <div className="flex flex-col items-start">
          <h3 className="text-md leading-none font-semibold">{author.name}</h3>
          <p className="text-sm text-muted-foreground">{author.handle}</p>
        </div>
      </div>
      <p
        className={`
          sm:text-md
          mt-4 text-sm text-muted-foreground
        `}
      >
        {text}
      </p>
    </Card>
  );
}



================================================================================
LOCATION: components\myComponents\subs\testimonials.tsx
================================================================================

"use client";

import { animate } from "animejs";
import React, { useEffect, useRef } from "react";

import { cn } from "@/lib/utils"
import {
  type TestimonialAuthor,
  TestimonialCard,
} from "./testimonialProp";

interface TestimonialsSectionProps {
  className?: string;
  description: string;
  testimonials: {
    author: TestimonialAuthor;
    href?: string;
    text: string;
  }[];
  title: string;
}

export function TestimonialsSection({
  className,
  description,
  testimonials,
  title,
}: TestimonialsSectionProps) {
  const marqueeRef = useRef<HTMLDivElement>(null);
  const animationRef = useRef<null | ReturnType<typeof animate>>(null);
  const isHoveredRef = useRef(false);

  useEffect(() => {
    if (!marqueeRef.current) return;

    // Calculate total width for accurate animation
    const marqueeElement = marqueeRef.current;
    const itemWidth = marqueeElement.scrollWidth / 4; // 4 sets of testimonials

    // Create marquee animation
    const setupAnimation = () => {
      if (animationRef.current) {
        animationRef.current.pause();
      }

      animationRef.current = animate(marqueeElement, {
        duration: 40000, // 40s same as CSS
        easing: "linear",
        loop: true,
        translateX: ["0px", `-${itemWidth}px`],
      });

      // Pause animation if already hovered
      if (isHoveredRef.current) {
        animationRef.current.pause();
      }
    };

    // Initial setup
    setupAnimation();

    // Handle resize
    const handleResize = () => {
      setupAnimation();
    };

    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
      if (animationRef.current) {
        animationRef.current.pause();
      }
    };
  }, []);

  // Handle hover interactions
  const handleMouseEnter = () => {
    isHoveredRef.current = true;
    if (animationRef.current) {
      animationRef.current.pause();
    }
  };

  const handleMouseLeave = () => {
    isHoveredRef.current = false;
    if (animationRef.current) {
      animationRef.current.play();
    }
  };

  return (
    <section
      className={cn(
        "bg-background text-foreground",
        `
          px-0 py-12
          sm:py-24
          md:py-32
        `,
        className,
      )}
    >
      <div
        className={`
          max-w-container mx-auto flex flex-col items-center gap-4 text-center
          sm:gap-16
        `}
      >
        <div
          className={`
            flex flex-col items-center gap-4 px-4
            sm:gap-8
          `}
        >
          <h2
            className={`
              max-w-[720px] text-3xl leading-tight font-semibold
              sm:text-5xl sm:leading-tight
            `}
          >
            {title}
          </h2>
          <p
            className={`
              text-md max-w-[600px] font-medium text-muted-foreground
              sm:text-xl
            `}
          >
            {description}
          </p>
        </div>

        <div
          className={`
            relative flex w-full flex-col items-center justify-center
            overflow-hidden
          `}
        >
          <div
            className={`
              flex flex-row overflow-hidden p-2
              [gap:var(--gap)]
              [--gap:1rem]
            `}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          >
            <div
              className={`
                flex shrink-0 flex-row justify-around
                [gap:var(--gap)]
              `}
              ref={marqueeRef}
              style={{ translate: "none" }}
            >
              {[...Array(4)].map((_, setIndex) =>
                testimonials.map((testimonial, i) => (
                  <TestimonialCard
                    // Using UUID or other unique identifier would be better here,
                    // but for static content this is acceptable
                    key={`testimonial-${testimonial.author.name}-${setIndex}-${i}`}
                    {...testimonial}
                  />
                )),
              )}
            </div>
          </div>

          <div
            className={`
              pointer-events-none absolute inset-y-0 left-0 hidden w-1/3
              bg-gradient-to-r from-background
              sm:block
            `}
          />
          <div
            className={`
              pointer-events-none absolute inset-y-0 right-0 hidden w-1/3
              bg-gradient-to-l from-background
              sm:block
            `}
          />
        </div>
      </div>
    </section>
  );
}



================================================================================
LOCATION: components\myComponents\subs\textctrl.tsx
================================================================================

import { motion, AnimatePresence } from "framer-motion";
import { useEffect, useState } from "react";

/* ===============================
   Shared Hook
================================ */
const useTextRotation = (texts: any[], interval = 6000) => {
  const [index, setIndex] = useState(0);

  useEffect(() => {
    if (!texts?.length) return;
    const timer = setInterval(() => {
      setIndex((i) => (i + 1) % texts.length);
    }, interval);
    return () => clearInterval(timer);
  }, [texts, interval]);

  return texts[index];
};

/* ===============================
   Base Animated Wrapper
================================ */
const AnimatedTextBase = ({
  children,
  variants,
  className = "",
}: {
  children: React.ReactNode;
  variants: any;
  className?: string;
}) => {
  return (
    <AnimatePresence mode="wait">
      <motion.div
        key={String(children)}
        variants={variants}
        initial="hidden"
        animate="visible"
        exit="exit"
        transition={{ duration: 0.4, ease: "easeInOut" }}
        className={className}
      >
        {children}
      </motion.div>
    </AnimatePresence>
  );
};

/* ===============================
   Variants
================================ */
const fade = {
  hidden: { opacity: 0 },
  visible: { opacity: 1 },
  exit: { opacity: 0 },
};

const slideIn = {
  hidden: { x: "-100%", opacity: 0 },
  visible: { x: 0, opacity: 1 },
  exit: { x: "100%", opacity: 0 },
};

const slideUp = {
  hidden: { y: "100%", opacity: 0 },
  visible: { y: 0, opacity: 1 },
  exit: { y: "-100%", opacity: 0 },
};

const scaleIn = {
  hidden: { scale: 0.85, opacity: 0 },
  visible: { scale: 1, opacity: 1 },
  exit: { scale: 0.85, opacity: 0 },
};

const rotateIn = {
  hidden: { rotate: -90, opacity: 0 },
  visible: { rotate: 0, opacity: 1 },
  exit: { rotate: 90, opacity: 0 },
};

const flipIn = {
  hidden: { rotateY: 90, opacity: 0 },
  visible: { rotateY: 0, opacity: 1 },
  exit: { rotateY: -90, opacity: 0 },
};

const bounceIn = {
  hidden: { scale: 0.5, opacity: 0 },
  visible: {
    scale: 1,
    opacity: 1,
    transition: { type: "spring", stiffness: 280, damping: 16 },
  },
  exit: { scale: 0.5, opacity: 0 },
};

/* ðŸ†• Rise from below + fade into background */
const riseAndFade = {
  hidden: {
    y: "120%",
    opacity: 0,
  },
  visible: {
    y: "0%",
    opacity: 1,
    transition: {
      duration: 0.9,
      ease: "easeOut",
    },
  },
  exit: {
    opacity: 0,
    transition: {
      duration: 0.8,
      ease: "easeIn",
    },
  },
};

/* ===============================
   Animation Components
================================ */
export const TextFade = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={fade} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const SlideInText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={slideIn} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const SlideUpText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={slideUp} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const ScaleInText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={scaleIn} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const RotateInText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={rotateIn} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const FlipInText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={flipIn} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

export const BounceInText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={bounceIn} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

/* ðŸ†• Rise & Fade Loop Text */
export const RiseAndFadeText = ({ texts, className, interval }: any) => {
  const text = useTextRotation(texts, interval);
  return (
    <AnimatedTextBase variants={riseAndFade} className={className}>
      {text}
    </AnimatedTextBase>
  );
};

/* ===============================
   Zoom Verse Text (Special)
================================ */
export const ZoomInText = ({
  texts,
  className = "",
  interval = 6000,
}: {
  texts: { verse: string; page: string }[];
  className?: string;
  interval?: number;
}) => {
  const item = useTextRotation(texts, interval);

  return (
    <AnimatePresence mode="wait">
      <motion.div
        key={item.verse}
        initial={{ scale: 0.85, opacity: 0 }}
        animate={{ scale: 1, opacity: 1 }}
        exit={{ scale: 0.85, opacity: 0 }}
        transition={{ duration: 0.9, ease: "easeInOut" }}
        className={className}
      >
        <div>{item.verse}</div>
        <div className="text-sm opacity-70">{item.page}</div>
      </motion.div>
    </AnimatePresence>
  );
};




// <RiseAndFadeText
//   texts={[
//     "Freshly Sourced Ingredients",
//     "Naturally Processed Spices",
//     "Quality You Can Trust",
//   ]}
//   className="text-2xl font-semibold text-muted-foreground overflow-hidden"
// />



================================================================================
LOCATION: components\myComponents\subs\useredit.tsx
================================================================================

"use client";
import React, { useEffect, useState } from "react";
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { useAppContext } from "@/hooks/useAppContext";
import axios from "axios";
import UserShippingAddressForm from "@/prisma/forms/userShippingAddressForm";

type ShippingAddress = {
  id?: string;
  country: string;
  state: string;
  city: string;
  address: string;
  zip?: string;
  phone?: string;
};

const EditUser = () => {
  const { user, setUser } = useAppContext();

  const [formData, setFormData] = useState({
    email: "",
    name: "",
    contact: "",
    role: "user",
    image: "",
  });

  const [addressData, setAddressData] = useState<ShippingAddress>({
    address: "",
    city: "",
    state: "",
    zip: "",
    country: "",
    phone: "",
  });

  const [editId, setEditId] = useState<string | null>(null);
  const [successMessage, setSuccessMessage] = useState<string | null>(null);

  useEffect(() => {
    if (user) {
      setFormData({
        email: user.email || "",
        name: user.name || "",
        contact: user.contact || "",
        role: user.role || "user",
        image: user.image || "",
      });

      if (user.addresses?.[0]) {
        setAddressData(user.addresses[0]);
      }

      setEditId(user.id);
    }
  }, [user]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    try {
      // Update user
      const userRes = await axios.put(`/api/dbhandler?model=user&id=${editId}`, {
        ...formData,
        id: editId,
      });

      // Update or create shipping address
      let addressRes;
      if (addressData.id) {
        addressRes = await axios.put(
          `/api/dbhandler?model=shippingAddress&id=${addressData.id}`,
          { ...addressData, userId: user.id }
        );
      } else {
        addressRes = await axios.post(
          `/api/dbhandler?model=shippingAddress`,
          { ...addressData, userId: user.id }
        );
      }

      // Update local context
      setUser({
        ...userRes.data,
        addresses: [addressRes.data],
      });

      // Reset form and show success message
      setFormData({
        email: userRes.data.email || "",
        name: userRes.data.name || "",
        contact: userRes.data.contact || "",
        role: userRes.data.role || "user",
        image: userRes.data.image || "",
      });

      setAddressData(addressRes.data);

      setSuccessMessage("Profile updated successfully!");

      // Hide message after 3 seconds
      setTimeout(() => setSuccessMessage(null), 3000);

    } catch (err: any) {
      console.error("Update failed:", err.response?.data || err);
    }
  };

  return (
    <Drawer>
      <DrawerTrigger asChild>
        <Button className="bg-green-500 text-background w-full flex-1 hover:bg-green-500/30">Edit Profile</Button>
      </DrawerTrigger>

      <DrawerContent className="max-w-3xl mx-auto py-10">
        <DrawerHeader>
          <DrawerTitle className="text-center">Edit Profile</DrawerTitle>
        </DrawerHeader>

        {successMessage && (
          <div className="p-3 mb-4 text-green-800 bg-green-100 rounded">{successMessage}</div>
        )}

        <form onSubmit={handleSubmit} className="flex flex-col gap-4 p-6 bg-secondary rounded-xl">
          {/* User fields */}
          <Input
            type="email"
            placeholder="Email"
            value={formData.email}
            onChange={(e) => setFormData({ ...formData, email: e.target.value })}
          />
          <Input
            type="text"
            placeholder="Name"
            value={formData.name}
            onChange={(e) => setFormData({ ...formData, name: e.target.value })}
          />
          <Input
            type="text"
            placeholder="Contact"
            value={formData.contact}
            onChange={(e) => setFormData({ ...formData, contact: e.target.value })}
          />

          {/* Shipping Address */}
          <UserShippingAddressForm
            userId={user.id}
            existing={addressData}
            onSaved={(addr) => setAddressData(addr)}
          />

          <DrawerFooter className="flex gap-2 mt-4">
            <DrawerClose asChild>
              <Button variant="outline" className="flex-1">Cancel</Button>
            </DrawerClose>
            <Button type="submit" className="flex-1">Update &rarr;</Button>
          </DrawerFooter>
        </form>
      </DrawerContent>
    </Drawer>
  );
};

export default EditUser;



================================================================================
LOCATION: components\myUI\accordion.tsx
================================================================================

import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion"

export function AccordionDemo() {
  return (
    <Accordion type="single" collapsible className="w-full">
      <AccordionItem value="item-1">
        <AccordionTrigger>Is it accessible?</AccordionTrigger>
        <AccordionContent>
          Yes. It adheres to the WAI-ARIA design pattern.
        </AccordionContent>
      </AccordionItem>
      <AccordionItem value="item-2">
        <AccordionTrigger>Is it styled?</AccordionTrigger>
        <AccordionContent>
          Yes. It comes with default styles that matches the other
          components&apos; aesthetic.
        </AccordionContent>
      </AccordionItem>
      <AccordionItem value="item-3">
        <AccordionTrigger>Is it animated?</AccordionTrigger>
        <AccordionContent>
          Yes. It&apos;s animated by default, but you can disable it if you
          prefer.
        </AccordionContent>
      </AccordionItem>
    </Accordion>
  )
}



================================================================================
LOCATION: components\myUI\alertDialog.tsx
================================================================================

import {
    AlertDialog,
    AlertDialogAction,
    AlertDialogCancel,
    AlertDialogContent,
    AlertDialogDescription,
    AlertDialogFooter,
    AlertDialogHeader,
    AlertDialogTitle,
    AlertDialogTrigger,
  } from "@/components/ui/alert-dialog"
  import { Button } from "@/components/ui/button"
  
  export function AlertDialogDemo() {
    return (
      <AlertDialog>
        <AlertDialogTrigger asChild>
          <Button variant="outline">Show Dialog</Button>
        </AlertDialogTrigger>
        <AlertDialogContent>
          <AlertDialogHeader>
            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>
            <AlertDialogDescription>
              This action cannot be undone. This will permanently delete your
              account and remove your data from our servers.
            </AlertDialogDescription>
          </AlertDialogHeader>
          <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter>
        </AlertDialogContent>
      </AlertDialog>
    )
  }
  


================================================================================
LOCATION: components\myUI\badge.tsx
================================================================================

import { Badge } from "@/components/ui/badge"

export function BadgeDemo() {
  return <div>
    <Badge>Badge</Badge>
  </div>
}



================================================================================
LOCATION: components\myUI\breadcrumb.tsx
================================================================================

import {
    Breadcrumb,
    BreadcrumbEllipsis,
    BreadcrumbItem,
    BreadcrumbLink,
    BreadcrumbList,
    BreadcrumbPage,
    BreadcrumbSeparator,
  } from "@/components/ui/breadcrumb"
  import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuItem,
    DropdownMenuTrigger,
  } from "@/components/ui/dropdown-menu"
  
  export function BreadcrumbDemo() {
    return (
      <Breadcrumb>
        <BreadcrumbList>
          <BreadcrumbItem>
            <BreadcrumbLink href="/">Home</BreadcrumbLink>
          </BreadcrumbItem>
          <BreadcrumbSeparator />
          <BreadcrumbItem>
            <DropdownMenu>
              <DropdownMenuTrigger className="flex items-center gap-1">
                <BreadcrumbEllipsis className="h-4 w-4" />
                <span className="sr-only">Toggle menu</span>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="start">
                <DropdownMenuItem>Documentation</DropdownMenuItem>
                <DropdownMenuItem>Themes</DropdownMenuItem>
                <DropdownMenuItem>GitHub</DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </BreadcrumbItem>
          <BreadcrumbSeparator />
          <BreadcrumbItem>
            <BreadcrumbLink href="/docs/components">Components</BreadcrumbLink>
          </BreadcrumbItem>
          <BreadcrumbSeparator />
          <BreadcrumbItem>
            <BreadcrumbPage>Breadcrumb</BreadcrumbPage>
          </BreadcrumbItem>
        </BreadcrumbList>
      </Breadcrumb>
    )
  }
  


================================================================================
LOCATION: components\myUI\button.tsx
================================================================================

import { Button } from "@/components/ui/button"

export function ButtonDemo() {
  return <Button>Button</Button>
}



================================================================================
LOCATION: components\myUI\calendar.tsx
================================================================================

"use client"

import * as React from "react"

import { Calendar } from "@/components/ui/calendar"

export function CalendarDemo() {
  const [date, setDate] = React.useState<Date | undefined>(new Date())

  return (
    <Calendar
      mode="single"
      selected={date}
      onSelect={setDate}
      className="rounded-md border"
    />
  )
}



================================================================================
LOCATION: components\myUI\card.tsx
================================================================================

import * as React from "react"

import { Button } from "@/components/ui/button"
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select"

export function CardWithForm() {
  return (
    <Card className="w-[350px]">
      <CardHeader>
        <CardTitle>Create project Card</CardTitle>
        <CardDescription>Deploy your new project in one-click.</CardDescription>
      </CardHeader>
      <CardContent>
        <form>
          <div className="grid w-full items-center gap-4">
            <div className="flex flex-col space-y-1.5">
              <Label htmlFor="name">Name</Label>
              <Input id="name" placeholder="Name of your project" />
            </div>
            <div className="flex flex-col space-y-1.5">
              <Label htmlFor="framework">Framework</Label>
              <Select>
                <SelectTrigger id="framework">
                  <SelectValue placeholder="Select" />
                </SelectTrigger>
                <SelectContent position="popper">
                  <SelectItem value="next">Next.js</SelectItem>
                  <SelectItem value="sveltekit">SvelteKit</SelectItem>
                  <SelectItem value="astro">Astro</SelectItem>
                  <SelectItem value="nuxt">Nuxt.js</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>
        </form>
      </CardContent>
      <CardFooter className="flex justify-between">
        <Button variant="outline">Cancel</Button>
        <Button>Deploy</Button>
      </CardFooter>
    </Card>
  )
}



================================================================================
LOCATION: components\myUI\carousel.tsx
================================================================================

import * as React from "react"

import { Card, CardContent } from "@/components/ui/card"
import {
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselNext,
  CarouselPrevious,
} from "@/components/ui/carousel"

export function CarouselDemo() {
  return (
    <Carousel className="w-full max-w-xs">
      <CarouselContent>
        {Array.from({ length: 5 }).map((_, index) => (
          <CarouselItem key={index}>
            <div className="p-1">
              <Card>
                <CardContent className="flex aspect-square items-center justify-center p-6">
                  <span className="text-4xl font-semibold">{index + 1}</span>
                </CardContent>
              </Card>
            </div>
          </CarouselItem>
        ))}
      </CarouselContent>
      <CarouselPrevious />
      <CarouselNext />
    </Carousel>
  )
}



================================================================================
LOCATION: components\myUI\charts.tsx
================================================================================

"use client"

import * as React from "react"
import { Bar, BarChart, CartesianGrid, XAxis } from "recharts"

import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import {
  ChartConfig,
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
} from "@/components/ui/chart"

export const description = "An interactive bar chart"

const chartData = [
  { date: "2024-04-01", desktop: 222, mobile: 150 },
  { date: "2024-04-02", desktop: 97, mobile: 180 },
  { date: "2024-04-03", desktop: 167, mobile: 120 },
  { date: "2024-04-04", desktop: 242, mobile: 260 },
  { date: "2024-04-05", desktop: 373, mobile: 290 },
  { date: "2024-04-06", desktop: 301, mobile: 340 },
  { date: "2024-04-07", desktop: 245, mobile: 180 },
  { date: "2024-04-08", desktop: 409, mobile: 320 },
  { date: "2024-04-09", desktop: 59, mobile: 110 },
  { date: "2024-04-10", desktop: 261, mobile: 190 },
  { date: "2024-04-11", desktop: 327, mobile: 350 },
  { date: "2024-04-12", desktop: 292, mobile: 210 },
  { date: "2024-04-13", desktop: 342, mobile: 380 },
  { date: "2024-04-14", desktop: 137, mobile: 220 },
  { date: "2024-04-15", desktop: 120, mobile: 170 },
  { date: "2024-04-16", desktop: 138, mobile: 190 },
  { date: "2024-04-17", desktop: 446, mobile: 360 },
  { date: "2024-04-18", desktop: 364, mobile: 410 },
  { date: "2024-04-19", desktop: 243, mobile: 180 },
  { date: "2024-04-20", desktop: 89, mobile: 150 },
  { date: "2024-04-21", desktop: 137, mobile: 200 },
  { date: "2024-04-22", desktop: 224, mobile: 170 },
  { date: "2024-04-23", desktop: 138, mobile: 230 },
  { date: "2024-04-24", desktop: 387, mobile: 290 },
  { date: "2024-04-25", desktop: 215, mobile: 250 },
  { date: "2024-04-26", desktop: 75, mobile: 130 },
  { date: "2024-04-27", desktop: 383, mobile: 420 },
  { date: "2024-04-28", desktop: 122, mobile: 180 },
  { date: "2024-04-29", desktop: 315, mobile: 240 },
  { date: "2024-04-30", desktop: 454, mobile: 380 },
  { date: "2024-05-01", desktop: 165, mobile: 220 },
  { date: "2024-05-02", desktop: 293, mobile: 310 },
  { date: "2024-05-03", desktop: 247, mobile: 190 },
  { date: "2024-05-04", desktop: 385, mobile: 420 },
  { date: "2024-05-05", desktop: 481, mobile: 390 },
  { date: "2024-05-06", desktop: 498, mobile: 520 },
  { date: "2024-05-07", desktop: 388, mobile: 300 },
  { date: "2024-05-08", desktop: 149, mobile: 210 },
  { date: "2024-05-09", desktop: 227, mobile: 180 },
  { date: "2024-05-10", desktop: 293, mobile: 330 },
  { date: "2024-05-11", desktop: 335, mobile: 270 },
  { date: "2024-05-12", desktop: 197, mobile: 240 },
  { date: "2024-05-13", desktop: 197, mobile: 160 },
  { date: "2024-05-14", desktop: 448, mobile: 490 },
  { date: "2024-05-15", desktop: 473, mobile: 380 },
  { date: "2024-05-16", desktop: 338, mobile: 400 },
  { date: "2024-05-17", desktop: 499, mobile: 420 },
  { date: "2024-05-18", desktop: 315, mobile: 350 },
  { date: "2024-05-19", desktop: 235, mobile: 180 },
  { date: "2024-05-20", desktop: 177, mobile: 230 },
  { date: "2024-05-21", desktop: 82, mobile: 140 },
  { date: "2024-05-22", desktop: 81, mobile: 120 },
  { date: "2024-05-23", desktop: 252, mobile: 290 },
  { date: "2024-05-24", desktop: 294, mobile: 220 },
  { date: "2024-05-25", desktop: 201, mobile: 250 },
  { date: "2024-05-26", desktop: 213, mobile: 170 },
  { date: "2024-05-27", desktop: 420, mobile: 460 },
  { date: "2024-05-28", desktop: 233, mobile: 190 },
  { date: "2024-05-29", desktop: 78, mobile: 130 },
  { date: "2024-05-30", desktop: 340, mobile: 280 },
  { date: "2024-05-31", desktop: 178, mobile: 230 },
  { date: "2024-06-01", desktop: 178, mobile: 200 },
  { date: "2024-06-02", desktop: 470, mobile: 410 },
  { date: "2024-06-03", desktop: 103, mobile: 160 },
  { date: "2024-06-04", desktop: 439, mobile: 380 },
  { date: "2024-06-05", desktop: 88, mobile: 140 },
  { date: "2024-06-06", desktop: 294, mobile: 250 },
  { date: "2024-06-07", desktop: 323, mobile: 370 },
  { date: "2024-06-08", desktop: 385, mobile: 320 },
  { date: "2024-06-09", desktop: 438, mobile: 480 },
  { date: "2024-06-10", desktop: 155, mobile: 200 },
  { date: "2024-06-11", desktop: 92, mobile: 150 },
  { date: "2024-06-12", desktop: 492, mobile: 420 },
  { date: "2024-06-13", desktop: 81, mobile: 130 },
  { date: "2024-06-14", desktop: 426, mobile: 380 },
  { date: "2024-06-15", desktop: 307, mobile: 350 },
  { date: "2024-06-16", desktop: 371, mobile: 310 },
  { date: "2024-06-17", desktop: 475, mobile: 520 },
  { date: "2024-06-18", desktop: 107, mobile: 170 },
  { date: "2024-06-19", desktop: 341, mobile: 290 },
  { date: "2024-06-20", desktop: 408, mobile: 450 },
  { date: "2024-06-21", desktop: 169, mobile: 210 },
  { date: "2024-06-22", desktop: 317, mobile: 270 },
  { date: "2024-06-23", desktop: 480, mobile: 530 },
  { date: "2024-06-24", desktop: 132, mobile: 180 },
  { date: "2024-06-25", desktop: 141, mobile: 190 },
  { date: "2024-06-26", desktop: 434, mobile: 380 },
  { date: "2024-06-27", desktop: 448, mobile: 490 },
  { date: "2024-06-28", desktop: 149, mobile: 200 },
  { date: "2024-06-29", desktop: 103, mobile: 160 },
  { date: "2024-06-30", desktop: 446, mobile: 400 },
]

const chartConfig = {
  views: {
    label: "Page Views",
  },
  desktop: {
    label: "Desktop",
    color: "hsl(var(--chart-1))",
  },
  mobile: {
    label: "Mobile",
    color: "hsl(var(--chart-2))",
  },
} satisfies ChartConfig

export function ChartComponent() {
  const [activeChart, setActiveChart] =
    React.useState<keyof typeof chartConfig>("desktop")

  const total = React.useMemo(
    () => ({
      desktop: chartData.reduce((acc, curr) => acc + curr.desktop, 0),
      mobile: chartData.reduce((acc, curr) => acc + curr.mobile, 0),
    }),
    []
  )

  return (
    <Card className="max-w-4xl mx-auto">
      <CardHeader className="flex flex-col items-stretch space-y-0 border-b p-0 sm:flex-row">
        <div className="flex flex-1 flex-col justify-center gap-1 px-6 py-5 sm:py-6">
          <CardTitle>Bar Chart - Interactive</CardTitle>
          <CardDescription>
            Showing total visitors for the last 3 months
          </CardDescription>
        </div>
        <div className="flex">
          {["desktop", "mobile"].map((key) => {
            const chart = key as keyof typeof chartConfig
            return (
              <button
                key={chart}
                data-active={activeChart === chart}
                className="relative z-30 flex flex-1 flex-col justify-center gap-1 border-t px-6 py-4 text-left even:border-l data-[active=true]:bg-muted/50 sm:border-l sm:border-t-0 sm:px-8 sm:py-6"
                onClick={() => setActiveChart(chart)}
              >
                <span className="text-xs text-muted-foreground">
                  {chartConfig[chart].label}
                </span>
                <span className="text-lg font-bold leading-none sm:text-3xl">
                  {total[key as keyof typeof total].toLocaleString()}
                </span>
              </button>
            )
          })}
        </div>
      </CardHeader>
      <CardContent className="px-2 sm:p-6">
        <ChartContainer
          config={chartConfig}
          className="aspect-auto h-[250px] w-full"
        >
          <BarChart
            accessibilityLayer
            data={chartData}
            margin={{
              left: 12,
              right: 12,
            }}
          >
            <CartesianGrid vertical={false} />
            <XAxis
              dataKey="date"
              tickLine={false}
              axisLine={false}
              tickMargin={8}
              minTickGap={32}
              tickFormatter={(value) => {
                const date = new Date(value)
                return date.toLocaleDateString("en-US", {
                  month: "short",
                  day: "numeric",
                })
              }}
            />
            <ChartTooltip
              content={
                <ChartTooltipContent
                  className="w-[150px]"
                  nameKey="views"
                  labelFormatter={(value) => {
                    return new Date(value).toLocaleDateString("en-US", {
                      month: "short",
                      day: "numeric",
                      year: "numeric",
                    })
                  }}
                />
              }
            />
            <Bar dataKey={activeChart} fill={`var(--color-${activeChart})`} />
          </BarChart>
        </ChartContainer>
      </CardContent>
    </Card>
  )
}



================================================================================
LOCATION: components\myUI\checkbox.tsx
================================================================================

"use client"

import { Checkbox } from "@/components/ui/checkbox"

export function CheckboxDemo() {
  return (
    <div className="flex items-center space-x-2">
      <Checkbox id="terms" />
      <label
        htmlFor="terms"
        className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
      >
        Accept terms and conditions
      </label>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\collapsible.tsx
================================================================================

"use client"

import * as React from "react"
import { ChevronsUpDown, Plus, X } from "lucide-react"

import { Button } from "@/components/ui/button"
import {
  Collapsible,
  CollapsibleContent,
  CollapsibleTrigger,
} from "@/components/ui/collapsible"

export function CollapsibleDemo() {
  const [isOpen, setIsOpen] = React.useState(false)

  return (
    <Collapsible
      open={isOpen}
      onOpenChange={setIsOpen}
      className="w-[350px] space-y-2"
    >
      <div className="flex items-center justify-between space-x-4 px-4">
        <h4 className="text-sm font-semibold">
          @peduarte starred 3 repositories
        </h4>
        <CollapsibleTrigger asChild>
          <Button variant="ghost" size="sm" className="w-9 p-0">
            <ChevronsUpDown className="h-4 w-4" />
            <span className="sr-only">Toggle</span>
          </Button>
        </CollapsibleTrigger>
      </div>
      <div className="rounded-md border px-4 py-3 font-mono text-sm">
        @radix-ui/primitives
      </div>
      <CollapsibleContent className="space-y-2">
        <div className="rounded-md border px-4 py-3 font-mono text-sm">
          @radix-ui/colors
        </div>
        <div className="rounded-md border px-4 py-3 font-mono text-sm">
          @stitches/react
        </div>
      </CollapsibleContent>
    </Collapsible>
  )
}



================================================================================
LOCATION: components\myUI\combobox.tsx
================================================================================

"use client"

import * as React from "react"
import { Check, ChevronsUpDown } from "lucide-react"

import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
} from "@/components/ui/command"
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover"

const frameworks = [
  {
    value: "next.js",
    label: "Next.js",
  },
  {
    value: "sveltekit",
    label: "SvelteKit",
  },
  {
    value: "nuxt.js",
    label: "Nuxt.js",
  },
  {
    value: "remix",
    label: "Remix",
  },
  {
    value: "astro",
    label: "Astro",
  },
]

export function ComboboxDemo() {
  const [open, setOpen] = React.useState(false)
  const [value, setValue] = React.useState("")

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="outline"
          role="combobox"
          aria-expanded={open}
          className="w-[200px] justify-between"
        >
          {value
            ? frameworks.find((framework) => framework.value === value)?.label
            : "Select framework..."}
          <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-[200px] p-0">
        <Command>
          <CommandInput placeholder="Search framework..." />
          <CommandEmpty>No framework found.</CommandEmpty>
          <CommandGroup>
            {frameworks.map((framework) => (
              <CommandItem
                key={framework.value}
                value={framework.value}
                onSelect={(currentValue) => {
                  setValue(currentValue === value ? "" : currentValue)
                  setOpen(false)
                }}
              >
                <Check
                  className={cn(
                    "mr-2 h-4 w-4",
                    value === framework.value ? "opacity-100" : "opacity-0"
                  )}
                />
                {framework.label}
              </CommandItem>
            ))}
          </CommandGroup>
        </Command>
      </PopoverContent>
    </Popover>
  )
}



================================================================================
LOCATION: components\myUI\command.tsx
================================================================================

import {
    Calculator,
    Calendar,
    CreditCard,
    Settings,
    Smile,
    User,
  } from "lucide-react"
  
  import {
    Command,
    CommandEmpty,
    CommandGroup,
    CommandInput,
    CommandItem,
    CommandList,
    CommandSeparator,
    CommandShortcut,
  } from "@/components/ui/command"
  
  export function CommandDemo() {
    return (
      <Command className="rounded-lg border shadow-md">
        <CommandInput placeholder="Type a command or search..." />
        <CommandList>
          <CommandEmpty>No results found.</CommandEmpty>
          <CommandGroup heading="Suggestions">
            <CommandItem>
              <Calendar className="mr-2 h-4 w-4" />
              <span>Calendar</span>
            </CommandItem>
            <CommandItem>
              <Smile className="mr-2 h-4 w-4" />
              <span>Search Emoji</span>
            </CommandItem>
            <CommandItem>
              <Calculator className="mr-2 h-4 w-4" />
              <span>Calculator</span>
            </CommandItem>
          </CommandGroup>
          <CommandSeparator />
          <CommandGroup heading="Settings">
            <CommandItem>
              <User className="mr-2 h-4 w-4" />
              <span>Profile</span>
              <CommandShortcut>âŒ˜P</CommandShortcut>
            </CommandItem>
            <CommandItem>
              <CreditCard className="mr-2 h-4 w-4" />
              <span>Billing</span>
              <CommandShortcut>âŒ˜B</CommandShortcut>
            </CommandItem>
            <CommandItem>
              <Settings className="mr-2 h-4 w-4" />
              <span>Settings</span>
              <CommandShortcut>âŒ˜S</CommandShortcut>
            </CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
    )
  }
  


================================================================================
LOCATION: components\myUI\contextmenu.tsx
================================================================================

import {
    ContextMenu,
    ContextMenuCheckboxItem,
    ContextMenuContent,
    ContextMenuItem,
    ContextMenuLabel,
    ContextMenuRadioGroup,
    ContextMenuRadioItem,
    ContextMenuSeparator,
    ContextMenuShortcut,
    ContextMenuSub,
    ContextMenuSubContent,
    ContextMenuSubTrigger,
    ContextMenuTrigger,
  } from "@/components/ui/context-menu"
  
  export function ContextMenuDemo() {
    return (
      <ContextMenu>
        <ContextMenuTrigger className="flex h-[150px] w-[300px] items-center justify-center rounded-md border border-dashed text-sm">
          Right click here
        </ContextMenuTrigger>
        <ContextMenuContent className="w-64">
          <ContextMenuItem inset>
            Back
            <ContextMenuShortcut>âŒ˜[</ContextMenuShortcut>
          </ContextMenuItem>
          <ContextMenuItem inset disabled>
            Forward
            <ContextMenuShortcut>âŒ˜]</ContextMenuShortcut>
          </ContextMenuItem>
          <ContextMenuItem inset>
            Reload
            <ContextMenuShortcut>âŒ˜R</ContextMenuShortcut>
          </ContextMenuItem>
          <ContextMenuSub>
            <ContextMenuSubTrigger inset>More Tools</ContextMenuSubTrigger>
            <ContextMenuSubContent className="w-48">
              <ContextMenuItem>
                Save Page As...
                <ContextMenuShortcut>â‡§âŒ˜S</ContextMenuShortcut>
              </ContextMenuItem>
              <ContextMenuItem>Create Shortcut...</ContextMenuItem>
              <ContextMenuItem>Name Window...</ContextMenuItem>
              <ContextMenuSeparator />
              <ContextMenuItem>Developer Tools</ContextMenuItem>
            </ContextMenuSubContent>
          </ContextMenuSub>
          <ContextMenuSeparator />
          <ContextMenuCheckboxItem checked>
            Show Bookmarks Bar
            <ContextMenuShortcut>âŒ˜â‡§B</ContextMenuShortcut>
          </ContextMenuCheckboxItem>
          <ContextMenuCheckboxItem>Show Full URLs</ContextMenuCheckboxItem>
          <ContextMenuSeparator />
          <ContextMenuRadioGroup value="pedro">
            <ContextMenuLabel inset>People</ContextMenuLabel>
            <ContextMenuSeparator />
            <ContextMenuRadioItem value="pedro">
              Pedro Duarte
            </ContextMenuRadioItem>
            <ContextMenuRadioItem value="colm">Colm Tuite</ContextMenuRadioItem>
          </ContextMenuRadioGroup>
        </ContextMenuContent>
      </ContextMenu>
    )
  }
  


================================================================================
LOCATION: components\myUI\datatable.tsx
================================================================================

"use client"

import * as React from "react"
import {
  ColumnDef,
  ColumnFiltersState,
  SortingState,
  VisibilityState,
  flexRender,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  useReactTable,
} from "@tanstack/react-table"
import { ArrowUpDown, ChevronDown, MoreHorizontal } from "lucide-react"

import { Button } from "@/components/ui/button"
import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import { Input } from "@/components/ui/input"
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table"

const data: Payment[] = [
  {
    id: "m5gr84i9",
    amount: 316,
    status: "success",
    email: "ken99@yahoo.com",
  },
  {
    id: "3u1reuv4",
    amount: 242,
    status: "success",
    email: "Abe45@gmail.com",
  },
  {
    id: "derv1ws0",
    amount: 837,
    status: "processing",
    email: "Monserrat44@gmail.com",
  },
  {
    id: "5kma53ae",
    amount: 874,
    status: "success",
    email: "Silas22@gmail.com",
  },
  {
    id: "bhqecj4p",
    amount: 721,
    status: "failed",
    email: "carmella@hotmail.com",
  },
]

export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
          // type checked state changed
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]

export function DataTableDemo() {
  const [sorting, setSorting] = React.useState<SortingState>([])
  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>(
    []
  )
  const [columnVisibility, setColumnVisibility] =
    React.useState<VisibilityState>({})
  const [rowSelection, setRowSelection] = React.useState({})

  const table = useReactTable({
    data,
    columns,
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    getCoreRowModel: getCoreRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    onColumnVisibilityChange: setColumnVisibility,
    onRowSelectionChange: setRowSelection,
    state: {
      sorting,
      columnFilters,
      columnVisibility,
      rowSelection,
    },
  })

  return (
    <div className="w-full">
      <div className="flex items-center py-4">
        <Input
          placeholder="Filter emails..."
          value={(table.getColumn("email")?.getFilterValue() as string) ?? ""}
          onChange={(event) =>
            table.getColumn("email")?.setFilterValue(event.target.value)
          }
          className="max-w-sm"
        />
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="outline" className="ml-auto">
              Columns <ChevronDown className="ml-2 h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            {table
              .getAllColumns()
              .filter((column) => column.getCanHide())
              .map((column) => {
                return (
                  <DropdownMenuCheckboxItem
                    key={column.id}
                    className="capitalize"
                    checked={column.getIsVisible()}
                    onCheckedChange={(value) =>
                      column.toggleVisibility(!!value)
                    }
                  >
                    {column.id}
                  </DropdownMenuCheckboxItem>
                )
              })}
          </DropdownMenuContent>
        </DropdownMenu>
      </div>
      <div className="rounded-md border">
        <Table>
          <TableHeader>
            {table.getHeaderGroups().map((headerGroup) => (
              <TableRow key={headerGroup.id}>
                {headerGroup.headers.map((header) => {
                  return (
                    <TableHead key={header.id}>
                      {header.isPlaceholder
                        ? null
                        : flexRender(
                            header.column.columnDef.header,
                            header.getContext()
                          )}
                    </TableHead>
                  )
                })}
              </TableRow>
            ))}
          </TableHeader>
          <TableBody>
            {table.getRowModel().rows?.length ? (
              table.getRowModel().rows.map((row) => (
                <TableRow
                  key={row.id}
                  data-state={row.getIsSelected() && "selected"}
                >
                  {row.getVisibleCells().map((cell) => (
                    <TableCell key={cell.id}>
                      {flexRender(
                        cell.column.columnDef.cell,
                        cell.getContext()
                      )}
                    </TableCell>
                  ))}
                </TableRow>
              ))
            ) : (
              <TableRow>
                <TableCell
                  colSpan={columns.length}
                  className="h-24 text-center"
                >
                  No results.
                </TableCell>
              </TableRow>
            )}
          </TableBody>
        </Table>
      </div>
      <div className="flex items-center justify-end space-x-2 py-4">
        <div className="flex-1 text-sm text-muted-foreground">
          {table.getFilteredSelectedRowModel().rows.length} of{" "}
          {table.getFilteredRowModel().rows.length} row(s) selected.
        </div>
        <div className="space-x-2">
          <Button
            variant="outline"
            size="sm"
            onClick={() => table.previousPage()}
            disabled={!table.getCanPreviousPage()}
          >
            Previous
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={() => table.nextPage()}
            disabled={!table.getCanNextPage()}
          >
            Next
          </Button>
        </div>
      </div>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\datepicker.tsx
================================================================================

"use client"

import * as React from "react"
import { format } from "date-fns"
import { Calendar as CalendarIcon } from "lucide-react"

import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Calendar } from "@/components/ui/calendar"
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover"

export function DatePickerDemo() {
  const [date, setDate] = React.useState<Date>()

  return (
    <Popover>
      <PopoverTrigger asChild>
        <Button
          variant={"outline"}
          className={cn(
            "w-[280px] justify-start text-left font-normal",
            !date && "text-muted-foreground"
          )}
        >
          <CalendarIcon className="mr-2 h-4 w-4" />
          {date ? format(date, "PPP") : <span>Pick a date</span>}
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-auto p-0">
        <Calendar
          mode="single"
          selected={date}
          onSelect={setDate}
          initialFocus
        />
      </PopoverContent>
    </Popover>
  )
}



================================================================================
LOCATION: components\myUI\dialog.tsx
================================================================================

import { Button } from "@/components/ui/button"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"

export function DialogDemo() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline">Edit Profile</Button>
      </DialogTrigger>
      <DialogContent className="sm:max-w-[425px]">
        <DialogHeader>
          <DialogTitle>Edit profile</DialogTitle>
          <DialogDescription>
            Make changes to your profile here. Click save when you're done.
          </DialogDescription>
        </DialogHeader>
        <div className="grid gap-4 py-4">
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="name" className="text-right">
              Name
            </Label>
            <Input
              id="name"
              defaultValue="Pedro Duarte"
              className="col-span-3"
            />
          </div>
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="username" className="text-right">
              Username
            </Label>
            <Input
              id="username"
              defaultValue="@peduarte"
              className="col-span-3"
            />
          </div>
        </div>
        <DialogFooter>
          <Button type="submit">Save changes</Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}



================================================================================
LOCATION: components\myUI\drawer.tsx
================================================================================

import * as React from "react"
import { Minus, Plus } from "lucide-react"
import { Bar, BarChart, ResponsiveContainer } from "recharts"

import { Button } from "@/components/ui/button"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

const data = [
  {
    goal: 400,
  },
  {
    goal: 300,
  },
  {
    goal: 200,
  },
  {
    goal: 300,
  },
  {
    goal: 200,
  },
  {
    goal: 278,
  },
  {
    goal: 189,
  },
  {
    goal: 239,
  },
  {
    goal: 300,
  },
  {
    goal: 200,
  },
  {
    goal: 278,
  },
  {
    goal: 189,
  },
  {
    goal: 349,
  },
]

export function DrawerDemo() {
  const [goal, setGoal] = React.useState(350)

  function onClick(adjustment: number) {
    setGoal(Math.max(200, Math.min(400, goal + adjustment)))
  }

  return (
    <Drawer>
      <DrawerTrigger asChild>
        <Button variant="outline">Open Drawer</Button>
      </DrawerTrigger>
      <DrawerContent>
        <div className="mx-auto w-full max-w-sm">
          <DrawerHeader>
            <DrawerTitle>Move Goal</DrawerTitle>
            <DrawerDescription>Set your daily activity goal.</DrawerDescription>
          </DrawerHeader>
          <div className="p-4 pb-0">
            <div className="flex items-center justify-center space-x-2">
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8 shrink-0 rounded-full"
                onClick={() => onClick(-10)}
                disabled={goal <= 200}
              >
                <Minus className="h-4 w-4" />
                <span className="sr-only">Decrease</span>
              </Button>
              <div className="flex-1 text-center">
                <div className="text-7xl font-bold tracking-tighter">
                  {goal}
                </div>
                <div className="text-[0.70rem] uppercase text-muted-foreground">
                  Calories/day
                </div>
              </div>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8 shrink-0 rounded-full"
                onClick={() => onClick(10)}
                disabled={goal >= 400}
              >
                <Plus className="h-4 w-4" />
                <span className="sr-only">Increase</span>
              </Button>
            </div>
            <div className="mt-3 h-[120px]">
              <ResponsiveContainer width="100%" height="100%">
                <BarChart data={data}>
                  <Bar
                    dataKey="goal"
                    style={
                      {
                        fill: "hsl(var(--foreground))",
                        opacity: 0.9,
                      } as React.CSSProperties
                    }
                  />
                </BarChart>
              </ResponsiveContainer>
            </div>
          </div>
          <DrawerFooter>
            <Button>Submit</Button>
            <DrawerClose asChild>
              <Button variant="outline">Cancel</Button>
            </DrawerClose>
          </DrawerFooter>
        </div>
      </DrawerContent>
    </Drawer>
  )
}



================================================================================
LOCATION: components\myUI\dropDownMenu.tsx
================================================================================

import {
    Cloud,
    CreditCard,
    Github,
    Keyboard,
    LifeBuoy,
    LogOut,
    Mail,
    MessageSquare,
    Plus,
    PlusCircle,
    Settings,
    User,
    UserPlus,
    Users,
  } from "lucide-react"
  
  import { Button } from "@/components/ui/button"
  import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuGroup,
    DropdownMenuItem,
    DropdownMenuLabel,
    DropdownMenuPortal,
    DropdownMenuSeparator,
    DropdownMenuShortcut,
    DropdownMenuSub,
    DropdownMenuSubContent,
    DropdownMenuSubTrigger,
    DropdownMenuTrigger,
  } from "@/components/ui/dropdown-menu"
  
  export function DropdownMenuDemo() {
    return (
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button variant="outline">Open</Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent className="w-56">
          <DropdownMenuLabel>My Account</DropdownMenuLabel>
          <DropdownMenuSeparator />
          <DropdownMenuGroup>
            <DropdownMenuItem>
              <User className="mr-2 h-4 w-4" />
              <span>Profile</span>
              <DropdownMenuShortcut>â‡§âŒ˜P</DropdownMenuShortcut>
            </DropdownMenuItem>
            <DropdownMenuItem>
              <CreditCard className="mr-2 h-4 w-4" />
              <span>Billing</span>
              <DropdownMenuShortcut>âŒ˜B</DropdownMenuShortcut>
            </DropdownMenuItem>
            <DropdownMenuItem>
              <Settings className="mr-2 h-4 w-4" />
              <span>Settings</span>
              <DropdownMenuShortcut>âŒ˜S</DropdownMenuShortcut>
            </DropdownMenuItem>
            <DropdownMenuItem>
              <Keyboard className="mr-2 h-4 w-4" />
              <span>Keyboard shortcuts</span>
              <DropdownMenuShortcut>âŒ˜K</DropdownMenuShortcut>
            </DropdownMenuItem>
          </DropdownMenuGroup>
          <DropdownMenuSeparator />
          <DropdownMenuGroup>
            <DropdownMenuItem>
              <Users className="mr-2 h-4 w-4" />
              <span>Team</span>
            </DropdownMenuItem>
            <DropdownMenuSub>
              <DropdownMenuSubTrigger>
                <UserPlus className="mr-2 h-4 w-4" />
                <span>Invite users</span>
              </DropdownMenuSubTrigger>
              <DropdownMenuPortal>
                <DropdownMenuSubContent>
                  <DropdownMenuItem>
                    <Mail className="mr-2 h-4 w-4" />
                    <span>Email</span>
                  </DropdownMenuItem>
                  <DropdownMenuItem>
                    <MessageSquare className="mr-2 h-4 w-4" />
                    <span>Message</span>
                  </DropdownMenuItem>
                  <DropdownMenuSeparator />
                  <DropdownMenuItem>
                    <PlusCircle className="mr-2 h-4 w-4" />
                    <span>More...</span>
                  </DropdownMenuItem>
                </DropdownMenuSubContent>
              </DropdownMenuPortal>
            </DropdownMenuSub>
            <DropdownMenuItem>
              <Plus className="mr-2 h-4 w-4" />
              <span>New Team</span>
              <DropdownMenuShortcut>âŒ˜+T</DropdownMenuShortcut>
            </DropdownMenuItem>
          </DropdownMenuGroup>
          <DropdownMenuSeparator />
          <DropdownMenuItem>
            <Github className="mr-2 h-4 w-4" />
            <span>GitHub</span>
          </DropdownMenuItem>
          <DropdownMenuItem>
            <LifeBuoy className="mr-2 h-4 w-4" />
            <span>Support</span>
          </DropdownMenuItem>
          <DropdownMenuItem disabled>
            <Cloud className="mr-2 h-4 w-4" />
            <span>API</span>
          </DropdownMenuItem>
          <DropdownMenuSeparator />
          <DropdownMenuItem>
            <LogOut className="mr-2 h-4 w-4" />
            <span>Log out</span>
            <DropdownMenuShortcut>â‡§âŒ˜Q</DropdownMenuShortcut>
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    )
  }
  


================================================================================
LOCATION: components\myUI\input.tsx
================================================================================

import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"

export function InputWithLabel() {
  return (
    <div className="grid w-full max-w-sm items-center gap-1.5">
      <Label htmlFor="email">Email</Label>
      <Input type="email" id="email" placeholder="Email" />
    </div>
  )
}



================================================================================
LOCATION: components\myUI\label.tsx
================================================================================

import { Checkbox } from "@/components/ui/checkbox"
import { Label } from "@/components/ui/label"

export function LabelDemo() {
  return (
    <div>
      <div className="flex items-center space-x-2">
        <Checkbox id="terms" />
        <Label htmlFor="terms">Accept terms and conditions</Label>
      </div>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\menubar.tsx
================================================================================

import {
    Menubar,
    MenubarCheckboxItem,
    MenubarContent,
    MenubarItem,
    MenubarMenu,
    MenubarRadioGroup,
    MenubarRadioItem,
    MenubarSeparator,
    MenubarShortcut,
    MenubarSub,
    MenubarSubContent,
    MenubarSubTrigger,
    MenubarTrigger,
  } from "@/components/ui/menubar"
  
  export function MenubarDemo() {
    return (
      <Menubar>
        <MenubarMenu>
          <MenubarTrigger>File</MenubarTrigger>
          <MenubarContent>
            <MenubarItem>
              New Tab <MenubarShortcut>âŒ˜T</MenubarShortcut>
            </MenubarItem>
            <MenubarItem>
              New Window <MenubarShortcut>âŒ˜N</MenubarShortcut>
            </MenubarItem>
            <MenubarItem disabled>New Incognito Window</MenubarItem>
            <MenubarSeparator />
            <MenubarSub>
              <MenubarSubTrigger>Share</MenubarSubTrigger>
              <MenubarSubContent>
                <MenubarItem>Email link</MenubarItem>
                <MenubarItem>Messages</MenubarItem>
                <MenubarItem>Notes</MenubarItem>
              </MenubarSubContent>
            </MenubarSub>
            <MenubarSeparator />
            <MenubarItem>
              Print... <MenubarShortcut>âŒ˜P</MenubarShortcut>
            </MenubarItem>
          </MenubarContent>
        </MenubarMenu>
        <MenubarMenu>
          <MenubarTrigger>Edit</MenubarTrigger>
          <MenubarContent>
            <MenubarItem>
              Undo <MenubarShortcut>âŒ˜Z</MenubarShortcut>
            </MenubarItem>
            <MenubarItem>
              Redo <MenubarShortcut>â‡§âŒ˜Z</MenubarShortcut>
            </MenubarItem>
            <MenubarSeparator />
            <MenubarSub>
              <MenubarSubTrigger>Find</MenubarSubTrigger>
              <MenubarSubContent>
                <MenubarItem>Search the web</MenubarItem>
                <MenubarSeparator />
                <MenubarItem>Find...</MenubarItem>
                <MenubarItem>Find Next</MenubarItem>
                <MenubarItem>Find Previous</MenubarItem>
              </MenubarSubContent>
            </MenubarSub>
            <MenubarSeparator />
            <MenubarItem>Cut</MenubarItem>
            <MenubarItem>Copy</MenubarItem>
            <MenubarItem>Paste</MenubarItem>
          </MenubarContent>
        </MenubarMenu>
        <MenubarMenu>
          <MenubarTrigger>View</MenubarTrigger>
          <MenubarContent>
            <MenubarCheckboxItem>Always Show Bookmarks Bar</MenubarCheckboxItem>
            <MenubarCheckboxItem checked>
              Always Show Full URLs
            </MenubarCheckboxItem>
            <MenubarSeparator />
            <MenubarItem inset>
              Reload <MenubarShortcut>âŒ˜R</MenubarShortcut>
            </MenubarItem>
            <MenubarItem disabled inset>
              Force Reload <MenubarShortcut>â‡§âŒ˜R</MenubarShortcut>
            </MenubarItem>
            <MenubarSeparator />
            <MenubarItem inset>Toggle Fullscreen</MenubarItem>
            <MenubarSeparator />
            <MenubarItem inset>Hide Sidebar</MenubarItem>
          </MenubarContent>
        </MenubarMenu>
        <MenubarMenu>
          <MenubarTrigger>Profiles</MenubarTrigger>
          <MenubarContent>
            <MenubarRadioGroup value="benoit">
              <MenubarRadioItem value="andy">Andy</MenubarRadioItem>
              <MenubarRadioItem value="benoit">Benoit</MenubarRadioItem>
              <MenubarRadioItem value="Luis">Luis</MenubarRadioItem>
            </MenubarRadioGroup>
            <MenubarSeparator />
            <MenubarItem inset>Edit...</MenubarItem>
            <MenubarSeparator />
            <MenubarItem inset>Add Profile...</MenubarItem>
          </MenubarContent>
        </MenubarMenu>
      </Menubar>
    )
  }
  


================================================================================
LOCATION: components\myUI\pagination.tsx
================================================================================

import {
    Pagination,
    PaginationContent,
    PaginationEllipsis,
    PaginationItem,
    PaginationLink,
    PaginationNext,
    PaginationPrevious,
  } from "@/components/ui/pagination"
  
  export function PaginationDemo() {
    return (
      <Pagination>
        <PaginationContent>
          <PaginationItem>
            <PaginationPrevious href="#" />
          </PaginationItem>
          <PaginationItem>
            <PaginationLink href="#">1</PaginationLink>
          </PaginationItem>
          <PaginationItem>
            <PaginationLink href="#" isActive>
              2
            </PaginationLink>
          </PaginationItem>
          <PaginationItem>
            <PaginationLink href="#">3</PaginationLink>
          </PaginationItem>
          <PaginationItem>
            <PaginationEllipsis />
          </PaginationItem>
          <PaginationItem>
            <PaginationNext href="#" />
          </PaginationItem>
        </PaginationContent>
      </Pagination>
    )
  }
  


================================================================================
LOCATION: components\myUI\popover.tsx
================================================================================

import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover"

export function PopoverDemo() {
  return (
    <Popover>
      <PopoverTrigger asChild>
        <Button variant="outline">Open popover</Button>
      </PopoverTrigger>
      <PopoverContent className="w-80">
        <div className="grid gap-4">
          <div className="space-y-2">
            <h4 className="font-medium leading-none">Dimensions</h4>
            <p className="text-sm text-muted-foreground">
              Set the dimensions for the layer.
            </p>
          </div>
          <div className="grid gap-2">
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="width">Width</Label>
              <Input
                id="width"
                defaultValue="100%"
                className="col-span-2 h-8"
              />
            </div>
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="maxWidth">Max. width</Label>
              <Input
                id="maxWidth"
                defaultValue="300px"
                className="col-span-2 h-8"
              />
            </div>
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="height">Height</Label>
              <Input
                id="height"
                defaultValue="25px"
                className="col-span-2 h-8"
              />
            </div>
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="maxHeight">Max. height</Label>
              <Input
                id="maxHeight"
                defaultValue="none"
                className="col-span-2 h-8"
              />
            </div>
          </div>
        </div>
      </PopoverContent>
    </Popover>
  )
}



================================================================================
LOCATION: components\myUI\progressbar.tsx
================================================================================

"use client"

import * as React from "react"

import { Progress } from "@/components/ui/progress"

export function ProgressDemo() {
  const [progress, setProgress] = React.useState(13)

  React.useEffect(() => {
    const timer = setTimeout(() => setProgress(66), 500)
    return () => clearTimeout(timer)
  }, [])

  return <Progress value={progress} className="w-[60%]" />
}



================================================================================
LOCATION: components\myUI\radiogroup.tsx
================================================================================

import { Label } from "@/components/ui/label"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"

export function RadioGroupDemo() {
  return (
    <RadioGroup defaultValue="comfortable">
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="default" id="r1" />
        <Label htmlFor="r1">Default</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="comfortable" id="r2" />
        <Label htmlFor="r2">Comfortable</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="compact" id="r3" />
        <Label htmlFor="r3">Compact</Label>
      </div>
    </RadioGroup>
  )
}



================================================================================
LOCATION: components\myUI\resizable.tsx
================================================================================

import {
  ResizableHandle,
  ResizablePanel,
  ResizablePanelGroup,
} from "@/components/ui/resizable"

export function ResizableDemo() {
  return (
    <ResizablePanelGroup
      direction="horizontal"
      className="max-w-md rounded-lg border"
    >
      <ResizablePanel defaultSize={50}>
        <div className="flex h-[200px] items-center justify-center p-6">
          <span className="font-semibold">One</span>
        </div>
      </ResizablePanel>
      <ResizableHandle />
      <ResizablePanel defaultSize={50}>
        <ResizablePanelGroup direction="vertical">
          <ResizablePanel defaultSize={25}>
            <div className="flex h-full items-center justify-center p-6">
              <span className="font-semibold">Two</span>
            </div>
          </ResizablePanel>
          <ResizableHandle />
          <ResizablePanel defaultSize={75}>
            <div className="flex h-full items-center justify-center p-6">
              <span className="font-semibold">Three</span>
            </div>
          </ResizablePanel>
        </ResizablePanelGroup>
      </ResizablePanel>
    </ResizablePanelGroup>
  )
}



================================================================================
LOCATION: components\myUI\scroll-area.tsx
================================================================================

import * as React from "react"

import { ScrollArea } from "@/components/ui/scroll-area"
import { Separator } from "@/components/ui/separator"

const tags = Array.from({ length: 50 }).map(
  (_, i, a) => `v1.2.0-beta.${a.length - i}`
)

export function ScrollAreaDemo() {
  return (
    <ScrollArea className="h-72 w-48 rounded-md border">
      <div className="p-4">
        <h4 className="mb-4 text-sm font-medium leading-none">Tags</h4>
        {tags.map((tag) => (
          <>
            <div key={tag} className="text-sm">
              {tag}
            </div>
            <Separator className="my-2" />
          </>
        ))}
      </div>
    </ScrollArea>
  )
}



================================================================================
LOCATION: components\myUI\select.tsx
================================================================================

import * as React from "react"

import {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select"

export function SelectDemo() {
  return (
    <Select>
      <SelectTrigger className="w-[180px]">
        <SelectValue placeholder="Select a fruit" />
      </SelectTrigger>
      <SelectContent>
        <SelectGroup>
          <SelectLabel>Fruits</SelectLabel>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
          <SelectItem value="blueberry">Blueberry</SelectItem>
          <SelectItem value="grapes">Grapes</SelectItem>
          <SelectItem value="pineapple">Pineapple</SelectItem>
        </SelectGroup>
      </SelectContent>
    </Select>
  )
}



================================================================================
LOCATION: components\myUI\separator.tsx
================================================================================

import { Separator } from "@/components/ui/separator"

export function SeparatorDemo() {
  return (
    <div>
      <div className="space-y-1">
        <h4 className="text-sm font-medium leading-none">Radix Primitives</h4>
        <p className="text-sm text-muted-foreground">
          An open-source UI component library.
        </p>
      </div>
      <Separator className="my-4" />
      <div className="flex h-5 items-center space-x-4 text-sm">
        <div>Blog</div>
        <Separator orientation="vertical" />
        <div>Docs</div>
        <Separator orientation="vertical" />
        <div>Source</div>
      </div>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\sheet.tsx
================================================================================

import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Sheet,
  SheetClose,
  SheetContent,
  SheetDescription,
  SheetFooter,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet"

export function SheetDemo() {
  return (
    <Sheet>
      <SheetTrigger asChild>
        <Button variant="outline">Open</Button>
      </SheetTrigger>
      <SheetContent>
        <SheetHeader>
          <SheetTitle>Edit profile</SheetTitle>
          <SheetDescription>
            Make changes to your profile here. Click save when you're done.
          </SheetDescription>
        </SheetHeader>
        <div className="grid gap-4 py-4">
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="name" className="text-right">
              Name
            </Label>
            <Input id="name" value="Pedro Duarte" className="col-span-3" />
          </div>
          <div className="grid grid-cols-4 items-center gap-4">
            <Label htmlFor="username" className="text-right">
              Username
            </Label>
            <Input id="username" value="@peduarte" className="col-span-3" />
          </div>
        </div>
        <SheetFooter>
          <SheetClose asChild>
            <Button type="submit">Save changes</Button>
          </SheetClose>
        </SheetFooter>
      </SheetContent>
    </Sheet>
  )
}



================================================================================
LOCATION: components\myUI\sidebar.tsx
================================================================================

import { Calendar, ChevronDown, ChevronUp, Home, Inbox, Search, Settings } from "lucide-react"

import {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  useSidebar
} from "@/components/ui/sidebar"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "../ui/dropdown-menu"

// Menu items.
const items = [
  {
    title: "Home",
    url: "#",
    icon: Home,
  },
  {
    title: "Inbox",
    url: "#",
    icon: Inbox,
  },
  {
    title: "Calendar",
    url: "#",
    icon: Calendar,
  },
  {
    title: "Search",
    url: "#",
    icon: Search,
  },
  {
    title: "Settings",
    url: "#",
    icon: Settings,
  },
]

export function AppSidebar() {
    const {
        state,
        open,
        setOpen,
        openMobile,
        setOpenMobile,
        isMobile,
        toggleSidebar,
      } = useSidebar()

  return (
    <Sidebar side="left">
        <SidebarHeader>
            <SidebarMenu>
            <SidebarMenuItem>
                <DropdownMenu>
                <DropdownMenuTrigger asChild>
                    <SidebarMenuButton>
                    Select Workspace
                    <ChevronDown className="ml-auto" />
                    </SidebarMenuButton>
                </DropdownMenuTrigger>
                <DropdownMenuContent className="w-[--radix-popper-anchor-width]">
                    <DropdownMenuItem>
                    <span>Acme Inc</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem>
                    <span>Acme Corp.</span>
                    </DropdownMenuItem>
                </DropdownMenuContent>
                </DropdownMenu>
            </SidebarMenuItem>
            </SidebarMenu>
        </SidebarHeader>
      <SidebarContent>
        <SidebarGroup>
          <SidebarGroupLabel>Application</SidebarGroupLabel>
          <SidebarGroupContent>
            <SidebarMenu>
              {items.map((item) => (
                <SidebarMenuItem key={item.title}>
                  <SidebarMenuButton asChild>
                    <a href={item.url}>
                      <item.icon />
                      <span>{item.title}</span>
                    </a>
                  </SidebarMenuButton>
                </SidebarMenuItem>
              ))}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>
      </SidebarContent>
      <SidebarFooter>
          <SidebarMenu>
            <SidebarMenuItem>
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <SidebarMenuButton>
                    {/* <User2 /> */}
                     Username
                    <ChevronUp className="ml-auto" />
                  </SidebarMenuButton>
                </DropdownMenuTrigger>
                <DropdownMenuContent
                  side="top"
                  className="w-[--radix-popper-anchor-width]"
                >
                  <DropdownMenuItem>
                    <span>Account</span>
                  </DropdownMenuItem>
                  <DropdownMenuItem>
                    <span>Billing</span>
                  </DropdownMenuItem>
                  <DropdownMenuItem>
                    <span>Sign out</span>
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            </SidebarMenuItem>
          </SidebarMenu>
        </SidebarFooter>
    </Sidebar>
  )
}



================================================================================
LOCATION: components\myUI\skeleton.tsx
================================================================================

import { Skeleton } from "@/components/ui/skeleton"

export function SkeletonDemo() {
  return (
    <div className="flex items-center space-x-4">
      <Skeleton className="h-12 w-12 rounded-full" />
      <div className="space-y-2">
        <Skeleton className="h-4 w-[250px]" />
        <Skeleton className="h-4 w-[200px]" />
      </div>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\slider.tsx
================================================================================

import { cn } from "@/lib/utils"
import { Slider } from "@/components/ui/slider"

type SliderProps = React.ComponentProps<typeof Slider>

export function SliderDemo({ className, ...props }: SliderProps) {
  return (
    <Slider
      defaultValue={[50]}
      max={100}
      step={1}
      className={cn("w-[60%]", className)}
      {...props}
    />
  )
}



================================================================================
LOCATION: components\myUI\sonner.tsx
================================================================================

import { toast } from "sonner"

import { Button } from "@/components/ui/button"

export function SonnerDemo() {
  return (
    <Button
      variant="outline"
      onClick={() =>
        toast("Event has been created", {
          description: "Sunday, December 03, 2023 at 9:00 AM",
          action: {
            label: "Undo",
            onClick: () => console.log("Undo"),
          },
        })
      }
    >
      Show Toast
    </Button>
  )
}



================================================================================
LOCATION: components\myUI\switch.tsx
================================================================================

import { Label } from "@/components/ui/label"
import { Switch } from "@/components/ui/switch"

export function SwitchDemo() {
  return (
    <div className="flex items-center space-x-2">
      <Switch id="airplane-mode" />
      <Label htmlFor="airplane-mode">Airplane Mode</Label>
    </div>
  )
}



================================================================================
LOCATION: components\myUI\table.tsx
================================================================================

import {
    Table,
    TableBody,
    TableCaption,
    TableCell,
    TableFooter,
    TableHead,
    TableHeader,
    TableRow,
  } from "@/components/ui/table"
  
  const invoices = [
    {
      invoice: "INV001",
      paymentStatus: "Paid",
      totalAmount: "$250.00",
      paymentMethod: "Credit Card",
    },
    {
      invoice: "INV002",
      paymentStatus: "Pending",
      totalAmount: "$150.00",
      paymentMethod: "PayPal",
    },
    {
      invoice: "INV003",
      paymentStatus: "Unpaid",
      totalAmount: "$350.00",
      paymentMethod: "Bank Transfer",
    },
    {
      invoice: "INV004",
      paymentStatus: "Paid",
      totalAmount: "$450.00",
      paymentMethod: "Credit Card",
    },
    {
      invoice: "INV005",
      paymentStatus: "Paid",
      totalAmount: "$550.00",
      paymentMethod: "PayPal",
    },
    {
      invoice: "INV006",
      paymentStatus: "Pending",
      totalAmount: "$200.00",
      paymentMethod: "Bank Transfer",
    },
    {
      invoice: "INV007",
      paymentStatus: "Unpaid",
      totalAmount: "$300.00",
      paymentMethod: "Credit Card",
    },
  ]
  
  export function TableDemo() {
    return (
      <Table>
        <TableCaption>A list of your recent invoices.</TableCaption>
        <TableHeader>
          <TableRow>
            <TableHead className="w-[100px]">Invoice</TableHead>
            <TableHead>Status</TableHead>
            <TableHead>Method</TableHead>
            <TableHead className="text-right">Amount</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {invoices.map((invoice) => (
            <TableRow key={invoice.invoice}>
              <TableCell className="font-medium">{invoice.invoice}</TableCell>
              <TableCell>{invoice.paymentStatus}</TableCell>
              <TableCell>{invoice.paymentMethod}</TableCell>
              <TableCell className="text-right">{invoice.totalAmount}</TableCell>
            </TableRow>
          ))}
        </TableBody>
        <TableFooter>
          <TableRow>
            <TableCell colSpan={3}>Total</TableCell>
            <TableCell className="text-right">$2,500.00</TableCell>
          </TableRow>
        </TableFooter>
      </Table>
    )
  }
  


================================================================================
LOCATION: components\myUI\tabs.tsx
================================================================================

import { Button } from "@/components/ui/button"
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Tabs,
  TabsContent,
  TabsList,
  TabsTrigger,
} from "@/components/ui/tabs"

export function TabsDemo() {
  return (
    <Tabs defaultValue="account" className="w-[400px]">
      <TabsList className="grid w-full grid-cols-2">
        <TabsTrigger value="account">Account</TabsTrigger>
        <TabsTrigger value="password">Password</TabsTrigger>
      </TabsList>
      <TabsContent value="account">
        <Card>
          <CardHeader>
            <CardTitle>Account</CardTitle>
            <CardDescription>
              Make changes to your account here. Click save when you're done.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-2">
            <div className="space-y-1">
              <Label htmlFor="name">Name</Label>
              <Input id="name" defaultValue="Pedro Duarte" />
            </div>
            <div className="space-y-1">
              <Label htmlFor="username">Username</Label>
              <Input id="username" defaultValue="@peduarte" />
            </div>
          </CardContent>
          <CardFooter>
            <Button>Save changes</Button>
          </CardFooter>
        </Card>
      </TabsContent>
      <TabsContent value="password">
        <Card>
          <CardHeader>
            <CardTitle>Password</CardTitle>
            <CardDescription>
              Change your password here. After saving, you'll be logged out.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-2">
            <div className="space-y-1">
              <Label htmlFor="current">Current password</Label>
              <Input id="current" type="password" />
            </div>
            <div className="space-y-1">
              <Label htmlFor="new">New password</Label>
              <Input id="new" type="password" />
            </div>
          </CardContent>
          <CardFooter>
            <Button>Save password</Button>
          </CardFooter>
        </Card>
      </TabsContent>
    </Tabs>
  )
}



================================================================================
LOCATION: components\myUI\textarea.tsx
================================================================================

import { Textarea } from "@/components/ui/textarea"

export function TextareaDemo() {
  return <Textarea placeholder="Type your message here." />
}



================================================================================
LOCATION: components\myUI\toast.tsx
================================================================================

"use client"

import { Button } from "@/components/ui/button"
import { ToastAction } from "@/components/ui/toast"
// import { useToast } from "@/components/ui/use-toast"

export function ToastDemo() {
  // const { toast } = useToast()

  return (
    <Button
      variant="outline"
      onClick={() => {
        // toast({
        //   title: "Scheduled: Catch up ",
        //   description: "Friday, February 10, 2023 at 5:57 PM",
        //   action: (
        //     <ToastAction altText="Goto schedule to undo">Undo</ToastAction>
        //   ),
        // })
        <ToastAction altText="Goto schedule to undo">Undo</ToastAction>
      }}
    >
      Add to calendar
    </Button>
  )
}



================================================================================
LOCATION: components\myUI\toggle-group.tsx
================================================================================

import { Bold, Italic, Underline } from "lucide-react"

import {
  ToggleGroup,
  ToggleGroupItem,
} from "@/components/ui/toggle-group"

export function ToggleGroupDemo() {
  return (
    <ToggleGroup type="multiple">
      <ToggleGroupItem value="bold" aria-label="Toggle bold">
        <Bold className="h-4 w-4" />
      </ToggleGroupItem>
      <ToggleGroupItem value="italic" aria-label="Toggle italic">
        <Italic className="h-4 w-4" />
      </ToggleGroupItem>
      <ToggleGroupItem value="underline" aria-label="Toggle underline">
        <Underline className="h-4 w-4" />
      </ToggleGroupItem>
    </ToggleGroup>
  )
}



================================================================================
LOCATION: components\myUI\toggle.tsx
================================================================================

import { Bold } from "lucide-react"

import { Toggle } from "@/components/ui/toggle"

export function ToggleDemo() {
  return (
    <Toggle aria-label="Toggle bold">
      <Bold className="h-4 w-4" />
    </Toggle>
  )
}



================================================================================
LOCATION: components\myUI\tooltip.tsx
================================================================================

import { Button } from "@/components/ui/button"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

export function TooltipDemo() {
  return (
    <TooltipProvider>
      <Tooltip>
        <TooltipTrigger asChild>
          <Button variant="outline">Hover</Button>
        </TooltipTrigger>
        <TooltipContent>
          <p>Add to library</p>
        </TooltipContent>
      </Tooltip>
    </TooltipProvider>
  )
}



================================================================================
LOCATION: components\payment\BankTransferForm.tsx
================================================================================

"use client";

import { Button } from "@/components/ui/button";
import {
    Dialog,
    DialogContent,
    DialogDescription,
    DialogFooter,
    DialogHeader,
    DialogTitle,
    DialogTrigger,
} from "@/components/ui/dialog";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import { useAppContext } from "@/hooks/useAppContext";
import axios from "axios";
import { Loader2, Upload } from "lucide-react";
import { useState } from "react";
import { toast } from "sonner"; // Assuming sonner is used, or fallback to alert

interface BankTransferFormProps {
    amount: number;
    cartId?: string; // Optional, might be paying for a new cart (no ID yet) or existing
    onSuccess: () => void;
}

export function BankTransferForm({ amount, cartId, onSuccess }: BankTransferFormProps) {
    const { user, openDialog } = useAppContext();
    const [isOpen, setIsOpen] = useState(false);
    const [loading, setLoading] = useState(false);
    const [payeeName, setPayeeName] = useState("");
    const [file, setFile] = useState<File | null>(null);
    const [preview, setPreview] = useState<string | null>(null);

    // Bank Details (Hardcoded for now as per common practice, or fetch from env/config)
    const BANK_DETAILS = {
        bankName: process.env.NEXT_PUBLIC_BANK_NAME,
        accountNumber: process.env.NEXT_PUBLIC_BANK_ACCOUNT_NUMBER,
        accountName: process.env.NEXT_PUBLIC_BANK_ACCOUNT_NAME,
    };

    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        if (e.target.files && e.target.files[0]) {
            const selected = e.target.files[0];
            setFile(selected);
            setPreview(URL.createObjectURL(selected));
        }
    };

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        if (!payeeName) {
            // alert("Please enter the account name used for the transfer.");
            openDialog("Please enter the account name used for the transfer.", "Missing Info");
            return;
        }

        setLoading(true);
        try {
            let receiptUrl = "";

            // 1. Upload Receipt if provided
            if (file) {
                const formData = new FormData();
                formData.append("file", file);
                formData.append("type", "image");
                formData.append("userId", user?.id || "guest");
                formData.append("title", `Receipt for Cart ${cartId || "New"}`);
                formData.append("for", "payment_receipt");

                // Reusing the file upload API endpoint structure seen in fileupload.tsx
                const uploadRes = await axios.post("/api/file/image", formData);
                if (uploadRes.status === 200) {
                    receiptUrl = uploadRes.data.url;
                }
            }

            // 2. Submit Payment/Update Cart
            // If we have a cartId, we update it. If it's a new checkout (from CartClient), 
            // the parent logic usually handles creation, but for manual transfer 
            // we might need to create the order first if it doesn't exist?
            // For this component, we assume the cart exists OR the parent handles the 'confirm' logic.
            // However, for manual transfer, we typically need to record this *on* the cart.

            // Pattern: Parent passes logic or we call generic update.
            // Based on request: "let the cart status be 'unconfirmed'"

            if (cartId) {
                await axios.put(`/api/dbhandler?model=cart&id=${cartId}`, {
                    status: "unconfirmed",
                    payment: {
                        method: "bank_transfer",
                        amount,
                        receiptUrl,
                        payeeName,
                    },
                });

                // Attempt to create a payment record for tracking
                try {
                    try {
                        await axios.post("/api/send-notification", {
                            orderDetails: { 
                                tx_ref: `BT-${cartId}`, 
                                amount, 
                                status: 'unconfirmed',
                                method: 'bank_transfer',
                                payeeName,
                                receiptUrl
                            },
                        });
                    } catch (emailError) {
                        console.warn("Failed to send email notifications:", emailError);
                    }
                } catch (err) {
                    console.warn("Could not create payment record, but cart updated.", err);
                }
            }

            setIsOpen(false);
            onSuccess();
            // alert("Transfer submitted! Your order is pending confirmation.");
            openDialog("Transfer submitted! Your order is pending confirmation.", "Submission Successful");

        } catch (error) {
            console.error("Transfer submission failed:", error);
            // alert("Failed to submit transfer details. Please try again.");
            openDialog("Failed to submit transfer details. Please try again.", "Submission Error");
        } finally {
            setLoading(false);
        }
    };

    return (
        <Dialog open={isOpen} onOpenChange={setIsOpen}>
            <DialogTrigger asChild>
                <Button variant="outline" className="w-full border-2 border-green-500 text-green-500">
                    Bank Transfer
                </Button>
            </DialogTrigger>
            <DialogContent className="sm:max-w-[425px]">
                <DialogHeader>
                    <DialogTitle>Bank Transfer</DialogTitle>
                    <DialogDescription>
                        Please transfer <b>â‚¦{amount.toLocaleString()}</b> to the account below, then provide your transfer details. The payment will be confirmed manually within few seconds.
                    </DialogDescription>
                </DialogHeader>

                <div className="bg-muted p-4 rounded-lg space-y-2 text-sm">
                    <div className="flex justify-between">
                        <span className="text-muted-foreground">Bank Name:</span>
                        <span className="font-medium">{BANK_DETAILS.bankName}</span>
                    </div>
                    <div className="flex justify-between">
                        <span className="text-muted-foreground">Account Number:</span>
                        <span className="font-mono font-bold select-all">{BANK_DETAILS.accountNumber}</span>
                    </div>
                    <div className="flex justify-between">
                        <span className="text-muted-foreground">Account Name:</span>
                        <span className="font-medium">{BANK_DETAILS.accountName}</span>
                    </div>
                </div>

                <form onSubmit={handleSubmit} className="space-y-4 py-4">
                    <div className="space-y-2">
                        <Label htmlFor="accountName">Sender Account Name</Label>
                        <Input
                            id="accountName"
                            placeholder="e.g. John Doe"
                            value={payeeName}
                            onChange={(e) => setPayeeName(e.target.value)}
                            required
                        />
                    </div>

                    <div className="space-y-2">
                        <Label htmlFor="receipt">Upload Receipt (Optional)</Label>
                        <div className="flex items-center gap-2">
                            <Input
                                id="receipt"
                                type="file"
                                accept="image/*"
                                onChange={handleFileChange}
                                className="hidden"
                            />
                            <Label
                                htmlFor="receipt"
                                className="flex items-center gap-2 cursor-pointer border rounded-md px-3 py-2 text-sm hover:bg-muted w-full"
                            >
                                <Upload className="h-4 w-4" />
                                {file ? file.name : "Select Image"}
                            </Label>
                        </div>
                        {preview && (
                            <div className="relative h-32 w-full rounded-md overflow-hidden border">
                                <img src={preview} alt="Receipt preview" className="h-full w-full object-cover" />
                            </div>
                        )}
                    </div>

                    <DialogFooter>
                        <Button type="submit" disabled={loading} className="w-full">
                            {loading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                            Confirm Transfer
                        </Button>
                    </DialogFooter>
                </form>
            </DialogContent>
        </Dialog>
    );
}



================================================================================
LOCATION: components\payment\flutterwavecomponent.tsx
================================================================================

// ts-nocheck
'use client'
import { FlutterWaveButton, closePaymentModal } from 'flutterwave-react-v3';
import async from './flutterwavehook';

type FlutterwavePaymentProps = {
  amount: number;
  currency: string;
  email: string;
  phonenumber: string;
  name: string;
};

export default async function FlutterwavePaymentButton({
  amount,
  currency,
  email,
  phonenumber,
  name,
}: FlutterwavePaymentProps) {
  const config = {
    public_key: process.env.NEXT_PUBLIC_FLUTTERWAVE_PUBLIC_KEY as string,
    tx_ref: Date.now().toString(),
    amount,
    currency,
    payment_options: 'card,mobilemoney,ussd',
    customer: {
      email,
      phone_number: phonenumber,
      name,
    },
    customizations: {
      title: 'Succo Stores',
      description: 'Payment for items in cart using Flutterwave',
      logo: 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1765733238/j8jw0lwd79tuhofhpao9.png',
    },
  };

  const fwConfig = {
    ...config,
    text: 'Pay with Flutterwave!',
    callback: (response: any) => {
      console.log(response);
      closePaymentModal(); // close modal programmatically
    },
    onClose: () => {},
  };

  return (
    <div>
      <FlutterWaveButton {...fwConfig} />
    </div>
  );
}



================================================================================
LOCATION: components\payment\flutterwavehook.tsx
================================================================================

// ts-nocheck
'use client';

import { useAppContext } from '@/hooks/useAppContext';
import { useFlutterwave, closePaymentModal } from 'flutterwave-react-v3';
import { Button } from '@/components/ui/button';
import { useState } from 'react';

type FlutterwaveButtonHookProps = {
  tx_ref: string;
  amount: number;
  currency: string;
  email: string;
  phonenumber: string;
  name: string;
  disabled?: boolean;
  onSuccess: (response: any) => void;
};


export default function FlutterWaveButtonHook({
  tx_ref,
  amount,
  currency,
  email,
  phonenumber,
  name,
  disabled,
  onSuccess,
}: FlutterwaveButtonHookProps) {
  const [loading, setLoading] = useState(false);
  const { openDialog } = useAppContext();

  const handlePayment = async () => {
    if (disabled || loading) return;

    try {
      setLoading(true);

      // 2ï¸âƒ£ Build Flutterwave config with backend tx_ref
      const config = {
        public_key: process.env.NEXT_PUBLIC_FLUTTERWAVE_PUBLIC_KEY as string,
        tx_ref,
        // amount : 5,
        amount,
        currency,
        payment_options: 'card,mobilemoney,ussd',
        customer: {
          email,
          phone_number: phonenumber,
          name,
        },
        customizations: {
          title: 'Succo stores',
          description: 'Payment for items in cart using Flutterwave',
          logo: 'https://res.cloudinary.com/dc5khnuiu/image/upload/v1765733238/j8jw0lwd79tuhofhpao9.png',
        },
      };

      // 3ï¸âƒ£ Initialize Flutterwave
      const handleFlutterPayment = useFlutterwave(config);

      handleFlutterPayment({
        callback: (response: any) => {
          if (response?.status === 'successful') {
            onSuccess(response);
          } else {
            // alert('Payment was not successful. Please try again.');
            openDialog('Payment was not successful. Please try again.', 'Payment Failed');
          }

          closePaymentModal();
        },
        onClose: () => { },
      });
    } catch (error) {
      // alert('An error occurred while processing payment. Please try again.');
      openDialog('An error occurred while processing payment. Please try again.', 'Error');
      console.error('Flutterwave Payment Error:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <Button className='animate-pulse align-self-end bg-green-500' disabled={disabled || loading} onClick={handlePayment}>
      {loading ? 'Processingâ€¦' : 'Pay now'}
    </Button>
  );
}



================================================================================
LOCATION: components\payment\paystack\button.tsx
================================================================================

import React from 'react';
import logo from './logo.svg';
import { PaystackButton } from 'react-paystack';
import './App.css';

const config = {
  reference: (new Date()).getTime().toString(),
  email: "user@example.com",
  amount: 20000, //Amount is in the country's lowest currency. E.g Kobo, so 20000 kobo = N200
  publicKey: 'pk_test_dsdfghuytfd2345678gvxxxxxxxxxx',
};

function App() {
  // you can call this function anything
  const handlePaystackSuccessAction = (reference) => {
    // Implementation for whatever you want to do with reference and after success call.
    console.log(reference);
  };

  // you can call this function anything
  const handlePaystackCloseAction = () => {
    // implementation for  whatever you want to do when the Paystack dialog closed.
    console.log('closed')
  }

  const componentProps = {
      ...config,
      text: 'Paystack Button Implementation',
      onSuccess: (reference) => handlePaystackSuccessAction(reference),
      onClose: handlePaystackCloseAction,
  };

  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
      </header>
      <PaystackButton {...componentProps} />
    </div>
  );
}

export default App;


================================================================================
LOCATION: components\payment\paystack\consumer.tsx
================================================================================

import React from 'react';
import logo from './logo.svg';
import { PaystackConsumer } from 'react-paystack';
import './App.css';
  
  const config = {
      reference: (new Date()).getTime().toString(),
      email: "user@example.com",
      amount: 20000, //Amount is in the country's lowest currency. E.g Kobo, so 20000 kobo = N200
      publicKey: 'pk_test_dsdfghuytfd2345678gvxxxxxxxxxx',
  };
  
  // you can call this function anything
  const handleSuccess = (reference) => {
    // Implementation for whatever you want to do with reference and after success call.
    console.log(reference);
  };

  // you can call this function anything
  const handleClose = () => {
    // implementation for  whatever you want to do when the Paystack dialog closed.
    console.log('closed')
  }

  function App() {
      const componentProps = {
          ...config,
          text: 'Paystack Button Implementation',
          onSuccess: (reference) => handleSuccess(reference),
          onClose: handleClose
      };
  
    return (
      <div className="App">
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <p>
            Edit <code>src/App.js</code> and save to reload.
          </p>
          <a
            className="App-link"
            href="https://reactjs.org"
            target="_blank"
            rel="noopener noreferrer"
          >
            Learn React
          </a>
        </header>
        {/* <PaystackConsumer {...componentProps} >
          {({initializePayment}) => <button onClick={() => initializePayment(handleSuccess, handleClose)}>Paystack Consumer Implementation</button>}
        </PaystackConsumer> */}
      </div>
    );
  }
  
  export default App;


================================================================================
LOCATION: components\payment\paystack\hook.tsx
================================================================================

import React from 'react';
import logo from './logo.svg';
import { usePaystackPayment } from 'react-paystack';
import './App.css';

const config = {
    reference: (new Date()).getTime().toString(),
    email: "user@example.com",
    amount: 20000, //Amount is in the country's lowest currency. E.g Kobo, so 20000 kobo = N200
    publicKey: 'pk_test_dsdfghuytfd2345678gvxxxxxxxxxx',
};

// you can call this function anything
const onSuccess = (reference) => {
  // Implementation for whatever you want to do with reference and after success call.
  console.log(reference);
};

// you can call this function anything
const onClose = () => {
  // implementation for  whatever you want to do when the Paystack dialog closed.
  console.log('closed')
}

const PaystackHookExample = () => {
    const initializePayment = usePaystackPayment(config);
    return (
      <div>
          <button onClick={() => {
              // initializePayment(onSuccess, onClose)
          }}>Paystack Hooks Implementation</button>
      </div>
    );
};

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
      </header>
      <PaystackHookExample />
    </div>
  );
}

export default App;


================================================================================
LOCATION: components\payment\paystack\metadata.ts
================================================================================

export const config = {
    // Your required fields
       metadata: {
         custom_fields: [
             {
                 display_name: 'description',
                 variable_name: 'description',
                 value: 'Funding Wallet'
             }
             // To pass extra metadata, add an object with the same fields as above
         ]
     }
 };


================================================================================
LOCATION: components\ui\accordion.tsx
================================================================================

"use client"

import * as React from "react"
import * as AccordionPrimitive from "@radix-ui/react-accordion"
import { ChevronDown } from "lucide-react"

import { cn } from "@/lib/utils"

const Accordion = AccordionPrimitive.Root

const AccordionItem = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>
>(({ className, ...props }, ref) => (
  <AccordionPrimitive.Item
    ref={ref}
    className={cn("border-b", className)}
    {...props}
  />
))
AccordionItem.displayName = "AccordionItem"

const AccordionTrigger = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Header className="flex">
    <AccordionPrimitive.Trigger
      ref={ref}
      className={cn(
        "flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",
        className
      )}
      {...props}
    >
      {children}
      <ChevronDown className="h-4 w-4 shrink-0 transition-transform duration-200" />
    </AccordionPrimitive.Trigger>
  </AccordionPrimitive.Header>
))
AccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName

const AccordionContent = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Content
    ref={ref}
    className="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"
    {...props}
  >
    <div className={cn("pb-4 pt-0", className)}>{children}</div>
  </AccordionPrimitive.Content>
))

AccordionContent.displayName = AccordionPrimitive.Content.displayName

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent }



================================================================================
LOCATION: components\ui\alert-dialog.tsx
================================================================================

"use client"

import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

const AlertDialog = AlertDialogPrimitive.Root

const AlertDialogTrigger = AlertDialogPrimitive.Trigger

const AlertDialogPortal = AlertDialogPrimitive.Portal

const AlertDialogOverlay = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
    ref={ref}
  />
))
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName

const AlertDialogContent = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>
>(({ className, ...props }, ref) => (
  <AlertDialogPortal>
    <AlertDialogOverlay />
    <AlertDialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    />
  </AlertDialogPortal>
))
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName

const AlertDialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
AlertDialogHeader.displayName = "AlertDialogHeader"

const AlertDialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
AlertDialogFooter.displayName = "AlertDialogFooter"

const AlertDialogTitle = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold", className)}
    {...props}
  />
))
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName

const AlertDialogDescription = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
AlertDialogDescription.displayName =
  AlertDialogPrimitive.Description.displayName

const AlertDialogAction = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Action>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Action
    ref={ref}
    className={cn(buttonVariants(), className)}
    {...props}
  />
))
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName

const AlertDialogCancel = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Cancel
    ref={ref}
    className={cn(
      buttonVariants({ variant: "outline" }),
      "mt-2 sm:mt-0",
      className
    )}
    {...props}
  />
))
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}



================================================================================
LOCATION: components\ui\alert.tsx
================================================================================

import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const alertVariants = cva(
  "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive:
          "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Alert = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>
>(({ className, variant, ...props }, ref) => (
  <div
    ref={ref}
    role="alert"
    className={cn(alertVariants({ variant }), className)}
    {...props}
  />
))
Alert.displayName = "Alert"

const AlertTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h5
    ref={ref}
    className={cn("mb-1 font-medium leading-none tracking-tight", className)}
    {...props}
  />
))
AlertTitle.displayName = "AlertTitle"

const AlertDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm [&_p]:leading-relaxed", className)}
    {...props}
  />
))
AlertDescription.displayName = "AlertDescription"

export { Alert, AlertTitle, AlertDescription }



================================================================================
LOCATION: components\ui\aspect-ratio.tsx
================================================================================

"use client"

import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio"

const AspectRatio = AspectRatioPrimitive.Root

export { AspectRatio }



================================================================================
LOCATION: components\ui\avatar.tsx
================================================================================

"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn(
      "relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",
      className
    )}
    {...props}
  />
))
Avatar.displayName = AvatarPrimitive.Root.displayName

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image
    ref={ref}
    className={cn("aspect-square h-full w-full", className)}
    {...props}
  />
))
AvatarImage.displayName = AvatarPrimitive.Image.displayName

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn(
      "flex h-full w-full items-center justify-center rounded-full bg-muted",
      className
    )}
    {...props}
  />
))
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName

export { Avatar, AvatarImage, AvatarFallback }



================================================================================
LOCATION: components\ui\badge.tsx
================================================================================

import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }



================================================================================
LOCATION: components\ui\breadcrumb.tsx
================================================================================

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { ChevronRight, MoreHorizontal } from "lucide-react"

import { cn } from "@/lib/utils"

const Breadcrumb = React.forwardRef<
  HTMLElement,
  React.ComponentPropsWithoutRef<"nav"> & {
    separator?: React.ReactNode
  }
>(({ ...props }, ref) => <nav ref={ref} aria-label="breadcrumb" {...props} />)
Breadcrumb.displayName = "Breadcrumb"

const BreadcrumbList = React.forwardRef<
  HTMLOListElement,
  React.ComponentPropsWithoutRef<"ol">
>(({ className, ...props }, ref) => (
  <ol
    ref={ref}
    className={cn(
      "flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",
      className
    )}
    {...props}
  />
))
BreadcrumbList.displayName = "BreadcrumbList"

const BreadcrumbItem = React.forwardRef<
  HTMLLIElement,
  React.ComponentPropsWithoutRef<"li">
>(({ className, ...props }, ref) => (
  <li
    ref={ref}
    className={cn("inline-flex items-center gap-1.5", className)}
    {...props}
  />
))
BreadcrumbItem.displayName = "BreadcrumbItem"

const BreadcrumbLink = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentPropsWithoutRef<"a"> & {
    asChild?: boolean
  }
>(({ asChild, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      ref={ref}
      className={cn("transition-colors hover:text-foreground", className)}
      {...props}
    />
  )
})
BreadcrumbLink.displayName = "BreadcrumbLink"

const BreadcrumbPage = React.forwardRef<
  HTMLSpanElement,
  React.ComponentPropsWithoutRef<"span">
>(({ className, ...props }, ref) => (
  <span
    ref={ref}
    role="link"
    aria-disabled="true"
    aria-current="page"
    className={cn("font-normal text-foreground", className)}
    {...props}
  />
))
BreadcrumbPage.displayName = "BreadcrumbPage"

const BreadcrumbSeparator = ({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) => (
  <li
    role="presentation"
    aria-hidden="true"
    className={cn("[&>svg]:w-3.5 [&>svg]:h-3.5", className)}
    {...props}
  >
    {children ?? <ChevronRight />}
  </li>
)
BreadcrumbSeparator.displayName = "BreadcrumbSeparator"

const BreadcrumbEllipsis = ({
  className,
  ...props
}: React.ComponentProps<"span">) => (
  <span
    role="presentation"
    aria-hidden="true"
    className={cn("flex h-9 w-9 items-center justify-center", className)}
    {...props}
  >
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More</span>
  </span>
)
BreadcrumbEllipsis.displayName = "BreadcrumbElipssis"

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
}



================================================================================
LOCATION: components\ui\button.tsx
================================================================================

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-accent/80 text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline:
          "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }



================================================================================
LOCATION: components\ui\calendar.tsx
================================================================================

"use client"

import * as React from "react"
import { ChevronLeft, ChevronRight } from "lucide-react"
import { DayPicker } from "react-day-picker"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

export type CalendarProps = React.ComponentProps<typeof DayPicker>

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  ...props
}: CalendarProps) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",
        month: "space-y-4",
        caption: "flex justify-center pt-1 relative items-center",
        caption_label: "text-sm font-medium",
        nav: "space-x-1 flex items-center",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-y-1",
        head_row: "flex",
        head_cell:
          "text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: "h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",
        day: cn(
          buttonVariants({ variant: "ghost" }),
          "h-9 w-9 p-0 font-normal aria-selected:opacity-100"
        ),
        day_range_end: "day-range-end",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle:
          "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ ...props }) => <ChevronLeft className="h-4 w-4" />,
        IconRight: ({ ...props }) => <ChevronRight className="h-4 w-4" />,
      }}
      {...props}
    />
  )
}
Calendar.displayName = "Calendar"

export { Calendar }



================================================================================
LOCATION: components\ui\card.tsx
================================================================================

import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-lg border bg-card text-card-foreground shadow-sm",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "text-2xl font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }



================================================================================
LOCATION: components\ui\carousel.tsx
================================================================================

"use client"

import * as React from "react"
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from "embla-carousel-react"
import { ArrowLeft, ArrowRight } from "lucide-react"

import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"

type CarouselApi = UseEmblaCarouselType[1]
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>
type CarouselOptions = UseCarouselParameters[0]
type CarouselPlugin = UseCarouselParameters[1]

type CarouselProps = {
  opts?: CarouselOptions
  plugins?: any//CarouselPlugin
  orientation?: "horizontal" | "vertical"
  setApi?: (api: CarouselApi) => void
}

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0]
  api: ReturnType<typeof useEmblaCarousel>[1]
  scrollPrev: () => void
  scrollNext: () => void
  canScrollPrev: boolean
  canScrollNext: boolean
} & CarouselProps

const CarouselContext = React.createContext<CarouselContextProps | null>(null)

function useCarousel() {
  const context = React.useContext(CarouselContext)

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />")
  }

  return context
}

const Carousel = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & CarouselProps
>(
  (
    {
      orientation = "horizontal",
      opts,
      setApi,
      plugins,
      className,
      children,
      ...props
    },
    ref
  ) => {
    const [carouselRef, api] = useEmblaCarousel(
      {
        ...opts,
        axis: orientation === "horizontal" ? "x" : "y",
      },
      plugins
    )
    const [canScrollPrev, setCanScrollPrev] = React.useState(false)
    const [canScrollNext, setCanScrollNext] = React.useState(false)

    const onSelect = React.useCallback((api: CarouselApi) => {
      if (!api) {
        return
      }

      setCanScrollPrev(api.canScrollPrev())
      setCanScrollNext(api.canScrollNext())
    }, [])

    const scrollPrev = React.useCallback(() => {
      api?.scrollPrev()
    }, [api])

    const scrollNext = React.useCallback(() => {
      api?.scrollNext()
    }, [api])

    const handleKeyDown = React.useCallback(
      (event: React.KeyboardEvent<HTMLDivElement>) => {
        if (event.key === "ArrowLeft") {
          event.preventDefault()
          scrollPrev()
        } else if (event.key === "ArrowRight") {
          event.preventDefault()
          scrollNext()
        }
      },
      [scrollPrev, scrollNext]
    )

    React.useEffect(() => {
      if (!api || !setApi) {
        return
      }

      setApi(api)
    }, [api, setApi])

    React.useEffect(() => {
      if (!api) {
        return
      }

      onSelect(api)
      api.on("reInit", onSelect)
      api.on("select", onSelect)

      return () => {
        api?.off("select", onSelect)
      }
    }, [api, onSelect])

    return (
      <CarouselContext.Provider
        value={{
          carouselRef,
          api: api,
          opts,
          orientation:
            orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
          scrollPrev,
          scrollNext,
          canScrollPrev,
          canScrollNext,
        }}
      >
        <div
          ref={ref}
          onKeyDownCapture={handleKeyDown}
          className={cn("relative", className)}
          role="region"
          aria-roledescription="carousel"
          {...props}
        >
          {children}
        </div>
      </CarouselContext.Provider>
    )
  }
)
Carousel.displayName = "Carousel"

const CarouselContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => {
  const { carouselRef, orientation } = useCarousel()

  return (
    <div ref={carouselRef} className="overflow-hidden">
      <div
        ref={ref}
        className={cn(
          "flex",
          orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col",
          className
        )}
        {...props}
      />
    </div>
  )
})
CarouselContent.displayName = "CarouselContent"

const CarouselItem = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => {
  const { orientation } = useCarousel()

  return (
    <div
      ref={ref}
      role="group"
      aria-roledescription="slide"
      className={cn(
        "min-w-0 shrink-0 grow-0 basis-full",
        orientation === "horizontal" ? "pl-4" : "pt-4",
        className
      )}
      {...props}
    />
  )
})
CarouselItem.displayName = "CarouselItem"

const CarouselPrevious = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<typeof Button>
>(({ className, variant = "outline", size = "icon", ...props }, ref) => {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel()

  return (
    <Button
      ref={ref}
      variant={variant}
      size={size}
      className={cn(
        "absolute  h-8 w-8 rounded-full",
        orientation === "horizontal"
          ? "-left-12 top-1/2 -translate-y-1/2"
          : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
        className
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft className="h-4 w-4" />
      <span className="sr-only">Previous slide</span>
    </Button>
  )
})
CarouselPrevious.displayName = "CarouselPrevious"

const CarouselNext = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<typeof Button>
>(({ className, variant = "outline", size = "icon", ...props }, ref) => {
  const { orientation, scrollNext, canScrollNext } = useCarousel()

  return (
    <Button
      ref={ref}
      variant={variant}
      size={size}
      className={cn(
        "absolute h-8 w-8 rounded-full",
        orientation === "horizontal"
          ? "-right-12 top-1/2 -translate-y-1/2"
          : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
        className
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight className="h-4 w-4" />
      <span className="sr-only">Next slide</span>
    </Button>
  )
})
CarouselNext.displayName = "CarouselNext"

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
}



================================================================================
LOCATION: components\ui\chart.tsx
================================================================================

"use client"

import * as React from "react"
import * as RechartsPrimitive from "recharts"

import { cn } from "@/lib/utils"

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode
    icon?: React.ComponentType
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  )
}

type ChartContextProps = {
  config: ChartConfig
}

const ChartContext = React.createContext<ChartContextProps | null>(null)

function useChart() {
  const context = React.useContext(ChartContext)

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />")
  }

  return context
}

const ChartContainer = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    config: ChartConfig
    children: React.ComponentProps<
      typeof RechartsPrimitive.ResponsiveContainer
    >["children"]
  }
>(({ id, className, children, config, ...props }, ref) => {
  const uniqueId = React.useId()
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-chart={chartId}
        ref={ref}
        className={cn(
          "flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",
          className
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  )
})
ChartContainer.displayName = "Chart"

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([_, config]) => config.theme || config.color
  )

  if (!colorConfig.length) {
    return null
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color
    return color ? `  --color-${key}: ${color};` : null
  })
  .join("\n")}
}
`
          )
          .join("\n"),
      }}
    />
  )
}

const ChartTooltip = RechartsPrimitive.Tooltip

const ChartTooltipContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
    React.ComponentProps<"div"> & {
      hideLabel?: boolean
      hideIndicator?: boolean
      indicator?: "line" | "dot" | "dashed"
      nameKey?: string
      labelKey?: string
    }
>(
  (
    {
      active,
      payload,
      className,
      indicator = "dot",
      hideLabel = false,
      hideIndicator = false,
      label,
      labelFormatter,
      labelClassName,
      formatter,
      color,
      nameKey,
      labelKey,
    },
    ref
  ) => {
    const { config } = useChart()

    const tooltipLabel = React.useMemo(() => {
      if (hideLabel || !payload?.length) {
        return null
      }

      const [item] = payload
      const key = `${labelKey || item.dataKey || item.name || "value"}`
      const itemConfig = getPayloadConfigFromPayload(config, item, key)
      const value =
        !labelKey && typeof label === "string"
          ? config[label as keyof typeof config]?.label || label
          : itemConfig?.label

      if (labelFormatter) {
        return (
          <div className={cn("font-medium", labelClassName)}>
            {labelFormatter(value, payload)}
          </div>
        )
      }

      if (!value) {
        return null
      }

      return <div className={cn("font-medium", labelClassName)}>{value}</div>
    }, [
      label,
      labelFormatter,
      payload,
      hideLabel,
      labelClassName,
      config,
      labelKey,
    ])

    if (!active || !payload?.length) {
      return null
    }

    const nestLabel = payload.length === 1 && indicator !== "dot"

    return (
      <div
        ref={ref}
        className={cn(
          "grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",
          className
        )}
      >
        {!nestLabel ? tooltipLabel : null}
        <div className="grid gap-1.5">
          {payload.map((item, index) => {
            const key = `${nameKey || item.name || item.dataKey || "value"}`
            const itemConfig = getPayloadConfigFromPayload(config, item, key)
            const indicatorColor = color || item.payload.fill || item.color

            return (
              <div
                key={item.dataKey}
                className={cn(
                  "flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",
                  indicator === "dot" && "items-center"
                )}
              >
                {formatter && item?.value !== undefined && item.name ? (
                  formatter(item.value, item.name, item, index, item.payload)
                ) : (
                  <>
                    {itemConfig?.icon ? (
                      <itemConfig.icon />
                    ) : (
                      !hideIndicator && (
                        <div
                          className={cn(
                            "shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",
                            {
                              "h-2.5 w-2.5": indicator === "dot",
                              "w-1": indicator === "line",
                              "w-0 border-[1.5px] border-dashed bg-transparent":
                                indicator === "dashed",
                              "my-0.5": nestLabel && indicator === "dashed",
                            }
                          )}
                          style={
                            {
                              "--color-bg": indicatorColor,
                              "--color-border": indicatorColor,
                            } as React.CSSProperties
                          }
                        />
                      )
                    )}
                    <div
                      className={cn(
                        "flex flex-1 justify-between leading-none",
                        nestLabel ? "items-end" : "items-center"
                      )}
                    >
                      <div className="grid gap-1.5">
                        {nestLabel ? tooltipLabel : null}
                        <span className="text-muted-foreground">
                          {itemConfig?.label || item.name}
                        </span>
                      </div>
                      {item.value && (
                        <span className="font-mono font-medium tabular-nums text-foreground">
                          {item.value.toLocaleString()}
                        </span>
                      )}
                    </div>
                  </>
                )}
              </div>
            )
          })}
        </div>
      </div>
    )
  }
)
ChartTooltipContent.displayName = "ChartTooltip"

const ChartLegend = RechartsPrimitive.Legend

const ChartLegendContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> &
    Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
      hideIcon?: boolean
      nameKey?: string
    }
>(
  (
    { className, hideIcon = false, payload, verticalAlign = "bottom", nameKey },
    ref
  ) => {
    const { config } = useChart()

    if (!payload?.length) {
      return null
    }

    return (
      <div
        ref={ref}
        className={cn(
          "flex items-center justify-center gap-4",
          verticalAlign === "top" ? "pb-3" : "pt-3",
          className
        )}
      >
        {payload.map((item) => {
          const key = `${nameKey || item.dataKey || "value"}`
          const itemConfig = getPayloadConfigFromPayload(config, item, key)

          return (
            <div
              key={item.value}
              className={cn(
                "flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"
              )}
            >
              {itemConfig?.icon && !hideIcon ? (
                <itemConfig.icon />
              ) : (
                <div
                  className="h-2 w-2 shrink-0 rounded-[2px]"
                  style={{
                    backgroundColor: item.color,
                  }}
                />
              )}
              {itemConfig?.label}
            </div>
          )
        })}
      </div>
    )
  }
)
ChartLegendContent.displayName = "ChartLegend"

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string
) {
  if (typeof payload !== "object" || payload === null) {
    return undefined
  }

  const payloadPayload =
    "payload" in payload &&
    typeof payload.payload === "object" &&
    payload.payload !== null
      ? payload.payload
      : undefined

  let configLabelKey: string = key

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === "string"
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config]
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
}



================================================================================
LOCATION: components\ui\checkbox.tsx
================================================================================

"use client"

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { Check } from "lucide-react"

import { cn } from "@/lib/utils"

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
      className
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator
      className={cn("flex items-center justify-center text-current")}
    >
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
))
Checkbox.displayName = CheckboxPrimitive.Root.displayName

export { Checkbox }



================================================================================
LOCATION: components\ui\collapsible.tsx
================================================================================

"use client"

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

const Collapsible = CollapsiblePrimitive.Root

const CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger

const CollapsibleContent = CollapsiblePrimitive.CollapsibleContent

export { Collapsible, CollapsibleTrigger, CollapsibleContent }



================================================================================
LOCATION: components\ui\command.tsx
================================================================================

"use client"

import * as React from "react"
import { type DialogProps } from "@radix-ui/react-dialog"
import { Command as CommandPrimitive } from "cmdk"
import { Search } from "lucide-react"

import { cn } from "@/lib/utils"
import { Dialog, DialogContent } from "@/components/ui/dialog"

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className
    )}
    {...props}
  />
))
Command.displayName = CommandPrimitive.displayName

interface CommandDialogProps extends DialogProps {}

const CommandDialog = ({ children, ...props }: CommandDialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0 shadow-lg">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  )
}

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        "flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    />
  </div>
))

CommandInput.displayName = CommandPrimitive.Input.displayName

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className)}
    {...props}
  />
))

CommandList.displayName = CommandPrimitive.List.displayName

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => (
  <CommandPrimitive.Empty
    ref={ref}
    className="py-6 text-center text-sm"
    {...props}
  />
))

CommandEmpty.displayName = CommandPrimitive.Empty.displayName

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className
    )}
    {...props}
  />
))

CommandGroup.displayName = CommandPrimitive.Group.displayName

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 h-px bg-border", className)}
    {...props}
  />
))
CommandSeparator.displayName = CommandPrimitive.Separator.displayName

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      className
    )}
    {...props}
  />
))

CommandItem.displayName = CommandPrimitive.Item.displayName

const CommandShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn(
        "ml-auto text-xs tracking-widest text-muted-foreground",
        className
      )}
      {...props}
    />
  )
}
CommandShortcut.displayName = "CommandShortcut"

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}



================================================================================
LOCATION: components\ui\context-menu.tsx
================================================================================

"use client"

import * as React from "react"
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu"
import { Check, ChevronRight, Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const ContextMenu = ContextMenuPrimitive.Root

const ContextMenuTrigger = ContextMenuPrimitive.Trigger

const ContextMenuGroup = ContextMenuPrimitive.Group

const ContextMenuPortal = ContextMenuPrimitive.Portal

const ContextMenuSub = ContextMenuPrimitive.Sub

const ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup

const ContextMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {
    inset?: boolean
  }
>(({ className, inset, children, ...props }, ref) => (
  <ContextMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",
      inset && "pl-8",
      className
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </ContextMenuPrimitive.SubTrigger>
))
ContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName

const ContextMenuSubContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
ContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName

const ContextMenuContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Portal>
    <ContextMenuPrimitive.Content
      ref={ref}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className
      )}
      {...props}
    />
  </ContextMenuPrimitive.Portal>
))
ContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName

const ContextMenuItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
ContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName

const ContextMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <ContextMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.CheckboxItem>
))
ContextMenuCheckboxItem.displayName =
  ContextMenuPrimitive.CheckboxItem.displayName

const ContextMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <ContextMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.RadioItem>
))
ContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName

const ContextMenuLabel = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Label
    ref={ref}
    className={cn(
      "px-2 py-1.5 text-sm font-semibold text-foreground",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
ContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName

const ContextMenuSeparator = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-border", className)}
    {...props}
  />
))
ContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName

const ContextMenuShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn(
        "ml-auto text-xs tracking-widest text-muted-foreground",
        className
      )}
      {...props}
    />
  )
}
ContextMenuShortcut.displayName = "ContextMenuShortcut"

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
}



================================================================================
LOCATION: components\ui\dialog.tsx
================================================================================

"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}



================================================================================
LOCATION: components\ui\drawer.tsx
================================================================================

"use client"

import * as React from "react"
import { Drawer as DrawerPrimitive } from "vaul"

import { cn } from "@/lib/utils"

const Drawer = ({
  shouldScaleBackground = true,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (
  <DrawerPrimitive.Root
    shouldScaleBackground={shouldScaleBackground}
    {...props}
  />
)
Drawer.displayName = "Drawer"

const DrawerTrigger = DrawerPrimitive.Trigger

const DrawerPortal = DrawerPrimitive.Portal

const DrawerClose = DrawerPrimitive.Close

const DrawerOverlay = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Overlay
    ref={ref}
    className={cn("fixed inset-0 z-50 bg-black/80", className)}
    {...props}
  />
))
DrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName

const DrawerContent = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DrawerPortal>
    <DrawerOverlay />
    <DrawerPrimitive.Content
      ref={ref}
      className={cn(
        "fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",
        className
      )}
      {...props}
    >
      <div className="mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted" />
      {children}
    </DrawerPrimitive.Content>
  </DrawerPortal>
))
DrawerContent.displayName = "DrawerContent"

const DrawerHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn("grid gap-1.5 p-4 text-center sm:text-left", className)}
    {...props}
  />
)
DrawerHeader.displayName = "DrawerHeader"

const DrawerFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn("mt-auto flex flex-col gap-2 p-4", className)}
    {...props}
  />
)
DrawerFooter.displayName = "DrawerFooter"

const DrawerTitle = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DrawerTitle.displayName = DrawerPrimitive.Title.displayName

const DrawerDescription = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DrawerDescription.displayName = DrawerPrimitive.Description.displayName

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
}



================================================================================
LOCATION: components\ui\dropdown-menu.tsx
================================================================================

"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { Check, ChevronRight, Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const DropdownMenu = DropdownMenuPrimitive.Root

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger

const DropdownMenuGroup = DropdownMenuPrimitive.Group

const DropdownMenuPortal = DropdownMenuPrimitive.Portal

const DropdownMenuSub = DropdownMenuPrimitive.Sub

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto" />
  </DropdownMenuPrimitive.SubTrigger>
))
DropdownMenuSubTrigger.displayName =
  DropdownMenuPrimitive.SubTrigger.displayName

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
DropdownMenuSubContent.displayName =
  DropdownMenuPrimitive.SubContent.displayName

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
))
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
))
DropdownMenuCheckboxItem.displayName =
  DropdownMenuPrimitive.CheckboxItem.displayName

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
))
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName

const DropdownMenuShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn("ml-auto text-xs tracking-widest opacity-60", className)}
      {...props}
    />
  )
}
DropdownMenuShortcut.displayName = "DropdownMenuShortcut"

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
}



================================================================================
LOCATION: components\ui\form.tsx
================================================================================

"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { Slot } from "@radix-ui/react-slot"
import {
  Controller,
  ControllerProps,
  FieldPath,
  FieldValues,
  FormProvider,
  useFormContext,
} from "react-hook-form"

import { cn } from "@/lib/utils"
import { Label } from "@/components/ui/label"

const Form = FormProvider

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>
> = {
  name: TName
}

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue
)

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  )
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState, formState } = useFormContext()

  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>")
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

type FormItemContextValue = {
  id: string
}

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue
)

const FormItem = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => {
  const id = React.useId()

  return (
    <FormItemContext.Provider value={{ id }}>
      <div ref={ref} className={cn("space-y-2", className)} {...props} />
    </FormItemContext.Provider>
  )
})
FormItem.displayName = "FormItem"

const FormLabel = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>
>(({ className, ...props }, ref) => {
  const { error, formItemId } = useFormField()

  return (
    <Label
      ref={ref}
      className={cn(error && "text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  )
})
FormLabel.displayName = "FormLabel"

const FormControl = React.forwardRef<
  React.ElementRef<typeof Slot>,
  React.ComponentPropsWithoutRef<typeof Slot>
>(({ ...props }, ref) => {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    <Slot
      ref={ref}
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  )
})
FormControl.displayName = "FormControl"

const FormDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => {
  const { formDescriptionId } = useFormField()

  return (
    <p
      ref={ref}
      id={formDescriptionId}
      className={cn("text-sm text-muted-foreground", className)}
      {...props}
    />
  )
})
FormDescription.displayName = "FormDescription"

const FormMessage = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, children, ...props }, ref) => {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message) : children

  if (!body) {
    return null
  }

  return (
    <p
      ref={ref}
      id={formMessageId}
      className={cn("text-sm font-medium text-destructive", className)}
      {...props}
    >
      {body}
    </p>
  )
})
FormMessage.displayName = "FormMessage"

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}



================================================================================
LOCATION: components\ui\GlobalDialog.tsx
================================================================================

"use client";

import {
    AlertDialog,
    AlertDialogAction,
    //   AlertDialogCancel, // Can enable if we want a cancel button, but for simple alerts usually just OK is needed.
    AlertDialogContent,
    AlertDialogDescription,
    AlertDialogFooter,
    AlertDialogHeader,
    AlertDialogTitle,
} from "@/components/ui/alert-dialog";
import { useAppContext } from "@/hooks/useAppContext";

export function GlobalDialog() {
    const { dialogConfig, closeDialog } = useAppContext();

    return (
        <AlertDialog open={dialogConfig.isOpen} onOpenChange={(open) => !open && closeDialog()}>
            <AlertDialogContent>
                <AlertDialogHeader>
                    <AlertDialogTitle>{dialogConfig.title}</AlertDialogTitle>
                    <AlertDialogDescription>
                        {dialogConfig.description}
                    </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                    <AlertDialogAction onClick={closeDialog}>OK</AlertDialogAction>
                </AlertDialogFooter>
            </AlertDialogContent>
        </AlertDialog>
    );
}



================================================================================
LOCATION: components\ui\hover-card.tsx
================================================================================

"use client"

import * as React from "react"
import * as HoverCardPrimitive from "@radix-ui/react-hover-card"

import { cn } from "@/lib/utils"

const HoverCard = HoverCardPrimitive.Root

const HoverCardTrigger = HoverCardPrimitive.Trigger

const HoverCardContent = React.forwardRef<
  React.ElementRef<typeof HoverCardPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <HoverCardPrimitive.Content
    ref={ref}
    align={align}
    sideOffset={sideOffset}
    className={cn(
      "z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
HoverCardContent.displayName = HoverCardPrimitive.Content.displayName

export { HoverCard, HoverCardTrigger, HoverCardContent }



================================================================================
LOCATION: components\ui\input-otp.tsx
================================================================================

"use client"

import * as React from "react"
import { OTPInput, OTPInputContext } from "input-otp"
import { Dot } from "lucide-react"

import { cn } from "@/lib/utils"

const InputOTP = React.forwardRef<
  React.ElementRef<typeof OTPInput>,
  React.ComponentPropsWithoutRef<typeof OTPInput>
>(({ className, containerClassName, ...props }, ref) => (
  <OTPInput
    ref={ref}
    containerClassName={cn(
      "flex items-center gap-2 has-[:disabled]:opacity-50",
      containerClassName
    )}
    className={cn("disabled:cursor-not-allowed", className)}
    {...props}
  />
))
InputOTP.displayName = "InputOTP"

const InputOTPGroup = React.forwardRef<
  React.ElementRef<"div">,
  React.ComponentPropsWithoutRef<"div">
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("flex items-center", className)} {...props} />
))
InputOTPGroup.displayName = "InputOTPGroup"

const InputOTPSlot = React.forwardRef<
  React.ElementRef<"div">,
  React.ComponentPropsWithoutRef<"div"> & { index: number }
>(({ index, className, ...props }, ref) => {
  const inputOTPContext = React.useContext(OTPInputContext)
  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]

  return (
    <div
      ref={ref}
      className={cn(
        "relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",
        isActive && "z-10 ring-2 ring-ring ring-offset-background",
        className
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="h-4 w-px animate-caret-blink bg-foreground duration-1000" />
        </div>
      )}
    </div>
  )
})
InputOTPSlot.displayName = "InputOTPSlot"

const InputOTPSeparator = React.forwardRef<
  React.ElementRef<"div">,
  React.ComponentPropsWithoutRef<"div">
>(({ ...props }, ref) => (
  <div ref={ref} role="separator" {...props}>
    <Dot />
  </div>
))
InputOTPSeparator.displayName = "InputOTPSeparator"

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }



================================================================================
LOCATION: components\ui\input.tsx
================================================================================

import * as React from "react"

import { cn } from "@/lib/utils"

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }



================================================================================
LOCATION: components\ui\label.tsx
================================================================================

"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
)

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &
    VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(labelVariants(), className)}
    {...props}
  />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }



================================================================================
LOCATION: components\ui\menubar.tsx
================================================================================

"use client"

import * as React from "react"
import * as MenubarPrimitive from "@radix-ui/react-menubar"
import { Check, ChevronRight, Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const MenubarMenu = MenubarPrimitive.Menu

const MenubarGroup = MenubarPrimitive.Group

const MenubarPortal = MenubarPrimitive.Portal

const MenubarSub = MenubarPrimitive.Sub

const MenubarRadioGroup = MenubarPrimitive.RadioGroup

const Menubar = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Root
    ref={ref}
    className={cn(
      "flex h-10 items-center space-x-1 rounded-md border bg-background p-1",
      className
    )}
    {...props}
  />
))
Menubar.displayName = MenubarPrimitive.Root.displayName

const MenubarTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",
      className
    )}
    {...props}
  />
))
MenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName

const MenubarSubTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {
    inset?: boolean
  }
>(({ className, inset, children, ...props }, ref) => (
  <MenubarPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",
      inset && "pl-8",
      className
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </MenubarPrimitive.SubTrigger>
))
MenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName

const MenubarSubContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
MenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName

const MenubarContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>
>(
  (
    { className, align = "start", alignOffset = -4, sideOffset = 8, ...props },
    ref
  ) => (
    <MenubarPrimitive.Portal>
      <MenubarPrimitive.Content
        ref={ref}
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          "z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
          className
        )}
        {...props}
      />
    </MenubarPrimitive.Portal>
  )
)
MenubarContent.displayName = MenubarPrimitive.Content.displayName

const MenubarItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
MenubarItem.displayName = MenubarPrimitive.Item.displayName

const MenubarCheckboxItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <MenubarPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.CheckboxItem>
))
MenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName

const MenubarRadioItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <MenubarPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.RadioItem>
))
MenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName

const MenubarLabel = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Label
    ref={ref}
    className={cn(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
MenubarLabel.displayName = MenubarPrimitive.Label.displayName

const MenubarSeparator = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
MenubarSeparator.displayName = MenubarPrimitive.Separator.displayName

const MenubarShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn(
        "ml-auto text-xs tracking-widest text-muted-foreground",
        className
      )}
      {...props}
    />
  )
}
MenubarShortcut.displayname = "MenubarShortcut"

export {
  Menubar,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarItem,
  MenubarSeparator,
  MenubarLabel,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarPortal,
  MenubarSubContent,
  MenubarSubTrigger,
  MenubarGroup,
  MenubarSub,
  MenubarShortcut,
}



================================================================================
LOCATION: components\ui\mode-toggle.tsx
================================================================================

"use client"

import * as React from "react"
import { Moon, Sun } from "lucide-react"
import { useTheme } from "next-themes"

import { Button } from "@/components/ui/button"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

export function ModeToggle() {
  const { setTheme } = useTheme()

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon" className=" focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-transparent">
          <Sun className="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
          <Moon className="absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
          <span className="sr-only">Toggle theme</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme("light")}>
          Light
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme("dark")}>
          Dark
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}



================================================================================
LOCATION: components\ui\navigation-menu.tsx
================================================================================

import * as React from "react"
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu"
import { cva } from "class-variance-authority"
import { ChevronDown } from "lucide-react"

import { cn } from "@/lib/utils"

const NavigationMenu = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Root
    ref={ref}
    className={cn(
      "relative z-10 flex max-w-max flex-1 items-center justify-center",
      className
    )}
    {...props}
  >
    {children}
    <NavigationMenuViewport />
  </NavigationMenuPrimitive.Root>
))
NavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName

const NavigationMenuList = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.List
    ref={ref}
    className={cn(
      "group flex flex-1 list-none items-center justify-center space-x-1",
      className
    )}
    {...props}
  />
))
NavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName

const NavigationMenuItem = NavigationMenuPrimitive.Item

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"
)

const NavigationMenuTrigger = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Trigger
    ref={ref}
    className={cn(navigationMenuTriggerStyle(), "group", className)}
    {...props}
  >
    {children}{" "}
    <ChevronDown
      className="relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuPrimitive.Trigger>
))
NavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName

const NavigationMenuContent = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Content
    ref={ref}
    className={cn(
      "left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",
      className
    )}
    {...props}
  />
))
NavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName

const NavigationMenuLink = NavigationMenuPrimitive.Link

const NavigationMenuViewport = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>
>(({ className, ...props }, ref) => (
  <div className={cn("absolute left-0 top-full flex justify-center")}>
    <NavigationMenuPrimitive.Viewport
      className={cn(
        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
        className
      )}
      ref={ref}
      {...props}
    />
  </div>
))
NavigationMenuViewport.displayName =
  NavigationMenuPrimitive.Viewport.displayName

const NavigationMenuIndicator = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Indicator
    ref={ref}
    className={cn(
      "top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",
      className
    )}
    {...props}
  >
    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
  </NavigationMenuPrimitive.Indicator>
))
NavigationMenuIndicator.displayName =
  NavigationMenuPrimitive.Indicator.displayName

export {
  navigationMenuTriggerStyle,
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
}



================================================================================
LOCATION: components\ui\pagination.tsx
================================================================================

import * as React from "react"
import { ChevronLeft, ChevronRight, MoreHorizontal } from "lucide-react"

import { cn } from "@/lib/utils"
import { ButtonProps, buttonVariants } from "@/components/ui/button"

const Pagination = ({ className, ...props }: React.ComponentProps<"nav">) => (
  <nav
    role="navigation"
    aria-label="pagination"
    className={cn("mx-auto flex w-full justify-center", className)}
    {...props}
  />
)
Pagination.displayName = "Pagination"

const PaginationContent = React.forwardRef<
  HTMLUListElement,
  React.ComponentProps<"ul">
>(({ className, ...props }, ref) => (
  <ul
    ref={ref}
    className={cn("flex flex-row items-center gap-1", className)}
    {...props}
  />
))
PaginationContent.displayName = "PaginationContent"

const PaginationItem = React.forwardRef<
  HTMLLIElement,
  React.ComponentProps<"li">
>(({ className, ...props }, ref) => (
  <li ref={ref} className={cn("", className)} {...props} />
))
PaginationItem.displayName = "PaginationItem"

type PaginationLinkProps = {
  isActive?: boolean
} & Pick<ButtonProps, "size"> &
  React.ComponentProps<"a">

const PaginationLink = ({
  className,
  isActive,
  size = "icon",
  ...props
}: PaginationLinkProps) => (
  <a
    aria-current={isActive ? "page" : undefined}
    className={cn(
      buttonVariants({
        variant: isActive ? "outline" : "ghost",
        size,
      }),
      className
    )}
    {...props}
  />
)
PaginationLink.displayName = "PaginationLink"

const PaginationPrevious = ({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink
    aria-label="Go to previous page"
    size="default"
    className={cn("gap-1 pl-2.5", className)}
    {...props}
  >
    <ChevronLeft className="h-4 w-4" />
    <span>Previous</span>
  </PaginationLink>
)
PaginationPrevious.displayName = "PaginationPrevious"

const PaginationNext = ({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink
    aria-label="Go to next page"
    size="default"
    className={cn("gap-1 pr-2.5", className)}
    {...props}
  >
    <span>Next</span>
    <ChevronRight className="h-4 w-4" />
  </PaginationLink>
)
PaginationNext.displayName = "PaginationNext"

const PaginationEllipsis = ({
  className,
  ...props
}: React.ComponentProps<"span">) => (
  <span
    aria-hidden
    className={cn("flex h-9 w-9 items-center justify-center", className)}
    {...props}
  >
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More pages</span>
  </span>
)
PaginationEllipsis.displayName = "PaginationEllipsis"

export {
  Pagination,
  PaginationContent,
  PaginationEllipsis,
  PaginationItem,
  PaginationLink,
  PaginationNext,
  PaginationPrevious,
}



================================================================================
LOCATION: components\ui\popover.tsx
================================================================================

"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

const Popover = PopoverPrimitive.Root

const PopoverTrigger = PopoverPrimitive.Trigger

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
))
PopoverContent.displayName = PopoverPrimitive.Content.displayName

export { Popover, PopoverTrigger, PopoverContent }



================================================================================
LOCATION: components\ui\progress.tsx
================================================================================

"use client"

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn(
      "relative h-4 w-full overflow-hidden rounded-full bg-secondary",
      className
    )}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
))
Progress.displayName = ProgressPrimitive.Root.displayName

export { Progress }



================================================================================
LOCATION: components\ui\radio-group.tsx
================================================================================

"use client"

import * as React from "react"
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group"
import { Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const RadioGroup = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Root
      className={cn("grid gap-2", className)}
      {...props}
      ref={ref}
    />
  )
})
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName

const RadioGroupItem = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Item
      ref={ref}
      className={cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator className="flex items-center justify-center">
        <Circle className="h-2.5 w-2.5 fill-current text-current" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  )
})
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName

export { RadioGroup, RadioGroupItem }



================================================================================
LOCATION: components\ui\resizable.tsx
================================================================================

"use client"

import { GripVertical } from "lucide-react"
import * as ResizablePrimitive from "react-resizable-panels"

import { cn } from "@/lib/utils"

const ResizablePanelGroup = ({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (
  <ResizablePrimitive.PanelGroup
    className={cn(
      "flex h-full w-full data-[panel-group-direction=vertical]:flex-col",
      className
    )}
    {...props}
  />
)

const ResizablePanel = ResizablePrimitive.Panel

const ResizableHandle = ({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean
}) => (
  <ResizablePrimitive.PanelResizeHandle
    className={cn(
      "relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",
      className
    )}
    {...props}
  >
    {withHandle && (
      <div className="z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border">
        <GripVertical className="h-2.5 w-2.5" />
      </div>
    )}
  </ResizablePrimitive.PanelResizeHandle>
)

export { ResizablePanelGroup, ResizablePanel, ResizableHandle }



================================================================================
LOCATION: components\ui\scroll-area.tsx
================================================================================

"use client"

import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root
    ref={ref}
    className={cn("relative overflow-hidden", className)}
    {...props}
  >
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">
      {children}
    </ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
))
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" &&
        "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" &&
        "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
))
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName

export { ScrollArea, ScrollBar }



================================================================================
LOCATION: components\ui\select.tsx
================================================================================

"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"

import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root

const SelectGroup = SelectPrimitive.Group

const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName =
  SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className)}
    {...props}
  />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>

    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
SelectSeparator.displayName = SelectPrimitive.Separator.displayName

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
}



================================================================================
LOCATION: components\ui\separator.tsx
================================================================================

"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(
  (
    { className, orientation = "horizontal", decorative = true, ...props },
    ref
  ) => (
    <SeparatorPrimitive.Root
      ref={ref}
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "shrink-0 bg-border",
        orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        className
      )}
      {...props}
    />
  )
)
Separator.displayName = SeparatorPrimitive.Root.displayName

export { Separator }



================================================================================
LOCATION: components\ui\sheet.tsx
================================================================================

"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Sheet = SheetPrimitive.Root

const SheetTrigger = SheetPrimitive.Trigger

const SheetClose = SheetPrimitive.Close

const SheetPortal = SheetPrimitive.Portal

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
    ref={ref}
  />
))
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName

const sheetVariants = cva(
  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
  {
    variants: {
      side: {
        top: "inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",
        bottom:
          "inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",
        left: "inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",
        right:
          "inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",
      },
    },
    defaultVariants: {
      side: "right",
    },
  }
)

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Content>,
  SheetContentProps
>(({ side = "right", className, children, ...props }, ref) => (
  <SheetPortal>
    <SheetOverlay />
    <SheetPrimitive.Content
      ref={ref}
      className={cn(sheetVariants({ side }), className)}
      {...props}
    >
      {children}
      <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </SheetPrimitive.Close>
    </SheetPrimitive.Content>
  </SheetPortal>
))
SheetContent.displayName = SheetPrimitive.Content.displayName

const SheetHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
SheetHeader.displayName = "SheetHeader"

const SheetFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
SheetFooter.displayName = "SheetFooter"

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold text-foreground", className)}
    {...props}
  />
))
SheetTitle.displayName = SheetPrimitive.Title.displayName

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
SheetDescription.displayName = SheetPrimitive.Description.displayName

export {
  Sheet,
  SheetPortal,
  SheetOverlay,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}



================================================================================
LOCATION: components\ui\sidebar.tsx
================================================================================

"use client"

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { VariantProps, cva } from "class-variance-authority"
import { PanelLeft } from "lucide-react"

import { useIsMobile } from "@/hooks/use-mobile"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Separator } from "@/components/ui/separator"
import { Sheet, SheetContent } from "@/components/ui/sheet"
import { Skeleton } from "@/components/ui/skeleton"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

const SIDEBAR_COOKIE_NAME = "sidebar:state"
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
const SIDEBAR_WIDTH = "16rem"
const SIDEBAR_WIDTH_MOBILE = "18rem"
const SIDEBAR_WIDTH_ICON = "3rem"
const SIDEBAR_KEYBOARD_SHORTCUT = "b"

type SidebarContext = {
  state: "expanded" | "collapsed"
  open: boolean
  setOpen: (open: boolean) => void
  openMobile: boolean
  setOpenMobile: (open: boolean) => void
  isMobile: boolean
  toggleSidebar: () => void
}

const SidebarContext = React.createContext<SidebarContext | null>(null)

function useSidebar() {
  const context = React.useContext(SidebarContext)
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.")
  }

  return context
}

const SidebarProvider = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    defaultOpen?: boolean
    open?: boolean
    onOpenChange?: (open: boolean) => void
  }
>(
  (
    {
      defaultOpen = true,
      open: openProp,
      onOpenChange: setOpenProp,
      className,
      style,
      children,
      ...props
    },
    ref
  ) => {
    const isMobile = useIsMobile()
    const [openMobile, setOpenMobile] = React.useState(false)

    // This is the internal state of the sidebar.
    // We use openProp and setOpenProp for control from outside the component.
    const [_open, _setOpen] = React.useState(defaultOpen)
    const open = openProp ?? _open
    const setOpen = React.useCallback(
      (value: boolean | ((value: boolean) => boolean)) => {
        const openState = typeof value === "function" ? value(open) : value
        if (setOpenProp) {
          setOpenProp(openState)
        } else {
          _setOpen(openState)
        }

        // This sets the cookie to keep the sidebar state.
        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
      },
      [setOpenProp, open]
    )

    // Helper to toggle the sidebar.
    const toggleSidebar = React.useCallback(() => {
      return isMobile
        ? setOpenMobile((open) => !open)
        : setOpen((open) => !open)
    }, [isMobile, setOpen, setOpenMobile])

    // Adds a keyboard shortcut to toggle the sidebar.
    React.useEffect(() => {
      const handleKeyDown = (event: KeyboardEvent) => {
        if (
          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
          (event.metaKey || event.ctrlKey)
        ) {
          event.preventDefault()
          toggleSidebar()
        }
      }

      window.addEventListener("keydown", handleKeyDown)
      return () => window.removeEventListener("keydown", handleKeyDown)
    }, [toggleSidebar])

    // We add a state so that we can do data-state="expanded" or "collapsed".
    // This makes it easier to style the sidebar with Tailwind classes.
    const state = open ? "expanded" : "collapsed"

    const contextValue = React.useMemo<SidebarContext>(
      () => ({
        state,
        open,
        setOpen,
        isMobile,
        openMobile,
        setOpenMobile,
        toggleSidebar,
      }),
      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]
    )

    return (
      <SidebarContext.Provider value={contextValue}>
        <TooltipProvider delayDuration={0}>
          <div
            style={
              {
                "--sidebar-width": SIDEBAR_WIDTH,
                "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
                ...style,
              } as React.CSSProperties
            }
            className={cn(
              "group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",
              className
            )}
            ref={ref}
            {...props}
          >
            {children}
          </div>
        </TooltipProvider>
      </SidebarContext.Provider>
    )
  }
)
SidebarProvider.displayName = "SidebarProvider"

const Sidebar = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    side?: "left" | "right"
    variant?: "sidebar" | "floating" | "inset"
    collapsible?: "offcanvas" | "icon" | "none"
  }
>(
  (
    {
      side = "left",
      variant = "sidebar",
      collapsible = "offcanvas",
      className,
      children,
      ...props
    },
    ref
  ) => {
    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()

    if (collapsible === "none") {
      return (
        <div
          className={cn(
            "flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",
            className
          )}
          ref={ref}
          {...props}
        >
          {children}
        </div>
      )
    }

    if (isMobile) {
      return (
        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
          <SheetContent
            data-sidebar="sidebar"
            data-mobile="true"
            className="w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden"
            style={
              {
                "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
              } as React.CSSProperties
            }
            side={side}
          >
            <div className="flex h-full w-full flex-col">{children}</div>
          </SheetContent>
        </Sheet>
      )
    }

    return (
      <div
        ref={ref}
        className="group peer hidden md:block text-sidebar-foreground"
        data-state={state}
        data-collapsible={state === "collapsed" ? collapsible : ""}
        data-variant={variant}
        data-side={side}
      >
        {/* This is what handles the sidebar gap on desktop */}
        <div
          className={cn(
            "duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear",
            "group-data-[collapsible=offcanvas]:w-0",
            "group-data-[side=right]:rotate-180",
            variant === "floating" || variant === "inset"
              ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]"
              : "group-data-[collapsible=icon]:w-[--sidebar-width-icon]"
          )}
        />
        <div
          className={cn(
            "duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",
            side === "left"
              ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
              : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
            // Adjust the padding for floating and inset variants.
            variant === "floating" || variant === "inset"
              ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]"
              : "group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",
            className
          )}
          {...props}
        >
          <div
            data-sidebar="sidebar"
            className="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow"
          >
            {children}
          </div>
        </div>
      </div>
    )
  }
)
Sidebar.displayName = "Sidebar"

const SidebarTrigger = React.forwardRef<
  React.ElementRef<typeof Button>,
  React.ComponentProps<typeof Button>
>(({ className, onClick, ...props }, ref) => {
  const { toggleSidebar } = useSidebar()

  return (
    <Button
      ref={ref}
      data-sidebar="trigger"
      variant="ghost"
      size="icon"
      className={cn("h-7 w-7", className)}
      onClick={(event) => {
        onClick?.(event)
        toggleSidebar()
      }}
      {...props}
    >
      <PanelLeft />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  )
})
SidebarTrigger.displayName = "SidebarTrigger"

const SidebarRail = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button">
>(({ className, ...props }, ref) => {
  const { toggleSidebar } = useSidebar()

  return (
    <button
      ref={ref}
      data-sidebar="rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex",
        "[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className
      )}
      {...props}
    />
  )
})
SidebarRail.displayName = "SidebarRail"

const SidebarInset = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"main">
>(({ className, ...props }, ref) => {
  return (
    <main
      ref={ref}
      className={cn(
        "relative flex min-h-svh flex-1 flex-col bg-background",
        "peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",
        className
      )}
      {...props}
    />
  )
})
SidebarInset.displayName = "SidebarInset"

const SidebarInput = React.forwardRef<
  React.ElementRef<typeof Input>,
  React.ComponentProps<typeof Input>
>(({ className, ...props }, ref) => {
  return (
    <Input
      ref={ref}
      data-sidebar="input"
      className={cn(
        "h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",
        className
      )}
      {...props}
    />
  )
})
SidebarInput.displayName = "SidebarInput"

const SidebarHeader = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
})
SidebarHeader.displayName = "SidebarHeader"

const SidebarFooter = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
})
SidebarFooter.displayName = "SidebarFooter"

const SidebarSeparator = React.forwardRef<
  React.ElementRef<typeof Separator>,
  React.ComponentProps<typeof Separator>
>(({ className, ...props }, ref) => {
  return (
    <Separator
      ref={ref}
      data-sidebar="separator"
      className={cn("mx-2 w-auto bg-sidebar-border", className)}
      {...props}
    />
  )
})
SidebarSeparator.displayName = "SidebarSeparator"

const SidebarContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className
      )}
      {...props}
    />
  )
})
SidebarContent.displayName = "SidebarContent"

const SidebarGroup = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  )
})
SidebarGroup.displayName = "SidebarGroup"

const SidebarGroupLabel = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & { asChild?: boolean }
>(({ className, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "div"

  return (
    <Comp
      ref={ref}
      data-sidebar="group-label"
      className={cn(
        "duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className
      )}
      {...props}
    />
  )
})
SidebarGroupLabel.displayName = "SidebarGroupLabel"

const SidebarGroupAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & { asChild?: boolean }
>(({ className, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      ref={ref}
      data-sidebar="group-action"
      className={cn(
        "absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 after:md:hidden",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
})
SidebarGroupAction.displayName = "SidebarGroupAction"

const SidebarGroupContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    data-sidebar="group-content"
    className={cn("w-full text-sm", className)}
    {...props}
  />
))
SidebarGroupContent.displayName = "SidebarGroupContent"

const SidebarMenu = React.forwardRef<
  HTMLUListElement,
  React.ComponentProps<"ul">
>(({ className, ...props }, ref) => (
  <ul
    ref={ref}
    data-sidebar="menu"
    className={cn("flex w-full min-w-0 flex-col gap-1", className)}
    {...props}
  />
))
SidebarMenu.displayName = "SidebarMenu"

const SidebarMenuItem = React.forwardRef<
  HTMLLIElement,
  React.ComponentProps<"li">
>(({ className, ...props }, ref) => (
  <li
    ref={ref}
    data-sidebar="menu-item"
    className={cn("group/menu-item relative", className)}
    {...props}
  />
))
SidebarMenuItem.displayName = "SidebarMenuItem"

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:!p-0",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

const SidebarMenuButton = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean
    isActive?: boolean
    tooltip?: string | React.ComponentProps<typeof TooltipContent>
  } & VariantProps<typeof sidebarMenuButtonVariants>
>(
  (
    {
      asChild = false,
      isActive = false,
      variant = "default",
      size = "default",
      tooltip,
      className,
      ...props
    },
    ref
  ) => {
    const Comp = asChild ? Slot : "button"
    const { isMobile, state } = useSidebar()

    const button = (
      <Comp
        ref={ref}
        data-sidebar="menu-button"
        data-size={size}
        data-active={isActive}
        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
        {...props}
      />
    )

    if (!tooltip) {
      return button
    }

    if (typeof tooltip === "string") {
      tooltip = {
        children: tooltip,
      }
    }

    return (
      <Tooltip>
        <TooltipTrigger asChild>{button}</TooltipTrigger>
        <TooltipContent
          side="right"
          align="center"
          hidden={state !== "collapsed" || isMobile}
          {...tooltip}
        />
      </Tooltip>
    )
  }
)
SidebarMenuButton.displayName = "SidebarMenuButton"

const SidebarMenuAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean
    showOnHover?: boolean
  }
>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-action"
      className={cn(
        "absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 after:md:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",
        className
      )}
      {...props}
    />
  )
})
SidebarMenuAction.displayName = "SidebarMenuAction"

const SidebarMenuBadge = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    data-sidebar="menu-badge"
    className={cn(
      "absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none",
      "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
      "peer-data-[size=sm]/menu-button:top-1",
      "peer-data-[size=default]/menu-button:top-1.5",
      "peer-data-[size=lg]/menu-button:top-2.5",
      "group-data-[collapsible=icon]:hidden",
      className
    )}
    {...props}
  />
))
SidebarMenuBadge.displayName = "SidebarMenuBadge"

const SidebarMenuSkeleton = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    showIcon?: boolean
  }
>(({ className, showIcon = false, ...props }, ref) => {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`
  }, [])

  return (
    <div
      ref={ref}
      data-sidebar="menu-skeleton"
      className={cn("rounded-md h-8 flex gap-2 px-2 items-center", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 flex-1 max-w-[--skeleton-width]"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  )
})
SidebarMenuSkeleton.displayName = "SidebarMenuSkeleton"

const SidebarMenuSub = React.forwardRef<
  HTMLUListElement,
  React.ComponentProps<"ul">
>(({ className, ...props }, ref) => (
  <ul
    ref={ref}
    data-sidebar="menu-sub"
    className={cn(
      "mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5",
      "group-data-[collapsible=icon]:hidden",
      className
    )}
    {...props}
  />
))
SidebarMenuSub.displayName = "SidebarMenuSub"

const SidebarMenuSubItem = React.forwardRef<
  HTMLLIElement,
  React.ComponentProps<"li">
>(({ ...props }, ref) => <li ref={ref} {...props} />)
SidebarMenuSubItem.displayName = "SidebarMenuSubItem"

const SidebarMenuSubButton = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentProps<"a"> & {
    asChild?: boolean
    size?: "sm" | "md"
    isActive?: boolean
  }
>(({ asChild = false, size = "md", isActive, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
})
SidebarMenuSubButton.displayName = "SidebarMenuSubButton"

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
}



================================================================================
LOCATION: components\ui\skeleton.tsx
================================================================================

import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn("animate-pulse rounded-md bg-muted", className)}
      {...props}
    />
  )
}

export { Skeleton }



================================================================================
LOCATION: components\ui\slider.tsx
================================================================================

"use client"

import * as React from "react"
import * as SliderPrimitive from "@radix-ui/react-slider"

import { cn } from "@/lib/utils"

const Slider = React.forwardRef<
  React.ElementRef<typeof SliderPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>
>(({ className, ...props }, ref) => (
  <SliderPrimitive.Root
    ref={ref}
    className={cn(
      "relative flex w-full touch-none select-none items-center",
      className
    )}
    {...props}
  >
    <SliderPrimitive.Track className="relative h-2 w-full grow overflow-hidden rounded-full bg-secondary">
      <SliderPrimitive.Range className="absolute h-full bg-primary" />
    </SliderPrimitive.Track>
    <SliderPrimitive.Thumb className="block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50" />
  </SliderPrimitive.Root>
))
Slider.displayName = SliderPrimitive.Root.displayName

export { Slider }



================================================================================
LOCATION: components\ui\sonner.tsx
================================================================================

"use client"

import { useTheme } from "next-themes"
import { Toaster as Sonner } from "sonner"

type ToasterProps = React.ComponentProps<typeof Sonner>

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme()

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      toastOptions={{
        classNames: {
          toast:
            "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
          description: "group-[.toast]:text-muted-foreground",
          actionButton:
            "group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",
          cancelButton:
            "group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",
        },
      }}
      {...props}
    />
  )
}

export { Toaster }



================================================================================
LOCATION: components\ui\switch.tsx
================================================================================

"use client"

import * as React from "react"
import * as SwitchPrimitives from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      "peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
      className
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        "pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"
      )}
    />
  </SwitchPrimitives.Root>
))
Switch.displayName = SwitchPrimitives.Root.displayName

export { Switch }



================================================================================
LOCATION: components\ui\table.tsx
================================================================================

import * as React from "react"

import { cn } from "@/lib/utils"

const Table = React.forwardRef<
  HTMLTableElement,
  React.HTMLAttributes<HTMLTableElement>
>(({ className, ...props }, ref) => (
  <div className="relative w-full overflow-auto">
    <table
      ref={ref}
      className={cn("w-full caption-bottom text-sm", className)}
      {...props}
    />
  </div>
))
Table.displayName = "Table"

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
))
TableHeader.displayName = "TableHeader"

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody
    ref={ref}
    className={cn("[&_tr:last-child]:border-0", className)}
    {...props}
  />
))
TableBody.displayName = "TableBody"

const TableFooter = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tfoot
    ref={ref}
    className={cn(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    )}
    {...props}
  />
))
TableFooter.displayName = "TableFooter"

const TableRow = React.forwardRef<
  HTMLTableRowElement,
  React.HTMLAttributes<HTMLTableRowElement>
>(({ className, ...props }, ref) => (
  <tr
    ref={ref}
    className={cn(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    )}
    {...props}
  />
))
TableRow.displayName = "TableRow"

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      "h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",
      className
    )}
    {...props}
  />
))
TableHead.displayName = "TableHead"

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className)}
    {...props}
  />
))
TableCell.displayName = "TableCell"

const TableCaption = React.forwardRef<
  HTMLTableCaptionElement,
  React.HTMLAttributes<HTMLTableCaptionElement>
>(({ className, ...props }, ref) => (
  <caption
    ref={ref}
    className={cn("mt-4 text-sm text-muted-foreground", className)}
    {...props}
  />
))
TableCaption.displayName = "TableCaption"

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}



================================================================================
LOCATION: components\ui\tabs.tsx
================================================================================

"use client"

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

const Tabs = TabsPrimitive.Root

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",
      className
    )}
    {...props}
  />
))
TabsList.displayName = TabsPrimitive.List.displayName

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",
      className
    )}
    {...props}
  />
))
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
))
TabsContent.displayName = TabsPrimitive.Content.displayName

export { Tabs, TabsList, TabsTrigger, TabsContent }



================================================================================
LOCATION: components\ui\textarea.tsx
================================================================================

import * as React from "react"

import { cn } from "@/lib/utils"

export interface TextareaProps
  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, ...props }, ref) => {
    return (
      <textarea
        className={cn(
          "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Textarea.displayName = "Textarea"

export { Textarea }



================================================================================
LOCATION: components\ui\theme-provider.tsx
================================================================================

"use client"
import { createContext, useContext, useEffect, useState } from "react"

type Theme = "dark" | "light" | "system"

type ThemeProviderProps = {
  children: React.ReactNode
  defaultTheme?: Theme
  storageKey?: string
}

type ThemeProviderState = {
  theme: Theme
  setTheme: (theme: Theme) => void
}

const initialState: ThemeProviderState = {
  theme: "system",
  setTheme: () => null,
}

const ThemeProviderContext = createContext<ThemeProviderState>(initialState)

export function ThemeProvider({
  children,
  defaultTheme = "system",
  storageKey = "vite-ui-theme",
  ...props
}: ThemeProviderProps) {
  const [theme, setTheme] = useState<Theme>(
    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme
  )

  useEffect(() => {
    const root = window.document.documentElement

    root.classList.remove("light", "dark")

    if (theme === "system") {
      const systemTheme = window.matchMedia("(prefers-color-scheme: dark)")
        .matches
        ? "dark"
        : "light"

      root.classList.add(systemTheme)
      return
    }

    root.classList.add(theme)
  }, [theme])

  const value = {
    theme,
    setTheme: (theme: Theme) => {
      localStorage.setItem(storageKey, theme)
      setTheme(theme)
    },
  }

  return (
    <ThemeProviderContext.Provider {...props} value={value}>
      {children}
    </ThemeProviderContext.Provider>
  )
}

export const useTheme = () => {
  const context = useContext(ThemeProviderContext)

  if (context === undefined)
    throw new Error("useTheme must be used within a ThemeProvider")

  return context
}



================================================================================
LOCATION: components\ui\toast.tsx
================================================================================

"use client"

import * as React from "react"
import * as ToastPrimitives from "@radix-ui/react-toast"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive:
          "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
      className
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn("text-sm font-semibold", className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn("text-sm opacity-90", className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>

type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}



================================================================================
LOCATION: components\ui\toaster.tsx
================================================================================

"use client"

import { useToast } from "@/hooks/use-toast"
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from "@/components/ui/toast"

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}



================================================================================
LOCATION: components\ui\toggle-group.tsx
================================================================================

"use client"

import * as React from "react"
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group"
import { type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"
import { toggleVariants } from "@/components/ui/toggle"

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: "default",
  variant: "default",
})

const ToggleGroup = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &
    VariantProps<typeof toggleVariants>
>(({ className, variant, size, children, ...props }, ref) => (
  <ToggleGroupPrimitive.Root
    ref={ref}
    className={cn("flex items-center justify-center gap-1", className)}
    {...props}
  >
    <ToggleGroupContext.Provider value={{ variant, size }}>
      {children}
    </ToggleGroupContext.Provider>
  </ToggleGroupPrimitive.Root>
))

ToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName

const ToggleGroupItem = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &
    VariantProps<typeof toggleVariants>
>(({ className, children, variant, size, ...props }, ref) => {
  const context = React.useContext(ToggleGroupContext)

  return (
    <ToggleGroupPrimitive.Item
      ref={ref}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        className
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  )
})

ToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName

export { ToggleGroup, ToggleGroupItem }



================================================================================
LOCATION: components\ui\toggle.tsx
================================================================================

"use client"

import * as React from "react"
import * as TogglePrimitive from "@radix-ui/react-toggle"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const toggleVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline:
          "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-10 px-3 min-w-10",
        sm: "h-9 px-2.5 min-w-9",
        lg: "h-11 px-5 min-w-11",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

const Toggle = React.forwardRef<
  React.ElementRef<typeof TogglePrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &
    VariantProps<typeof toggleVariants>
>(({ className, variant, size, ...props }, ref) => (
  <TogglePrimitive.Root
    ref={ref}
    className={cn(toggleVariants({ variant, size, className }))}
    {...props}
  />
))

Toggle.displayName = TogglePrimitive.Root.displayName

export { Toggle, toggleVariants }



================================================================================
LOCATION: components\ui\tooltip.tsx
================================================================================

"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

const TooltipProvider = TooltipPrimitive.Provider

const Tooltip = TooltipPrimitive.Root

const TooltipTrigger = TooltipPrimitive.Trigger

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Content
    ref={ref}
    sideOffset={sideOffset}
    className={cn(
      "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
TooltipContent.displayName = TooltipPrimitive.Content.displayName

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }



================================================================================
LOCATION: components\utility\contactForm.tsx
================================================================================

"use client";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { toast } from "sonner";
import React, { useRef, useState, FormEvent } from "react";
import { Toaster } from "@/components/ui/sonner";
import { useAppContext } from "@/hooks/useAppContext";

const ContactForm = () => {
  const { user } = useAppContext();
  const [details, setDetails] = useState({
    username: user?.name || "",
    email: user?.email || "",
    category: "suggestion",
    message: "",
    to: "admin",
    file: null as File | null,
  });

  const formRef = useRef<HTMLFormElement>(null);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value, files } = e.target as any;
    if (name === "file" && files?.length) {
      setDetails((prev) => ({ ...prev, file: files[0] }));
    } else {
      setDetails((prev) => ({ ...prev, [name]: value }));
    }
  };

  const sendMessage = async (e: FormEvent) => {
    e.preventDefault();

    if (!details.username || !details.email || !details.message) {
      toast.error("Please fill in all required fields");
      return;
    }

    try {
      const messageData = {
        userId: user?.id || "guest",
        senderName: details.username,
        senderEmail: details.email,
        subject: details.category,
        message: details.message,
      };

      const res = await fetch("/api/dbhandler?model=message", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(messageData)
      });

      const data = await res.json();

      if (res.ok) {
        toast.success("Message sent successfully! We'll respond soon.");
        formRef.current?.reset();
        setDetails({
          username: user?.name || "",
          email: user?.email || "",
          category: "suggestion",
          message: "",
          to: "admin",
          file: null,
        });
      } else {
        toast.error(data.error || "Failed to send message");
      }
    } catch (err) {
      console.error(err);
      toast.error("An error occurred while sending message");
    }
  };

  return (
    <>
      <Toaster />
      <form ref={formRef} onSubmit={sendMessage} className="flex flex-col gap-6 p-10 bg-secondary rounded-xl">
        <h3 className="text-4xl text-accent mb-7">Message Us</h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <Input
            type="text"
            name="username"
            value={details.username}
            placeholder="Username"
            onChange={handleChange}
            className="rounded-sm bg-background"
          />
          <Input
            type="email"
            name="email"
            value={details.email}
            placeholder="Email address"
            onChange={handleChange}
            className="rounded-sm bg-background"
          />
        </div>

        <select
          name="category"
          value={details.category}
          onChange={handleChange}
          className="bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30"
        >
          <option value="suggestion">Suggestion</option>
          <option value="complaint">Complaint</option>
          <option value="advert">Advert</option>
          <option value="appreciate">Appreciate</option>
          <option value="question">Question</option>
          <option value="other">Other</option>
        </select>

        <Textarea
          className="h-[120px]"
          name="message"
          value={details.message}
          onChange={handleChange}
          placeholder="Type your message here"
        />

        <Input type="file" name="file" onChange={handleChange} className="bg-background rounded-sm" />

        <Button type="submit" className="before:ani-shadow">
          Submit
        </Button>
      </form>
    </>
  );
};

export default ContactForm;



================================================================================
LOCATION: components\utility\MessageHistory.tsx
================================================================================

"use client";

import { useState, useEffect } from "react";
import { useSession } from "next-auth/react";
import axios from "axios";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { ScrollArea } from "@/components/ui/scroll-area";
import { toast } from "sonner";
import { formatDistanceToNow } from "date-fns";

type Message = {
    id: string;
    senderName: string;
    senderEmail: string;
    subject: string;
    message: string;
    adminResponse?: string;
    isSeen: boolean;
    isResolved: boolean;
    createdAt: string;
    updatedAt: string;
};

export default function MessageHistory() {
    const { data: session } = useSession();
    const [messages, setMessages] = useState<Message[]>([]);
    const [loading, setLoading] = useState(true);
    const [selectedMessage, setSelectedMessage] = useState<Message | null>(null);

    const fetchMessages = async () => {
        if (!session?.user?.email) return;

        try {
            const res = await axios.get("/api/dbhandler?model=message");
            const userMessages = res.data.filter(
                (msg: any) => msg.senderEmail === session.user.email
            );
            setMessages(userMessages);

            // Mark messages as seen
            userMessages.forEach(async (msg: Message) => {
                if (!msg.isSeen && msg.adminResponse) {
                    await axios.put(`/api/dbhandler?model=message&id=${msg.id}`, {
                        id: msg.id,
                        isSeen: true,
                    });
                }
            });
        } catch (error) {
            console.error("Failed to fetch messages:", error);
            toast.error("Failed to load messages");
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        fetchMessages();
    }, [session]);

    const unseenCount = messages.filter(m => !m.isSeen && m.adminResponse).length;

    if (loading) {
        return <div className="p-4">Loading messages...</div>;
    }

    if (!session) {
        return (
            <Card className="m-4">
                <CardContent className="p-6">
                    <p className="text-center text-muted-foreground">
                        Please sign in to view your messages
                    </p>
                </CardContent>
            </Card>
        );
    }

    return (
        <div className="container mx-auto p-4 max-w-4xl">
            <div className="flex items-center justify-between mb-6">
                <h2 className="text-2xl font-bold">Message History</h2>
                {unseenCount > 0 && (
                    <Badge variant="destructive" className="text-sm">
                        {unseenCount} New Response{unseenCount > 1 ? "s" : ""}
                    </Badge>
                )}
            </div>

            {messages.length === 0 ? (
                <Card>
                    <CardContent className="p-6">
                        <p className="text-center text-muted-foreground">
                            No messages yet. Send a message using the contact form above.
                        </p>
                    </CardContent>
                </Card>
            ) : (
                <ScrollArea className="h-[600px] pr-4">
                    <div className="space-y-4">
                        {messages.map((msg) => (
                            <Card
                                key={msg.id}
                                className={cn(
                                    "cursor-pointer transition-all hover:shadow-md",
                                    !msg.isSeen && msg.adminResponse && "border-primary"
                                )}
                                onClick={() => setSelectedMessage(msg)}
                            >
                                <CardHeader>
                                    <div className="flex items-start justify-between">
                                        <div className="flex-1">
                                            <CardTitle className="text-lg">{msg.subject}</CardTitle>
                                            <p className="text-sm text-muted-foreground mt-1">
                                                {formatDistanceToNow(new Date(msg.createdAt), {
                                                    addSuffix: true,
                                                })}
                                            </p>
                                        </div>
                                        <div className="flex gap-2">
                                            {!msg.isSeen && msg.adminResponse && (
                                                <Badge variant="destructive">New</Badge>
                                            )}
                                            {msg.isResolved && (
                                                <Badge variant="secondary">Resolved</Badge>
                                            )}
                                            {!msg.adminResponse && !msg.isResolved && (
                                                <Badge variant="outline">Pending</Badge>
                                            )}
                                        </div>
                                    </div>
                                </CardHeader>
                                <CardContent>
                                    <p className="text-sm line-clamp-2">{msg.message}</p>
                                    {msg.adminResponse && (
                                        <div className="mt-3 p-3 bg-muted rounded-md">
                                            <p className="text-xs font-semibold mb-1">Admin Response:</p>
                                            <p className="text-sm line-clamp-2">{msg.adminResponse}</p>
                                        </div>
                                    )}
                                </CardContent>
                            </Card>
                        ))}
                    </div>
                </ScrollArea>
            )}

            {/* Message Detail Modal */}
            {selectedMessage && (
                <div
                    className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"
                    onClick={() => setSelectedMessage(null)}
                >
                    <Card
                        className="max-w-2xl w-full max-h-[80vh] overflow-auto"
                        onClick={(e) => e.stopPropagation()}
                    >
                        <CardHeader>
                            <CardTitle>{selectedMessage.subject}</CardTitle>
                            <p className="text-sm text-muted-foreground">
                                Sent {formatDistanceToNow(new Date(selectedMessage.createdAt), {
                                    addSuffix: true,
                                })}
                            </p>
                        </CardHeader>
                        <CardContent className="space-y-4">
                            <div>
                                <p className="text-sm font-semibold mb-2">Your Message:</p>
                                <p className="text-sm whitespace-pre-wrap">{selectedMessage.message}</p>
                            </div>
                            {selectedMessage.adminResponse && (
                                <div className="p-4 bg-muted rounded-md">
                                    <p className="text-sm font-semibold mb-2">Admin Response:</p>
                                    <p className="text-sm whitespace-pre-wrap">
                                        {selectedMessage.adminResponse}
                                    </p>
                                    <p className="text-xs text-muted-foreground mt-2">
                                        Responded {formatDistanceToNow(new Date(selectedMessage.updatedAt), {
                                            addSuffix: true,
                                        })}
                                    </p>
                                </div>
                            )}
                            <Button
                                onClick={() => setSelectedMessage(null)}
                                className="w-full"
                                variant="outline"
                            >
                                Close
                            </Button>
                        </CardContent>
                    </Card>
                </div>
            )}
        </div>
    );
}

function cn(...classes: any[]) {
    return classes.filter(Boolean).join(" ");
}



================================================================================
LOCATION: components\utility\nav.tsx
================================================================================

// "use client"
// //import { Link, useLocation } from "react-router-dom"
// import Link from "next/link";
// import Links from "../../data/links";
// import { usePathname } from 'next/navigation';


// const Nav = () => {
//   const pathname = usePathname();        
//   return (
//     <nav className="flex gap-8 text-xl">
//       {Links.Links.map((link, index) => {
//         return (
//           <Link href={link.path} key={index} className={` ${link.path === pathname && "text-accent border-b-2 border-accent"} capitalize font-medium hover:text-accent transition-all`}>
//             {link.name}
//           </Link>
//         )
//       })}
//       {/* <a href="/portfolio">Portfolio</a> */}
//     </nav>
//   )
// }

// export default Nav


















"use client";

import Link from "next/link";
import Links from "../../data/links";
import { usePathname } from "next/navigation";

import {
  Tooltip,
  TooltipTrigger,
  TooltipContent,
  TooltipProvider,
} from "@/components/ui/tooltip";

const Nav = () => {
  const pathname = usePathname();

  return (
    <TooltipProvider>
      <nav className="flex gap-8 text-xl">
        {Links.Links.map((link, index) => {
          const isActive = link.path === pathname;

          return (
            <Tooltip key={index}>
              <TooltipTrigger asChild>
                <Link
                  href={link.path}
                  className={`${
                    isActive &&
                    "text-accent border-b-2 border-accent border-none outline-none"
                  } capitalize font-medium hover:text-accent transition-all`}
                >
                  {link.icon} 
                </Link>
              </TooltipTrigger>

              <TooltipContent>
                <p className="capitalize">{link.name}</p>
              </TooltipContent>
            </Tooltip>
          );
        })}
      </nav>
    </TooltipProvider>
  );
};

export default Nav;





================================================================================
LOCATION: components\utility\navbar.tsx
================================================================================

"use client"

import Link from 'next/link';
import Nav from './nav';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import Sidenav from './sidenav';
import { ModeToggle } from '@/components/ui/mode-toggle';
import { Suspense, useEffect } from "react"
import { AiOutlineSearch } from "react-icons/ai"
import { Advert } from "@/components/myComponents/subs"
import loyzspiceslogo from "@/public/logo.png"
import Image from "next/image";
import { Cart } from '../myComponents/subs/cart';
import { SearchInput } from '../myComponents/subs/searchcomponent';
import { useSession } from "next-auth/react";
import { useAppContext } from '@/hooks/useAppContext';
import {
  TooltipProvider,
  Tooltip,
  TooltipTrigger,
  TooltipContent
} from "@/components/ui/tooltip";
import { GlobalDialog } from '../ui/GlobalDialog';

const Navbar = (): JSX.Element => {
  const { setUser, user } = useAppContext();
  const { data: session, status } = useSession();

  useEffect(() => {
    if (status === "authenticated" && user.email === "nil") {
      setUser({
        ...session.user,
      });
    }
  }, [status, session, user.email, setUser]);

  return (
    <TooltipProvider>
      <div className="sticky top-0 z-30 w-[100vw] overflow-clip flex flex-col m-0 p-0">
        <header className="w-[100%] justify-center items-center py-1 bg-background sticky top-0 z-10 shadow-md shadow-accent/40">
          <div className="container mx-auto flex justify-between items-center gap-2 h-[60px] /md:h-[50px] overflow-clip">

            {/* Sidenav Mobile */}
            <Tooltip>
              <TooltipTrigger asChild>
                <div className="lg:hidden">
                  <Sidenav />
                </div>
              </TooltipTrigger>
              <TooltipContent>
                <p>Menu</p>
              </TooltipContent>
            </Tooltip>

            {/* Logo */}
            <Tooltip>
              <TooltipTrigger asChild>
                <Link href={"/"} className="flex dark:hidden flex-1 md:flex-none h-full max-h-[200px] md:max-h-[50px] /bg-red-500 overflow-clip justify-center items-center">
                  <Image src={loyzspiceslogo} alt="Home" className="h-8 w-20" />
                </Link>
              </TooltipTrigger>
              <TooltipContent>
                <p>Go Home</p>
              </TooltipContent>
            </Tooltip>

            <Tooltip>
              <TooltipTrigger asChild>
                <Link href={"/"} className="hidden dark:flex flex-1 md:flex-none max-h-[43px] md:max-h-[50px] overflow-clip justify-center items-center py-5">
                  <Image src={loyzspiceslogo} alt="Home" className="w-[100px] h-auto" />
                </Link>
              </TooltipTrigger>
              <TooltipContent>
                <p>Go Home</p>
              </TooltipContent>
            </Tooltip>

            {/* Mobile Search Button */}
            <Tooltip>
              <TooltipTrigger asChild>
                <div
                  className="lg:hidden relative flex justify-center items-center text-accent text-xl gap-1"
                >
                  {/* <Button 
                    variant='outline'
                    className="justify-center items-center rounded-full w-[35px] h-[35px] overflow-clip text-accent text-xl"
                  >
                    <AiOutlineSearch />
                  </Button> */}

                  <Cart />

                </div>
              </TooltipTrigger>
              <TooltipContent>
                <p>Cart</p>
              </TooltipContent>
            </Tooltip>

            <div className="md:flex hidden">
              {/* Search Input */}
              <SearchInput />
            </div>

            {/* Desktop Navigation */}
            <div className="hidden lg:flex items-center gap-8">

              <Nav />

              <Tooltip>
                <TooltipTrigger asChild>
                  <div>
                    <Cart />
                  </div>
                </TooltipTrigger>
                <TooltipContent>
                  <p>View Cart</p>
                </TooltipContent>
              </Tooltip>

              <Tooltip>
                <TooltipTrigger asChild>
                  <ModeToggle />
                </TooltipTrigger>
                <TooltipContent>
                  <p>Toggle Theme</p>
                </TooltipContent>
              </Tooltip>

            </div>
          </div>
        </header>
        <Advert />
        <GlobalDialog />
      </div>
    </TooltipProvider>
  )
}

export default Navbar;



================================================================================
LOCATION: components\utility\sidenav.tsx
================================================================================

"use client"
import { Sheet, SheetContent, SheetTrigger, SheetHeader, SheetTitle } from "@/components/ui/sheet"
//import { useLocation} from "react-router-dom"
import Link from "next/link"
import { CiMenuFries } from "react-icons/ci"
import Links from "../../data/links";
import { ModeToggle } from '@/components/ui/mode-toggle'
import { usePathname } from 'next/navigation';
import { Button } from '@/components/ui/button';
import { useAppContext } from "@/hooks/useAppContext";
import { signOut } from "next-auth/react";
import dynamic from 'next/dynamic'
const Login = dynamic(() => import('@/components/myComponents/subs').then((e) => e.Login), { ssr: false, })
import { Signup } from "@/components/myComponents/subs"

const Sidenav = () => {
    const pathname = usePathname();
    const { user, setUser } = useAppContext();
    return (
        <Sheet>
            <SheetTrigger className="flex justify-center items-center text-[32px] text-accent">
                <CiMenuFries />
            </SheetTrigger>
            <SheetHeader></SheetHeader>
            <SheetTitle></SheetTitle>
            <SheetContent className="flex flex-col justify-between items-center">
                <nav className="flex flex-col justify-center items-center gap-8 text-xl">
                    {Links.Links.map((link, index) => {
                        return (
                            <Link href={link.path} key={index} className={`${link.path === pathname && "text-accent border-b-2 border-accent"} capitalize font-medium hover:text-accent transition-all flex items-center gap-2`}>
                                {link.icon}
                                {link.name}
                            </Link>
                        )
                    })}
                </nav>
                {user?.id !== "nil" ? (
                    <div className="h-12 w-full mx-4">
                        <Button
                            className="bg-red border-2 border-red-500 text-red-600 w-full flex-1"
                            variant="outline"
                            onClick={() => {
                                signOut({ callbackUrl: "/" });
                                setUser({
                                    username: "visitor",
                                    id: "nil",
                                    email: "nil",
                                    avatarUrl: "",
                                    role: "user",
                                    department: "nil",
                                    contact: "xxxx",
                                });
                            }}
                        >
                            Logout
                        </Button>
                    </div>
                ) : (
                    <div className="w-full">
                        <p className="font-medium text-red-500">Please log in to proceed with checkout.</p>
                        <div className="w-full h-[50vh] flex flex-col justify-center items-center">
                            <div className="font-semibold text-lg text-destructive">You are not logged in</div>
                            <div className="flex flex-row gap-5">
                                <Login />
                                <Signup />
                            </div>
                        </div>
                    </div>
                )}
                <div className="my-5 w-full flex flex-row">
                    <div className="flex w-full flex-1"></div>
                    <ModeToggle />
                </div>
            </SheetContent>
        </Sheet>
    )
}

export default Sidenav



================================================================================
LOCATION: components\utility\social.tsx
================================================================================

"use client"
import Link from "next/link";
import { FaGithub, FaLinkedin, FaFacebook, FaWhatsapp, FaInstagram, FaEnvelope, } from "react-icons/fa"
import path from 'path';
import { BiLogoUpwork, BiArchive } from "react-icons/bi"


const socials = [
  // { icon: <FaGithub />, path: ""},
  // { icon: <FaLinkedin />, path: "www.linkedin.com/in/ololade-adepoju-0501b9284"},
  { icon: <FaFacebook />, path: "https://www.facebook.com/profile.php?id=100075397718948" },
  { icon: <FaWhatsapp />, path: "https://wa.link/24rg59" },
  { icon: <FaInstagram />, path: "https://www.instagram.com/adepoju1481?igsh=cTI4dGFzODgyd3Jy" },
  { icon: <FaEnvelope />, path: "mailto:adepojuololade2020@gmail.com?subject=Hello%20from%20your%20resume" },
  // { icon: <BiLogoUpwork />, path: "https://www.upwork.com/freelancers/~017d60f162181ee100"},
  // { icon: <BiArchive />, path: "/admin"},
]

const Social = (prop: { containerStyles: string, iconStyles: string }) => {
  return (
    <div className={prop.containerStyles}>
      {socials.map((item, index) => {
        return (
          <Link key={index} href={item.path} className={prop.iconStyles}>
            {item.icon}
          </Link>
        );
      })}
    </div>
  )
}

export default Social







================================================================================
LOCATION: components\utility\VisitTracker.tsx
================================================================================

"use client";

import { useVisitTracker } from "@/hooks/useVisitTracker";

/**
 * Client component to track visits
 * Include this in your root layout
 */
export function VisitTracker() {
    useVisitTracker();
    return null;
}



================================================================================
LOCATION: context\appContext.tsx
================================================================================

"use client";
import { UserProps } from "@/types/user";
import { VideoType } from "@/types/videoType";
import React, { createContext, useState, ReactNode } from "react";


interface Comment {
  id: number | string;
  contentId: string; // videoId
  userId: number | string;
  username: string;
  comment: string;
  createdAt: string | Date;
}

// Dialog Configuration Interface
export interface DialogConfig {
  isOpen: boolean;
  title: string;
  description: string;
  variant?: "default" | "destructive" | "success"; // Optional for styling
}

interface AppContextProps {
  // isDark: boolean;
  // setIsDark: (isDark: boolean) => void;
  isList: boolean;
  setIsList: (isList: boolean) => void;
  videos: VideoType[];
  setVideos: (videos: VideoType[]) => void;
  selectedVideo: VideoType | null;
  setSelectedVideo: (selVideo: VideoType) => void;
  // user: UserProps;
  // setUser: (user: UserProps) => void;
  user: any;
  setUser: (user: any) => void;
  cart: any[]//UserProps;
  setCart: (cart: any[]) => void;
  isModal: boolean;
  setIsModal: (isModal: boolean) => void;
  useMock: boolean;
  setUseMock: (useMock: boolean) => void;
  comments: any;
  setComments: (comments: any) => void;

  // Global Dialog Props
  dialogConfig: DialogConfig;
  setDialogConfig: (config: DialogConfig) => void;
  openDialog: (description: string, title?: string) => void;
  closeDialog: () => void;
}

export const AppContext = createContext<AppContextProps | null>(null);

export const AppContextProvider: React.FC<any> = ({ children }) => {
  // const [isDark, setIsDark] = useState(false);
  const [isList, setIsList] = useState(true);
  const [videos, setVideos] = useState<VideoType[]>([]);
  const [selectedVideo, setSelectedVideo] = useState<VideoType | null>(null);
  const [user, setUser] = useState<UserProps>({ name: "visitor", id: "nil", email: "nil", image: "https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png", role: "user", contact: "xxxx", addresses: [], shippingAddress: null });
  const [cart, setCart] = useState<any[]>([]);
  const [isModal, setIsModal] = useState(false);
  const [useMock, setUseMock] = useState(true);
  const [comments, setComments] = useState([])

  // Global Dialog State
  const [dialogConfig, setDialogConfig] = useState<DialogConfig>({
    isOpen: false,
    title: "",
    description: "",
  });

  const openDialog = (description: string, title: string = "Notification") => {
    setDialogConfig({
      isOpen: true,
      title,
      description,
    });
  };

  const closeDialog = () => {
    setDialogConfig((prev) => ({ ...prev, isOpen: false }));
  };

  const appContextValues: AppContextProps = {
    // isDark,
    // setIsDark,
    isList,
    setIsList,
    videos,
    setVideos,
    comments,
    setComments,
    selectedVideo,
    setSelectedVideo,
    user,
    setUser,
    cart,
    setCart,
    isModal,
    setIsModal,
    useMock,
    setUseMock,

    // Global Dialog Values
    dialogConfig,
    setDialogConfig,
    openDialog,
    closeDialog,
  };

  return (
    <AppContext.Provider value={appContextValues}>
      {children}
    </AppContext.Provider>
  );
};



================================================================================
LOCATION: data\cont.tsx
================================================================================

import { FaEnvelope } from "react-icons/fa"
import { CiLocationOn } from "react-icons/ci";
import { MdOutlineMessage, MdOutlinePhone } from "react-icons/md";


 
export default {
    title : "contact",
    description : "Contact us today for product inquiries, order support, or business collaborations. Use the contact information below and our support team will get back to you promptly.",
    contact : [
        {
            icon: <FaEnvelope/>, // className="w-[40px] h-[40px] text-accent hover:bg-accent hover:text-slate-100 rounded-md bg-transparent border-accent border-2 p-1"
            text: "Email",
            value: "succostores@gmail.com"
        },
        {
            icon : <MdOutlineMessage />, //className="w-[40px] h-[40px] text-accent hover:bg-accent hover:text-slate-100 rounded-md bg-transparent border-accent border-2 p-1"
            text : "Chat to us",
            value : "https://www.succo.vercel.app/contact"
        },
        {
            icon : <MdOutlinePhone/>,
            text: "Phone",
            value: "(+234) 816 132 9136"
        },
        {
            icon : <CiLocationOn/>,
            text: "address",
            value: "26, Stadium Road, Adjacent to Olalomi Hospital, Taiwo, Ilorin, Kwara State, Nigeria."
        },
    ],
    team : [
        {
            position : "CEO",
            name : "Adepoju Aleburu Lois "
        },
        {
            position : "Director of STEM",
            name : "Joshua Ojerinde"
        },
        {
            position : "Public Relations",
            name : "Olamide Akinola"
        },
        {
            position : "Logistics Team Lead",
            name : "Kemi Falola"
        },
        {
            position : "Health and Safety Consultant",
            name : "Bolaji Ogunbunmi"
        },
        {
            position : "Quality Control",
            name : "Favour Akinsanya"
        },
        {
            position : "Information Technology",
            name : "Tolu Thomas"
        },
    ],
    partners : [
        {
            uri : "../assets/alstein.webp",
            name : "ALSTEIN",
        },
        {
            uri : "../assets/adels.webp",
            name : "Adels",
        },
        {
            uri : "../assets/alstein.webp",
            name : "SageIQ",
        },
        {
            uri : "../assets/adels.webp",
            name : "The Vemoye Foundation",
        },
    ],

}






================================================================================
LOCATION: data\env.ts
================================================================================

// export const serveraddr ="http://localhost:8000"   
export const serveraddr ="https://servesucco.onrender.com"


================================================================================
LOCATION: data\gallery.ts
================================================================================

import img1 from "./../public/small chops 5.jpg"
import img2 from "./../public/shawama pics 1.jpg"
import img3 from "./../public/small chops 4.jpg"
import img4 from "./../public/mission-burrito-fast-food-shawarma-kati-roll-breakfast-6dd86711999109a88eae948201cd24bf.png"
import img5 from "./../public/small chops 3.jpg"
import img6 from "./../public/flyer.jpg"
import img7 from "./../public/shawama pics 1.jpg"


export default {
    title : "stocks",
    description : "available stocks",
    stocks : [
        {
            img : img1,
            name : "puffpuff",
            Description : "special recipe from succo, good looks",
            price: 50,
            availability: true,
            qty: 1000
        },
        {
            img : img2,
            name : "chicken",
            Description : "tasty grilled chicken, succo special recipe",
            price: 700,
            availability: true,
            qty: 100
        },
        {
            img : img3,
            name : "samosa",
            Description : "perfectly made and nice taste beef samosa",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "spring roll",
            Description : "Placeholder Text",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img5,
            name : "fanta",
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "rice",
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img7,
            name : "chin chin",
            Description : "Placeholder Text",
            price: 2000,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "egg roll",
            Description : "Placeholder Text",
            price: 500,
            availability: true,
            qty: 100
        },
        {
            img : img2,
            name : "meat pie",
            Description : "Placeholder Text",
            price: 600,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "doughnut",
            Description : "Placeholder Text",
            price: 400,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "coke",
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "malt",
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
    ]
}


================================================================================
LOCATION: data\links.tsx
================================================================================

import {AiOutlineSearch, AiOutlineHome, AiOutlineShop, AiOutlineMan, AiOutlineContacts, AiOutlineWoman, AiOutlineProfile,AiOutlineHistory} from "react-icons/ai"
import { BiPhoneCall, BiSolidContact, BiPhone,} from "react-icons/bi"
import { CiShoppingCart, } from "react-icons/ci"
import { IoMdHelp } from "react-icons/io";
import { VscAccount } from "react-icons/vsc";
import { IoFastFoodOutline } from "react-icons/io5";




export default {Links : [
    {
      icon: <AiOutlineHome />,
      path: "/",
      name: "Home",
    },
    {
      icon: <AiOutlineShop />,
      path: "/store",
      name: "Store",
    },
    // {
    //   name: <IoMdHelp />,
    //   path: "/help",
    // },
    {
      icon: <IoFastFoodOutline />,
      path: "/lunch",
      name: "Lunch",
    },
    {
      icon: <AiOutlineHistory />,
      path: "/about",
      name: "About",
    },
    {
      icon: <BiPhone />,
      path: "/contact",
      name: "Contact",
    },
    {
      icon: <VscAccount />,
      path: "/account",
      name: "Account",
    },
    // {
    //   name: "blogs",
    //   path: "/blogs",
    // },
    // {
    //   name: <CiShoppingCart />,
    //   path: "/cart",
    // },
  ]
}


================================================================================
LOCATION: data\mock.ts
================================================================================

export const featuredProductsHomepage = [
    {
      category: "Audio",
      id: "1",
      image:
        "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      inStock: true,
      name: "Premium Wireless Headphones",
      originalPrice: 249.99,
      price: 199.99,
      rating: 4.5,
    },
    {
      category: "Wearables",
      id: "2",
      image:
        "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      inStock: true,
      name: "Smart Watch Series 5",
      originalPrice: 349.99,
      price: 299.99,
      rating: 4.2,
    },
    {
      category: "Smartphones",
      id: "5",
      image:
        "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      inStock: true,
      name: "Smartphone Pro Max",
      originalPrice: 1099.99,
      price: 999.99,
      rating: 4.8,
    },
    {
      category: "Audio",
      id: "6",
      image:
        "https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      inStock: true,
      name: "Bluetooth Earbuds Pro",
      originalPrice: 179.99,
      price: 149.99,
      rating: 4.4,
    },
  ];
  
  // Categories for the shop by category section
  export const categories = [
    {
      image:
        "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      name: "Audio",
      productCount: 12,
    },
    {
      image:
        "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      name: "Wearables",
      productCount: 8,
    },
    {
      image:
        "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      name: "Smartphones",
      productCount: 15,
    },
    {
      image:
        "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",
      name: "Laptops",
      productCount: 10,
    },
  ];
  
  // Testimonials for the testimonials section
  export const testimonials = [
    {
      author: {
        avatar:
          "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop&crop=face",
        handle: "@sarahtechie",
        name: "Sarah Johnson",
      },
      text: "Honestly, I don't even remember how many times I've ordered from here. Never once had a bad experience. Stuff just works, and when I had a question, support was on it in like, five minutes.",
    },
    {
      author: {
        avatar:
          "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",
        handle: "@mikedev",
        name: "Michael Chen",
      },
      text: "Wasn't expecting much tbh, but ended up being super impressed. Got a keyboard that feels chef's kiss and arrived faster than other stores. No complaints.",
    },
    {
      author: {
        avatar:
          "https://images.unsplash.com/photo-1580489944761-15a19d654956?w=150&h=150&fit=crop&crop=face",
        handle: "@emdigital",
        name: "Emily Rodriguez",
      },
      text: "I was totally lost picking a laptop for freelance work. Dropped them a message and got a thoughtful reply within the hour. They didn't push the priciest option either, which I respect. Love what I got.",
    },
    {
      author: {
        avatar:
          "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face",
        handle: "@davidtech",
        name: "David Park",
      },
      text: "Site's clean, checkout was quick, and my order showed up two days early. Which never happens. Already eyeing my next upgrade ðŸ‘€",
    },
    {
      author: {
        avatar:
          "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face",
        handle: "@sophiareviews",
        name: "Sophia Martinez",
      },
      text: "Finally. A tech store that doesn't make me feel dumb. Everything's explained in plain English, and their chat team didn't treat me like I was annoying them. 10/10.",
    },
  ];

  

  


================================================================================
LOCATION: data\stats.ts
================================================================================

export default {
  about: [
    "Loyz Foods and Spices is a Nigerian brand specializing in natural spice production, sales of household food items, foodstuff exportation, and kitchen utensils.",
    "We are committed to quality, hygiene, and customer satisfaction, delivering trusted food solutions for homes and businesses locally and internationally.",
    "Our products are carefully sourced and crafted to preserve authentic flavors while promoting healthy and sustainable cooking.",
    // "We support local farmers and suppliers, ensuring that our community thrives alongside our business.",
    "Innovation and tradition go hand in hand at Loyz Foods and Spices, combining time-tested recipes with modern production techniques.",
    "Customer experience is at the heart of everything we do, from fast delivery to responsive support and high-quality packaging.",
    "We continually strive to expand our product range, offering unique spices, kitchen essentials, and gourmet food items that meet global standards."
  ],
  stats: [
    {
      num: 10,
      text: "Years in Business"
    },
    {
      num: 1500,
      text: "Orders Delivered"
    },
    {
      num: "100",
      text: "Percent Quality Assurance"
    },
    {
      num: 24,
      text: "Hour Order Processing"
    },
  ],
}



================================================================================
LOCATION: data\stocks.ts
================================================================================

import img1 from "./../public/small chops 5.jpg"
import img2 from "./../public/shawama pics 1.jpg"
import img3 from "./../public/small chops 4.jpg"
import img4 from "./../public/mission-burrito-fast-food-shawarma-kati-roll-breakfast-6dd86711999109a88eae948201cd24bf.png"
import img5 from "./../public/small chops 3.jpg"
import img6 from "./../public/flyer.jpg"
import img7 from "./../public/shawama pics 1.jpg"

let fetchedData = null;

fetch(`/api/data/stock?limit=10`)
  .then(response => {
    if (response.ok) {
      return response.json();
    } else {
      throw new Error('Error fetching data');
    }
  })
  .then(data => {
    fetchedData = data;
    console.log(fetchedData); // Verify data is stored
  })
  .catch(error => {
    console.error(error);
  });


export default {
    title : "stocks",
    description : "available stocks",
    //stocks : fetchedData,
    stocks : [
        {
            img : img1,
            name : "puffpuff",
            id : 1,
            Description : "special recipe from succo, good looks",
            price: 50,
            availability: true,
            qty: 1000
        },
        {
            img : img2,
            name : "chicken",
            id : 2,
            Description : "tasty grilled chicken, succo special recipe",
            price: 700,
            availability: true,
            qty: 100
        },
        {
            img : img3,
            name : "samosa",
            id : 3,
            Description : "perfectly made and nice taste beef samosa",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "spring roll",
            id : 4,
            Description : "Placeholder Text",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img5,
            name : "fanta",
            id : 5,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "rice",
            id : 6,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img7,
            name : "chin chin",
            id : 7,
            Description : "Placeholder Text",
            price: 2000,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "egg roll",
            id : 8,
            Description : "Placeholder Text",
            price: 500,
            availability: true,
            qty: 100
        },
        {
            img : img2,
            name : "meat pie",
            id : 9,
            Description : "Placeholder Text",
            price: 600,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "doughnut",
            id : 10,
            Description : "Placeholder Text",
            price: 400,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "coke",
            id : 11,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "malt",
            id : 12,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "puffpuff",
            id : 1,
            Description : "special recipe from succo, good looks",
            price: 50,
            availability: true,
            qty: 1000
        },
        {
            img : img2,
            name : "chicken",
            id : 2,
            Description : "tasty grilled chicken, succo special recipe",
            price: 700,
            availability: true,
            qty: 100
        },
        {
            img : img3,
            name : "samosa",
            id : 3,
            Description : "perfectly made and nice taste beef samosa",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "spring roll",
            id : 4,
            Description : "Placeholder Text",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img5,
            name : "fanta",
            id : 5,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "rice",
            id : 6,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img7,
            name : "chin chin",
            id : 7,
            Description : "Placeholder Text",
            price: 2000,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "egg roll",
            id : 8,
            Description : "Placeholder Text",
            price: 500,
            availability: true,
            qty: 100
        },
        {
            img : img2,
            name : "meat pie",
            id : 9,
            Description : "Placeholder Text",
            price: 600,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "doughnut",
            id : 10,
            Description : "Placeholder Text",
            price: 400,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "coke",
            id : 11,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "malt",
            id : 12,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "puffpuff",
            id : 1,
            Description : "special recipe from succo, good looks",
            price: 50,
            availability: true,
            qty: 1000
        },
        {
            img : img2,
            name : "chicken",
            id : 2,
            Description : "tasty grilled chicken, succo special recipe",
            price: 700,
            availability: true,
            qty: 100
        },
        {
            img : img3,
            name : "samosa",
            id : 3,
            Description : "perfectly made and nice taste beef samosa",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "spring roll",
            id : 4,
            Description : "Placeholder Text",
            price: 200,
            availability: true,
            qty: 100
        },
        {
            img : img5,
            name : "fanta",
            id : 5,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "rice",
            id : 6,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img7,
            name : "chin chin",
            id : 7,
            Description : "Placeholder Text",
            price: 2000,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "egg roll",
            id : 8,
            Description : "Placeholder Text",
            price: 500,
            availability: true,
            qty: 100
        },
        {
            img : img2,
            name : "meat pie",
            id : 9,
            Description : "Placeholder Text",
            price: 600,
            availability: true,
            qty: 100
        },
        {
            img : img6,
            name : "doughnut",
            id : 10,
            Description : "Placeholder Text",
            price: 400,
            availability: true,
            qty: 100
        },
        {
            img : img1,
            name : "coke",
            id : 11,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
        {
            img : img4,
            name : "malt",
            id : 12,
            Description : "Placeholder Text",
            price: 1500,
            availability: true,
            qty: 100
        },
    ]
}


================================================================================
LOCATION: data\blogs\testblog.tsx
================================================================================




================================================================================
LOCATION: hooks\use-cart-hook-docs.ts
================================================================================

// This code defines a **React context-based shopping cart system** that manages cart state, persists it to `localStorage`, and provides utility functions for interacting with the cart. It's designed to be used in a **Next.js app with React Server Components**, particularly using the `"use client"` directive.

// Letâ€™s break it down step by step.

// ---

// ## ðŸ§© 1. **"use client" Directive**
// ```ts
// "use client";
// ```
// - This tells **Next.js** that this component runs on the **client side**, not the server.
// - Required because this component uses browser APIs like `localStorage` and React hooks like `useState`, `useEffect`.

// ---

// ## ðŸ“¦ 2. **Imports & Types**
// ```ts
// import * as React from "react";
// import type { CartItem } from "~/ui/components/cart";
// ```
// - Imports React and a custom type `CartItem` which likely represents a product in the cart (e.g., with `id`, `price`, etc.).

// ---

// ## ðŸ”¤ 3. **Type Definition: `CartContextType`**
// ```ts
// export interface CartContextType {
//   addItem: (item: Omit<CartItem, "quantity">, quantity?: number) => void;
//   clearCart: () => void;
//   itemCount: number;
//   items: CartItem[];
//   removeItem: (id: string) => void;
//   subtotal: number;
//   updateQuantity: (id: string, quantity: number) => void;
// }
// ```
// - Defines the **shape of the cart context** â€” what data and methods will be available throughout your app.
// - Includes:
//   - Adding/removing items
//   - Updating quantities
//   - Derived values like total item count and subtotal

// ---

// ## ðŸ§  4. **Create the Context**
// ```ts
// const CartContext = React.createContext<CartContextType | undefined>(undefined);
// ```
// - Creates a React context object to share cart functionality across components.
// - Starts with an initial value of `undefined` to enforce usage inside the provider.

// ---

// ## ðŸ’¾ 5. **Local Storage Helpers**
// ```ts
// const STORAGE_KEY = "cart";
// const DEBOUNCE_MS = 500;

// const loadCartFromStorage = (): CartItem[] => {
//   if (typeof window === "undefined") return [];
//   try {
//     const raw = localStorage.getItem(STORAGE_KEY);
//     if (!raw) return [];
//     const parsed = JSON.parse(raw) as unknown;
//     if (Array.isArray(parsed)) {
//       return parsed as CartItem[];
//     }
//   } catch (err) {
//     console.error("Failed to load cart:", err);
//   }
//   return [];
// };
// ```
// - Loads saved cart data from `localStorage`.
// - Only runs in the browser (`window` check).
// - Handles errors gracefully and returns empty array if something goes wrong.

// ---

// ## ðŸ—ï¸ 6. **CartProvider Component**
// ```ts
// export function CartProvider({ children }: React.PropsWithChildren) {
// ```
// - A **React Provider component** that wraps parts of your app to give them access to the cart.

// ### State Management
// ```ts
// const [items, setItems] = React.useState<CartItem[]>(loadCartFromStorage);
// ```
// - Holds the current list of cart items, initialized from local storage.

// ### Debounced Save to Local Storage
// ```ts
// const saveTimeout = React.useRef<null | ReturnType<typeof setTimeout>>(null);

// React.useEffect(() => {
//   if (saveTimeout.current) clearTimeout(saveTimeout.current);
//   saveTimeout.current = setTimeout(() => {
//     try {
//       localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
//     } catch (err) {
//       console.error("Failed to save cart:", err);
//     }
//   }, DEBOUNCE_MS);

//   return () => {
//     if (saveTimeout.current) clearTimeout(saveTimeout.current);
//   };
// }, [items]);
// ```
// - Saves cart state to `localStorage` after a short delay (`DEBOUNCE_MS`) to avoid saving too frequently.
// - Uses a ref to track timeout so we can cancel it if changes happen quickly.

// ---

// ## ðŸ› ï¸ 7. **Cart Actions**

// ### `addItem`
// ```ts
// const addItem = React.useCallback(
//   (newItem: Omit<CartItem, "quantity">, qty = 1) => {
//     if (qty <= 0) return;
//     setItems((prev) => {
//       const existing = prev.find((i) => i.id === newItem.id);
//       if (existing) {
//         return prev.map((i) =>
//           i.id === newItem.id ? { ...i, quantity: i.quantity + qty } : i,
//         );
//       }
//       return [...prev, { ...newItem, quantity: qty }];
//     });
//   },
//   [],
// );
// ```
// - Adds an item to the cart.
// - If item already exists, increases its quantity.
// - Uses `Omit<CartItem, "quantity">` because quantity is passed separately.

// ---

// ### `removeItem`
// ```ts
// const removeItem = React.useCallback((id: string) => {
//   setItems((prev) => prev.filter((i) => i.id !== id));
// }, []);
// ```
// - Removes an item from the cart by ID.

// ---

// ### `updateQuantity`
// ```ts
// const updateQuantity = React.useCallback((id: string, qty: number) => {
//   setItems((prev) =>
//     prev.flatMap((i) => {
//       if (i.id !== id) return i;
//       if (qty <= 0) return []; // treat zero/negative as remove
//       if (qty === i.quantity) return i;
//       return { ...i, quantity: qty };
//     }),
//   );
// }, []);
// ```
// - Updates the quantity of a specific item.
// - If quantity â‰¤ 0, removes the item.
// - Uses `flatMap` cleverly to optionally remove the item.

// ---

// ### `clearCart`
// ```ts
// const clearCart = React.useCallback(() => setItems([]), []);
// ```
// - Clears all items from the cart.

// ---

// ## ðŸ“Š 8. **Derived Values**

// ### `itemCount`
// ```ts
// const itemCount = React.useMemo(
//   () => items.reduce((t, i) => t + i.quantity, 0),
//   [items],
// );
// ```
// - Total number of items in the cart (sum of all quantities).

// ---

// ### `subtotal`
// ```ts
// const subtotal = React.useMemo(
//   () => items.reduce((t, i) => t + i.price * i.quantity, 0),
//   [items],
// );
// ```
// - Total cost of all items in the cart.

// ---

// ## ðŸ“¤ 9. **Provide the Context Value**
// ```ts
// const value = React.useMemo<CartContextType>(
//   () => ({
//     addItem,
//     clearCart,
//     itemCount,
//     items,
//     removeItem,
//     subtotal,
//     updateQuantity,
//   }),
//   [
//     items,
//     addItem,
//     removeItem,
//     updateQuantity,
//     clearCart,
//     itemCount,
//     subtotal,
//   ],
// );

// return <CartContext value={value}>{children}</CartContext>;
// ```
// - Packages up all the actions and derived values into a single object.
// - Provides that object to any child component via `useCart()`.

// ---

// ## ðŸŽ£ 10. **Custom Hook: `useCart`**
// ```ts
// export function useCart(): CartContextType {
//   const ctx = React.use(CartContext);
//   if (!ctx) throw new Error("useCart must be used within a CartProvider");
//   return ctx;
// }
// ```
// - A convenience hook to easily access the cart context.
// - Throws an error if used outside of a `CartProvider`.

// ---

// ## âœ… Summary

// This code creates a **fully functional, persistent shopping cart system**:

// | Feature                        | Description |
// |-------------------------------|-------------|
// | **State management**          | Manages cart items using `useState`. |
// | **Persistence**               | Stores cart in `localStorage` with debounced updates. |
// | **Add/Remove/Update Items**   | Supports adding, removing, and updating item quantities. |
// | **Derived Data**              | Calculates total item count and subtotal automatically. |
// | **React Context API**         | Makes cart accessible anywhere in the app using `useCart()`. |

// ---

// ## ðŸ§ª How to Use

// ### 1. Wrap your app (or part of it) with the provider:
// ```tsx
// <CartProvider>
//   <YourApp />
// </CartProvider>
// ```

// ### 2. Use the hook in any component:
// ```tsx
// function CartSummary() {
//   const { itemCount, subtotal } = useCart();
//   return (
//     <div>
//       {itemCount} items, ${subtotal.toFixed(2)}
//     </div>
//   );
// }
// ```

// ---

// Let me know if you'd like help testing or extending this cart logic!


================================================================================
LOCATION: hooks\use-cart.tsx
================================================================================

"use client";

import { CartItem } from "@/components/myComponents/subs/cart";
import * as React from "react";

/* -------------------------------------------------------------------------- */
/*                                   Types                                    */
/* -------------------------------------------------------------------------- */

export interface CheckoutData {
  cartId: string;
  tx_ref: string;
  amount: number;
  currency: string;
}

export interface CartContextType {
  // Cart
  addItem: (item: Omit<CartItem, "quantity">, quantity?: number) => void;
  clearCart: () => void;
  itemCount: number;
  items: CartItem[];
  removeItem: (id: string) => void;
  subtotal: number;
  updateQuantity: (id: string, quantity: number) => void;

  // Checkout
  checkoutData: CheckoutData | null;
  setCheckoutData: (data: CheckoutData | null) => void;
  clearCheckoutData: () => void;
}

/* -------------------------------------------------------------------------- */
/*                                Context                                     */
/* -------------------------------------------------------------------------- */

const CartContext = React.createContext<CartContextType | undefined>(undefined);

/* -------------------------------------------------------------------------- */
/*                         Local-storage helpers                              */
/* -------------------------------------------------------------------------- */

const CART_STORAGE_KEY = "cart";
const CHECKOUT_STORAGE_KEY = "checkout";
const DEBOUNCE_MS = 500;

const loadCartFromStorage = (): CartItem[] => {
  if (typeof window === "undefined") return [];
  try {
    const raw = localStorage.getItem(CART_STORAGE_KEY);
    if (!raw) return [];
    const parsed = JSON.parse(raw);
    if (Array.isArray(parsed)) return parsed as CartItem[];
  } catch (err) {
    console.error("Failed to load cart:", err);
  }
  return [];
};

const loadCheckoutFromStorage = (): CheckoutData | null => {
  if (typeof window === "undefined") return null;
  try {
    const raw = localStorage.getItem(CHECKOUT_STORAGE_KEY);
    if (!raw) return null;
    return JSON.parse(raw) as CheckoutData;
  } catch (err) {
    console.error("Failed to load checkout:", err);
    return null;
  }
};

/* -------------------------------------------------------------------------- */
/*                               Provider                                     */
/* -------------------------------------------------------------------------- */

export function CartProvider({ children }: React.PropsWithChildren) {
  /* ----------------------------- State ---------------------------------- */
  const [items, setItems] = React.useState<CartItem[]>(loadCartFromStorage);
  const [checkoutData, setCheckoutDataState] =
    React.useState<CheckoutData | null>(loadCheckoutFromStorage);

  /* -------------------- Persist Cart (debounced) ------------------------- */
  const saveTimeout = React.useRef<ReturnType<typeof setTimeout> | null>(null);

  React.useEffect(() => {
    if (saveTimeout.current) clearTimeout(saveTimeout.current);

    saveTimeout.current = setTimeout(() => {
      try {
        localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(items));
      } catch (err) {
        console.error("Failed to save cart:", err);
      }
    }, DEBOUNCE_MS);

    return () => {
      if (saveTimeout.current) clearTimeout(saveTimeout.current);
    };
  }, [items]);

  /* -------------------- Persist Checkout (immediate) --------------------- */
  React.useEffect(() => {
    try {
      if (checkoutData) {
        localStorage.setItem(
          CHECKOUT_STORAGE_KEY,
          JSON.stringify(checkoutData)
        );
      } else {
        localStorage.removeItem(CHECKOUT_STORAGE_KEY);
      }
    } catch (err) {
      console.error("Failed to save checkout:", err);
    }
  }, [checkoutData]);

  /* --------------------------- Checkout Actions -------------------------- */
  const setCheckoutData = React.useCallback(
    (data: CheckoutData | null) => {
      setCheckoutDataState(data);
    },
    []
  );

  const clearCheckoutData = React.useCallback(() => {
    setCheckoutDataState(null);
  }, []);

  /* ----------------------------- Cart Actions ---------------------------- */
  const addItem = React.useCallback(
    (newItem: Omit<CartItem, "quantity">, qty = 1) => {
      if (qty <= 0) return;
      setItems((prev) => {
        const existing = prev.find((i) => i.id === newItem.id);
        if (existing) {
          return prev.map((i) =>
            i.id === newItem.id
              ? { ...i, quantity: i.quantity + qty }
              : i
          );
        }
        return [...prev, { ...newItem, quantity: qty }];
      });
      clearCheckoutData(); // clear checkout only when user edits cart
    },
    [clearCheckoutData]
  );

  const removeItem = React.useCallback(
    (id: string) => {
      setItems((prev) => prev.filter((i) => i.id !== id));
      clearCheckoutData(); // clear checkout only when user edits cart
    },
    [clearCheckoutData]
  );

  const updateQuantity = React.useCallback(
    (id: string, qty: number) => {
      setItems((prev) =>
        prev.flatMap((i) => {
          if (i.id !== id) return i;
          if (qty <= 0) return [];
          if (qty === i.quantity) return i;
          return { ...i, quantity: qty };
        })
      );
      clearCheckoutData(); // clear checkout only when user edits cart
    },
    [clearCheckoutData]
  );

  const clearCart = React.useCallback(() => {
    setItems([]); // Clear all cart items
    clearCheckoutData(); // Also clear checkout data
  }, [clearCheckoutData]);

  /* --------------------------- Derived data ------------------------------ */
  const itemCount = React.useMemo(
    () => items.reduce((t, i) => t + i.quantity, 0),
    [items]
  );

  const subtotal = React.useMemo(
    () => items.reduce((t, i) => t + i.price * i.quantity, 0),
    [items]
  );

  /* ----------------------------- Context value --------------------------- */
  const value = React.useMemo<CartContextType>(
    () => ({
      addItem,
      removeItem,
      updateQuantity,
      clearCart,
      itemCount,
      items,
      subtotal,
      checkoutData,
      setCheckoutData,
      clearCheckoutData,
    }),
    [
      addItem,
      removeItem,
      updateQuantity,
      clearCart,
      itemCount,
      items,
      subtotal,
      checkoutData,
      setCheckoutData,
      clearCheckoutData,
    ]
  );

  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;
}

/* -------------------------------------------------------------------------- */
/*                                   Hook                                     */
/* -------------------------------------------------------------------------- */

export function useCart(): CartContextType {
  const ctx = React.useContext(CartContext);
  if (!ctx) throw new Error("useCart must be used within a CartProvider");
  return ctx;
}



================================================================================
LOCATION: hooks\use-media-query.ts
================================================================================

"use client";

import { useEffect, useState } from "react";

export function useMediaQuery(query: string): boolean {
  // Start with false during SSR
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    // Update the state on client-side
    setMatches(window.matchMedia(query).matches);

    const media = window.matchMedia(query);
    const listener = () => setMatches(media.matches);

    media.addEventListener("change", listener);
    return () => media.removeEventListener("change", listener);
  }, [query]);

  return matches;
}



================================================================================
LOCATION: hooks\use-mobile.ts
================================================================================

import * as React from "react";

const MOBILE_BREAKPOINT = 768;

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(
    undefined,
  );

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    };
    mql.addEventListener("change", onChange);
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    return () => mql.removeEventListener("change", onChange);
  }, []);

  return !!isMobile;
}



================================================================================
LOCATION: hooks\use-mobile.tsx
================================================================================

import * as React from "react"

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener("change", onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener("change", onChange)
  }, [])

  return !!isMobile
}



================================================================================
LOCATION: hooks\use-mounted.ts
================================================================================

import * as React from "react";

export function useMounted() {
  const [mounted, setMounted] = React.useState(false);

  React.useEffect(() => {
    setMounted(true);

    return () => {
      setMounted(false);
    };
  }, []);

  return mounted;
}



================================================================================
LOCATION: hooks\use-toast.ts
================================================================================

"use client"

// Inspired by react-hot-toast library
import * as React from "react"

import type {
  ToastActionElement,
  ToastProps,
} from "@/components/ui/toast"

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType["ADD_TOAST"]
      toast: ToasterToast
    }
  | {
      type: ActionType["UPDATE_TOAST"]
      toast: Partial<ToasterToast>
    }
  | {
      type: ActionType["DISMISS_TOAST"]
      toastId?: ToasterToast["id"]
    }
  | {
      type: ActionType["REMOVE_TOAST"]
      toastId?: ToasterToast["id"]
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      }

    case "DISMISS_TOAST": {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      }
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, "id">

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id })

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  }
}

export { useToast, toast }



================================================================================
LOCATION: hooks\useAppContext.tsx
================================================================================

import { AppContext } from "@/context/appContext";
import { useContext } from "react";

export const useAppContext = () => {
  const context = useContext(AppContext);
  if (!context) {
    throw new Error("useAppContext must be used within an AppContextProvider");
  }
  return context;
};



================================================================================
LOCATION: hooks\useMessageNotifications.ts
================================================================================

"use client";

import { useEffect } from "react";
import { useSession } from "next-auth/react";
import { toast } from "sonner";
import { useRouter } from "next/navigation";
import axios from "axios";

export function useMessageNotifications() {
    const { data: session } = useSession();
    const router = useRouter();

    useEffect(() => {
        if (!session?.user?.email) return;

        let lastCheckedTime = new Date();

        const checkForNewMessages = async () => {
            try {
                const res = await axios.get("/api/dbhandler?model=message");
                const userMessages = res.data.filter(
                    (msg: any) =>
                        msg.senderEmail === session.user.email &&
                        !msg.isSeen &&
                        msg.adminResponse &&
                        new Date(msg.updatedAt) > lastCheckedTime
                );

                userMessages.forEach((msg: any) => {
                    toast.info(`New response to: ${msg.subject}`, {
                        description: "Click to view your message",
                        action: {
                            label: "View",
                            onClick: () => router.push("/contact"),
                        },
                        duration: 10000,
                    });
                });

                if (userMessages.length > 0) {
                    lastCheckedTime = new Date();
                }
            } catch (error) {
                console.error("Failed to check for new messages:", error);
            }
        };

        // Check immediately on mount
        checkForNewMessages();

        // Then check every 60 seconds
        const interval = setInterval(checkForNewMessages, 60000);

        return () => clearInterval(interval);
    }, [session, router]);
}



================================================================================
LOCATION: hooks\useVisitTracker.ts
================================================================================

"use client";

import { useEffect } from 'react';
import { trackVisit } from '@/lib/visit-tracker';

/**
 * Hook to track user visits
 * Call this in your root layout or main page component
 */
export function useVisitTracker() {
    useEffect(() => {
        // Track visit after a short delay to ensure page has loaded
        const timer = setTimeout(() => {
            trackVisit();
        }, 1000);

        return () => clearTimeout(timer);
    }, []);
}



================================================================================
LOCATION: lib\getSession.ts
================================================================================

import { auth } from "@/auth";
import { cache } from "react";

export const getSession = cache(async () => {
  const session = await auth();
  return session;
});



================================================================================
LOCATION: lib\nodemailer.ts
================================================================================

// ... existing imports
import nodemailer from 'nodemailer';

const email = process.env.GOOGLE_EMAIL ?? 'adepojuololade2020@gmail.com';

const transporter = nodemailer.createTransport({
    service: 'gmail',
    auth: {
        user: process.env.GMAIL,
        pass: process.env.GOOGLE_APP_PASSWORD, 
    },
});

export const sendOrderNotification = async (to: string, orderDetails: any) => {
    try {
        console.log('Sending order notification email to:', to);
        const isUnconfirmed = orderDetails.status === 'unconfirmed';
        const subject = isUnconfirmed ? 'Action Required: Confirm Bank Transfer' : 'New Order Notification';
        
        const mailOptions = {
            from: email,
            to,
            subject,
            html: `
        <h1>${subject}</h1>
        <p>${isUnconfirmed ? 'A user has submitted a bank transfer for confirmation.' : 'A new order has been placed.'}</p>
        <p><strong>Transaction Reference:</strong> ${orderDetails.tx_ref}</p>
        <p><strong>Amount:</strong> â‚¦${orderDetails.amount.toLocaleString()}</p>
        <p><strong>Payment Method:</strong> ${orderDetails.method || 'Card'}</p>
        ${orderDetails.payeeName ? `<p><strong>Payee Name:</strong> ${orderDetails.payeeName}</p>` : ''}
        ${orderDetails.receiptUrl ? `<p><strong>Receipt:</strong> <a href="${orderDetails.receiptUrl}">Click here to view</a></p>` : ''}
        <p><strong>Date:</strong> ${new Date().toLocaleString()}</p>
      `,
        };

        const info = await transporter.sendMail(mailOptions);
        console.log('Order notification email sent:', info.messageId);
        return info;
    } catch (error) {
        console.error('Error sending order notification email:', error);
        return null;
    }
};

export const sendVerificationEmail = async (to: string, code: string, name: string) => {
    try {
        console.log('Sending verification email to:', to);
        const mailOptions = {
            from: email,
            to,
            subject: "Verify Your Email - Lois Food and Spices",
            html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2 style="color: #22c55e;">Verify Your Email</h2>
          <p>Hi ${name || "there"},</p>
          <p>You requested to set a password for your Lois Food and Spices account.</p>
          <p>Your verification code is:</p>
          <div style="background: #f3f4f6; padding: 20px; text-align: center; border-radius: 8px; margin: 20px 0;">
            <h1 style="color: #22c55e; font-size: 32px; letter-spacing: 8px; margin: 0;">${code}</h1>
          </div>
          <p>This code will expire in 15 minutes.</p>
          <p>If you didn't request this, please ignore this email.</p>
          <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 20px 0;">
          <p style="color: #6b7280; font-size: 12px;">Â© 2026 Lois Food and Spices. All rights reserved.</p>
        </div>
      `,
        };

        const info = await transporter.sendMail(mailOptions);
        console.log('Verification email sent:', info.messageId);
        return info;
    } catch (error) {
        console.error('Error sending verification email:', error);
        throw error;
    }
};

export const sendPaymentConfirmationEmail = async (to: string, data: {
    customerName: string;
    contact: string;
    address: string;
    products: any[];
    total: number;
    deliveryFee: number;
    orderId: string;
}) => {
    try {
        console.log('Sending payment confirmation email to:', to);
        const productRows = data.products.map((p: any) => `
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${p.product.name}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${p.quantity}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">â‚¦${p.product.price.toLocaleString()}</td>
            </tr>
        `).join('');

        const mailOptions = {
            from: email,
            to,
            subject: `Order Confirmation - #${data.orderId}`,
            html: `
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                    <h2 style="color: #22c55e;">Order Confirmed!</h2>
                    <p>Hi ${data.customerName},</p>
                    <p>Your payment has been confirmed and your order is being processed.</p>
                    
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h3 style="margin-top: 0;">Order Details</h3>
                        <p><strong>Order ID:</strong> ${data.orderId}</p>
                        <p><strong>Delivery Address:</strong> ${data.address}</p>
                        <p><strong>Contact:</strong> ${data.contact}</p>
                    </div>

                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                        <thead>
                            <tr style="text-align: left; background: #f3f4f6;">
                                <th style="padding: 8px;">Product</th>
                                <th style="padding: 8px;">Qty</th>
                                <th style="padding: 8px;">Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${productRows}
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" style="padding: 8px; text-align: right; font-weight: bold;">Delivery Fee:</td>
                                <td style="padding: 8px;">â‚¦${data.deliveryFee.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="padding: 8px; text-align: right; font-weight: bold;">Total:</td>
                                <td style="padding: 8px; font-weight: bold; color: #22c55e;">â‚¦${data.total.toLocaleString()}</td>
                            </tr>
                        </tfoot>
                    </table>

                    <p>Thank you for shopping with Lois Food and Spices!</p>
                </div>
            `,
        };

        const info = await transporter.sendMail(mailOptions);
        console.log('Payment confirmation email sent:', info.messageId);
        return info;
    } catch (error) {
        console.error('Error sending payment confirmation email:', error);
        return null;
    }
};




================================================================================
LOCATION: lib\prisma.ts
================================================================================

import { PrismaClient } from "@prisma/client";

const globalForPrisma = global as unknown as { prisma: PrismaClient };

export const prisma =
  globalForPrisma.prisma ||
  new PrismaClient({
    log: ["query"],
  });

if (process.env.NODE_ENV !== "production") globalForPrisma.prisma = prisma;



================================================================================
LOCATION: lib\stock-pricing.ts
================================================================================

/**
 * FIFO Stock Pricing Utility
 * 
 * This utility calculates the current price of a product based on available stock
 * using First-In-First-Out (FIFO) logic.
 * 
 * Logic:
 * 1. Use the price from the oldest stock with available quantity
 * 2. If all stocks are sold out, use the price from the most recent stock
 * 3. Falls back to product.price if no stock exists
 */

export interface StockItem {
    id: string;
    addedQuantity: number;
    pricePerProduct: number;
    costPerProduct: number;
    createdAt: string | Date;
}

export interface ProductWithStock {
    id: string;
    name: string;
    price: number;
    stock?: StockItem[];
}

/**
 * Calculate total available stock quantity
 */
export function getTotalStockQuantity(stocks: StockItem[]): number {
    if (!stocks || stocks.length === 0) return 0;
    return stocks.reduce((total, stock) => total + (stock.addedQuantity || 0), 0);
}

/**
 * Get the current selling price for a product based on FIFO stock logic
 * 
 * @param product - Product with stock array
 * @returns Current selling price
 */
export function getProductPrice(product: ProductWithStock): number {
    // No stock data available, use product.price
    if (!product.stock || product.stock.length === 0) {
        return product.price || 0;
    }

    // Sort stocks by creation date (oldest first) for FIFO
    const sortedStocks = [...product.stock].sort((a, b) => {
        const dateA = new Date(a.createdAt).getTime();
        const dateB = new Date(b.createdAt).getTime();
        return dateA - dateB;
    });

    // Find the first stock with available quantity (oldest stock)
    const availableStock = sortedStocks.find(stock => stock.addedQuantity > 0);

    if (availableStock) {
        // Use price from oldest available stock
        return availableStock.pricePerProduct || product.price || 0;
    }

    // All stocks are sold out, use the most recent stock price
    const mostRecentStock = sortedStocks[sortedStocks.length - 1];
    return mostRecentStock?.pricePerProduct || product.price || 0;
}

/**
 * Get the cost price for a product (for profit calculation)
 */
export function getProductCost(product: ProductWithStock): number {
    if (!product.stock || product.stock.length === 0) {
        return 0;
    }

    const sortedStocks = [...product.stock].sort((a, b) => {
        const dateA = new Date(a.createdAt).getTime();
        const dateB = new Date(b.createdAt).getTime();
        return dateA - dateB;
    });

    const availableStock = sortedStocks.find(stock => stock.addedQuantity > 0);

    if (availableStock) {
        return availableStock.costPerProduct || 0;
    }

    const mostRecentStock = sortedStocks[sortedStocks.length - 1];
    return mostRecentStock?.costPerProduct || 0;
}

/**
 * Check if product is in stock
 */
export function isProductInStock(product: ProductWithStock): boolean {
    return getTotalStockQuantity(product.stock || []) > 0;
}

/**
 * Get stock status information
 */
export function getStockStatus(product: ProductWithStock): {
    inStock: boolean;
    quantity: number;
    currentPrice: number;
    currentCost: number;
} {
    const quantity = getTotalStockQuantity(product.stock || []);

    return {
        inStock: quantity > 0,
        quantity,
        currentPrice: getProductPrice(product),
        currentCost: getProductCost(product),
    };
}



================================================================================
LOCATION: lib\utils.ts
================================================================================

import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}



================================================================================
LOCATION: lib\visit-tracker.ts
================================================================================

/**
 * Visit Tracking Utility
 * 
 * Tracks unique daily visits using browser fingerprinting stored in localStorage
 */

const FINGERPRINT_KEY = 'loisfood_visitor_fp';
const LAST_VISIT_KEY = 'loisfood_last_visit';

/**
 * Generate a simple browser fingerprint
 */
function generateFingerprint(): string {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    let fingerprint = '';

    // Screen resolution
    fingerprint += `${window.screen.width}x${window.screen.height}`;

    // Timezone
    fingerprint += `_${new Date().getTimezoneOffset()}`;

    // Language
    fingerprint += `_${navigator.language}`;

    // Platform
    fingerprint += `_${navigator.platform}`;

    // Canvas fingerprint
    if (ctx) {
        ctx.textBaseline = 'top';
        ctx.font = '14px Arial';
        ctx.fillText('Lois Food & Spices', 2, 2);
        fingerprint += `_${canvas.toDataURL().slice(-50)}`;
    }

    // Create a hash
    return btoa(fingerprint).slice(0, 32);
}

/**
 * Get or create browser fingerprint
 */
export function getFingerprint(): string {
    if (typeof window === 'undefined') return '';

    let fingerprint = localStorage.getItem(FINGERPRINT_KEY);

    if (!fingerprint) {
        fingerprint = generateFingerprint();
        localStorage.setItem(FINGERPRINT_KEY, fingerprint);
    }

    return fingerprint;
}

/**
 * Check if user has visited today
 */
export function hasVisitedToday(): boolean {
    if (typeof window === 'undefined') return false;

    const lastVisit = localStorage.getItem(LAST_VISIT_KEY);

    if (!lastVisit) return false;

    const lastVisitDate = new Date(lastVisit);
    const today = new Date();

    return (
        lastVisitDate.getDate() === today.getDate() &&
        lastVisitDate.getMonth() === today.getMonth() &&
        lastVisitDate.getFullYear() === today.getFullYear()
    );
}

/**
 * Mark today as visited
 */
export function markVisitedToday(): void {
    if (typeof window === 'undefined') return;

    localStorage.setItem(LAST_VISIT_KEY, new Date().toISOString());
}

/**
 * Track visit to server
 */
export async function trackVisit(): Promise<boolean> {
    if (typeof window === 'undefined') return false;

    // Check if already visited today
    if (hasVisitedToday()) {
        console.log('Already tracked visit for today');
        return false;
    }

    const fingerprint = getFingerprint();

    try {
        const response = await fetch('/api/visit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                fingerprint,
                userAgent: navigator.userAgent,
            }),
        });

        if (response.ok) {
            markVisitedToday();
            console.log('Visit tracked successfully');
            return true;
        }

        return false;
    } catch (error) {
        console.error('Failed to track visit:', error);
        return false;
    }
}



================================================================================
LOCATION: prisma\schema.prisma
================================================================================

// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mongodb"
  url          = env("MONGODB_URL")
  relationMode = "prisma"
}

model User {
  id            String            @id @default(auto()) @map("_id") @db.ObjectId
  name          String?
  email         String?           @unique
  emailVerified DateTime?
  password      String?
  providerid    String?
  role          String            @default("customer") //professional admin staff
  cart          Cart[]
  //orders   Order[]
  reviews       Review[]
  addresses     ShippingAddress[]
  post          Post[]
  notification  Notification[]
  image         String?           @default("https://res.cloudinary.com/dc5khnuiu/image/upload/v1752627019/uxokaq0djttd7gsslwj9.png")
  contact       String?           @default("xxxx-xxx-xxxx")
  // visit   Visit[]
  accounts      Account[]
  sessions      Session[]
  createdAt     DateTime          @default(now())
  updatedAt     DateTime          @updatedAt
  wishlist      Wishlist[]
  messages      Message[]
  lunches       Lunch[]
}

model Account {
  id                String @id @default(auto()) @map("_id") @db.ObjectId
  userId            String @db.ObjectId
  type              String
  provider          String
  providerAccountId String

  refresh_token String?
  access_token  String?
  expires_at    Int?
  token_type    String?
  scope         String?
  id_token      String?
  session_state String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  userId       String   @db.ObjectId
  expires      DateTime
  sessionToken String   @unique
  accessToken  String?  @unique
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id])
}

model VerificationRequest {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  identifier String
  token      String   @unique
  expires    DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([identifier, token])
}

model VerificationToken {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model EmailVerificationCode {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String
  code      String
  expires   DateTime
  verified  Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([email])
}

// model Visit {
//   id        String   @id @default(auto()) @map("_id") @db.ObjectId
//   user      User     @relation(fields: [userId], references: [id])
//   userId    String   @db.ObjectId
//   createdAt DateTime @default(now())
// }

model Post {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String?
  description String?
  contentUrl  String?
  author      User     @relation(fields: [authorId], references: [id])
  authorId    String   @db.ObjectId
  // product    Product?     @relation(fields: [productId], references: [id])
  // productId   String?  @db.ObjectId
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Notification {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  username  String?
  user      User?    @relation(fields: [userId], references: [id])
  userId    String?  @db.ObjectId
  email     String?
  message   String
  category  String?
  to        String?  @default("admin")
  from      String?  @default("admin")
  file      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Category {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  name        String    @unique
  description String?
  image       String?
  //slug     String   @unique
  products    Product[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model Product {
  id                String           @id @default(auto()) @map("_id") @db.ObjectId
  name              String
  description       String?
  category          Category         @relation(fields: [categoryId], references: [id])
  categoryId        String           @db.ObjectId
  activeIngredients String[]
  scarce            Boolean?
  for               String[] //patients like oncology/cancer, hiv, etc
  brand             String?
  price             Float
  stock             Stock[] //@relation(fields: [stockId], references: [id])
  //stockId  String?   @db.ObjectId
  reviews           Review[]
  cartItems         CartItem[]
  Featured          FeaturedProduct?
  images            String[]
  //orderItems OrderItem[]
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
  wishlist          Wishlist[]

  // add product features like dosage form, strength, manufacturer, etc
}

//for inputing available product, after sales, deduct the quantity
//one to one relationship with a product, notice the unique then objectid
model Stock {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  product         Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId       String   @db.ObjectId
  addedQuantity   Int
  costPerProduct  Float?
  pricePerProduct Float?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Cart {
  id           String     @id @default(auto()) @map("_id") @db.ObjectId
  user         User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       String     @db.ObjectId
  name         String? // User given name for the cart
  contact      String? // Contact assigned to the cart
  products     CartItem[]
  total        Float
  deliveryFee  Float      @default(0)
  payment      Payment?
  status       String     @default("pending")
  refund       Refund?
  type         String     @default("cart") // cart, lunch
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  deliveryDate DateTime?
  lunchId      String?    @db.ObjectId
  lunch        Lunch?     @relation(fields: [lunchId], references: [id], onDelete: SetNull)
}

model CartItem {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  cart      Cart     @relation(fields: [cartId], references: [id], onDelete: Cascade)
  cartId    String   @db.ObjectId
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId String   @db.ObjectId
  quantity  Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Payment {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  cart       Cart     @relation(fields: [cartId], references: [id], onDelete: Cascade)
  cartId     String   @unique @db.ObjectId
  //method must be converted to an enum
  tx_ref     String?  @unique
  method     String
  amount     Float
  payeeName  String?
  receiptUrl String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Coupon {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  code      String    @unique
  discount  Float?
  expiresAt DateTime?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model ShippingAddress {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String   @db.ObjectId
  address   String?
  city      String?
  state     String?
  zip       String?
  country   String?
  phone     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model DeliveryFee {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  country   String?
  state     String?
  city      String?
  region    String?
  price     Float
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([country, state, city, region])
}

model Visit {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  fingerprint String // Browser fingerprint from localStorage
  visitDate   DateTime @default(now())
  userAgent   String?
  ipAddress   String?
  createdAt   DateTime @default(now())

  @@unique([fingerprint, visitDate])
  @@index([visitDate])
}

//one to one relation with cart, not d unique to avoid error
model Refund {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  cart      Cart     @relation(fields: [cartId], references: [id], onDelete: Cascade)
  cartId    String   @unique @db.ObjectId
  amount    Float
  reason    String?
  status    String   @default("pending")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Message {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId        String   @db.ObjectId
  senderName    String
  senderEmail   String
  subject       String
  message       String
  adminResponse String?
  isSeen        Boolean  @default(false)
  isResolved    Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model FeaturedProduct {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId String   @unique @db.ObjectId
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Review {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     String   @db.ObjectId
  product    Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId  String   @db.ObjectId
  rating     Int
  comment    String?
  isArchived Boolean  @default(false)
  reply      Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Lunch {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  userId     String   @db.ObjectId
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  name       String?
  frequency  String   @default("once") // once, daily, weekly, monthly
  daysOfWeek String[] // ["monday", "wednesday"]
  timesInDay String[] // ["12:00", "15:00"]
  startDate  DateTime
  endDate    DateTime
  status     String   @default("active") // active, completed, cancelled
  carts      Cart[]
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Wishlist {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String   @db.ObjectId
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId String   @db.ObjectId
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, productId])
}

// model Comment {
//   id         String   @id @default(auto()) @map("_id") @db.ObjectId
//   ministryId String?   @db.ObjectId @default("684f74ca135dd6d0efeab37d")
//   contentId  String   @db.ObjectId
//   userId     String   @db.ObjectId
//   username     String
//   comment  String?
//   isArchived Boolean  @default(false)
//   createdAt  DateTime @default(now())
//   updatedAt  DateTime @updatedAt
//   reply      Boolean  @default(false)
//   // replyId   String       @db.ObjectId
// }

// model Sale {
//   id        String   @id @default(auto()) @map("_id") @db.ObjectId
//   product   Product  @relation(fields: [productId], references: [id])
//   productId String
//   quantity  Int
//   total     Float
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
// }

// model Order {
//   id        String   @id @default(auto()) @map("_id") @db.ObjectId
//   user      User     @relation(fields: [userId], references: [id])
//   userId    String    @db.ObjectId
//   products  CartItem[]
//   total     Float
//   payment Payment?
//   status    String   @default("pending")
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
// }

// //same as cartitem, a cartitem converted after cart becomes an order
// model OrderItem {
//   id        String   @id @default(auto()) @map("_id") @db.ObjectId
//   order     Order    @relation(fields: [orderId], references: [id])
//   orderId   String    @db.ObjectId
//   product   Product  @relation(fields: [productId], references: [id])
//   productId String    @db.ObjectId
//   quantity  Int
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
// }

//function also performed by review.rating
// model Like {
//   id         String   @id @default(auto()) @map("_id") @db.ObjectId
//   //storeId String?   @db.ObjectId @default("684f74ca135dd6d0efeab37d")
//   contentId  String   @db.ObjectId
//   userId     String   @db.ObjectId
//   // isArchived   Boolean      @default(false)
//   createdAt  DateTime @default(now())
//   updatedAt  DateTime @updatedAt
// }

//  $ prisma [command]

//     Commands

//                 init   Set up Prisma for your app
//             generate   Generate artifacts (e.g. Prisma Client)
//                   db   Manage your database schema and lifecycle
//              migrate   Migrate your database
//               studio   Browse your data with Prisma Studio
//             validate   Validate your Prisma schema
//               format   Format your Prisma schema
//              version   Displays Prisma version info
//                debug   Displays Prisma debug info
//                  mcp   Starts an MCP server to use with AI development tools

//     Flags

//          --preview-feature   Run Preview Prisma commands
//          --help, -h          Show additional information about a command

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Optimize performance through connection pooling and caching with Prisma Accelerate  â”‚
// â”‚  and capture real-time events from your database with Prisma Pulse.                  â”‚
// â”‚  Learn more at https://pris.ly/cli/pdp                                               â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

//     Examples

//       Set up a new Prisma project
//       $ npx prisma init

//       Generate artifacts (e.g. Prisma Client)
//       $ prisma generate

//       Browse your data
//       $ prisma studio

//       Create migrations from your Prisma schema, apply them to the database, generate artifacts (e.g. Prisma Client)
//       $ prisma migrate dev

//       Pull the schema from an existing database, updating the Prisma schema
//       $ prisma db pull

//       Push the Prisma schema state to the database
//       $ prisma db push

//       Validate your Prisma schema
//       $ prisma validate

//       Format your Prisma schema
//       $ prisma format

//       Display Prisma version info
//       $ prisma version

//       Display Prisma debug info
//       $ prisma debug



================================================================================
LOCATION: prisma\forms\AddressPriceForm.tsx
================================================================================

import { useEffect, useState, useMemo } from 'react';
import axios from 'axios';
import { Country, State, City } from 'country-state-city';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { Loader2 } from 'lucide-react';

const REGIONS = [
    "Africa",
    "Asia",
    "Europe",
    "North America",
    "South America",
    "Oceania",
    "Antarctica",
    "United Kingdom",
];

const NIGERIA_TARGET_STATES = [
    { name: 'Lagos', price: 4000 },
    { name: 'Ogun', price: 3500 },
    { name: 'Oyo', price: 3000 },
    { name: 'Kwara', price: 1000 },
    { name: 'FCT', price: 4000 }, // Abuja
];

export default function AddressPriceForm() {
    const [fees, setFees] = useState<any[]>([]);
    const [formData, setFormData] = useState({
        scope: 'country', // 'country' | 'region'
        region: '',
        country: '',
        state: '',
        city: '',
        price: '',
    });
    
    // Custom Inputs State
    const [isCustomRegion, setIsCustomRegion] = useState(false);
    const [customRegion, setCustomRegion] = useState('');
    const [isCustomState, setIsCustomState] = useState(false);
    const [customState, setCustomState] = useState('');
    const [isCustomCity, setIsCustomCity] = useState(false);
    const [customCity, setCustomCity] = useState('');

    // Search/Filter State
    const [countrySearch, setCountrySearch] = useState('');
    const [stateSearch, setStateSearch] = useState('');
    const [citySearch, setCitySearch] = useState('');

    const [editId, setEditId] = useState<string | null>(null);
    const [seeding, setSeeding] = useState(false);

    // Derived lists
    const countries = useMemo(() => Country.getAllCountries(), []);
    const states = useMemo(() => formData.country ? State.getStatesOfCountry(formData.country) : [], [formData.country]);
    const cities = useMemo(() => formData.country && formData.state ? City.getCitiesOfState(formData.country, formData.state) : [], [formData.country, formData.state]);

    // Filtered lists
    const filteredCountries = useMemo(() => 
        countries.filter(c => c.name.toLowerCase().includes(countrySearch.toLowerCase())), 
    [countries, countrySearch]);

    const filteredStates = useMemo(() => 
        states.filter(s => s.name.toLowerCase().includes(stateSearch.toLowerCase())), 
    [states, stateSearch]);

    const filteredCities = useMemo(() => 
        cities.filter(c => c.name.toLowerCase().includes(citySearch.toLowerCase())), 
    [cities, citySearch]);


    useEffect(() => {
        fetchFees();
    }, []);

    const fetchFees = async () => {
        const res = await axios.get('/api/dbhandler?model=deliveryFee');
        setFees(res.data);
    };

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();

        let payload: any = {
            price: parseFloat(formData.price),
        };

        if (formData.scope === 'region') {
            payload.region = isCustomRegion ? customRegion : formData.region;
            payload.country = null;
            payload.state = null;
            payload.city = null;
        } else {
            payload.region = null;
            payload.country = formData.country;
            payload.state = isCustomState ? customState : (formData.state || null);
            payload.city = isCustomCity ? customCity : (formData.city || null);
        }

        if (editId) {
            await axios.put(`/api/dbhandler?model=deliveryFee&id=${editId}`, payload);
        } else {
            await axios.post('/api/dbhandler?model=deliveryFee', payload);
        }
        resetForm();
        fetchFees();
    };

    const handleEdit = (item: any) => {
        if (item.region) {
            setFormData({
                scope: 'region',
                region: item.region,
                country: '',
                state: '',
                city: '',
                price: item.price.toString(),
            });
            // check if custom
            if (!REGIONS.includes(item.region)) {
                setIsCustomRegion(true);
                setCustomRegion(item.region);
            } else {
                setIsCustomRegion(false);
            }
        } else {
            setFormData({
                scope: 'country',
                region: '',
                country: item.country,
                state: item.state || '',
                city: item.city || '',
                price: item.price.toString(),
            });
            // Handle custom state/city detection if needed (difficult without knowing if it was original ISO)
            // Assuming for now they map to codes if possible, else we might need better logic.
            // Simplified: if it's not in the list associated with the country, it's custom.
            
            // Checking logic could be added here but for now standard edit.
             setIsCustomState(false);
             setIsCustomCity(false);
        }
        setEditId(item.id);
    };

    const handleDelete = async (id: string) => {
        await axios.delete(`/api/dbhandler?model=deliveryFee&id=${id}`);
        fetchFees();
    };

    const resetForm = () => {
        setFormData({ scope: 'country', region: '', country: '', state: '', city: '', price: '' });
        setIsCustomRegion(false);
        setCustomRegion('');
        setIsCustomState(false);
        setCustomState('');
        setIsCustomCity(false);
        setCustomCity('');
        setEditId(null);
    };

    const getName = (type: 'country' | 'state' | 'city', code: string, countryCode?: string) => {
        if (!code) return 'All';
        if (type === 'country') return Country.getCountryByCode(code)?.name || code;
        if (type === 'state') return State.getStateByCodeAndCountry(code, countryCode!)?.name || code;
        return code;
    };

    const onRegionChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        const val = e.target.value;
        if (val === 'OTHER') {
            setIsCustomRegion(true);
            setFormData({ ...formData, region: '' });
        } else {
            setIsCustomRegion(false);
            setFormData({ ...formData, region: val });
        }
    }

    const onStateChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        const val = e.target.value;
        if (val === 'OTHER') {
            setIsCustomState(true);
            setFormData({ ...formData, state: '' });
        } else {
            setIsCustomState(false);
            setFormData({ ...formData, state: val, city: '' });
        }
    }

    const onCityChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
        const val = e.target.value;
        if (val === 'OTHER') {
            setIsCustomCity(true);
            setFormData({ ...formData, city: '' });
        } else {
            setIsCustomCity(false);
            setFormData({ ...formData, city: val });
        }
    }

    const seedNigeriaLGAs = async () => {
        if (!confirm("This will add all LGAs for configured Nigerian states to the database. Continue?")) return;
        setSeeding(true);
        try {
            const ng = Country.getAllCountries().find(c => c.name === 'Nigeria' || c.isoCode === 'NG');
            if (!ng) return;

            const allStates = State.getStatesOfCountry(ng.isoCode);
            
            let count = 0;

            for (const target of NIGERIA_TARGET_STATES) {
                // Find state object to match name
                // FCT is usually "Abuja Federal Capital Territory" or similar in libraries
                const stateObj = allStates.find(s => s.name.toLowerCase().includes(target.name.toLowerCase()));
                
                if (stateObj) {
                    const cities = City.getCitiesOfState(ng.isoCode, stateObj.isoCode);
                    console.log(`Seeding ${cities.length} cities for ${target.name}...`);
                    
                    for (const city of cities) {
                        // Check if exists
                        const exists = fees.find(f => 
                            f.country === ng.isoCode && 
                            f.state === stateObj.isoCode && 
                            f.city === city.name
                        );

                        if (!exists) {
                            await axios.post('/api/dbhandler?model=deliveryFee', {
                                country: ng.isoCode,
                                state: stateObj.isoCode,
                                city: city.name,
                                region: null,
                                price: target.price
                            });
                            count++;
                        }
                    }
                }
            }
            alert(`Successfully added ${count} Local Governments.`);
            fetchFees();
        } catch (err) {
            console.error(err);
            alert("Error seeding data.");
        } finally {
            setSeeding(false);
        }
    };

    return (
        <div className="w-full">
            <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-lg gap-3 p-4 border rounded-md m-auto bg-card text-card-foreground shadow-sm'>
                <div className="flex justify-between items-center">
                    <h2 className='font-semibold text-xl'>Manage Delivery Fees</h2>
                    <Button type="button" variant="secondary" size="sm" onClick={seedNigeriaLGAs} disabled={seeding}>
                        {seeding && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                        Seed NG LGAs
                    </Button>
                </div>

                <Tabs value={formData.scope} onValueChange={(v) => setFormData({ ...formData, scope: v })} className="w-full">
                    <TabsList className="grid w-full grid-cols-2">
                        <TabsTrigger value="country">Country Specific</TabsTrigger>
                        <TabsTrigger value="region">Region / Group</TabsTrigger>
                    </TabsList>
                </Tabs>

                {formData.scope === 'region' ? (
                    <div className="flex flex-col gap-1">
                        <label className="text-xs font-medium">Region / Group</label>
                        {!isCustomRegion ? (
                            <select
                                className="w-full rounded-md border p-2 bg-background"
                                value={formData.region}
                                onChange={onRegionChange}
                                required={!isCustomRegion}
                            >
                                <option value="">Select Region</option>
                                {REGIONS.map((r) => (
                                    <option key={r} value={r}>{r}</option>
                                ))}
                                <option value="OTHER">Other / Custom Group...</option>
                            </select>
                        ) : (
                            <div className="flex gap-2">
                                <Input 
                                    placeholder="Enter Group Name (e.g. EU, UK)" 
                                    value={customRegion} 
                                    onChange={(e) => setCustomRegion(e.target.value)}
                                    required
                                />
                                <Button type="button" variant="ghost" onClick={() => setIsCustomRegion(false)}>Cancel</Button>
                            </div>
                        )}
                    </div>
                ) : (
                    <>
                        {/* Country */}
                        <div className="flex flex-col gap-1">
                            <label className="text-xs font-medium">Country</label>
                            <Input 
                                placeholder="Search Country..." 
                                value={countrySearch} 
                                onChange={(e) => setCountrySearch(e.target.value)}
                                className="mb-1 h-8 text-xs"
                            />
                            <select
                                className="w-full rounded-md border p-2 bg-background"
                                value={formData.country}
                                onChange={(e) => setFormData({ ...formData, country: e.target.value, state: '', city: '' })}
                                required={formData.scope === 'country'}
                            >
                                <option value="">Select Country</option>
                                {filteredCountries.map((c) => (
                                    <option key={c.isoCode} value={c.isoCode}>{c.name}</option>
                                ))}
                            </select>
                        </div>

                        {/* State */}
                        <div className="flex flex-col gap-1">
                            <label className="text-xs font-medium">State (Optional)</label>
                            {!isCustomState ? (
                                <>
                                    <Input 
                                        placeholder="Search State..." 
                                        value={stateSearch} 
                                        onChange={(e) => setStateSearch(e.target.value)}
                                        className="mb-1 h-8 text-xs"
                                        disabled={!formData.country}
                                    />
                                    <select
                                        className="w-full rounded-md border p-2 bg-background"
                                        value={formData.state}
                                        onChange={onStateChange}
                                        disabled={!formData.country}
                                    >
                                        <option value="">All States</option>
                                        {filteredStates.map((s) => (
                                            <option key={s.isoCode} value={s.isoCode}>{s.name}</option>
                                        ))}
                                        <option value="OTHER">Other / Custom State...</option>
                                    </select>
                                </>
                            ) : (
                                <div className="flex gap-2">
                                    <Input 
                                        placeholder="Enter State Name" 
                                        value={customState} 
                                        onChange={(e) => setCustomState(e.target.value)}
                                    />
                                    <Button type="button" variant="ghost" onClick={() => setIsCustomState(false)}>List</Button>
                                </div>
                            )}
                        </div>

                        {/* City */}
                        <div className="flex flex-col gap-1">
                            <label className="text-xs font-medium">City (Optional)</label>
                            {!isCustomCity ? (
                                <>
                                    <Input 
                                        placeholder="Search City..." 
                                        value={citySearch} 
                                        onChange={(e) => setCitySearch(e.target.value)}
                                        className="mb-1 h-8 text-xs"
                                        disabled={!formData.state}
                                    />
                                    <select
                                        className="w-full rounded-md border p-2 bg-background"
                                        value={formData.city}
                                        onChange={onCityChange}
                                        disabled={!formData.state}
                                    >
                                        <option value="">All Cities</option>
                                        {filteredCities.map((c: any) => (
                                            <option key={c.name} value={c.name}>{c.name}</option>
                                        ))}
                                        <option value="OTHER">Other / Custom City...</option>
                                    </select>
                                </>
                            ) : (
                                <div className="flex gap-2">
                                    <Input 
                                        placeholder="Enter City Name" 
                                        value={customCity} 
                                        onChange={(e) => setCustomCity(e.target.value)}
                                    />
                                    <Button type="button" variant="ghost" onClick={() => setIsCustomCity(false)}>List</Button>
                                </div>
                            )}
                        </div>
                    </>
                )}

                {/* Price */}
                <div className="flex flex-col gap-1">
                    <label className="text-xs font-medium">Price (â‚¦)</label>
                    <Input
                        type="number"
                        placeholder="0.00"
                        value={formData.price}
                        onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                        required
                    />
                </div>

                <div className="flex gap-2 pt-2">
                    <Button type="submit" className="flex-1">{editId ? 'Update Fee' : 'Add Fee'}</Button>
                    {editId && <Button type="button" variant="outline" onClick={resetForm}>Cancel</Button>}
                </div>
            </form>

            {/* List */}
            <div className="mt-8 max-w-3xl m-auto">
                <h3 className="font-semibold text-lg mb-4">Current Delivery Fees</h3>
                <div className="grid gap-3">
                    {fees.length === 0 ? <p className="text-muted-foreground text-center">No fees configured.</p> : null}
                    {fees.map((item) => (
                        <div key={item.id} className="flex flex-col sm:flex-row justify-between items-start sm:items-center bg-muted/50 p-3 rounded-lg border">
                            <div className="mb-2 sm:mb-0">
                                {item.region ? (
                                    <div className="font-medium text-base text-primary">
                                        Region: {item.region}
                                    </div>
                                ) : (
                                    <div className="font-medium text-base">
                                        {getName('country', item.country)}
                                        {item.state && ` > ${getName('state', item.state, item.country)}`}
                                        {item.city && ` > ${item.city}`}
                                    </div>
                                )}
                                <div className="text-sm text-muted-foreground">Price: â‚¦{item.price.toLocaleString()}</div>
                            </div>
                            <div className="flex gap-2">
                                <Button size="sm" variant="outline" onClick={() => handleEdit(item)}>Edit</Button>
                                <Button size="sm" variant="destructive" onClick={() => handleDelete(item.id)}>Delete</Button>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );
}



================================================================================
LOCATION: prisma\forms\CartForm.tsx
================================================================================

import { useEffect, useState, useMemo } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { DataTableDemo } from "@/components/myComponents/subs/datatable";
import { CartDetailsDialog } from "@/components/myComponents/subs/CartDetailsDialog";
import { Trash2, Eye } from "lucide-react";

export default function CartForm() {
  const [carts, setCarts] = useState<any[]>([]);
  const [search, setSearch] = useState('');
  const [selectedCart, setSelectedCart] = useState<any | null>(null);
  const [dialogOpen, setDialogOpen] = useState(false);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    fetchCarts();
  }, []);

  const fetchCarts = async () => {
    setLoading(true);
    try {
        const res = await axios.get('/api/dbhandler?model=cart');
        setCarts(res.data);
    } catch(err) {
        console.error(err);
    } finally {
        setLoading(false);
    }
  };

  const handleDelete = async (e: React.MouseEvent, id: string) => {
    e.stopPropagation(); // Prevent row click
    if (!confirm("Are you sure you want to delete this cart?")) return;
    try {
        await axios.delete(`/api/dbhandler?model=cart&id=${id}`);
        fetchCarts();
    } catch (err) {
        console.error("Failed to delete", err);
    }
  };

  const handleUpdatePayment = async () => {
      // Re-fetch carts to update status in table
      await fetchCarts();
      // Update the selected cart view
      if (selectedCart) {
          const updated = carts.find(c => c.id === selectedCart.id);
          if (updated) setSelectedCart(updated);
      }
      setDialogOpen(false); 
  }
  
  // Columns definition 
  const columns = useMemo(() => [
      {
          accessorKey: "id",
          header: "Order ID",
          cell: ({ row }: any) => <span className="font-mono text-xs">{row.original.id.slice(-6)}</span>
      },
      {
          accessorKey: "user.email",
          header: "User",
          cell: ({ row }: any) => (
             <div className="flex flex-col">
                 <span className="font-medium text-xs">{row.original.user?.name || "Guest"}</span>
                 <span className="text-xs text-muted-foreground">{row.original.user?.email}</span>
             </div>
          )
      },
      {
          accessorKey: "total",
          header: "Total",
          cell: ({ row }: any) => <span className="font-bold">â‚¦{row.original.total.toLocaleString()}</span>
      },
      {
          accessorKey: "status",
          header: "Status",
          cell: ({ row }: any) => {
            const s = row.original.status;
            const color = s === 'paid' ? 'text-green-600' : s === 'unconfirmed' ? 'text-orange-500' : 'text-yellow-600';
            return <span className={`uppercase text-xs font-bold ${color}`}>{s}</span>
          }
      },
      {
          accessorKey: "createdAt",
          header: "Date",
          cell: ({ row }: any) => <span className="text-xs text-muted-foreground">{new Date(row.original.createdAt).toLocaleDateString()}</span>
      },
      {
          id: "actions",
          cell: ({ row }: any) => (
              <div className="flex gap-2 justify-end">
                  <Button variant="ghost" size="icon" onClick={(e) => { e.stopPropagation(); setSelectedCart(row.original); setDialogOpen(true); }}>
                      <Eye className="w-4 h-4 text-primary" />
                  </Button>
                  <Button variant="ghost" size="icon" onClick={(e) => handleDelete(e, row.original.id)}>
                      <Trash2 className="w-4 h-4 text-destructive" />
                  </Button>
              </div>
          )
      }
  ], [carts]); 

  // Filter data
  const filteredData = useMemo(() => {
      if (!search) return carts;
      const lower = search.toLowerCase();
      return carts.filter(c => 
          c.id?.toLowerCase().includes(lower) || 
          c.user?.name?.toLowerCase().includes(lower) || 
          c.user?.email?.toLowerCase().includes(lower) ||
          c.status?.toLowerCase().includes(lower)
      );
  }, [carts, search]);

  const onRowClick = (row: any) => {
      setSelectedCart(row);
      setDialogOpen(true);
  }

  return (
    <div className='w-full p-4 border rounded-md bg-card mx-2'>
        <div className="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
            <h2 className='font-semibold text-lg'>All Carts Management</h2>
            <div className="flex gap-2 w-full md:w-auto">
                <Input 
                    placeholder="Search carts..." 
                    value={search} 
                    onChange={(e) => setSearch(e.target.value)}
                    className="max-w-xs"
                />
                <Button variant="outline" onClick={fetchCarts}>Refresh</Button>
            </div>
        </div>

        {loading ? (
            <div className="text-center py-10">Loading carts...</div>
        ) : (
            <DataTableDemo 
                columns={columns} 
                data={filteredData} 
                onRowClick={onRowClick}
            />
        )}

        <CartDetailsDialog 
            open={dialogOpen} 
            onOpenChange={setDialogOpen}
            cart={selectedCart}
            onConfirmPayment={async () => {
               // The logic for confirming is actually inside the parent component or triggered via API. 
               // The Dialog calls 'onConfirmPayment'. 
               // I need to implement the API call here.
               if(!selectedCart) return;
               try {
                  await axios.put('/api/dbhandler?model=cart', {
                      id: selectedCart.id,
                      status: 'paid',
                      adminConfirmed: true
                  });
                  await handleUpdatePayment();
               } catch(e) {
                   console.error(e);
                   alert("Failed to confirm payment");
               }
            }}
        />
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\CategoryForm.tsx
================================================================================

"use client";

import { useEffect, useState, useRef } from "react";
import axios from "axios";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";

export default function CategoriesForm() {
  const [categories, setCategories] = useState<any[]>([]);
  const [formData, setFormData] = useState({
    id: "",
    name: "",
    description: "",
    image: "",
  });
  const [file, setFile] = useState<File | null>(null);
  const [preview, setPreview] = useState<string | null>(null);
  const [editId, setEditId] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);
  const [errorMsg, setErrorMsg] = useState("");
  
  const fileInputRef = useRef<HTMLInputElement>(null);
  const [fileKey, setFileKey] = useState("file-0"); // Unique key to reset input

  useEffect(() => {
    fetchCategories();
  }, []);

  const fetchCategories = async () => {
    try {
      const res = await axios.get("/api/dbhandler?model=category");
      setCategories(res.data);
    } catch (err) {
      console.error("Failed to fetch categories:", err);
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    console.log("File input change event:", e);

    const selected = e.target.files?.[0] || null;
    setErrorMsg("");

    if (!selected) {
      console.log("No file selected");
      return;
    }

    // Maximum allowed size in KB
    const maxSizeKB = 300;
    const maxSizeBytes = maxSizeKB * 1024;

    console.log(
      "Selected file size (bytes):",
      selected.size,
      "Max allowed size (bytes):",
      maxSizeBytes
    );

    if (selected.size > maxSizeBytes) {
      setErrorMsg(`Image must be smaller than ${maxSizeKB}KB.`);
      console.log("File rejected: too large");
      return;
    }

    setFile(selected);
    setPreview(URL.createObjectURL(selected));
    console.log("Selected file accepted:", selected);
  };



  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setErrorMsg("");

    // if (!editId && !file) {
    //   setErrorMsg("Image is required when creating a category.");
    //   return;
    // }

    setLoading(true);

    try {
      const data = new FormData();
      data.append("name", formData.name);
      data.append("description", formData.description);

      if (file) {
        data.append("file", file); // new upload
      } else if (editId && formData.image) {
        data.append("image", formData.image); // keep existing image
      }

      if (editId) data.append("id", editId);

      const config = { headers: { "Content-Type": "multipart/form-data" } };

     for (const [key, value] of data.entries() as Iterable<[string, any]>) {
      console.log(key + ": ", value);
    }

      if (editId) {
        await axios.put(`/api/dbhandler?model=category&id=${editId}`, data, config);
      } else {
        await axios.post(`/api/dbhandler?model=category`, data, config);
      }

      resetForm();
      fetchCategories();
    } catch (err) {
      console.error(err);
      setErrorMsg("Something went wrong. Try again.");
    }

    setLoading(false);
  };

  const handleEdit = (item: any) => {
    setEditId(item.id);
    setFormData({
      id: item.id,
      name: item.name,
      description: item.description,
      image: item.image,
    });

    setFile(null);
    setPreview(null);
    setErrorMsg("");
    setFileKey(`file-${Date.now()}`); // Reset input key
  };

  const handleDelete = async (id: string) => {
    try {
      await axios.delete(`/api/dbhandler?model=category&id=${id}`);
      fetchCategories();
    } catch (err) {
      console.error("Failed to delete category:", err);
    }
  };

  const resetForm = () => {
    setFormData({ id: "", name: "", description: "", image: "" });
    setFile(null);
    setPreview(null);
    setEditId(null);
    setErrorMsg("");
    setFileKey(`file-${Date.now()}`); // Reset input key
  };

  return (
    <div className="flex flex-col items-center">
      <form
        onSubmit={handleSubmit}
        className="flex flex-col w-full max-w-sm gap-3 p-4 border-2 border-secondary-foreground rounded-md m-2"
      >
        <h2 className="font-semibold text-lg">Manage Product Categories</h2>

        {errorMsg && (
          <p className="text-red-600 text-sm font-medium">{errorMsg}</p>
        )}

        <Input
          type="text"
          placeholder="Category Name"
          value={formData.name}
          onChange={(e) =>
            setFormData({ ...formData, name: e.target.value })
          }
        />

        <Input
          type="text"
          placeholder="Description"
          value={formData.description}
          onChange={(e) =>
            setFormData({ ...formData, description: e.target.value })
          }
        />

        <input
          ref={fileInputRef}
          key={fileKey}
          type="file"
          accept="image/*"
          onChange={handleFileChange}
          className="border p-1 rounded-md"
        />

        {preview ? (
          <img
            src={preview}
            alt="Preview"
            className="w-20 h-20 rounded-md mt-2 border"
          />
        ) : formData.image ? (
          <img
            src={formData.image}
            alt="Category"
            className="w-20 h-20 rounded-md mt-2 border"
          />
        ) : null}

        <Button type="submit" disabled={loading}>
          {loading ? "Saving..." : editId ? "Update" : "Create"}
        </Button>

        {editId && (
          <button
            type="button"
            className="text-sm text-blue-600 underline"
            onClick={resetForm}
          >
            Cancel Edit
          </button>
        )}

        <ul className="w-full mt-4">
          {categories.map((item, index) => (
            <li
              key={item.id}
              className="flex flex-col items-center gap-2 my-2 bg-secondary rounded-md w-full p-3"
            >
              <p className="font-medium">
                {index + 1}. {item.name}
              </p>

              {item.image && (
                <img
                  src={item.image}
                  className="w-16 h-16 rounded-md border"
                  alt="category"
                />
              )}

              <div className="flex flex-row gap-2 w-full">
                <Button type="button" onClick={() => handleEdit(item)} className="flex-1">
                  Edit
                </Button>

                <Button
                  type="button"
                  onClick={() => handleDelete(item.id)}
                  variant="ghost"
                  className="flex-1 border border-accent"
                >
                  Delete
                </Button>
              </div>
            </li>
          ))}
        </ul>
      </form>
    </div>
  );
}



================================================================================
LOCATION: prisma\forms\CouponForm.tsx
================================================================================


import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function CouponForm() {
  const [coupons, setCoupons] = useState([]);
  const [formData, setFormData] = useState({
    code: '',
    discount: '',
    expiresAt: '',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {
    fetchCoupons();
  }, []);

  const fetchCoupons = async () => {
    const res = await axios.get('/api/dbhandler?model=coupon');
    setCoupons(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=coupon&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=coupon', formData);
    }
    resetForm();
    fetchCoupons();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=coupon&id=${id}`);
    fetchCoupons();
  };

  const resetForm = () => {
    setFormData({
      code: '',
      discount: '',
      expiresAt: '',
    });
    setEditId(null);
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Coupons</h2>
        <Input type="text" placeholder="Code" value={formData.code} onChange={(e) => setFormData({ ...formData, code: e.target.value })} />
        <Input type="number" placeholder="Discount" value={formData.discount} onChange={(e) => setFormData({ ...formData, discount: e.target.value })} />
        <Input type="datetime-local" placeholder="Expires At" value={formData.expiresAt} onChange={(e) => setFormData({ ...formData, expiresAt: e.target.value })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}
        <ul className='w-full'>
          {coupons.length > 0 ? (
            coupons.map((item , index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Code : </span>
                  <span>{item.code}</span>
                </div>
                <p>Discount : {item.discount || <em>No discount</em>}</p>
                <p>Expires At : {item.expiresAt || <em>No expiry date</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No coupons available.</p>
          )}
        </ul>
      </form>
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\FeaturedProductForm.tsx
================================================================================

import { useEffect, useMemo, useState } from "react";
import axios from "axios";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";

interface Product {
  id: string;
  name: string;
  price?: number;
  description?: string;
}

interface FeaturedProduct {
  id: string;
  productId: string;
  product: Product;
}

const MAX_FEATURED_PRODUCTS = 16;

export default function FeaturedProductForm() {
  const [featuredProduct, setFeaturedProduct] = useState<FeaturedProduct[]>([]);
  const [products, setProducts] = useState<Product[]>([]);
  const [search, setSearch] = useState("");

  const [formData, setFormData] = useState({
    productId: "",
    productName: "",
  });

  const [editId, setEditId] = useState<string | null>(null);

  /* ===============================
     Fetching
  ================================ */
  useEffect(() => {
    refreshAll();
  }, []);

  const refreshAll = async () => {
    await Promise.all([fetchFeaturedProduct(), fetchProducts()]);
  };

  const fetchFeaturedProduct = async () => {
    try {
      const res = await axios.get("/api/dbhandler?model=featuredProduct");
      setFeaturedProduct(res.data);
    } catch (err) {
      console.error("Failed to fetch featured products", err);
    }
  };

  const fetchProducts = async () => {
    try {
      const res = await axios.get("/api/dbhandler?model=product");
      setProducts(res.data);
    } catch (err) {
      console.error("Failed to fetch products", err);
    }
  };

  /* ===============================
     Derived State
  ================================ */
  const featuredIds = useMemo(
    () => new Set(featuredProduct.map((f) => f.productId)),
    [featuredProduct]
  );

  const filteredProducts = useMemo(() => {
    return products.filter((p) =>
      p.name.toLowerCase().includes(search.toLowerCase())
    );
  }, [products, search]);

  const isLimitReached =
    featuredProduct.length >= MAX_FEATURED_PRODUCTS && !editId;

  /* ===============================
     Actions
  ================================ */

  // ðŸ”¥ OPTION 1: Direct POST when "Feature" is clicked
  const handleFeatureClick = async (item: Product) => {
    if (featuredIds.has(item.id)) return;

    if (featuredProduct.length >= MAX_FEATURED_PRODUCTS) {
      alert(`You can only feature up to ${MAX_FEATURED_PRODUCTS} products.`);
      return;
    }

    try {
      await axios.post("/api/dbhandler?model=featuredProduct", {
        productId: item.id,
      });

      await refreshAll();
    } catch (err) {
      console.error("Failed to feature product:", err);
    }
  };

  // Used only for EDIT
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!editId || !formData.productId) return;

    try {
      await axios.put(
        `/api/dbhandler?model=featuredProduct&id=${editId}`,
        { productId: formData.productId }
      );

      resetForm();
      refreshAll();
    } catch (err) {
      console.error("Failed to update featured product:", err);
    }
  };

  const handleEdit = (item: FeaturedProduct) => {
    setFormData({
      productId: item.productId,
      productName: item.product?.name || "",
    });
    setEditId(item.id);
  };

  const handleDelete = async (id: string) => {
    try {
      await axios.delete(`/api/dbhandler?model=featuredProduct&id=${id}`);
      refreshAll();
    } catch (err) {
      console.error("Failed to delete featured product", err);
    }
  };

  const resetForm = () => {
    setFormData({ productId: "", productName: "" });
    setEditId(null);
  };

  /* ===============================
     Render
  ================================ */
  return (
    <div className="p-4">
      <h2 className="text-lg font-semibold mb-2">
        Manage Home Page Featured Products
      </h2>

      {/* ===============================
          FORM (EDIT ONLY)
      ================================ */}
      <form
        onSubmit={handleSubmit}
        className="flex flex-col w-full max-w-md gap-2 p-3 border-2 border-secondary-foreground rounded-md"
      >
        <h3 className="font-semibold">
          Select Product to Feature ({featuredProduct.length}/{MAX_FEATURED_PRODUCTS})
        </h3>

        <Input
          placeholder="Search products..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
        />

        {/* Product List */}
        <ul className="mb-2 max-h-64 overflow-y-auto">
          {filteredProducts.map((item, index) => {
            const isFeatured = featuredIds.has(item.id);

            return (
              <li
                key={item.id}
                className="flex flex-col gap-1 my-2 bg-secondary rounded-md p-2"
              >
                <div className="flex justify-between w-full">
                  <span>
                    {index + 1}. {item.name}
                  </span>
                  <span>Price: {item.price ?? <em>No price</em>}</span>
                </div>

                <Button
                  type="button"
                  onClick={() => handleFeatureClick(item)}
                  disabled={isFeatured || isLimitReached}
                  variant={isFeatured ? "ghost" : "default"}
                >
                  {isFeatured
                    ? "Already Featured"
                    : isLimitReached
                    ? "Limit Reached"
                    : "Feature"}
                </Button>
              </li>
            );
          })}
        </ul>

        {editId && (
          <>
            <Input value={formData.productName} disabled />
            <Input value={formData.productId} disabled />

            <Button type="submit">Update</Button>
            <Button type="button" onClick={resetForm} variant="ghost">
              Cancel
            </Button>
          </>
        )}
      </form>

      {/* ===============================
          FEATURED LIST
      ================================ */}
      <h3 className="mt-4 font-semibold">Added Featured Products</h3>

      <ul>
        {featuredProduct.map((item, index) => (
          <li
            key={item.id}
            className="flex flex-col gap-1 my-2 bg-secondary rounded-md p-2"
          >
            <div className="flex justify-between w-full">
              <span>
                {index + 1}. {item.product?.name ?? "Unnamed Product"}
              </span>
              <span>
                Price: {item.product?.price ?? <em>No price</em>}
              </span>
            </div>

            <div className="flex gap-2 mt-1">
              <Button type="button" onClick={() => handleEdit(item)}>
                Edit
              </Button>
              <Button
                type="button"
                onClick={() => handleDelete(item.id)}
                variant="ghost"
                className="border-2 border-accent"
              >
                Delete
              </Button>
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
}



================================================================================
LOCATION: prisma\forms\forms.jsx
================================================================================

import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

// lib/api.js
import axios from 'axios';
import { useEffect, useState } from 'react';

export const fetchData = async (model) => {
  const res = await axios.get(`/api/dbhandler?model=${model}`);
  return res.data;
};

export const postData = async (model, data) => {
  const res = await axios.post(`/api/dbhandler?model=${model}`, data);
  return res.data;
};

export const updateData = async (model, id, data) => {
  const res = await axios.put(`/api/dbhandler?model=${model}&id=${id}`, data);
  return res.data;
};

export const deleteData = async (model, id) => {
  const res = await axios.delete(`/api/dbhandler?model=${model}&id=${id}`);
  return res.data;
};














// components/CrudForm.jsx

// import { fetchData, postData, updateData, deleteData } from '../lib/api';

const fieldHandlers = {
  String: (value, onChange) => (
    <Input type="text" value={value || ''} onChange={onChange} />
  ),
  Int: (value, onChange) => (
    <Input type="number" value={value || 0} onChange={onChange} />
  ),
  Boolean: (value, onChange) => (
    <Input type="checkbox" checked={value || false} onChange={onChange} />
  ),
  DateTime: (value) => (
    <span>{new Date(value).toLocaleString()}</span>
  ),
  Array: (value, onChange) => (
    <Input
      type="text"
      placeholder="Comma-separated values"
      value={(value || []).join(',')}
      onChange={onChange}
    />
  ),
  default: (value, onChange) => (
    <input type="text" value={value || ''} onChange={onChange} />
  ),
};

export default function CrudForm({ model }) {
  const [items, setItems] = useState([]);
  const [formData, setFormData] = useState({});
  const [editId, setEditId] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    loadItems();
  }, []);

  const loadItems = async () => {
    setLoading(true);
    try {
      const data = await fetchData(model);
      setItems(data);
    } catch (err) {
      console.error('Error fetching items:', err);
    } finally {
      setLoading(false);
    }
  };

  const resetForm = () => {
    setFormData({});
    setEditId(null);
  };

  const handleChange = (field, value, isCheckbox = false) => {
    const newValue = isCheckbox ? value.target.checked : value.target.value;

    if (field.endsWith('Id') && !field.startsWith('id')) {
      // Handle foreign key references like departmentId, ministryId
      setFormData((prev) => ({ ...prev, [field]: newValue }));
    } else if (Array.isArray(formData[field])) {
      // Handle array fields like admins[]
      setFormData((prev) => ({
        ...prev,
        [field]: newValue.split(',').map((v) => v.trim()),
      }));
    } else {
      setFormData((prev) => ({ ...prev, [field]: newValue }));
    }
  };

  const handleCreate = async (e) => {
    e.preventDefault();
    try {
      await postData(model, formData);
      resetForm();
      loadItems();
    } catch (err) {
      alert(`Create failed: ${err.message}`);
    }
  };

  const handleUpdate = async (e) => {
    e.preventDefault();
    try {
      await updateData(model, editId, formData);
      resetForm();
      loadItems();
    } catch (err) {
      alert(`Update failed: ${err.message}`);
    }
  };

  const handleDelete = async (id) => {
    if (!confirm('Are you sure you want to delete this item?')) return;
    try {
      await deleteData(model, id);
      loadItems();
    } catch (err) {
      alert(`Delete failed: ${err.message}`);
    }
  };

  const handleEditClick = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  if (loading) return <p>Loading...</p>;
  if (!items.length)
    return <p>No records found for {model}. Try creating one.</p>;

  const sampleItem = items[0];

  return (
    <div style={{ maxWidth: '600px', margin: '2rem auto' }}>
      

      <form onSubmit={editId ? handleUpdate : handleCreate} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2>Manage {model.charAt(0).toUpperCase() + model.slice(1)}</h2>
        {Object.keys(sampleItem).map((key) => {
          if (key === 'id' || key === '_id') return null;
          if (key === 'createdAt' || key === 'updatedAt') return null;

          const value = formData[key] !== undefined ? formData[key] : sampleItem[key];
          const type = Array.isArray(value) ? 'Array' : typeof value;

          const handler =
            fieldHandlers[type] ||
            fieldHandlers[value?.constructor?.name] ||
            fieldHandlers.default;

          return (
            <div key={key} style={{ marginBottom: '1rem' }}>
              <label style={{ display: 'block' }}>
                {key}
                <br />
                {handler(
                  value,
                  (e) => handleChange(key, e),
                  type === 'Boolean'
                )}
              </label>
            </div>
          );
        })}
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <Button type="button" onClick={resetForm}>Cancel</Button>}
      </form>

      <hr />

      <ul>
        {items.map((item) => (
          <li key={item.id} style={{ marginBottom: '1rem' }}>
            <strong>{item.name || item.title || item.email || item.label || item.id}</strong>
            <br />
            <Button onClick={() => handleEditClick(item)}>Edit</Button>
            <Button onClick={() => handleDelete(item.id)}>Delete</Button>
          </li>
        ))}
      </ul>
    </div>
  );
}





// //usage sample
// // pages/ministries.js
// import CrudForm from '../components/CrudForm';

// export default function MinistriesPage() {
//   return <CrudForm model="ministries" />;
// }

// // pages/departments.js
// import CrudForm from '../components/CrudForm';

// export default function DepartmentsPage() {
//   return <CrudForm model="departments" />;
// }


================================================================================
LOCATION: prisma\forms\NotificationForm.tsx
================================================================================


import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function NotificationForm() {
  const [notifications, setNotifications] = useState([]);
  const [users, setUsers] = useState([]);
  const [formData, setFormData] = useState({
    userId: '',
    message: '',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {
    fetchNotifications();
    fetchUsers();
  }, []);

  const fetchNotifications = async () => {
    const res = await axios.get('/api/dbhandler?model=notification');
    setNotifications(res.data);
  };

  const fetchUsers = async () => {
    const res = await axios.get('/api/dbhandler?model=user');
    setUsers(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=notification&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=notification', formData);
    }
    resetForm();
    fetchNotifications();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=notification&id=${id}`);
    fetchNotifications();
  };

  const resetForm = () => {
    setFormData({
      userId: '',
      message: '',
    });
    setEditId(null);
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Notifications</h2>
        <select value={formData.userId} onChange={(e) => setFormData({ ...formData, userId: e.target.value })}>
          {users.length > 0 ? (
            users.map((user, index) => (
              <option key={index} value={user.id}>
                {user.name}
              </option>
            ))
          ) : (
            <option value="">No users</option>
          )}
        </select>
        <Input placeholder="Message" value={formData.message} onChange={(e) => setFormData({ ...formData, message: e.target.value })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <Button type="button" onClick={resetForm}>Cancel</Button>}
        <ul className='w-full'>
          {notifications.length > 0 ? (
            notifications.map((item, index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <p>Message: {item.message}</p>
                <p>User: {users.find((user) => user.id === item.userId)?.name}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No notifications.</p>
          )}
        </ul>
      </form>
    </div>
  );
}


================================================================================
LOCATION: prisma\forms\PaymentForm.tsx
================================================================================


// components/PaymentForm.tsx
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import axios from 'axios';
import { useEffect, useState } from 'react';

export default function PaymentForm() {
  const [payments, setPayments] = useState([]);
  const [formData, setFormData] = useState({
    cartId: '',
    method: '',
    amount: 0,
  });
  const [editId, setEditId] = useState(null);
  const [carts, setCarts] = useState([]); // carts to be mapped to the select input

  useEffect(() => {
    fetchPayments();
    fetchCarts();
  }, []);

  const fetchPayments = async () => {
    try {
      const res = await axios.get('/api/dbhandler?model=payment');
      setPayments(res.data);
    } catch (err) {
      console.error('Failed to fetch payments', err);
    }
  };

  const fetchCarts = async () => {
    const res = await axios.get('/api/dbhandler?model=cart');
    setCarts(res.data);
    if (res.data.length > 0) {
      setFormData(prev => ({ ...prev, cartId: res.data[0].id }));
    }
  };

  const resetForm = () => {
    setFormData({
      cartId: '',
      method: '',
      amount: 0,
    });
    setEditId(null);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      if (editId) {
        await axios.put(`/api/dbhandler?model=payment&id=${editId}`, formData);
      } else {
        await axios.post('/api/dbhandler?model=payment', formData);
      }
    } catch (error) {
      alert('Failed to save payment.');
    }
    resetForm();
    fetchPayments();
  };

  const handleDelete = async (id) => {
    if (!confirm('Are you sure you want to delete this payment?')) return;
    try {
      await axios.delete(`/api/dbhandler?model=payment&id=${id}`);
      fetchPayments();
    } catch (err) {
      alert('Failed to delete payment.');
    }
  };

  const handleEdit = (payment) => {
    setEditId(payment.id);
    setFormData({
      cartId: payment.cartId,
      method: payment.method,
      amount: payment.amount,
    });
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Payment Form</h2>
        <div>Cart ID</div>
        <select value={formData.cartId} onChange={(e) => setFormData({ ...formData, cartId: e.target.value })}>
          {carts.length > 0 ? carts.map((cart, index) => (
            <option key={index} value={cart.id}>
              {cart.id}
            </option>
          )) : <option value="">No carts</option>}
        </select>
        <div>Payment Method</div>
        <Input placeholder="Payment method" value={formData.method} onChange={(e) => setFormData({ ...formData, method: e.target.value })} />
        <div>Amount</div>
        <Input placeholder="Amount" type="number" value={formData.amount} onChange={(e) => setFormData({ ...formData, amount: +e.target.value  })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <Button type="button" onClick={resetForm}>Cancel</Button>}
        <ul className='w-full'>
          {payments.length > 0 ? (
            payments.map((item, index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Cart ID: </span>
                  <span>{item.cartId}</span>
                </div>
                <p>Method: {item.method || <em>No method</em>}</p>
                <p>Amount: {item.amount || <em>No amount</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No available payments.</p>
          )}
        </ul>
      </form>
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\PostForm.tsx
================================================================================


import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function PostForm() {
  const [posts, setPosts] = useState([]);
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    contentUrl: '',
    authorId: '',
  });
  const [editId, setEditId] = useState(null);
  const [users, setUsers] = useState([]); // Added to store users for the select input

  useEffect(() => {
    fetchPosts();
    fetchUsers();
  }, []);

  const fetchPosts = async () => {
    const res = await axios.get('/api/dbhandler?model=post');
    setPosts(res.data);
  };

  const fetchUsers = async () => {
    const res = await axios.get('/api/dbhandler?model=user');
    setUsers(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=post&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=post', formData);
    }
    resetForm();
    fetchPosts();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=post&id=${id}`);
    fetchPosts();
  };

  const resetForm = () => {
    setFormData({
      title: '',
      description: '',
      contentUrl: '',
      authorId: '',
    });
    setEditId(null);
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Posts</h2>
        <select value={formData.authorId} onChange={(e) => setFormData({ ...formData, authorId: e.target.value })}>
          <option value="">Select Author</option>
          {users.map((user) => (
            <option key={user.id} value={user.id}>
              {user.name} ({user.email})
            </option>
          ))}
        </select>
        <Input type="text" placeholder="Title" value={formData.title} onChange={(e) => setFormData({ ...formData, title: e.target.value })} />
        <Input type="text" placeholder="Description" value={formData.description} onChange={(e) => setFormData({ ...formData, description: e.target.value })} />
        <Input type="text" placeholder="Content URL" value={formData.contentUrl} onChange={(e) => setFormData({ ...formData, contentUrl: e.target.value })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}
        <ul className='w-full'>
          {posts.length > 0 ? (
            posts.map((item , index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Title : </span>
                  <span>{item.title}</span>
                </div>
                <p>Description : {item.description || <em>No description</em>}</p>
                <p>Content URL : {item.contentUrl || <em>No content URL</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No posts available.</p>
          )}
        </ul>
      </form>
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\ProductForm.tsx
================================================================================

// components/BookForm.tsx
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import axios from 'axios';
import { useEffect, useState } from 'react';

// interface Product {
//   id: string;
//   //ministryId: string;
//   title: string;
//   author?: string;
//   @id @default(auto()) @map("_id") @db.ObjectId
//   name     String
//   description String?
//   category     Category     @relation(fields: [categoryId], references: [id])
//   categoryId    String    @db.ObjectId
//   price    Float
//   stock: any;
//   reviews  Review[]
//   cartItems: any;
//   Featured : any;
//   images: any;
//   createdAt?: Date;
//   updatedAt?: Date; 
// }

export default function ProductForm() {
  const [products, setProducts] = useState<any>([]);
  const [formData, setFormData] = useState<any>({ //useState<Omit<any, 'id' | 'createdAt' | 'updatedAt'>>({
    name: '',
    description: '',
    category: '',
    categoryId: '',
    price: 0,
    images: null,
  });
  const [file, setFile] = useState(null);
  const [categories, setCategories] = useState([]);//categories to be mapped to the select input
  const [preview, setPreview] = useState(null);
  const [uploadStatus , setUploadStatus] = useState("");

  const [productImage, setProductImage] = useState(null);
  const [editId, setEditId] = useState<string | null>(null);

  useEffect(() => {
    fetchProducts();
    fetchCategories();
  }, []);


  const fetchProducts = async () => {
    try {
      const res = await axios.get('/api/dbhandler?model=product');
      setProducts(res.data);
    } catch (err) {
      console.error('Failed to fetch products', err);
    }
  };

  const fetchCategories = async () => {
    const res = await axios.get('/api/dbhandler?model=category');
    setCategories(res.data);
    if (res.data.length > 0) {
      setFormData(prev => ({
        ...prev,
        categoryId: res.data[0].id,
        category: res.data[0].name
      }));
    }
  };

  const resetForm = () => {
    setFormData({
      name: '',
      description: '',
      categoryId: '',
      category: '',
      price: 0,
      images: null,
    });
    setEditId(null);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();

    console.log('product', formData, 'file', file);

    const pformData = new FormData();

    // âœ… only append file if user selected one
    if (file) {
      pformData.append("file", file);
    }

    pformData.append("name", formData.name);
    pformData.append("description", formData.description);
    pformData.append("categoryId", formData.categoryId);
    pformData.append("price", String(formData.price));

    console.log("Submitting product data:", "Edit ID:", editId);
    for (const [key, value] of pformData.entries()) {
      console.log(key + ":", value);
    }

    try {
      if (editId) {
        await axios.put(
          `/api/dbhandler?model=product&id=${editId}`,
          pformData
        );
      } else {
        await axios.post(`/api/product`, pformData);
      }
    } catch (error) {
      console.error(error);
      alert("Failed to save product.");
    }

    resetForm();
    fetchProducts();
  };


  const handleImageChange = (e) => {
    const selectedFile = e.target.files[0];
    if (selectedFile.size > 3 * 1024){
      alert("file size greater than 300kb file may not upload")
    }
    setFile(selectedFile);
    setPreview(URL.createObjectURL(selectedFile));
  }

  const handleDelete = async (product : any) => {
    if (!confirm(`Are you sure you want to delete ${product.name} product?`)) return;
    try {
      const res = await axios.delete(`/api/dbhandler?model=product&id=${product.id}`);
      if (res.status === 200  || res.status === 201) {
        alert('Product deleted successfully.');
      }
      fetchProducts();
    } catch (err) {
      alert('Failed to delete product.');
    }
  };

  const handleEdit = (product: any) => {
    setEditId(product.id);
    setFile(null);        // ðŸ”‘ important
    setPreview(null);     // ðŸ”‘ important

    setFormData({
      name: product.name ?? '',
      description: product.description ?? '',
      categoryId: product.categoryId ?? '',
      price: product.price ?? 0,
      images: product.images ?? [],
    });
  };

  

  return (
    <div>
      
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2>Product Form</h2>

        <div>Product Name </div>
        <Input
          placeholder="Name of product"
          value={formData.name}
          onChange={(e) => setFormData({ ...formData, name: e.target.value })}
        />


        <div>Product Description </div>
        <Input
          placeholder="Description of product"
          value={formData.description}
          onChange={(e) => setFormData({ ...formData, description: e.target.value })}
        />


        <div>Product Category </div>
        <select 
          value={formData.categoryId} 
          onChange={(e) => {
            const selectedCategory = categories.find(cat => cat.id === e.target.value);
            setFormData({ 
              ...formData, 
              categoryId: e.target.value, 
              category: selectedCategory ? selectedCategory.name : ''
            });
          }}
        >
          {categories.length > 0 ? categories.map((category, index) => (
            <option key={index} value={`${category.id}`}>
              {category.name}
            </option>
          )) : <option value="">No categories</option>}
        </select>


        <div>Product Price </div>
        <Input
          placeholder="Price of product"
          value={formData.price}
          onChange={(e) => setFormData({ ...formData, price: e.target.value })}
          type="number"
        />

        <div>Product Image </div>
        {!preview && formData?.images?.length > 0 && (
          <img
            src={formData.images[0]}
            alt="Current product"
            style={{ maxHeight: '300px', marginTop: '1rem' }}
          />
        )}
        {(preview) && (        //{(preview || formData?.images[0]!=null) && (
              <div style={{ marginTop: '1rem' }}>
                <img src={preview} alt="Selected preview" style={{ maxHeight: '300px' }} />
              </div>
            )}
            <Input
              type="file"
              name='image'
              id='image'
              placeholder="Product image"
              // value={formData.image || ''}
              // onChange={(e) => setFormData({ ...formData, image: e.target.value })}
              onChange={handleImageChange}
            />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <Button type="button" onClick={resetForm}>Cancel</Button>}


        <ul className='w-full'>
          {products.length > 0 ? (
            products.map((item , index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Name : </span>
                  <span>{item.name}</span>
                </div>
                <p>Price : {item.price || <em>No price tag</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No available product.</p>
          )}
        </ul>
      </form>
    </div>
  );
}


================================================================================
LOCATION: prisma\forms\RefundForm.tsx
================================================================================


import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function RefundForm() {
  const [refunds, setRefunds] = useState([]);
  const [formData, setFormData] = useState({
    cartId: '',
    amount: '',
    reason: '',
    status: 'pending',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {
    fetchRefunds();
  }, []);

  const fetchRefunds = async () => {
    const res = await axios.get('/api/dbhandler?model=refund');
    setRefunds(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=refund&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=refund', formData);
    }
    resetForm();
    fetchRefunds();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=refund&id=${id}`);
    fetchRefunds();
  };

  const resetForm = () => {
    setFormData({
      cartId: '',
      amount: '',
      reason: '',
      status: 'pending',
    });
    setEditId(null);
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Refunds</h2>
        <Input type="text" placeholder="Cart ID" value={formData.cartId} onChange={(e) => setFormData({ ...formData, cartId: e.target.value })} />
        <Input type="number" placeholder="Amount" value={formData.amount} onChange={(e) => setFormData({ ...formData, amount: e.target.value })} />
        <Input type="text" placeholder="Reason" value={formData.reason} onChange={(e) => setFormData({ ...formData, reason: e.target.value })} />
        <select value={formData.status} onChange={(e) => setFormData({ ...formData, status: e.target.value })}>
          <option value="pending">Pending</option>
          <option value="approved">Approved</option>
          <option value="rejected">Rejected</option>
        </select>
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}
        <ul className='w-full'>
          {refunds.length > 0 ? (
            refunds.map((item , index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Cart ID : </span>
                  <span>{item.cartId}</span>
                </div>
                <p>Amount : {item.amount || <em>No amount</em>}</p>
                <p>Reason : {item.reason || <em>No reason</em>}</p>
                <p>Status : {item.status || <em>No status</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No refunds available.</p>
          )}
        </ul>
      </form>
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\ReviewForm.tsx
================================================================================

// components/LikeForm.tsx
import axios from 'axios';
import { useEffect, useState } from 'react';
import { Like } from './types';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

const API_URL = '/api/dbhandler';

export default function LikeForm() {
  const [likes, setLikes] = useState<Like[]>([]);
  const [formData, setFormData] = useState<Omit<Like, 'id' | 'createdAt' | 'updatedAt'>>({
    ministryId: '',
    contentId: '',
    userId: '',
  });
  const [editId, setEditId] = useState<string | null>(null);

  useEffect(() => {
    fetchLikes();
  }, []);

  const fetchLikes = async () => {
    const res = await axios.get(`${API_URL}?model=likes`);
    setLikes(res.data);
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      if (editId) {
        await axios.put(`${API_URL}?model=likes&id=${editId}`, formData);
      } else {
        await axios.post(`${API_URL}?model=likes`, formData);
      }
      resetForm();
      fetchLikes();
    } catch (err) {
      alert('Failed to save like.');
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('Delete this like?')) return;
    await axios.delete(`${API_URL}?model=likes&id=${id}`);
    fetchLikes();
  };

  const handleEdit = (item: Like) => {
    setEditId(item.id);
    setFormData({
      ministryId: item.ministryId,
      contentId: item.contentId,
      userId: item.userId,
    });
  };

  const resetForm = () => {
    setFormData({ ministryId: '', contentId: '', userId: '' });
    setEditId(null);
  };

  return (
    <div>
      
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2>Manage Likes</h2>
        <Input placeholder="Ministry ID" value={formData.ministryId} onChange={(e) => setFormData({ ...formData, ministryId: e.target.value })} />
        <Input placeholder="Content ID" value={formData.contentId} onChange={(e) => setFormData({ ...formData, contentId: e.target.value })} />
        <Input placeholder="User ID" value={formData.userId} onChange={(e) => setFormData({ ...formData, userId: e.target.value })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <Button type="button" onClick={resetForm}>Cancel</Button>}
      </form>

      <ul>
        {likes.map((item) => (
          <li key={item.id}>
            <strong>ID:</strong> {item.id} |
            <strong>Ministry:</strong> {item.ministryId} |
            <strong>User:</strong> {item.userId}
            <button onClick={() => handleEdit(item)}>Edit</button>
            <button onClick={() => handleDelete(item.id)}>Delete</button>
          </li>
        ))}
      </ul>
    </div>
  );
}


================================================================================
LOCATION: prisma\forms\ShippingAddressForm.tsx
================================================================================


import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function ShippingAddressForm() {
  const [shippingAddresses, setShippingAddresses] = useState([]);
  const [formData, setFormData] = useState({
    userId: '',
    address: '',
    city: '',
    state: '',
    zip: '',
    country: '',
    phone: '',
  });
  const [editId, setEditId] = useState(null);
  const [users, setUsers] = useState([]); // Added to store users for the select input

  useEffect(() => {
    fetchShippingAddresses();
    fetchUsers();
  }, []);

  const fetchShippingAddresses = async () => {
    const res = await axios.get('/api/dbhandler?model=shippingAddress');
    setShippingAddresses(res.data);
  };

  const fetchUsers = async () => {
    const res = await axios.get('/api/dbhandler?model=user');
    setUsers(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=shippingAddress&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=shippingAddress', formData);
    }
    resetForm();
    fetchShippingAddresses();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=shippingAddress&id=${id}`);
    fetchShippingAddresses();
  };

  const resetForm = () => {
    setFormData({
      userId: '',
      address: '',
      city: '',
      state: '',
      zip: '',
      country: '',
      phone: '',
    });
    setEditId(null);
  };

  return (
    <div>
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Shipping Addresses</h2>
        <select value={formData.userId} onChange={(e) => setFormData({ ...formData, userId: e.target.value })}>
          <option value="">Select User</option>
          {users.map((user) => (
            <option key={user.id} value={user.id}>
              {user.name} ({user.email})
            </option>
          ))}
        </select>
        <Input type="text" placeholder="Address" value={formData.address} onChange={(e) => setFormData({ ...formData, address: e.target.value })} />
        <Input type="text" placeholder="City" value={formData.city} onChange={(e) => setFormData({ ...formData, city: e.target.value })} />
        <Input type="text" placeholder="State" value={formData.state} onChange={(e) => setFormData({ ...formData, state: e.target.value })} />
        <Input type="text" placeholder="Zip" value={formData.zip} onChange={(e) => setFormData({ ...formData, zip: e.target.value })} />
        <Input type="text" placeholder="Country" value={formData.country} onChange={(e) => setFormData({ ...formData, country: e.target.value })} />
        <Input type="text" placeholder="Phone" value={formData.phone} onChange={(e) => setFormData({ ...formData, phone: e.target.value })} />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}
        <ul className='w-full'>
          {shippingAddresses.length > 0 ? (
            shippingAddresses.map((item , index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Address : </span>
                  <span>{item.address}</span>
                </div>
                <p>City : {item.city || <em>No city</em>}</p>
                <p>State : {item.state || <em>No state</em>}</p>
                <p>Zip : {item.zip || <em>No zip</em>}</p>
                <p>Country : {item.country || <em>No country</em>}</p>
                <p>Phone : {item.phone || <em>No phone</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                  <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
                </div>
              </li>
            ))
          ) : (
            <p>No shipping addresses available.</p>
          )}
        </ul>
      </form>
    </div>
  );
}




================================================================================
LOCATION: prisma\forms\stockdatatable.tsx
================================================================================

"use client";

import * as React from "react";
import {
  ColumnFiltersState,
  SortingState,
  VisibilityState,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  useReactTable,
  flexRender,
  ColumnDef,
} from "@tanstack/react-table";

import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { ChevronDown, ArrowUpDown, MoreHorizontal } from "lucide-react";

import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuTrigger,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
} from "@/components/ui/dropdown-menu";

import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";

/* ===============================
   Types
================================ */
export type StockMetric = {
  id: string;
  name: string;
  price: number;
  totalStock: number;
  totalSold: number;
  available: number;
  profit: number;
};

/* ===============================
   Component
================================ */
export default function StockTable() {
  const [data, setData] = React.useState<StockMetric[]>([]);
  const [loading, setLoading] = React.useState(true);

  const [sorting, setSorting] = React.useState<SortingState>([]);
  const [columnFilters, setColumnFilters] =
    React.useState<ColumnFiltersState>([]);
  const [columnVisibility, setColumnVisibility] =
    React.useState<VisibilityState>({});
  const [rowSelection, setRowSelection] = React.useState({});

  /* ===============================
     Fetch Stock
  ================================ */
  const loadMetrics = async () => {
    setLoading(true);
    const res = await fetch("/api/stock");
    const json = await res.json();
    setData(json);
    setLoading(false);
  };

  React.useEffect(() => {
    loadMetrics();
  }, []);

  /* ===============================
     Delete Stock
  ================================ */
  const handleDelete = async (id: string) => {
    if (!confirm("Are you sure you want to delete this stock record?")) return;

    try {
      await fetch(`/api/dbhandler?model=stock&id=${id}`, {
        method: "DELETE",
      });

      // Optimistic UI update
      setData((prev) => prev.filter((item) => item.id !== id));
    } catch (err) {
      console.error("Failed to delete stock:", err);
    }
  };

  /* ===============================
     Columns (dynamic)
  ================================ */
  const columns = React.useMemo<ColumnDef<StockMetric>[]>(
    () => [
      {
        accessorKey: "name",
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() =>
              column.toggleSorting(column.getIsSorted() === "asc")
            }
          >
            Product
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
      },
      {
        accessorKey: "price",
        header: "Price",
        cell: ({ row }) => `â‚¦${row.getValue("price")}`,
      },
      {
        accessorKey: "totalStock",
        header: "Total Stock",
      },
      {
        accessorKey: "totalSold",
        header: "Sold",
      },
      {
        accessorKey: "available",
        header: "Available",
        cell: ({ row }) => (
          <span className="font-semibold text-blue-600">
            {row.getValue("available")}
          </span>
        ),
      },
      {
        accessorKey: "profit",
        header: "Profit",
        cell: ({ row }) => (
          <span className="font-semibold text-green-700">
            â‚¦{row.getValue("profit")}
          </span>
        ),
      },
      {
        id: "actions",
        enableHiding: false,
        cell: ({ row }) => {
          const item = row.original;

          return (
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="ghost" className="h-8 w-8 p-0">
                  <MoreHorizontal className="h-4 w-4" />
                </Button>
              </DropdownMenuTrigger>

              <DropdownMenuContent align="end">
                <DropdownMenuLabel>Actions</DropdownMenuLabel>

                <DropdownMenuItem
                  onClick={() =>
                    navigator.clipboard.writeText(item.id)
                  }
                >
                  Copy Stock ID
                </DropdownMenuItem>

                <DropdownMenuSeparator />

                <DropdownMenuItem
                  className="text-red-600 focus:text-red-600"
                  onClick={() => handleDelete(item.id)}
                >
                  Delete Stock
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          );
        },
      },
    ],
    []
  );

  /* ===============================
     Table
  ================================ */
  const table = useReactTable({
    data,
    columns,
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    getCoreRowModel: getCoreRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    onColumnVisibilityChange: setColumnVisibility,
    onRowSelectionChange: setRowSelection,
    state: {
      sorting,
      columnFilters,
      columnVisibility,
      rowSelection,
    },
  });

  if (loading) return <p>Loading stock...</p>;

  return (
    <div className="w-full">
      {/* FILTER + COLUMNS */}
      <div className="flex items-center py-4">
        <Input
          placeholder="Filter products..."
          value={(table.getColumn("name")?.getFilterValue() as string) ?? ""}
          onChange={(event) =>
            table.getColumn("name")?.setFilterValue(event.target.value)
          }
          className="max-w-sm"
        />

        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="outline" className="ml-auto">
              Columns
              <ChevronDown className="ml-2 h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>

          <DropdownMenuContent align="end">
            {table
              .getAllColumns()
              .filter((column) => column.getCanHide())
              .map((column) => (
                <DropdownMenuCheckboxItem
                  key={column.id}
                  className="capitalize"
                  checked={column.getIsVisible()}
                  onCheckedChange={(value) =>
                    column.toggleVisibility(!!value)
                  }
                >
                  {column.id}
                </DropdownMenuCheckboxItem>
              ))}
          </DropdownMenuContent>
        </DropdownMenu>
      </div>

      {/* TABLE */}
      <div className="rounded-md border">
        <Table>
          <TableHeader>
            {table.getHeaderGroups().map((headerGroup) => (
              <TableRow key={headerGroup.id}>
                {headerGroup.headers.map((header) => (
                  <TableHead key={header.id}>
                    {header.isPlaceholder
                      ? null
                      : flexRender(
                          header.column.columnDef.header,
                          header.getContext()
                        )}
                  </TableHead>
                ))}
              </TableRow>
            ))}
          </TableHeader>

          <TableBody>
            {table.getRowModel().rows.length ? (
              table.getRowModel().rows.map((row) => (
                <TableRow key={row.id}>
                  {row.getVisibleCells().map((cell) => (
                    <TableCell key={cell.id}>
                      {flexRender(
                        cell.column.columnDef.cell,
                        cell.getContext()
                      )}
                    </TableCell>
                  ))}
                </TableRow>
              ))
            ) : (
              <TableRow>
                <TableCell
                  colSpan={columns.length}
                  className="h-24 text-center"
                >
                  No results.
                </TableCell>
              </TableRow>
            )}
          </TableBody>
        </Table>
      </div>

      {/* PAGINATION */}
      <div className="flex items-center justify-end space-x-2 py-4">
        <Button
          variant="outline"
          size="sm"
          onClick={() => table.previousPage()}
          disabled={!table.getCanPreviousPage()}
        >
          Previous
        </Button>

        <Button
          variant="outline"
          size="sm"
          onClick={() => table.nextPage()}
          disabled={!table.getCanNextPage()}
        >
          Next
        </Button>
      </div>
    </div>
  );
}



================================================================================
LOCATION: prisma\forms\StockForm.tsx
================================================================================

// MinistryForm.jsx
import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import StockTable from './stockdatatable';




export default function StockForm() {
  const [stocks, setStocks] = useState([])
  const [products, setProducts] = useState<any>([]);
  const [formData, setFormData] = useState({
    productId: '',
    addedQuantity: 0,
    costPerProduct: 0,
    pricePerProduct: 0,
    product: '',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {
    fetchStocks();
    fetchProducts()
  }, []);

  const fetchStocks = async () => {
    const res = await axios.get('/api/stock');
    console.log("stocks :", res.data)
    setStocks(res.data);
  };

  const fetchProducts = async () => {
    try {
      const res = await axios.get('/api/dbhandler?model=product');
      setProducts(res.data);
    } catch (err) {
      console.error('Failed to fetch products', err);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!formData.productId || formData.addedQuantity <= 0 || formData.costPerProduct <= 0 || formData.pricePerProduct <= 0) {
      console.error('Invalid form data:', formData);
      alert('Please fill all fields with valid values');
      return;
    }

    try {
      if (editId) {
        await axios.put('/api/stock', {
          stockId: editId,
          addedQuantity: formData.addedQuantity,
          costPerProduct: formData.costPerProduct,
          pricePerProduct: formData.pricePerProduct,
        });
      } else {
        await axios.post('/api/stock', {
          productId: formData.productId,
          addedQuantity: formData.addedQuantity,
          costPerProduct: formData.costPerProduct,
          pricePerProduct: formData.pricePerProduct,
        });
      }
      resetForm();
      fetchStocks();
      fetchProducts();
    } catch (err) {
      console.error('Failed to submit stock:', err);
    }
  };



  const handleEdit = (item) => {
    if (!item?.id || !item?.addedQuantity || !item?.product) {
      console.error('Invalid stock item for edit:', item);
      return;
    }
    setFormData({
      productId: item.productId,
      product: item.product,
      addedQuantity: item.addedQuantity,
      costPerProduct: item.costPerProduct || 0,
      pricePerProduct: item.pricePerProduct || 0,
    });
    setEditId(item.id);
  };

  const handleProductInput = (item) => {
    if (!item) return;

    // Use the actual key your products have
    const productId = item.id || item._id;
    const productName = item.name || item.title;

    if (!productId || !productName) {
      console.error('Invalid product selected:', item);
      return;
    }

    setFormData({
      ...formData,
      productId: String(productId),
      product: productName,
    });
  };


  const handleDelete = async (id) => {
    try {
      await axios.delete(`/api/stock?id=${id}`);
      fetchStocks();
    } catch (err) {
      console.error('Failed to delete stock:', err);
    }
  };


  const resetForm = () => {
    setFormData({
      productId: '',
      addedQuantity: 0,
      costPerProduct: 0,
      pricePerProduct: 0,
      product: '',
    });
    setEditId(null);
  };





  return (
    <div>

      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
        <h2 className='font-semibold text-lg'>Manage Products Stock</h2>

        <ul className='w-full'>
          <div>Products To Stock</div>
          {products.length > 0 ? (
            products.map((item, index) => (
              <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
                <div className="flex flex-row gap-2">
                  <span>{(index + 1)}. Name : </span>
                  <span>{item.name}</span>
                </div>
                <p>Price : {item.price || <em>No price tag</em>}</p>
                <div className='flex flex-row gap-2 p-1 w-full'>
                  <Button type="button" onClick={() => handleProductInput(item)} className='flex-1'>
                    Stock
                  </Button>
                  {/* <Button onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button> */}
                </div>
              </li>
            ))
          ) : (
            <p>No available product.</p>
          )}
        </ul>

        <Input
          type="text"
          placeholder="Product Name"
          value={formData.product}
          onChange={(e) => setFormData({ ...formData, product: e.target.value })}
          disabled={true}
        />
        <Input
          type="text"
          placeholder="Product ID"
          value={formData.productId}
          onChange={(e) => setFormData({ ...formData, productId: e.target.value })}
          disabled={true}
        />
        <Input
          type="number"
          placeholder="Quantity of Product to Add to Stock"
          value={formData.addedQuantity}
          onChange={(e) => setFormData({ ...formData, addedQuantity: Number(e.target.value) })}
        />
        <Input
          type="number"
          step="0.01"
          placeholder="Cost Per Product (â‚¦)"
          value={formData.costPerProduct}
          onChange={(e) => setFormData({ ...formData, costPerProduct: Number(e.target.value) })}
        />
        <Input
          type="number"
          step="0.01"
          placeholder="Price Per Product (â‚¦)"
          value={formData.pricePerProduct}
          onChange={(e) => setFormData({ ...formData, pricePerProduct: Number(e.target.value) })}
        />
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}

        <ul className='w-full'>
          <div>Added Stocks</div>
          {stocks.length > 0 ? (
            // stocks.map((item , index) => (
            //   <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
            //     <div className="flex flex-row gap-2">
            //       <span>{(index + 1)}. Stocked Product : </span>
            //       <span>{item.product}</span>
            //     </div>
            //     <p>Added Quantity : {item.addedQuantity || <em>No price tag</em>}</p>
            //     <div className='flex flex-row gap-2 p-1 w-full'>
            //       <Button onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
            //       <Button onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
            //     </div>
            //   </li>
            // ))
            <StockTable />
          ) : (
            <p>No available stock.</p>
          )}
        </ul>
      </form>
    </div>
  );
}


================================================================================
LOCATION: prisma\forms\types.ts
================================================================================

// types.ts

export interface BaseModel {
    id: string;
    createdAt?: Date;
    updatedAt?: Date;
  }
  
  export interface Comment extends BaseModel {
    ministryId: string;
    contentId: string;
    userId: string;
    isArchived: boolean;
    reply: boolean;
  }
  
  export interface Like extends BaseModel {
    ministryId: string;
    contentId: string;
    userId: string;
  }
  
  export interface Video extends BaseModel {
    ministryId: string;
    title: string;
    description?: string;
    videoUrl: string;
  }
  
  export interface Audio extends BaseModel {
    ministryId: string;
    title: string;
    description?: string;
    audioUrl: string;
    duration?: string;
  }
  
  export interface Book extends BaseModel {
    ministryId: string;
    title: string;
    author?: string;
    coverUrl?: string;
    fileUrl: string;
    downloads: number;
  }
  
  export interface Billboard extends BaseModel {
    ministryId: string;
    departmentId: string;
    userId: string;
    label: string;
    content: string;
    imageUrl: string;
    categories: unknown[]; // adjust if needed
  }


================================================================================
LOCATION: prisma\forms\UserForm.tsx
================================================================================

// UserForm.jsx
import { useEffect, useState } from 'react';
import axios from 'axios';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export default function UserForm() {
  const [users, setUsers] = useState([]);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    name: '',
    image: '',
    role: 'user',
  });
  const [editId, setEditId] = useState(null);

  useEffect(() => {
    fetchUsers();
  }, []);

  const fetchUsers = async () => {
    const res = await axios.get('/api/dbhandler?model=user');
    setUsers(res.data);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (editId) {
      await axios.put(`/api/dbhandler?model=user&id=${editId}`, formData);
    } else {
      await axios.post('/api/dbhandler?model=user', formData);
    }
    resetForm();
    fetchUsers();
  };

  const handleEdit = (item) => {
    setFormData(item);
    setEditId(item.id);
  };

  const handleDelete = async (id) => {
    await axios.delete(`/api/dbhandler?model=users&id=${id}`);
    fetchUsers();
  };

  const resetForm = () => {
    setFormData({
      email: '',
      password: '',
      name: '',
      image: '',
      role: 'user',
    });
    setEditId(null);
  };

  return (
    <div>
      
      <form onSubmit={handleSubmit} className='flex flex-col w-full max-w-sm gap-2 justify-center items-center p-3 border-2 border-secondary-foreground rounded-sm m-2'>
      <h2 className='font-semibold text-lg'>Manage Users</h2>
      <Input
          type="email"
          placeholder="Email"
          value={formData.email}
          onChange={(e) => setFormData({ ...formData, email: e.target.value })}
        />
        <Input
          type="password"
          placeholder="Password"
          value={formData.password}
          onChange={(e) => setFormData({ ...formData, password: e.target.value })}
        />
        <Input
          type="text"
          placeholder="Name"
          value={formData.name || ''}
          onChange={(e) => setFormData({ ...formData, name: e.target.value })}
        />
        <Input
          type="text"
          placeholder="Avatar URL"
          value={formData.image || ''}
          onChange={(e) => setFormData({ ...formData, image: e.target.value })}
        />
        <select
          value={formData.role}
          onChange={(e) => setFormData({ ...formData, role: e.target.value })}
        >
          <option value="user">User</option>
          <option value="admin">Admin</option>
          <option value="moderator">Moderator</option>
        </select>
        <Button type="submit">{editId ? 'Update' : 'Create'}</Button>
        {editId && <button onClick={resetForm}>Cancel</button>}

        <ul className='w-full'>
        {users.length > 0 ? (
          users.map((item , index) => (
            <li key={index} className="flex flex-col justify-center items-center gap-2 my-2 bg-secondary rounded-md w-full p-2">
              <div className="flex flex-row gap-2">
                <span>{(index + 1)}. Name : </span>
                <span>{item.name}</span>
              </div>
              <p>Email : {item.email || <em>No email</em>}</p>
              <div className='flex flex-row gap-2 p-1 w-full'>
                <Button type='button' onClick={() => handleEdit(item)} className='flex-1'>Edit</Button>
                <Button type='button' onClick={() => handleDelete(item.id)} variant='ghost' className='flex-1 border-2 border-accent'>Delete</Button>
              </div>
            </li>
          ))
        ) : (
          <p>No ministries to user account.</p>
        )}
      </ul>
      </form>

    </div>
  );
}


================================================================================
LOCATION: prisma\forms\userShippingAddressForm.tsx
================================================================================

"use client";

import { useState, useEffect } from "react";
import axios from "axios";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Select } from "@/components/ui/select";

type ShippingAddress = {
  id?: string;
  country: string;
  state: string;
  city: string;
  address: string;
  zip?: string;
  phone?: string;
};

const NIGERIA_STATES = [
  "Abia", "Adamawa", "Akwa Ibom", "Anambra", "Bauchi", "Bayelsa", "Benue", "Borno", "Cross River",
  "Delta", "Ebonyi", "Edo", "Ekiti", "Enugu", "Gombe", "Imo", "Jigawa", "Kaduna", "Kano", "Katsina",
  "Kebbi", "Kogi", "Kwara", "Lagos", "Nasarawa", "Niger", "Ogun", "Ondo", "Osun", "Oyo", "Plateau",
  "Rivers", "Sokoto", "Taraba", "Yobe", "Zamfara", "FCT"
];

type Props = {
  userId: string;
  existing?: ShippingAddress;
  onSaved?: (address: ShippingAddress) => void;
};

export default function ShippingAddressForm({ userId, existing, onSaved }: Props) {
  const [address, setAddress] = useState<ShippingAddress>({
    country: existing?.country || "Nigeria",
    state: existing?.state || "Ilorin",
    city: existing?.city || "",
    address: existing?.address || "",
    zip: existing?.zip || "",
    phone: existing?.phone || "",
    id: existing?.id,
  });

  const [showStateSelect, setShowStateSelect] = useState(address.country === "Nigeria");
  const [showCityInput, setShowCityInput] = useState(!!address.state);
  const [showAddressInput, setShowAddressInput] = useState(!!address.city);

  const handleChange = (field: keyof ShippingAddress, value: string) => {
    const updated = { ...address, [field]: value };
    setAddress(updated);
    if (onSaved) onSaved(updated); // notify parent
  };

  return (
    <div className="flex flex-col gap-3 p-3 border rounded shadow max-w-md">
      {/* Country */}
      <div>
        <Label className="block text-sm font-medium mb-1">Country</Label>
        <div className="flex gap-2">
          <select
            value={["Nigeria", "United Kingdom", "United States", "Canada", "Ghana"].includes(address.country) ? address.country : "Other"}
            onChange={(e) => {
              const val = e.target.value;
              if (val === "Other") {
                handleChange("country", ""); // Clear for manual entry
              } else {
                handleChange("country", val);
              }
              setShowStateSelect(val === "Nigeria");
              setShowCityInput(val !== "Nigeria"); // Allow city input for non-Nigeria immediately
              setShowAddressInput(false);
            }}
            className="input w-full border-2 border-input h-7 rounded-sm"
          >
            <option value="Nigeria">Nigeria</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="United States">United States</option>
            <option value="Canada">Canada</option>
            <option value="Ghana">Ghana</option>
            <option value="Other">Other (Type below)</option>
          </select>
        </div>
        {(!["Nigeria", "United Kingdom", "United States", "Canada", "Ghana"].includes(address.country)) && (
          <Input
            type="text"
            value={address.country}
            onChange={(e) => handleChange("country", e.target.value)}
            className="input mt-2"
            placeholder="Type your country name"
          />
        )}
      </div>

      {/* State */}
      {showStateSelect && (
        <div>
          <Label className="block text-sm font-medium mb-1">State</Label>
          <select
            value={address.state}
            onChange={(e) => {
              handleChange("state", e.target.value);
              setShowCityInput(true);
              setShowAddressInput(false);
            }}
            className="input w-full border-2 border-input h-7 rounded-sm"
          >
            {NIGERIA_STATES.map((s) => (
              <option key={s} value={s}>
                {s}
              </option>
            ))}
          </select>
        </div>
      )}

      {/* City */}
      {showCityInput && (
        <div>
          <Label className="block text-sm font-medium mb-1">City</Label>
          <Input
            type="text"
            value={address.city}
            onChange={(e) => {
              handleChange("city", e.target.value);
              setShowAddressInput(!!e.target.value);
            }}
            className="input"
            placeholder="City"
          />
        </div>
      )}

      {/* Address & Phone */}
      {showAddressInput && (
        <>
          <div>
            <Label className="block text-sm font-medium mb-1">Address</Label>
            <Input
              type="text"
              value={address.address}
              onChange={(e) => handleChange("address", e.target.value)}
              name="address"
              className="input"
              placeholder="Street Address"
            />
          </div>

          <div>
            <Label className="block text-sm font-medium mb-1">Phone</Label>
            <Input
              type="text"
              value={address.phone}
              onChange={(e) => handleChange("phone", e.target.value)}
              name="phone"
              className="input"
              placeholder="Phone Number"
            />
          </div>

          <div>
            <Label className="block text-sm font-medium mb-1">ZIP / Postal Code (optional)</Label>
            <Input
              type="text"
              value={address.zip}
              onChange={(e) => handleChange("zip", e.target.value)}
              name="zip"
              className="input"
              placeholder="ZIP / Postal Code"
            />
          </div>
        </>
      )}
      {/* Geolocation Button */}
      <div className="mb-2">
         <Button 
            type="button" 
            variant="outline" 
            className="w-full text-xs"
            onClick={() => {
                if (!navigator.geolocation) {
                    alert("Geolocation is not supported by your browser");
                    return;
                }
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const { latitude, longitude } = position.coords;
                    try {
                        // Use OpenStreetMap Nominatim for free reverse geocoding
                        const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);
                        const data = await res.json();
                        if (data && data.address) {
                            const addr = data.address;
                            const isNG = (addr.country || "").toLowerCase().includes("nigeria");
                            
                            const newAddress = {
                                ...address,
                                country: isNG ? "Nigeria" : (addr.country || "Nigeria"),
                                state: (() => {
                                    const s = addr.state || addr.region || addr.province || "";
                                    if (isNG) {
                                        const match = NIGERIA_STATES.find(name => s.toLowerCase().includes(name.toLowerCase()));
                                        return match || s || "Lagos";
                                    }
                                    return s || "Lagos";
                                })(),
                                city: addr.city || addr.town || addr.village || addr.county || addr.suburb || "",
                                address: `${addr.road || addr.suburb || addr.neighbourhood || ""} ${addr.house_number || ""}`.trim(),
                                zip: addr.postcode || "",
                            };
                            
                            // Adjust control flags
                            setShowStateSelect(isNG);
                            setShowCityInput(true);
                            setShowAddressInput(true);
                            
                            setAddress(newAddress);
                            if (onSaved) onSaved(newAddress);
                        }
                    } catch (e) {
                        console.error("Geocoding failed", e);
                        alert("Failed to retrieve address from location");
                    }
                }, () => {
                    alert("Unable to retrieve your location");
                });
            }}
         >
            ðŸ“ Use Current Location
         </Button>
      </div>

    </div>
  );
}




================================================================================
LOCATION: server\auth.ts
================================================================================

import NextAuth from "next-auth";
import GitHubProvider from "next-auth/providers/github";
import Credentials from "next-auth/providers/credentials";
// import mongodb from "./db/mongodb/index.ts";
import { compareSync } from "bcrypt-edge";
// import connect from "./config/mongodb.ts";
// import mongoose from "mongoose";
// import User from "./db/mongodb/users"



export const { handlers, signIn, signOut, auth } = NextAuth({
    // trustHost: true,   // makes an edge runtime error

    providers: [
        // GitHubProvider({ 
        //   clientId: process.env.GITHUB_ID,
        //   clientSecret: process.env.GITHUB_SECRET
        // }),

        Credentials({
            id: 'credentials', // Action provider ID
            name: "Credentials",

            credentials: {
                email: { label: "Email", type: "email" },
                password: { label: "Password", type: "password"},
            },
            

            authorize: async (credentials): Promise<any>  => {//credentials {form actions used}
                   
                const email= credentials.email;
                const password = credentials.password;

                if (!email || !password) {
                    throw new Error("Please provide both email and password");
                }

                // console.log(`about to connect to database to login user ${email}`)

                // await connect()

                // let user

                // try {
                //     user = await User.findOne({ email : email }).select("+password +role")
                // } catch (error) {
                //     // users = mongoose.model('users', userSchema)
                //     console.log("unable to get user from database")
                // }

                let user

                const response = await fetch(`/api/data/finduser?email=${email}`, {
                    method: 'GET',
                    headers: {
                      'Content-Type': 'application/json',
                    },
                    // query: { email: email },
                });
        
                if (response.ok) {
                user = await response.json();
                // return userData;
                } else {
                    throw new Error('Failed to fetch user data')
                }
          
                
                

                if (!user || !user.password) {
                    throw new Error("Invalid user email or password")
                }

                const isMatched = await compareSync( `${password}`, user.password)

                if (!isMatched) {
                    throw new Error("incorrect password or email")
                }


                const userData = {
                    firstName : user.firstName,
                    lastName: user.lastName,
                    email: user.email,
                    role: user.role,
                    id: user._id,
                }

                return userData
            },
        }),
      ],

      pages: {
        signIn: "/account",
      },

      secret: process.env.AUTH_SECRET,

      callbacks: {
        async jwt({ token, user, profile, account }) {
            // Persist the Google ID to verify user sessions
            // if (profile) {
            // token.googleId = profile.sub;
            // }
            // console.log(token)
            // return token;
            if (user) {
                token.role = "user" // user?.role
            }
            return token
        },

        async session({ session, token }) {
            if (token?.sub && token?.role){
                session.user.id = token.sub
                // session.user.role = token.role
            }

            return session
        },

        async signIn({user, account}) {

            if (account.provider === "google"){

                try {
                    const { email, name, image, id } = user
                    // await connect()
                    // let alreadyUser

                    // try {
                    //     alreadyUser = await User.findOne({ email : email }).select("+password +role")
                    // } catch (error) {
                    //     // users = mongoose.model('users', userSchema)
                    //     console.log("unable to get user from database")
                    // }

                    let alreadyUser

                    const response = await fetch(`/api/data/finduser?email=${email}`, {
                        method: 'GET',
                        headers: {
                          'Content-Type': 'application/json',
                        },
                        // query: { email: email },
                    });
            
                    if (response.ok) {
                    user = await response.json();
                    // return userData;
                    } else {
                        throw new Error('Failed to fetch user data')
                    }

                    if(!alreadyUser) {
                        // try {
                        //     User.create({
                        //         // firstName: firstName,
                        //         // lastName: lastName,
                        //         email: email,
                        //         // password: hashedPassword,
                        //         // role: role,
                        //         image : image,
                        //         authProviderId : id
                        //     })
                        // } catch (error) {
                        //     // users = mongoose.model('users', userSchema)
                        //     console.log("unable to get user from database")
                        // }  
                        console.log("i need to create user account for you using api route")
                    } else {
                        return true
                    }
                }catch (error) {
                    console.log("error while creating user from google credentials")
                }
            }
        }


        },

        
})












// // import { getSession } from "@auth/express"

// dotenv.config()

// // export const google = new Google({
// //     clientId: process.env.GOOGLE_CLIENT_ID,
// //     clientSecret: process.env.GOOGLE_CLIENT_SECRET,
// //     callbackUrl: '/auth/google/callback',
// //   });

// //   app.get('/auth/google', async (req, res) => {
// //     const authorizationUrl = await google.getAuthorizationUrl();
// //     res.redirect(authorizationUrl);
// //   });
  
// //   app.get('/auth/google/callback', async (req, res) => {
// //     try {
// //       const tokens = await google.getAccessToken(req.query.code);
// //       const user = await google.getUserInfo(tokens.access_token);
// //       // Store user in session or database
// //       req.session.user = user;
// //       res.redirect('/protected');
// //     } catch (error) {
// //       console.error(error);
// //       res.status(401).send('Authentication failed');
// //     }
// //   });


// const authConfig = {
//     trustHost: true,

//     providers : [
//         // Google({
//         //     clientId: process.env.GOOGLE_CLIENT_ID,
//         //     clientSecret: process.env.GOOGLE_CLIENT_SECRET,
//         //     //add callback url to a server route after google auth to receive token ie [origin]/auth/callback/[provider]
//         //      callbackUrl: "/auth/google/callback", // Ensure this matches the route on your server
//         // }),
        
//     ],

//     jwt: {
//         secret: process.env.AUTH_SECRET,
//         // Enable cross-origin token verification
//         verify: { algorithms: ['HS256'] },
//       },

//     pages: {
//         signIn: "/auth/login",
//     },
//     secret: process.env.AUTH_SECRET,
//     callbacks: {
//         async jwt({ token, user, profile, account }) {
//           // Persist the Google ID to verify user sessions
//           if (profile) {
//             token.googleId = profile.sub;
//           }
//           console.log(token)
//           return token;
//         },
//         async session({ session, token }) {
//           session.user.googleId = token.googleId;
//           return session;
//         },
//       },
// }


// export default authConfig





================================================================================
LOCATION: server\action\getSession.ts
================================================================================

"use server"
import { cache } from "react";
import { auth } from "../auth";


export const getSession = cache(async () => {
    const session = await auth()
    return session
})


================================================================================
LOCATION: server\action\login.ts
================================================================================

"use server"

import { signIn } from "../auth.ts";

const login = async ( formData : FormData) => {
    const email = formData.get("email") as string;
    const password = formData.get("password") as string;

    console.log(email)

    if (!email && !password) {
         console.log("invalid account")
         return
    }

    try{
        await signIn("credentials", {
            // redirect: false,
            // callbackUrl: "/account",
            email,
            password,
        })
    } catch (error) {
        console.log("credentials sign in error")
    }

};

export {login}


================================================================================
LOCATION: server\action\logout.ts
================================================================================




================================================================================
LOCATION: server\action\postStockAction.ts
================================================================================

// import mongodb from "../db/mongodb/index.js"
// import { uploadimg } from "../utils/multersetup.js";
// import cloud from "../config/cloudinary.js"




// router.post("/upload", uploadimg.single("file"), (req, res)=>{
//     if (!req.file) {
//         return res.status(400).json({ message: 'No file uploaded' });
//       }
//     const { stock_name, cost, price, quantity, category, message } = req.body;
    
//     if (!stock_name && !cost && !price && !quantity && !category && !message) {
//         return res.status(400).json({ message: 'incomplete fields inputed' });
//       }

//     const postStock =async ()=>{
//         const uploaded =await cloud.uploadCloudinary(req.file.buffer, "/succo/img/stocks")
            
//         //const public_id = uploaded.public_id //path to image without extension or format
//         const url = uploaded.url
//         //post the form data and the image url to the mongodb database

//         const newStock = await mongodb.Stock.create({
//             name: stock_name,
//             price: Number(price),
//             description: message,
//             category: category,
//             img: url,
//             qty: Number(quantity),
//             cost: Number(cost),
//         })
//     }
//     postStock()
// })

// export default router


================================================================================
LOCATION: server\action\signup.ts
================================================================================

"use server"

import User from "../db/mongodb/models/users.ts";
import connect from "../config/mongodb.ts";
import { hashSync } from "bcrypt-edge";
import { redirect } from "next/navigation";


const register = async ( formData : FormData) => {
    const userName = formData.get("userName") as string;
    const email = formData.get("email") as string;
    const password = formData.get("password") as string;

    console.log({userName, email, password})

    let role = "user"
    if (!userName && !email && !password) {
         console.log("account already exist")
         return
    }

    const postUser =async ()=>{
        await connect();

        const existingUser = await User.findOne({email})

        if (existingUser) {console.log("user already exist"); redirect("account") ; return; } //throw new Error ("user already exists")
        if ( email == "adepojuololade2020@gmail.com" || email == "adepojuololade2020@gmail.com"){
            role = "admin"
        } 
        if ( email == "staff@gmail.com" || email == "rep@gmail.com"){
            role = "staff"
        } 
        const hashedPassword = await hashSync(password, 10)

        const user = await User.create({
            userName: userName,
            email: email,
            password: hashedPassword,
            role: role,
        })
    }
    postUser()

};

export {register}


================================================================================
LOCATION: server\action\stock.ts
================================================================================

"use server"




================================================================================
LOCATION: server\config\cloudinary.ts
================================================================================

import { v2 as cloudinary } from 'cloudinary';
import streamifier from "streamifier"





// Configuration
cloudinary.config({ 
    cloud_name: process.env.CLOUDINARY_CLOUD_NAME, 
    api_key: process.env.CLOUDINARY_API_KEY, 
    api_secret: process.env.CLOUDINARY_API_SECRET
});



const uploadCloudinary = async (buffer, folder) => {
    return new Promise((resolve, reject) => {
      const uploadStream = cloudinary.uploader.upload_stream(
        {
          folder: folder,
          resource_type: 'image',
        },
        (error, result) => {
          if (error) {
            reject(error);
          } else {
            resolve({
              publicId: result.public_id,
              url: result.secure_url,
            });
          }
        }
      ).end(buffer);
  
      // const stream = streamifier.createReadStream(buffer);
      // stream.pipe(uploadStream);
    });
  };
  


export default {uploadCloudinary, cloudinary}

// cloudinary.v2.api
//   .delete_resources(['succo/img/stocks/mxaeevqkf9dop4vnv5w7'], 
//     { type: 'upload', resource_type: 'image' })
//   .then(console.log);


================================================================================
LOCATION: server\config\firebase.ts
================================================================================

// Import the functions you need from the SDKs you need
// import { initializeApp } from "firebase/app";
// import { getAnalytics } from "firebase/analytics";





// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
export const firebaseConfig = {
  apiKey: process.env.FIREBASE_API_KEY,
  authDomain: process.env.FIREBASE_AUTH_DOMAIN,
  projectId: process.env.FIREBASE_PROJECT_ID,
  storageBucket: process.env.FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.FIREBASE_APP_ID,
  measurementId: process.env.FIREBASE_MEASUREMENT_ID 
};

// Initialize Firebase
// export const app = initializeApp(firebaseConfig);
// export const analytics = getAnalytics(app);


================================================================================
LOCATION: server\config\mongodb.ts
================================================================================

"use server"
import mongoose from "mongoose";


const connect =async () => {
    mongoose.set("strictQuery", true);

    // console.log(`mongodb uri ${process.env.MONGODB_URL}`)

    if (mongoose.connection.readyState === 1) {
        console.log("already connected to database");
        return;
      }


      if (mongoose.connection.readyState === 2) {
        console.log("connecting to database");
        return;
      }

    await mongoose.connect(process.env.MONGODB_URL,
      // {
      //   dbName:"succo",
      //   bufferCommands: true,
      // }
    )
        // .then(() => console.log("MongoDB connected"))
        .catch((err) => console.log(err))
}

export default connect;

//db super user and pword; useradepojuololade2020 pword:j0k2iy9xXcraCpHn



================================================================================
LOCATION: server\config\multersetup.ts
================================================================================

import multer from "multer";


const filter = (req, file, cb) => {
    if(file.mimetype === "image/jpeg" || file.mimetype === "image/jpg" || file.mimetype === "image/webp"){
        cb(null, true)
    }
    // else(
    //     {"error" : "Unsupported file format. Upload only jpeg, jpg or webp"},
    //     false
    // )
}

const memstorage = multer.memoryStorage({
    filenane: (req, file, cb)=>{
        cb(null, file.originalname.toLocaleLowerCase() + new Date().toString())
    },
})


export const uploadimg = multer({ storage: memstorage, limits: {fieldSize: 1024 * 5012}, fileFilter: filter })



================================================================================
LOCATION: server\config\sql.ts
================================================================================

import mysql from "mysql"

const dbsql = mysql.createConnection({
    host: process.env.SQL_HOST,
    port: process.env.SQL_PORT,
    user: process.env.SQL_USER,
    password: process.env.SQL_PASSWORD,
    database: process.env.SQL_DATABASE
})


export default dbsql


================================================================================
LOCATION: server\controllers\uploadfile.controller.ts
================================================================================

// import express, {Router} from "express";
// import { initializeApp, } from "firebase/app";
// import { getStorage, ref, getDownloadURL, uploadBytesResumable, uploadBytes, listAll} from "firebase/storage"
// import {firebaseConfig} from "../config/firebase.js"
// // import { getAnalytics, isSupported } from "firebase/analytics";
// import { v4 } from "uuid";
// import { uploadimg } from "../utils/multersetup.js";



// const router = express.Router();

// //let firestore;
// if (firebaseConfig.projectId) {
//   // Initialize Firebase
//     const app = initializeApp(firebaseConfig);
//     // const analytics = app.name && typeof window !== 'undefined' ? getAnalytics(app) : null;
//       //firestore = getFirestore();
// }


// export const storage = getStorage(app);


// // const analytics = app.name && typeof window !== 'undefined' ? getAnalytics(app) : null;
// // if(app.analytics){
// //     app.analytics.
// // }
// //const {isSupported, reason} = await analytics.checkEnvSupport()
// //if (!isSupported) {
// //   if (reason === 'analytics/cookies-not-enabled') {
// //     alertUser('Please enable cookies')
// //   }
//   // other reasons...
// //}

// // Async function to handle firebase analtics initialization
// // async function initAnalytics() {
// //     try {
// //         const supported = await isSupported();
// //         if (supported) {
// //             const analytics = getAnalytics();
// //             // Initialize Firebase Analytics or set up your tracking here
// //         } else {
// //             console.warn('Firebase Analytics is not supported in this environment');
// //         }
// //     } catch (error) {
// //         console.error('An error occurred while checking for Firebase Analytics support', error);
// //     }
// // }

// // initAnalytics();


// router.route.post("/", uploadimg.single("inputname"), async (req, res) => {
//     try {
//         //const dateTime = giveCurrentDateTime();
//         const storageRef = ref(storage, `files/images/${req.file.originalname + v4()}`)

//         //creat file metadata including the content type
//         const metadata = {
//             contentType : req.file.mimetype,
//         }

//         //upload the file in the buckt  storage
//         const snapshot = await uploadBytesResumable(storageRef, req.file.buffer, metadata)
//         //by using uploadBytesResumable we can control the progress of uploading like pause, resume

//         //grab the public url
//         const downloadURL = await getDownloadURL(snapshot.ref)
//         console.log(`file successfully uploaded`)
//         return res.send({
//             message: `file uploaded to firebase storage`,
//             name: req.file.originalname,
//             type: req.file.mimetype,
//             downloadURL: downloadURL
//         })
//     }
//     catch {console.log("error uploading image")}
// }
// )

// export default router


================================================================================
LOCATION: server\db\mongodb\forms\address.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const AddressForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    address : "",
    city : 0,
    state : 0,
    zip : 0,
    country : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const address = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(address),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} User from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='address' onChange={handleChange} placeholder="Address" className="rounded-sm bg-background" />
          <Input type="text" name="city" onChange={handleChange} placeholder="City" className="rounded-sm bg-background" />
          <Input type="text" name="state" onChange={handleChange} placeholder="State" className="rounded-sm bg-background" />
          <Input type="text" name='zip' onChange={handleChange} placeholder="Zip code" className="rounded-sm bg-background" />
          <Input type="text" name='country' onChange={handleChange} placeholder="Country" className="rounded-sm bg-background" />
        </div>
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const shippingAddressSchema = new mongoose.Schema({
//   userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//     street: { type: String},
//     city: { type: String},
//     state: { type: String},
//     zip: { type: String},
//     country: { type: String},
// });

export default AddressForm






export type address = {
  _id: string
  userId: string
  street: string
  city: string
  state: string
  zip: string
  country: string
}

export const addressColumns: ColumnDef<address>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "userId",
    header: "userId",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("userId")}</div>
    ),
  },
  {
    accessorKey: "street",
    header: "street",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("street")}</div>
    ),
  },
  {
    accessorKey: "city",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          City
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("city")}</div>,
  },
  {
    accessorKey: "state",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          State
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("state")}</div>,
  },
  {
    accessorKey: "zip",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Zip Code
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("zip")}</div>,
  },
  {
    accessorKey: "country",
    header: "country",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("country")}</div>
    ),
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const address : address = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(address._id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\cart.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const CartForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    product : "",
    coupon : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();

      const cart = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(cart),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("cart saved")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} Cart from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
          <div className="flex flex-col gap-2">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                <Input type="text" id='product' name='product' onChange={handleChange} placeholder="add item" className="rounded-sm bg-background w-56" />
              
                <Input type="text" id="coupon" name="coupon" onChange={handleChange} placeholder="coupon code" className="rounded-sm bg-background w-56" />
            </div>
            <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
        </div>
        <div className="flex flex-col">
          <div>map of chosen products quantity and price</div>
          <div>total cost</div>
          <div>cost after discount</div>
        </div>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const cartSchema = new mongoose.Schema({
//   userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//   products: [
//     {
//       productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
//       quantity: { type: Number},
//     },
//   ],
// });

export default CartForm






export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\coupon.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const CouponForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    code : "",
    discount : 0,
    date : null,
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const coupon = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(coupon),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} Coupon from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
    <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
      <Input type="text" name='code' onChange={handleChange} placeholder="Discount code" className="rounded-sm bg-background" />
      <Input type="text" name="discount" onChange={handleChange} placeholder="% e.g 0.02=2%, 0.1=10%" className="rounded-sm bg-background" />
    </div>
    <div className="flex flex-row w-full justify-between max-w-md">
        <label htmlFor="date">Expiry date</label>
        <Input type="date" name="date" onChange={handleChange} placeholder="Coupon expiry date" className="rounded-sm bg-background max-w-[150px]" />
      </div>
      <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
</form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const couponSchema = new mongoose.Schema({
//   code: { type: String},
//   discount: { type: Number},
//   expiry: { type: Date, default: Date.now},
// });

export default CouponForm






export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\index.tsx
================================================================================

import AddressForm from "./address";
import CartForm from "./cart";
import CouponForm from "./coupon";
import NotificationForm from "./notification";
import PaymentForm from "./payment";
import RefundForm from "./refund";
import ReviewForm from "./review";
import SaleForm from "./sales";
import StockForm from "./stock";
import UserForm from "./user";

export const forms = [
    {
        model : "User",
        form : UserForm,
    },
    {
        model : "Stock",
        form : StockForm,
    },
    {
        model : "Sale",
        form : SaleForm,
    },
    {
        model : "Review",
        form : ReviewForm,
    },
    {
        model : "Refund",
        form : RefundForm,
    },
    {
        model : "Payment",
        form : PaymentForm,
    },
    {
        model : "Notification",
        form : NotificationForm,
    },
    {
        model : "Coupon",
        form : CouponForm,
    },
    {
        model : "Cart",
        form : CartForm,
    },
    {
        model : "Address",
        form : AddressForm,
    },
]


================================================================================
LOCATION: server\db\mongodb\forms\notification.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const NotificationForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    username : "",
    email : "",
    emailto : "",
    category : "",
    message : "",
  })
  
  interface RefObject<T> {
  readonly current: T | null
}
    
    const form = useRef<HTMLFormElement>(null);

    const sendMessage =async (e : FormEvent) => {
      e.preventDefault();
      const payment = {}

      const submitToServer =async ()=>{
        await fetch("/api/data/notification", {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(details),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset(); 
          setDetails({
            username : "",
            email : "",
            emailto : "",
            category : "",
            message : "",
          }); 
        alert("Message sent successfully")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }




  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={sendMessage}  className="flex flex-col gap-6 p-5 my-1 bg-secondary rounded-xl">
      {/* onSubmit={sendEmail} */}
      <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} Notification from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription>Message Other Users or Notify All</DrawerDescription>
          </DrawerHeader>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <Input type="firstname" name="username" placeholder="Username" className="rounded-sm bg-background" />
        <Input type="email" name="email" placeholder="Email address" className="rounded-sm bg-background" />
        <Input type="text" name="emailto" placeholder="Email address message is for" className="rounded-sm bg-background" />
        </div>
        <select name="category" value={details.category} onChange={handleChange} className='bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30'>
                <option value="suggestion"> Suggestion </option>
                <option value="complaint"> Complaint</option>
                <option value="advert"> Advert </option>
                <option value="appreciate">Appreciate</option>
                <option value="reply">Reply</option>
                <option value="general">General</option>
        </select>
        <Textarea className="h-[120px]" name="message" placeholder="Type your message here" />
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const notificationSchema = new mongoose.Schema({
//   from: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//   to: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//   category: { type:String, enum: ['suggestion', 'complaint', 'advertise', 'comment', "reply", "general"], required: true },
//   message: { type: String},
//   read: { type: Boolean, default: false },
// });

export default NotificationForm






export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\order.tsx
================================================================================

// "use client"
// import { Button } from '@/components/ui/button'
// import { Input } from '@/components/ui/input'
// import { Label } from '@/components/ui/label'
// import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
// import { Textarea } from '@/components/ui/textarea'
// import React, { FormEvent, useEffect, useRef, useState } from 'react'
// import {serveraddr} from "@/data/env"
// import placeholder from '@/assets/placeholderFemale.webp';

// const AdminStockForm = () => {
//   const [details, setDetails] = useState({
//     stock_name : "",
//     cost : 0,
//     price : 0,
//     quantity : 0,
//     category : "",
//     file : "",
//     message : "",
//   })

//   const [render, setRender] = useState(0);

//   useEffect(() => {
//   }, [render]);

//   interface RefObject<T> {
//     readonly current: T | null
//   }

//     const form = useRef<HTMLFormElement>(null);

//     const addProduct =async (e : FormEvent) => {
//       e.preventDefault();
//       const formDataToSubmit = new FormData();
//       formDataToSubmit.append('stock_name', details.stock_name);
//       formDataToSubmit.append('cost', `${details.cost}`);
//       formDataToSubmit.append('price', `${details.price}`);
//       formDataToSubmit.append('quantity', `${details.quantity}`);
//       formDataToSubmit.append('category', details.category);
//       formDataToSubmit.append('message', details.message);
//       formDataToSubmit.append('file', details.file);

//       const submitToServer =async ()=>{
//         await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
//           //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
//           method: 'POST',
//           // headers: {
//           //     "Content-Type": "application/json",
//           // },
//           body: formDataToSubmit,
//           // body: JSON.stringify(form)
//         })
//         .then((response) => response.json())
//         .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
//         .catch((error) => console.error(error));
//       }
//       console.log(`about to send to server ${details}`)
//       for (const [key, value] of formDataToSubmit.entries()) {
//         console.log(key, value);
//         if (key === 'file') {
//           console.log('File is present in FormData');
//         }
//       }
//       submitToServer()
//     };


//     const handleChange = (e : any)=>{
//       const { name, value, files } = e.target;

//       if (name === 'file') {
//         setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
//       } else {
//         setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
//       }
//     }

    
//   return (
//     <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl">
//         <h3 className="text-xl text-accent mb-4 text-center font-semibold">Add product</h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
//           <Input type="text" name='stock_name' onChange={handleChange} placeholder="name" className="rounded-sm bg-background" />
//           <Input type="text" name="cost" onChange={handleChange} placeholder="cost" className="rounded-sm bg-background" />
//           <Input type="text" name="price" onChange={handleChange} placeholder="price" className="rounded-sm bg-background" />
//           <Input type="text" name='quantity' onChange={handleChange} placeholder="quantity" className="rounded-sm bg-background" />
//         </div>
//         <select name="category" value={details.category} onChange={handleChange} className='bg-secondary ring-1 rounded-sm ring-accent/30'>
//                 <option value="food"> Food </option>
//                 <option value="drink"> Drink</option>
//                 <option value="snacks"> Snacks </option>
//                 <option value="suplement"> Suplement</option>
//         </select>
//         <Textarea className="h-10" name="message"  onChange={handleChange} placeholder="Enter the product description" />
//         <Label htmlFor="img">Product image:</Label>
//         <Input name='file' onChange={handleChange} id="img" type="file" className="rounded-sm bg-background h-16" />
//         <Button type="submit" className="before:ani-shadow">Submit</Button>
//     </form>
//   )
// }

// // const orderSchema = new mongoose.Schema({
// //   userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
// //   products: [
// //     {
// //       productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
// //       quantity: { type: Number},
// //       price: { type: Number},
// //     },
// //   ],
// //   total: { type: Number},
// //   status: { type: String, enum: ['pending', 'shipped', 'delivered', 'cancelled'] },
// //   paymentMethod: { type: String},
// //   paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
// // });

// export default AdminStockForm



================================================================================
LOCATION: server\db\mongodb\forms\payment.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const PaymentForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    orderId : "",
    amount : 0,
    transactionId : "",
    paymentMethod : "",
    paymentStatus : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const payment = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(payment),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 my-1 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-4 text-center font-semibold">{props.method} User from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='orderId' onChange={handleChange} placeholder="Order ID" className="rounded-sm bg-background" />
          <Input type="text" name="amount" onChange={handleChange} placeholder="Amount" className="rounded-sm bg-background" />
          <Input type="text" name="transactionId" onChange={handleChange} placeholder="Transaction ID" className="rounded-sm bg-background" />
        </div>
        <select name="paymentMethod" value={details.paymentMethod} onChange={handleChange} className='bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30'>
                <option value="gateway"> Gateway </option>
                <option value="Transfer"> Transfer</option>
                <option value="Cash"> Cash </option>
                <option value="Expense">Expense</option>
        </select>
        <select name="paymentStatus" value={details.paymentStatus} onChange={handleChange} className='bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30'>
                <option value="paid"> Paid </option>
                <option value="unpaid"> Unpaid</option>
        </select>
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const paymentSchema = new mongoose.Schema({
//   orderId: { type: mongoose.Schema.Types.ObjectId, ref: 'Orders' },
//   paymentMethod: { type: String},
//   paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
//   amount: { type: Number},
//   transactionId: { type: String},
// });

export default PaymentForm





export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\post.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';

const AdminStockForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    stock_name : "",
    cost : 0,
    price : 0,
    quantity : 0,
    category : "",
    file : "",
    message : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const formDataToSubmit = new FormData();
      formDataToSubmit.append('stock_name', details.stock_name);
      formDataToSubmit.append('cost', `${details.cost}`);
      formDataToSubmit.append('price', `${details.price}`);
      formDataToSubmit.append('quantity', `${details.quantity}`);
      formDataToSubmit.append('category', details.category);
      formDataToSubmit.append('message', details.message);
      formDataToSubmit.append('file', details.file);

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: formDataToSubmit,
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      for (const [key, value] of formDataToSubmit.entries()) {
        console.log(key, value);
        if (key === 'file') {
          console.log('File is present in FormData');
        }
      }
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-10 bg-secondary rounded-xl max-w-xl">
        <h3 className="text-xl text-accent mb-4 text-center font-semibold">Add product</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='stock_name' onChange={handleChange} placeholder="name" className="rounded-sm bg-background" />
          <Input type="text" name="cost" onChange={handleChange} placeholder="cost" className="rounded-sm bg-background" />
          <Input type="text" name="price" onChange={handleChange} placeholder="price" className="rounded-sm bg-background" />
          <Input type="text" name='quantity' onChange={handleChange} placeholder="quantity" className="rounded-sm bg-background" />
        </div>
        <select name="category" value={details.category} onChange={handleChange} className='bg-secondary border-2 border-accent h-8 ring-1 rounded-sm ring-accent/30'>
                <option value="food"> Food </option>
                <option value="drink"> Drink</option>
                <option value="snacks"> Snacks </option>
                <option value="suplement"> Suplement</option>
        </select>
        <Textarea className="h-10" name="message"  onChange={handleChange} placeholder="Enter the product description" />
        <Label htmlFor="img">Product image:</Label>
        <Input name='file' onChange={handleChange} id="img" type="file" className="rounded-sm bg-background h-16" />
        <Button type="submit" className="before:ani-shadow">Submit</Button>
    </form>
  )
}

// const PostSchema = new mongoose.Schema({
//   name: { type: String, required: true },
//   prompt: { type: String, required: true },
//   photo: { type: String, required: true },
// });

export default AdminStockForm









================================================================================
LOCATION: server\db\mongodb\forms\refund.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const RefundForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    orderId : "",
    amount : 0,
    reason : "",
    status : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const refund = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(refund),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-4 text-center font-semibold">{props.method} Refund from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='orderId' onChange={handleChange} placeholder="orderId" className="rounded-sm bg-background" />
          <Input type="text" name="amount" onChange={handleChange} placeholder="amount" className="rounded-sm bg-background" />
        </div>
        <Textarea className="h-10" name="reason"  onChange={handleChange} placeholder="Make us better by stating your reason" />
        <select name="status" value={details.status} onChange={handleChange} className='bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30'>
                <option value="pending"> pending </option>
                <option value="approved"> approved</option>
                <option value="rejected"> rejected </option>
        </select>
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const refundSchema = new mongoose.Schema({
//   orderId: { type: mongoose.Schema.Types.ObjectId, ref: 'Orders' },
//   amount: { type: Number},
//   reason: { type: String},
//   status: { type: String, enum: ['pending', 'approved', 'rejected'] },
// });


export default RefundForm





export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\review.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const ReviewForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    username : "",
    productid : "",
    rating : 0,
    comment : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const review = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(review),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-4 text-center font-semibold">{props.method} Review from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='username' onChange={handleChange} placeholder="username" className="rounded-sm bg-background" />
          <Input type="text" name="productid" onChange={handleChange} placeholder="product" className="rounded-sm bg-background" />
          <Input type="text" name="rating" onChange={handleChange} placeholder="rating" className="rounded-sm bg-background" />
        </div>
        <Textarea className="h-10" name="comment"  onChange={handleChange} placeholder="All reviews improve our services" />
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
          {/* <Button>Submit</Button> */}
          <DrawerClose className='flex-1' asChild>
            <Button className='flex-1' variant="outline">Cancel</Button>
          </DrawerClose>
          <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
        </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const reviewSchema = new mongoose.Schema({
//   userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//   productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
//   rating: { type: Number, min: 1, max: 5},
//   comment: { type: String},
// });


export default ReviewForm





export type Payment = {
  id: string
  amount: number
  status: "pending" | "processing" | "success" | "failed"
  email: string
}

export const columns: ColumnDef<Payment>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("status")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "amount",
    header: () => <div className="text-right">Amount</div>,
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("amount"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const payment = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(payment.id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\sales.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const SaleForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    product : "",
    coupon : "",
    paymentStatus : "",
    paymentMethod : "",
    status : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();

      const sale = {}

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: JSON.stringify(sale),
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-4 text-center font-semibold">{props.method} Sale from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
        <div className="flex flex-col gap-2">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                <Input type="text" id='product' name='product' onChange={handleChange} placeholder="add item" className="rounded-sm bg-background w-56" />
              
                <Input type="text" id="coupon" name="coupon" onChange={handleChange} placeholder="coupon code" className="rounded-sm bg-background w-56" />
            </div> 
            <select name="paymentStatus" value={details.paymentStatus} onChange={handleChange} className='bg-secondary border-2 border-border ring-1 rounded-sm ring-accent/30 h-8'>
                <option value="paid"> Paid </option>
                <option value="unpaid"> Unpaid</option>
          </select>
          <select name="paymentMethod" value={details.paymentMethod} onChange={handleChange} className='bg-secondary border-2 border-border h-8 ring-1 rounded-sm ring-accent/30'>
                  <option value="gateway"> Gateway </option>
                  <option value="Transfer"> Transfer</option>
                  <option value="Cash"> Cash </option>
                  <option value="Expense">Expense</option>
          </select>
          <select name="status" value={details.status} onChange={handleChange} className='bg-secondary border-2 border-border ring-1 rounded-sm ring-accent/30 h-8'>
                  <option value="pending"> Pending </option>
                  <option value="shipped"> Shipped</option>
                  <option value="delivered"> Delivered </option>
                  <option value="cancelled"> Cancelled'</option>
          </select>
          <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
            {/* <Button>Submit</Button> */}
            <DrawerClose className='flex-1' asChild>
              <Button className='flex-1' variant="outline">Cancel</Button>
            </DrawerClose>
            <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
          </DrawerFooter>
        </div>
        <div className="flex flex-col">
          <div>map of chosen products quantity and price</div>
          <div>total cost</div>
          <div>cost after discount</div>
        </div>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const SalesSchema = new mongoose.Schema({
//   products: [
//       {
//         productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
//         productQuantity: { type: Number, required: true },
//         productPrice: { type: Number, required: true },
//         productCost: {type: Number, required: true },
//       }
//   ],
    // coupon: { type: mongoose.Schema.Types.ObjectId, ref: 'Coupon' },
    // discount: {type: Number, required: true },
//   totalCost: {type: Number, required: true },
//   totalSale: {type: Number, required: true },
//   totalQty: {type: Number},
//      status: { type: String, enum: ['pending', 'shipped', 'delivered', 'cancelled'] },
//     paymentMethod: { type: String},
//     paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
// });

export default SaleForm





export type sale = {
  _id: string
  totalCost: number
  totalSale: number
  totalQty: number
  status: "pending" | "shipped" | "delivered" | "cancelled"
  paymentMethod: string
  paymentStatus: "paid" | "unpaid"
}

export const SaleColumns: ColumnDef<sale>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "totalCost",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Total Cost
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("totalCost"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    accessorKey: "totalSale",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Total Sale
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("totalSale"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    accessorKey: "totalQty",
    header: "Total Quantity",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("totalQty")}</div>
    ),
  },
  {
    accessorKey: "status",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Status
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="/lowercase">{row.getValue("status")}</div>,
  },
  {
    accessorKey: "paymentMethod",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Payment Method
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="/lowercase">{row.getValue("paymentMethod")}</div>,
  },
  {
    accessorKey: "paymentStatus",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Payment Status
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="/lowercase">{row.getValue("paymentStatus")}</div>,
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const sale = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(sale._id)}
            >
              Copy Sale ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View Sale</DropdownMenuItem>
            <DropdownMenuItem>View Sale details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\stock.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

const StockForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    stock_name : "",
    cost : 0,
    price : 0,
    quantity : 0,
    category : "",
    file : "",
    message : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const formData = new FormData();
      formData.append('stock_name', details.stock_name);
      formData.append('cost', `${details.cost}`);
      formData.append('price', `${details.price}`);
      formData.append('quantity', `${details.quantity}`);
      formData.append('category', details.category);
      formData.append('message', details.message);
      formData.append('file', details.file);

      const submitToServer =async ()=>{
        await fetch("/api/data/stock", {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method:  `${props.method}`,  //'POST',
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: formData,
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      for (const [key, value] of formData.entries()) {
        console.log(key, value);
        if (key === 'file') {
          console.log('File is present in FormData');
        }
      }
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-5 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} Stock from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <Input type="text" name='stock_name' onChange={handleChange} placeholder="name" className="rounded-sm bg-background" />
          <Input type="text" name="cost" onChange={handleChange} placeholder="cost" className="rounded-sm bg-background" />
          <Input type="text" name="price" onChange={handleChange} placeholder="price" className="rounded-sm bg-background" />
          <Input type="text" name='quantity' onChange={handleChange} placeholder="quantity" className="rounded-sm bg-background" />
        </div>
        <select name="category" value={details.category} onChange={handleChange} className='bg-secondary border-2 border-border ring-1 rounded-sm ring-accent/30 h-8'>
                <option value="food"> Food </option>
                <option value="drink"> Drink</option>
                <option value="snacks"> Snacks </option>
                <option value="suplement"> Suplement</option>
        </select>
        <Textarea className="h-10" name="message"  onChange={handleChange} placeholder="Enter the product description" />
        <Label htmlFor="img">Product image:</Label>
        <Input name='file' onChange={handleChange} id="img" type="file" className="rounded-sm bg-background h-16" />
        <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
          {/* <Button>Submit</Button> */}
          <DrawerClose className='flex-1' asChild>
            <Button className='flex-1' variant="outline">Cancel</Button>
          </DrawerClose>
          <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
        </DrawerFooter>
    </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}

// const StocksSchema = new mongoose.Schema({
//   name: { type: String, required: true },
//   description: { type: String, required: true },
//   img: { type: String, required: true },
//   category: { type:String, enum: ['food', 'drink', 'snacks', 'suplement'], required: true },
//   cost: {type: Number, required: true },
//   price: {type: Number, required: true },
//   qty: {type: Number},
// });

export default StockForm






export type stock = {
  _id: string
  name: string
  description: string
  img: string
  price: number
  cost: number
  category: "food" | "drink" | "snacks" | "suplement"
  qty: number
}

export const StockColumns: ColumnDef<stock>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "name",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Name
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("name")}</div>,
  },
  // {
  //   accessorKey: "description",
  //   header: "Description",
  //   cell: ({ row }) => (
  //     <div className="capitalize">{row.getValue("description")}</div>
  //   ),
  // },
  {
    accessorKey: "img",
    header: "Image",
    cell: ({ row }) => (
      <img src={row.getValue("img")} className="h-10 /max-w-10" />
    ),
  },
  {
    accessorKey: "price",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Price
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("price"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    accessorKey: "cost",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Cost
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => {
      const amount = parseFloat(row.getValue("cost"))

      // Format the amount as a dollar amount
      const formatted = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(amount)

      return <div className="text-right font-medium">{formatted}</div>
    },
  },
  {
    accessorKey: "category",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Category
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("category")}</div>,
  },
  {
    accessorKey: "qty",
    header: "Quantity",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("qty")}</div>
    ),
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const stock = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(stock._id)}
            >
              Copy stock ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View stock</DropdownMenuItem>
            <DropdownMenuItem>View stock details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]



================================================================================
LOCATION: server\db\mongodb\forms\user.tsx
================================================================================

"use client"
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Textarea } from '@/components/ui/textarea'
import React, { FormEvent, useEffect, useRef, useState } from 'react'
import {serveraddr} from "@/data/env"
import placeholder from '@/assets/placeholderFemale.webp';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer"

import {
  ColumnDef,
} from "@tanstack/react-table"
import { ArrowUpDown, MoreHorizontal } from "lucide-react"

import { Checkbox } from "@/components/ui/checkbox"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"




const UserForm = (props: {method : string,}) => {
  const [details, setDetails] = useState({
    userName : "",
    email : "",
    password : "",
    role : "",
    file : "",
  })

  const [render, setRender] = useState(0);

  useEffect(() => {
  }, [render]);

  interface RefObject<T> {
    readonly current: T | null
  }

    const form = useRef<HTMLFormElement>(null);

    const addProduct =async (e : FormEvent) => {
      e.preventDefault();
      const formDataToSubmit = new FormData();
      formDataToSubmit.append('userName', details.userName);
      formDataToSubmit.append('email', `${details.email}`);
      formDataToSubmit.append('password', `${details.password}`);
      formDataToSubmit.append('role', details.role);
      formDataToSubmit.append('file', details.file);

      const submitToServer =async ()=>{
        await fetch(`${serveraddr + "/api/v1/post/upload"}`, {
          //mode: 'no-cors',  mode: 'no-cores'   mode: 'cores'
          method: `${props.method}`,
          // headers: {
          //     "Content-Type": "application/json",
          // },
          body: formDataToSubmit,
          // body: JSON.stringify(form)
        })
        .then((response) => response.json())
        .then((data) => {form.current?.reset();  setRender((prevRender) => (prevRender++)); alert("stock successfully uploaded")})
        .catch((error) => console.error(error));
      }
      console.log(`about to send to server ${details}`)
      for (const [key, value] of formDataToSubmit.entries()) {
        console.log(key, value);
        if (key === 'file') {
          console.log('File is present in FormData');
        }
      }
      submitToServer()
    };


    const handleChange = (e : any)=>{
      const { name, value, files } = e.target;

      if (name === 'file') {
        setDetails((prevFormData) => ({ ...prevFormData, file: files[0] }));
      } else {
        setDetails((prevFormData) => ({ ...prevFormData, [name]: value }));
      }
    }

    
  return (
    <div className='inline'>
      <Drawer>
        <DrawerTrigger asChild>
          <Button variant="outline">{props.method}</Button>
        </DrawerTrigger>
        <DrawerContent className='flex flex-col justify-center items-center py-10 /bg-red-500 max-w-5xl mx-auto'>
          <form ref={form  as RefObject<HTMLFormElement>} onSubmit={addProduct} className="flex flex-col gap-4 p-5 my-1 bg-secondary rounded-xl max-w-xl">
          <DrawerHeader>
            <DrawerTitle className="text-xl /text-accent mb-2 text-center font-semibold">{props.method} User from <span className='text-accent'>Succo</span></DrawerTitle>
            <DrawerDescription></DrawerDescription>
          </DrawerHeader>
            <div className="flex flex-col gap-2">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <Input type="text" id='userName' name='userName' onChange={handleChange} placeholder="User name" className="rounded-sm bg-background w-56" />
                  
                    <Input type="email" id="email" name="email" onChange={handleChange} placeholder="example@gmail.com" className="rounded-sm bg-background w-56" />
                
                    <Input type="password" id='password' name='password' onChange={handleChange} placeholder="*********" className="rounded-sm bg-background w-56" />
                </div> 
                <select name="role" value={details.role} onChange={handleChange} className='bg-secondary border-2 border-border ring-1 rounded-sm ring-accent/30 h-8'>
                    <option value="food"> Food </option>
                    <option value="drink"> Drink</option>
                    <option value="snacks"> Snacks </option>
                    <option value="suplement"> Suplement</option>
                </select>
                <Label htmlFor="img">Profile image:</Label>
                <Input name='file' onChange={handleChange} id="img" type="file" className="rounded-sm bg-background h-16" />
                <DrawerFooter className="flex flex-row w-full gap-2 mt-2">
                  {/* <Button>Submit</Button> */}
                  <DrawerClose className='flex-1' asChild>
                    <Button className='flex-1' variant="outline">Cancel</Button>
                  </DrawerClose>
                  <Button type="submit" className="flex-1 before:ani-shadow w-full">Submit</Button>
                </DrawerFooter>
            </div>
        </form>
          {/* <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction>Continue</AlertDialogAction>
          </AlertDialogFooter> */}
        </DrawerContent>
      </Drawer>
    </div>
  )
}


export default UserForm



export type user = {
  _id: string
  firstName: string
  lastName: string
  userName: string
  email: string
  password: number
  role: "admin" | "user" | "staff"
  address: string
  image: string
  authProviderId: string
}

export const UserColumns: ColumnDef<user>[] = [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() 
          // ||
          // (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "userName",
    header: "UserName",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("userName")}</div>
    ),
  },
  {
    accessorKey: "userName",
    header: "UserName",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("userName")}</div>
    ),
  },
  {
    accessorKey: "email",
    header: ({ column }) => {
      return (
        <Button
          variant="ghost"
          onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
        >
          Email
          <ArrowUpDown className="ml-2 h-4 w-4" />
        </Button>
      )
    },
    cell: ({ row }) => <div className="lowercase">{row.getValue("email")}</div>,
  },
  {
    accessorKey: "role",
    header: "Role",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("role")}</div>
    ),
  },
  {
    accessorKey: "address",
    header: "Address",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("address")}</div>
    ),
  },
  {
    accessorKey: "image",
    header: "Image",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("image")}</div>
    ),
  },
  {
    accessorKey: "authProviderId",
    header: "AuthProviderId",
    cell: ({ row }) => (
      <div className="capitalize">{row.getValue("authProviderId")}</div>
    ),
  },
  {
    id: "actions",
    enableHiding: false,
    cell: ({ row }) => {
      const user = row.original

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuItem
              onClick={() => navigator.clipboard.writeText(user._id)}
            >
              Copy payment ID
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem>View customer</DropdownMenuItem>
            <DropdownMenuItem>View payment details</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      )
    },
  },
]




================================================================================
LOCATION: server\db\mongodb\models\address.ts
================================================================================

import mongoose from "mongoose";


const shippingAddressSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
    address: { type: String},
    city: { type: String},
    state: { type: String},
    zip: { type: String},
    country: { type: String},
  });


const ShippingAddress = mongoose.model("Address", shippingAddressSchema);

export default ShippingAddress;


================================================================================
LOCATION: server\db\mongodb\models\carts.ts
================================================================================

import mongoose from "mongoose";


const cartSchema = new mongoose.Schema({
  products: [
      {
        productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
        productQuantity: { type: Number, required: true },
        productPrice: { type: Number, required: true },
        productCost: {type: Number, required: true },
      }
  ],
  coupon: { type: mongoose.Schema.Types.ObjectId, ref: 'Coupon' },
  discount: {type: Number, required: true },
  totalCost: {type: Number, required: true },
  totalSale: {type: Number, required: true },
  totalQty: {type: Number},
});



const Cart = mongoose.model("Cart", cartSchema);

export default Cart;




================================================================================
LOCATION: server\db\mongodb\models\coupons.ts
================================================================================

import mongoose from "mongoose";


const couponSchema = new mongoose.Schema({
    code: { type: String},
    discount: { type: Number},
    expiry: { type: Date, default: Date.now},
  }, {timestamps: true});



const Coupon = mongoose.model("Coupon", couponSchema);

export default Coupon;




================================================================================
LOCATION: server\db\mongodb\models\index.ts
================================================================================

import Post from "./post";
import ShippingAddress from "./address";
import Cart from "./carts";
import Coupon from "./coupons";
import Notification from "./notifications";
// import Order from "./orders";
import Payment from "./payments";
import Refund from "./refunds";
import Review from "./reviews";
import Stock from "./stocks";
import User from "./users";
import Sale from "./sales";



export default {
    Post, ShippingAddress, Cart, Coupon, Notification, Payment, Refund, Review, Stock, User, Sale,
}


================================================================================
LOCATION: server\db\mongodb\models\notifications.ts
================================================================================

import mongoose from "mongoose";


const notificationSchema = new mongoose.Schema({
    from: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
    to: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
    category: { type:String, enum: ['suggestion', 'complaint', 'advertise', 'comment', "reply", "general", "appreciate"], required: true },
    message: { type: String},
    read: { type: Boolean, default: false },
}, {timestamps: true});



let Notification

  try {
      // users = mongoose.model('User')  //always make sure that the name of the model is correct and this only works only if the model is already in the database, else redefinine the model and schema
      console.log ("about to get or create model")
      Notification = mongoose.models.Notifications as unknown as null || mongoose.model("Notifications", notificationSchema)
      console.log ("notification model now active")
  } catch (error) {
      // users = mongoose.model('users', userSchema)
      console.log("error in getting model")
  }

export default Notification;


================================================================================
LOCATION: server\db\mongodb\models\orders.ts
================================================================================

// import mongoose from "mongoose";



// const orderSchema = new mongoose.Schema({
//     userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
//     products: [
//       {
//         productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
//         quantity: { type: Number},
//         price: { type: Number},
//       },
//     ],
//     total: { type: Number},
//     status: { type: String, enum: ['pending', 'shipped', 'delivered', 'cancelled'] },
//     paymentMethod: { type: String},
//     paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
//   });



// const Order = mongoose.model("Order", orderSchema);

// export default Order;


================================================================================
LOCATION: server\db\mongodb\models\payments.ts
================================================================================

import mongoose from "mongoose";


const paymentSchema = new mongoose.Schema({
    orderId: { type: mongoose.Schema.Types.ObjectId, ref: 'Sale' },
    paymentMethod: { type: String},
    paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
    amount: { type: Number},
    transactionId: { type: String},
  }, {timestamps: true});



const Payment = mongoose.model("Payment", paymentSchema);

export default Payment;







================================================================================
LOCATION: server\db\mongodb\models\post.ts
================================================================================

import mongoose from "mongoose";

const PostSchema = new mongoose.Schema({
    name: { type: String, required: true },
    prompt: { type: String, required: true },
    photo: { type: String, required: true },
});

const Post = mongoose.model("Post", PostSchema);

export default Post;


================================================================================
LOCATION: server\db\mongodb\models\refunds.ts
================================================================================

import mongoose from "mongoose";


const refundSchema = new mongoose.Schema({
    orderId: { type: mongoose.Schema.Types.ObjectId, ref: 'Orders' },
    amount: { type: Number},
    reason: { type: String},
    status: { type: String, enum: ['pending', 'approved', 'rejected'] },
  });


const Refund = mongoose.model("Refund", refundSchema);

export default Refund;







================================================================================
LOCATION: server\db\mongodb\models\reviews.ts
================================================================================

import mongoose from "mongoose";


const reviewSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'Users' },
    productId: { type: mongoose.Schema.Types.ObjectId, ref: 'Products' },
    rating: { type: Number, min: 1, max: 5},
    comment: { type: String},
  }, {timestamps: true});


  const Review = mongoose.model("Review", reviewSchema);

  export default Review;



  


================================================================================
LOCATION: server\db\mongodb\models\sales.ts
================================================================================

import mongoose from "mongoose";
// schema need review especially for product list
const SalesSchema = new mongoose.Schema({
    products: [
        {
          id: { type: mongoose.Schema.Types.ObjectId, ref: 'Stock' },
          quantity: { type: Number, required: true },
          _id: false,
        }
    ],
    coupon: { type: mongoose.Schema.Types.ObjectId, ref: 'Coupon' },
    discount: {type: Number },
    totalCost: {type: Number },//, required: true
    totalSale: {type: Number, required: true },
    totalQty: {type: Number},
    status: { type: String, enum: ['pending', 'shipped', 'delivered', 'cancelled'] },
    paymentMethod: { type: String},
    paymentStatus: { type: String, enum: ['paid', 'unpaid'] },
    //time : { type : Date, default: Date.now },
}, {timestamps: true});

// const Sale = mongoose.model("Sales", SalesSchema);
let Sale

  try {
      // users = mongoose.model('User')  //always make sure that the name of the model is correct and this only works only if the model is already in the database, else redefinine the model and schema
      console.log ("about to get or create sale")
      Sale = mongoose.models.Sales as unknown as null || mongoose.model('Sales', SalesSchema)
      console.log ("sale model now active")
  } catch (error) {
      // users = mongoose.model('users', userSchema)
      console.log("error in getting sale model")
  }


export default Sale;






================================================================================
LOCATION: server\db\mongodb\models\stocks.ts
================================================================================

import mongoose from "mongoose";

const StocksSchema = new mongoose.Schema({
    name: { type: String, required: true },
    description: { type: String, required: true },
    img: { type: String, required: true },
    category: { type:String, enum: ['food', 'drink', 'snacks', 'suplement'], required: true },
    cost: {type: Number, required: true },
    price: {type: Number, required: true },
    qty: {type: Number},
}, {timestamps: true});


let Stock

  try {
      // users = mongoose.model('User')  //always make sure that the name of the model is correct and this only works only if the model is already in the database, else redefinine the model and schema
      console.log ("about to get or create stock")
      Stock = mongoose.models.Stocks as unknown as null || mongoose.model('Stocks', StocksSchema)
      console.log ("stock model now active")
  } catch (error) {
      // users = mongoose.model('users', userSchema)
      console.log("error in getting stock model")
  }

export default Stock;


export const updateStockByID = async (id : string, name: string, description: string, img: string, category: string, cost: number, price: number, quantity: number) => {

    try {
        const result = await Stock.updateOne(
            {_id: id},
            {
                name: name,
                description: description,
                img: img,
                category: category,
                cost: cost,
                price: price,
                qty: quantity,
            }
        )
    } catch (errer) {
        console.log("error in updating stock")
    }
}


export const searchStocks = async (name: string, category: string,) => {
    try {
        const users = await Stock.find({ $and: [{name: name}, {category: category}]})
        return users
    }catch (error) {
        console.log("unable to find stock")
    }
}

export const findStocks = async (name: string) => {
    try {
        const stocks = await Stock.find({name: name})
        return stocks
    }catch (error) {
        console.log("unable to find stocks")
    }
}


export const StockAZ = async () => {
    try {
        const result = await Stock.find().sort({ userName: 1 }) //or -1 z-a
        return result
    } catch (error) {
        console.log("unable to get all stocks alphabetically")
    }
}


export const totalStock = async () => {
    try {
        const result = await Stock.find().countDocuments()
        return result
    } catch {
        console.log("unable to get total number of stocks")
    }
}


export const skipLimitStockList = async (start = 0, limit: number) => {
    try {
        const result = await Stock.find().skip(start).limit(limit)
    } catch {
        console.log(`unable to get stocks list of ${limit} limit`)
    }
}





================================================================================
LOCATION: server\db\mongodb\models\users.ts
================================================================================

import mongoose from "mongoose";


export const userSchema = new mongoose.Schema({
    userName: { type: String, unique: true, required: true },
    email: { type: String, unique: true, required: true },
    password: { type: String},
    role: { type: String, enum: ['admin', 'user', "staff"] },
    address: { type: mongoose.Schema.Types.ObjectId, ref: 'Address' },
    image: { type: String},
    authProviderId: { type: String},
  }, {timestamps: true});

  let User

  try {
      // users = mongoose.model('User')  //always make sure that the name of the model is correct and this only works only if the model is already in the database, else redefinine the model and schema
      console.log ("about to get or create model")
      User = mongoose.models.User as unknown as null || mongoose.model('Users', userSchema)
      console.log ("user model now active")
  } catch (error) {
      // users = mongoose.model('users', userSchema)
      console.log("error in getting model")
  }



export default User;


export const updateUserByID = async (id : string, firstName, lastName, userName, email, password, address, image) => {

    const encryptedPword = password

    try {
        const result = await User.updateOne(
            {_id: id},
            {
                firstName: firstName,
                lastName: lastName,
                userName: userName,
                email: email,
                password: encryptedPword,
                address: address,
                image: image,
            }
        )
    } catch (errer) {
        console.log("error in updating user account")
    }
}


export const searchUsers = async (userName: string, email: string,) => {
    try {
        const users = await User.find({ $and: [{userName: userName}, {email: email}]})
        return users
    }catch (error) {
        console.log("unable to find user")
    }
}

export const findUsers = async (userName: string) => {
    try {
        const users = await User.find({userName: userName})
        return users
    }catch (error) {
        console.log("unable to find user")
    }
}


export const usersAZ = async () => {
    try {
        const result = await User.find().sort({ userName: 1 }) //or -1 z-a
        return result
    } catch (error) {
        console.log("unable to get all users alphabetically")
    }
}


export const totalUsers = async () => {
    try {
        const result = await User.find().countDocuments()
        return result
    } catch {
        console.log("unable to get total users")
    }
}


export const skipLimitUserList = async (start = 0, limit: number) => {
    try {
        const result = await User.find().skip(start).limit(limit)
    } catch {
        console.log(`unable to get users list of ${limit} limit`)
    }
}

// const limitUserList = async () => {}



================================================================================
LOCATION: server\db\sql\index.ts
================================================================================

import sqldb from "@/server/config/sql.ts";
import allBlogs from "./queryBlog";

export const dbsql = sqldb;

dbsql.connect(err => {
    if(err) console.log(err);
});

export const Blogs = allBlogs;


================================================================================
LOCATION: server\db\sql\queryBlog.ts
================================================================================

import dbsql from "../../config/sql";

export const all = async () => {
    return new Promise((reolve, reject) => {
        dbsql.query("SELECT * from blogs", (err, results) => {
            if(err){
                return reject(err);
            }
            // resolve(results);
            return(results);
        });
    });
}

export default {
    all,
}


================================================================================
LOCATION: store\auth-slice.ts
================================================================================

"use client"
import { createSlice } from "@reduxjs/toolkit"

const authSlice = createSlice({
    name : "auth",
    initialState : {isLoggedIn : false},
    reducers : {
        login(state :any) {
            state.isLoggedIn = true;
        },
        logout(state : any) {
            state.isLoggedIn = false
        },
    }
});

export const authActions = authSlice.actions;

export default authSlice;

//export type auth = ReturnType<typeof authSlice.initialState>


================================================================================
LOCATION: store\cart-slice.ts
================================================================================

"use client"
import { createSlice } from "@reduxjs/toolkit";

type cart = {
    id: string;
    price: number;
    quantity : number;
    totalPrice : number;
    name : string;
    img : string;
}

let itemslist : cart[] = [];


const cartSlice = createSlice({
    name : "cart",
    initialState : {
        itemsList : itemslist,
        totalQuantity : 0,
        showCart : false
    },
    reducers : {
        addToCart(state, action) {
            const newItem = action.payload;
            //check if any item is already available
            const existingItem = state.itemsList.find((item)=>item.id === newItem.id);
            if (existingItem){
                existingItem.quantity++;
                existingItem.totalPrice += newItem.price;
            } else {
                state.itemsList.push({
                    id: newItem.id,
                    price: newItem.price,
                    quantity : 1,
                    totalPrice : newItem.price,
                    name : newItem.name,
                    img : newItem.img
                })
            }
        },
        subFromCart(state, action) {
            const newItem = action.payload;
            //check if any item is already available
            const existingItem = state.itemsList.find((item)=>item.id === newItem.id);
            if (existingItem){
                if (existingItem.quantity > 1){
                    existingItem.quantity--;
                    existingItem.totalPrice -= newItem.price;
                } else{
                    state.itemsList.splice(state.itemsList.indexOf(existingItem),1)
                }
            }
        },
        removeFromCart(state, action) {
            const newItem = action.payload;
            //check if any item is already available
            const existingItem = state.itemsList.find((item)=>item.id === newItem.id);
            if (existingItem){
                state.itemsList.splice(state.itemsList.indexOf(existingItem),1)
            }
        },
        setShowCart(state) {
            state.showCart = true;
        }
    }
})



export const cartActions = cartSlice.actions;

export default cartSlice;


================================================================================
LOCATION: store\index.ts
================================================================================

"use client"
import { configureStore } from "@reduxjs/toolkit";
import authSlice from "./auth-slice";
import cartSlice from "./cart-slice";

type cart = {
    id: string;
    price: number;
    quantity : number;
    totalPrice : number;
    name : string;
    img : string;
}

interface  auth {isLoggedIn : boolean;}

interface Cart {
    itemsList : cart[];
    totalQuantity : number;
    showCart : boolean;
}

export interface RootState {
    auth : auth;
    cart : Cart;
}

const store = configureStore({
    reducer : {
        auth : authSlice.reducer,
        cart : cartSlice.reducer,
    },
});

export default store;


================================================================================
LOCATION: store\providers.tsx
================================================================================

'use client'
import { Provider } from "react-redux";
import store from "@/store";

export function Providers({ children } : { children: React.ReactNode }) {
  return <Provider store={store}>{children}</Provider>;
}


================================================================================
LOCATION: types\commentType.ts
================================================================================

interface NewCommentType {
  content: string;
  user_id: string;
  video_id: string;
  created_at?: string;
}

interface CommentType extends NewCommentType {
  id: string;
}



================================================================================
LOCATION: types\next-auth.d.ts
================================================================================

// types/next-auth.d.ts
import "next-auth";
import "next-auth/jwt";

declare module "next-auth" {
  interface Session {
    user: {
      id: string;
      name?: string | null;
      email?: string | null;
      role: string;
      contact?: string | null;
      image?: string | null;
      providerid?: string | null;
      addresses?: any[];
      shippingAddress?: any;
    };
  }

  interface User {
    id: string;
    name?: string | null;
    email: string;
    role: string;
    contact?: string | null;
    image?: string | null;
    providerid?: string | null;
  }
}

declare module "next-auth/jwt" {
  interface JWT {
    id: string;
    name?: string | null;
    email?: string | null;
    role: string;
    contact?: string | null;
    image?: string | null;
    providerid?: string | null;
  }
}



================================================================================
LOCATION: types\user.ts
================================================================================

export interface UserProps {
  name: string;
  email?: string;
  id: string;
  image: string;
  role: string;
  contact: string;
  addresses : any[];
  shippingAddress?: any;
}



================================================================================
LOCATION: types\videoType.ts
================================================================================

export interface NewVideoType {
  user_id: string;
  description: string;
  video_url: string;
  title: string;
}

export interface VideoType extends NewVideoType {
  id: string;
}



================================================================================
LOCATION: utils\constants.ts
================================================================================

import { NewVideoType, VideoType } from "@/types/videoType";

export const BASE_URL =
  "https://take-home-assessment-423502.uc.r.appspot.com/api/videos";

export const headers = { "Content-Type": "application/json" };

export const videoBlank: NewVideoType = {
  video_url: "",
  user_id: "",
  title: "",
  description: "",
};

export const commentBlank: NewCommentType = {
  content: "",
  user_id: "",
  video_id: "",
};



================================================================================
LOCATION: utils\index.ts
================================================================================

export const normalizeDateTime = (dateTime?: string): string => {
  if (!dateTime) return "";
  const date = new Date(dateTime);

  const options: Intl.DateTimeFormatOptions = {
    year: "numeric",
    month: "long",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    hour12: false,
  };

  const formattedDateTime = date.toLocaleString(undefined, options);

  return formattedDateTime;
};



================================================================================
TOTAL FILES CONSOLIDATED: 315
================================================================================
